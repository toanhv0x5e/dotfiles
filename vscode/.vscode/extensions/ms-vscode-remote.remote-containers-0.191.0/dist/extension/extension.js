var y8=Object.create;var zu=Object.defineProperty,C8=Object.defineProperties,w8=Object.getOwnPropertyDescriptor,E8=Object.getOwnPropertyDescriptors,_8=Object.getOwnPropertyNames,lI=Object.getOwnPropertySymbols,x8=Object.getPrototypeOf,fI=Object.prototype.hasOwnProperty,b8=Object.prototype.propertyIsEnumerable;var dI=(t,e,r)=>e in t?zu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A=(t,e)=>{for(var r in e||(e={}))fI.call(e,r)&&dI(t,r,e[r]);if(lI)for(var r of lI(e))b8.call(e,r)&&dI(t,r,e[r]);return t},j=(t,e)=>C8(t,E8(e)),pI=t=>zu(t,"__esModule",{value:!0});var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),S8=(t,e)=>{pI(t);for(var r in e)zu(t,r,{get:e[r],enumerable:!0})},P8=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of _8(e))!fI.call(t,n)&&n!=="default"&&zu(t,n,{get:()=>e[n],enumerable:!(r=w8(e,n))||r.enumerable});return t},k=t=>P8(pI(zu(t!=null?y8(x8(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var AI=m((bCe,II)=>{var ba=1e3,Sa=ba*60,Pa=Sa*60,Jo=Pa*24,q8=Jo*7,M8=Jo*365.25;II.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return $8(t);if(r==="number"&&isFinite(t))return e.long?j8(t):U8(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function $8(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*M8;case"weeks":case"week":case"w":return r*q8;case"days":case"day":case"d":return r*Jo;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Pa;case"minutes":case"minute":case"mins":case"min":case"m":return r*Sa;case"seconds":case"second":case"secs":case"sec":case"s":return r*ba;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function U8(t){var e=Math.abs(t);return e>=Jo?Math.round(t/Jo)+"d":e>=Pa?Math.round(t/Pa)+"h":e>=Sa?Math.round(t/Sa)+"m":e>=ba?Math.round(t/ba)+"s":t+"ms"}function j8(t){var e=Math.abs(t);return e>=Jo?zd(t,e,Jo,"day"):e>=Pa?zd(t,e,Pa,"hour"):e>=Sa?zd(t,e,Sa,"minute"):e>=ba?zd(t,e,ba,"second"):t+" ms"}function zd(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var lC=m((SCe,RI)=>{function H8(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=AI(),r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let f=0;for(let d=0;d<l.length;d++)f=(f<<5)-f+l.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(l){let f,d=null;function p(...h){if(!p.enabled)return;let g=p,v=Number(new Date),C=v-(f||v);g.diff=C,g.prev=f,g.curr=v,f=v,h[0]=r.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let y=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(w,x)=>{if(w==="%%")return"%";y++;let _=r.formatters[x];if(typeof _=="function"){let S=h[y];w=_.call(g,S),h.splice(y,1),y--}return w}),r.formatArgs.call(g,h),(g.log||r.log).apply(g,h)}return p.namespace=l,p.useColors=r.useColors(),p.color=r.selectColor(l),p.extend=n,p.destroy=r.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>d===null?r.enabled(l):d,set:h=>{d=h}}),typeof r.init=="function"&&r.init(p),p}function n(l,f){let d=r(this.namespace+(typeof f=="undefined"?":":f)+l);return d.log=this.log,d}function i(l){r.save(l),r.names=[],r.skips=[];let f,d=(typeof l=="string"?l:"").split(/[\s,]+/),p=d.length;for(f=0;f<p;f++)!d[f]||(l=d[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.substr(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(l))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}RI.exports=H8});var TI=m((Nr,Kd)=>{Nr.formatArgs=V8;Nr.save=G8;Nr.load=W8;Nr.useColors=B8;Nr.storage=z8();Nr.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Nr.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function B8(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function V8(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Kd.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Nr.log=console.debug||console.log||(()=>{});function G8(t){try{t?Nr.storage.setItem("debug",t):Nr.storage.removeItem("debug")}catch(e){}}function W8(){let t;try{t=Nr.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function z8(){try{return localStorage}catch(t){}}Kd.exports=lC()(Nr);var{formatters:K8}=Kd.exports;K8.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var DI=m((PCe,kI)=>{"use strict";kI.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var LI=m((ICe,NI)=>{"use strict";var Y8=require("os"),OI=require("tty"),Wr=DI(),{env:Nt}=process,Yd;Wr("no-color")||Wr("no-colors")||Wr("color=false")||Wr("color=never")?Yd=0:(Wr("color")||Wr("colors")||Wr("color=true")||Wr("color=always"))&&(Yd=1);function X8(){if("FORCE_COLOR"in Nt)return Nt.FORCE_COLOR==="true"?1:Nt.FORCE_COLOR==="false"?0:Nt.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Nt.FORCE_COLOR,10),3)}function Q8(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function J8(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=X8();n!==void 0&&(Yd=n);let i=r?Yd:n;if(i===0)return 0;if(r){if(Wr("color=16m")||Wr("color=full")||Wr("color=truecolor"))return 3;if(Wr("color=256"))return 2}if(t&&!e&&i===void 0)return 0;let o=i||0;if(Nt.TERM==="dumb")return o;if(process.platform==="win32"){let s=Y8.release().split(".");return Number(s[0])>=10&&Number(s[2])>=10586?Number(s[2])>=14931?3:2:1}if("CI"in Nt)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(s=>s in Nt)||Nt.CI_NAME==="codeship"?1:o;if("TEAMCITY_VERSION"in Nt)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Nt.TEAMCITY_VERSION)?1:0;if(Nt.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Nt){let s=Number.parseInt((Nt.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Nt.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Nt.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Nt.TERM)||"COLORTERM"in Nt?1:o}function fC(t,e={}){let r=J8(t,A({streamIsTTY:t&&t.isTTY},e));return Q8(r)}NI.exports={supportsColor:fC,stdout:fC({isTTY:OI.isatty(1)}),stderr:fC({isTTY:OI.isatty(2)})}});var qI=m((Ut,Qd)=>{var Z8=require("tty"),Xd=require("util");Ut.init=s5;Ut.log=n5;Ut.formatArgs=t5;Ut.save=i5;Ut.load=o5;Ut.useColors=e5;Ut.destroy=Xd.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Ut.colors=[6,2,3,4,5,1];try{let t=LI();t&&(t.stderr||t).level>=2&&(Ut.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}Ut.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function e5(){return"colors"in Ut.inspectOpts?Boolean(Ut.inspectOpts.colors):Z8.isatty(process.stderr.fd)}function t5(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} [0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+Qd.exports.humanize(this.diff)+"[0m")}else t[0]=r5()+e+" "+t[0]}function r5(){return Ut.inspectOpts.hideDate?"":new Date().toISOString()+" "}function n5(...t){return process.stderr.write(Xd.format(...t)+`
`)}function i5(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function o5(){return process.env.DEBUG}function s5(t){t.inspectOpts={};let e=Object.keys(Ut.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Ut.inspectOpts[e[r]]}Qd.exports=lC()(Ut);var{formatters:FI}=Qd.exports;FI.o=function(t){return this.inspectOpts.colors=this.useColors,Xd.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};FI.O=function(t){return this.inspectOpts.colors=this.useColors,Xd.inspect(t,this.inspectOpts)}});var pC=m((ACe,dC)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?dC.exports=TI():dC.exports=qI()});var $I=m((RCe,MI)=>{var Jd;MI.exports=function(){if(!Jd)try{Jd=pC()("follow-redirects")}catch(t){Jd=function(){}}Jd.apply(null,arguments)}});var yC=m((TCe,vC)=>{var Ia=require("url"),hC=Ia.URL,a5=require("http"),c5=require("https"),UI=require("stream").Writable,u5=require("assert"),jI=$I(),Zo=["abort","aborted","connect","error","socket","timeout"],mC=Object.create(null);Zo.forEach(function(t){mC[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var l5=Zd("ERR_FR_REDIRECTION_FAILURE",""),f5=Zd("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),d5=Zd("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),p5=Zd("ERR_STREAM_WRITE_AFTER_END","write after end");function Lr(t,e){UI.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Lr.prototype=Object.create(UI.prototype);Lr.prototype.abort=function(){VI(this._currentRequest),this.emit("abort")};Lr.prototype.write=function(t,e,r){if(this._ending)throw new p5;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new d5),this.abort())};Lr.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Lr.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Lr.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Lr.prototype.setTimeout=function(t,e){var r=this;e&&this.on("timeout",e);function n(s){s.setTimeout(t),s.removeListener("timeout",s.destroy),s.addListener("timeout",s.destroy)}function i(s){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),o()},t),n(s)}function o(){clearTimeout(this._timeout),e&&r.removeListener("timeout",e),this.socket||r._currentRequest.removeListener("socket",i)}return this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.once("response",o),this.once("error",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Lr.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Lr.prototype,t,{get:function(){return this._currentRequest[t]}})});Lr.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Lr.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Ia.format(this._options),n._redirectable=this;for(var i=0;i<Zo.length;i++)n.on(Zo[i],mC[Zo[i]]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(u){if(n===s._currentRequest)if(u)s.emit("error",u);else if(o<a.length){var l=a[o++];n.finished||n.write(l.data,l.encoding,c)}else s._ended&&n.end()})()}};Lr.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(VI(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new f5);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],gC(/^content-/i,this._options.headers));var n=gC(/^host$/i,this._options.headers)||Ia.parse(this._currentUrl).hostname,i=Ia.resolve(this._currentUrl,r);jI("redirecting to",i),this._isRedirect=!0;var o=Ia.parse(i);if(Object.assign(this._options,o),o.hostname!==n&&gC(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var s={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,s)}catch(c){this.emit("error",c);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(c){var a=new l5("Redirected request failed: "+c.message);a.cause=c,this.emit("error",a)}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function HI(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(u,l,f){if(typeof u=="string"){var d=u;try{u=BI(new hC(d))}catch(p){u=Ia.parse(d)}}else hC&&u instanceof hC?u=BI(u):(f=l,l=u,u={protocol:i});return typeof l=="function"&&(f=l,l=null),l=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},u,l),l.nativeProtocols=r,u5.equal(l.protocol,i,"protocol mismatch"),jI("options",l),new Lr(l,f)}function c(u,l,f){var d=s.request(u,l,f);return d.end(),d}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function h5(){}function BI(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function gC(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r}function Zd(t,e){function r(n){Error.captureStackTrace(this,this.constructor),this.message=n||e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function VI(t){for(var e=0;e<Zo.length;e++)t.removeListener(Zo[e],mC[Zo[e]]);t.on("error",h5),t.abort()}vC.exports=HI({http:a5,https:c5});vC.exports.wrap=HI});var Aa=m((kCe,WI)=>{"use strict";var GI=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);WI.exports=t=>t?Object.keys(t).map(e=>[GI.has(e)?GI.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var KI=m((DCe,zI)=>{"use strict";zI.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Qu=m((OCe,YI)=>{"use strict";YI.exports=_e;_e.Node=es;_e.create=_e;function _e(t){var e=this;if(e instanceof _e||(e=new _e),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}_e.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};_e.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};_e.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};_e.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)g5(this,arguments[t]);return this.length};_e.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)v5(this,arguments[t]);return this.length};_e.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};_e.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};_e.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};_e.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};_e.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};_e.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};_e.prototype.map=function(t,e){e=e||this;for(var r=new _e,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};_e.prototype.mapReverse=function(t,e){e=e||this;for(var r=new _e,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};_e.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};_e.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};_e.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};_e.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};_e.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new _e;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};_e.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new _e;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};_e.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var o=[],n=0;i&&n<e;n++)o.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=m5(this,i,r[n]);return o};_e.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function m5(t,e,r){var n=e===t.head?new es(r,null,e,t):new es(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function g5(t,e){t.tail=new es(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function v5(t,e){t.head=new es(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function es(t,e,r,n){if(!(this instanceof es))return new es(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{KI()(_e)}catch(t){}});var Ra=m((NCe,iA)=>{"use strict";var y5=require("events"),XI=require("stream"),Ju=Qu(),QI=require("string_decoder").StringDecoder,ui=Symbol("EOF"),Zu=Symbol("maybeEmitEnd"),Yi=Symbol("emittedEnd"),ep=Symbol("emittingEnd"),tp=Symbol("closed"),JI=Symbol("read"),CC=Symbol("flush"),ZI=Symbol("flushChunk"),_r=Symbol("encoding"),li=Symbol("decoder"),rp=Symbol("flowing"),el=Symbol("paused"),tl=Symbol("resume"),cr=Symbol("bufferLength"),eA=Symbol("bufferPush"),wC=Symbol("bufferShift"),zt=Symbol("objectMode"),Kt=Symbol("destroyed"),tA=global._MP_NO_ITERATOR_SYMBOLS_!=="1",C5=tA&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),w5=tA&&Symbol.iterator||Symbol("iterator not implemented"),rA=t=>t==="end"||t==="finish"||t==="prefinish",E5=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,_5=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);iA.exports=class nA extends XI{constructor(e){super();this[rp]=!1,this[el]=!1,this.pipes=new Ju,this.buffer=new Ju,this[zt]=e&&e.objectMode||!1,this[zt]?this[_r]=null:this[_r]=e&&e.encoding||null,this[_r]==="buffer"&&(this[_r]=null),this[li]=this[_r]?new QI(this[_r]):null,this[ui]=!1,this[Yi]=!1,this[ep]=!1,this[tp]=!1,this.writable=!0,this.readable=!0,this[cr]=0,this[Kt]=!1}get bufferLength(){return this[cr]}get encoding(){return this[_r]}set encoding(e){if(this[zt])throw new Error("cannot set encoding in objectMode");if(this[_r]&&e!==this[_r]&&(this[li]&&this[li].lastNeed||this[cr]))throw new Error("cannot change encoding");this[_r]!==e&&(this[li]=e?new QI(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[li].write(r)))),this[_r]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[zt]}set objectMode(e){this[zt]=this[zt]||!!e}write(e,r,n){if(this[ui])throw new Error("write after end");return this[Kt]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[zt]&&!Buffer.isBuffer(e)&&(_5(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):E5(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[cr]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[zt]&&!(r===this[_r]&&!this[li].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[_r]&&(e=this[li].write(e)),this.flowing?(this[cr]!==0&&this[CC](!0),this.emit("data",e)):this[eA](e),this[cr]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[Kt])return null;try{return this[cr]===0||e===0||e>this[cr]?null:(this[zt]&&(e=null),this.buffer.length>1&&!this[zt]&&(this.encoding?this.buffer=new Ju([Array.from(this.buffer).join("")]):this.buffer=new Ju([Buffer.concat(Array.from(this.buffer),this[cr])])),this[JI](e||null,this.buffer.head.value))}finally{this[Zu]()}}[JI](e,r){return e===r.length||e===null?this[wC]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[cr]-=e),this.emit("data",r),!this.buffer.length&&!this[ui]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[ui]=!0,this.writable=!1,(this.flowing||!this[el])&&this[Zu](),this}[tl](){this[Kt]||(this[el]=!1,this[rp]=!0,this.emit("resume"),this.buffer.length?this[CC]():this[ui]?this[Zu]():this.emit("drain"))}resume(){return this[tl]()}pause(){this[rp]=!1,this[el]=!0}get destroyed(){return this[Kt]}get flowing(){return this[rp]}get paused(){return this[el]}[eA](e){return this[zt]?this[cr]+=1:this[cr]+=e.length,this.buffer.push(e)}[wC](){return this.buffer.length&&(this[zt]?this[cr]-=1:this[cr]-=this.buffer.head.value.length),this.buffer.shift()}[CC](e){do;while(this[ZI](this[wC]()));!e&&!this.buffer.length&&!this[ui]&&this.emit("drain")}[ZI](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Kt])return;let n=this[Yi];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:e,opts:r,ondrain:o=>this[tl]()};return this.pipes.push(i),e.on("drain",i.ondrain),this[tl](),n&&i.opts.end&&i.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[tl]():rA(e)&&this[Yi]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[Yi]}[Zu](){!this[ep]&&!this[Yi]&&!this[Kt]&&this.buffer.length===0&&this[ui]&&(this[ep]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[tp]&&this.emit("close"),this[ep]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==Kt&&this[Kt])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[Yi]===!0)return;this[Yi]=!0,this.readable=!1,this[li]&&(r=this[li].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(e==="close"&&(this[tp]=!0,!this[Yi]&&!this[Kt]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{rA(e)?this.removeAllListeners(e):this[Zu]()}}collect(){let e=[];this[zt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[zt]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[zt]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[zt]?Promise.reject(new Error("cannot concat in objectMode")):this[_r]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Kt,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[C5](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[ui])return Promise.resolve({done:!0});let n=null,i=null,o=u=>{this.removeListener("data",s),this.removeListener("end",a),i(u)},s=u=>{this.removeListener("error",o),this.removeListener("end",a),this.pause(),n({value:u,done:!!this[ui]})},a=()=>{this.removeListener("error",o),this.removeListener("data",s),n({done:!0})},c=()=>o(new Error("stream destroyed"));return new Promise((u,l)=>{i=l,n=u,this.once(Kt,c),this.once("error",o),this.once("end",a),this.once("data",s)})}}}[w5](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Kt]?(e?this.emit("error",e):this.emit(Kt),this):(this[Kt]=!0,this.buffer=new Ju,this[cr]=0,typeof this.close=="function"&&!this[tp]&&this.close(),e?this.emit("error",e):this.emit(Kt),this)}static isStream(e){return!!e&&(e instanceof nA||e instanceof XI||e instanceof y5&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var sA=m((LCe,oA)=>{var x5=require("zlib").constants||{ZLIB_VERNUM:4736};oA.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:Infinity,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},x5))});var RC=m(Fr=>{"use strict";var EC=require("assert"),Xi=require("buffer").Buffer,aA=require("zlib"),ts=Fr.constants=sA(),b5=Ra(),cA=Xi.concat,rs=Symbol("_superWrite"),rl=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},S5=Symbol("opts"),nl=Symbol("flushFlag"),uA=Symbol("finishFlushFlag"),_C=Symbol("fullFlushFlag"),He=Symbol("handle"),np=Symbol("onError"),Ta=Symbol("sawError"),xC=Symbol("level"),bC=Symbol("strategy"),SC=Symbol("ended"),FCe=Symbol("_defaultFullFlush"),PC=class extends b5{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[Ta]=!1,this[SC]=!1,this[S5]=e,this[nl]=e.flush,this[uA]=e.finishFlush;try{this[He]=new aA[r](e)}catch(n){throw new rl(n)}this[np]=n=>{this[Ta]||(this[Ta]=!0,this.close(),this.emit("error",n))},this[He].on("error",n=>this[np](new rl(n))),this.once("end",()=>this.close)}close(){this[He]&&(this[He].close(),this[He]=null,this.emit("close"))}reset(){if(!this[Ta])return EC(this[He],"zlib binding closed"),this[He].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[_C]),this.write(Object.assign(Xi.alloc(0),{[nl]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[uA]),this[SC]=!0,super.end(null,null,n)}get ended(){return this[SC]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=Xi.from(e,r)),this[Ta])return;EC(this[He],"zlib binding closed");let i=this[He]._handle,o=i.close;i.close=()=>{};let s=this[He].close;this[He].close=()=>{},Xi.concat=u=>u;let a;try{let u=typeof e[nl]=="number"?e[nl]:this[nl];a=this[He]._processChunk(e,u),Xi.concat=cA}catch(u){Xi.concat=cA,this[np](new rl(u))}finally{this[He]&&(this[He]._handle=i,i.close=o,this[He].close=s,this[He].removeAllListeners("error"))}this[He]&&this[He].on("error",u=>this[np](new rl(u)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[rs](Xi.from(a[0]));for(let u=1;u<a.length;u++)c=this[rs](a[u])}else c=this[rs](Xi.from(a));return n&&n(),c}[rs](e){return super.write(e)}},Qi=class extends PC{constructor(e,r){e=e||{},e.flush=e.flush||ts.Z_NO_FLUSH,e.finishFlush=e.finishFlush||ts.Z_FINISH,super(e,r),this[_C]=ts.Z_FULL_FLUSH,this[xC]=e.level,this[bC]=e.strategy}params(e,r){if(!this[Ta]){if(!this[He])throw new Error("cannot switch params when binding is closed");if(!this[He].params)throw new Error("not supported in this implementation");if(this[xC]!==e||this[bC]!==r){this.flush(ts.Z_SYNC_FLUSH),EC(this[He],"zlib binding closed");let n=this[He].flush;this[He].flush=(i,o)=>{this.flush(i),o()};try{this[He].params(e,r)}finally{this[He].flush=n}this[He]&&(this[xC]=e,this[bC]=r)}}}},lA=class extends Qi{constructor(e){super(e,"Deflate")}},fA=class extends Qi{constructor(e){super(e,"Inflate")}},IC=Symbol("_portable"),dA=class extends Qi{constructor(e){super(e,"Gzip");this[IC]=e&&!!e.portable}[rs](e){return this[IC]?(this[IC]=!1,e[9]=255,super[rs](e)):super[rs](e)}},pA=class extends Qi{constructor(e){super(e,"Gunzip")}},hA=class extends Qi{constructor(e){super(e,"DeflateRaw")}},mA=class extends Qi{constructor(e){super(e,"InflateRaw")}},gA=class extends Qi{constructor(e){super(e,"Unzip")}},AC=class extends PC{constructor(e,r){e=e||{},e.flush=e.flush||ts.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||ts.BROTLI_OPERATION_FINISH,super(e,r),this[_C]=ts.BROTLI_OPERATION_FLUSH}},vA=class extends AC{constructor(e){super(e,"BrotliCompress")}},yA=class extends AC{constructor(e){super(e,"BrotliDecompress")}};Fr.Deflate=lA;Fr.Inflate=fA;Fr.Gzip=dA;Fr.Gunzip=pA;Fr.DeflateRaw=hA;Fr.InflateRaw=mA;Fr.Unzip=gA;typeof aA.BrotliCompress=="function"?(Fr.BrotliCompress=vA,Fr.BrotliDecompress=yA):Fr.BrotliCompress=Fr.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var ip=m(($Ce,CA)=>{"use strict";var P5=Ra(),TC=Symbol("slurp");CA.exports=class extends P5{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=e.path,this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=e.linkpath,this.uname=e.uname,this.gname=e.gname,r&&this[TC](r),n&&this[TC](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[TC](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}}});var kC=m(op=>{"use strict";op.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);op.code=new Map(Array.from(op.name).map(t=>[t[1],t[0]]))});var xA=m((jCe,_A)=>{"use strict";var I5=(t,e)=>{if(Number.isSafeInteger(t))t<0?R5(t,e):A5(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},A5=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},R5=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=wA(i):i===0?e[n-1]=0:(r=!0,e[n-1]=EA(i))}},T5=t=>{let e=t[0],r=e===128?D5(t.slice(1,t.length)):e===255?k5(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},k5=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var o=t[i],s;n?s=wA(o):o===0?s=o:(n=!0,s=EA(o)),s!==0&&(r-=s*Math.pow(256,e-i-1))}return r},D5=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},wA=t=>(255^t)&255,EA=t=>(255^t)+1&255;_A.exports={encode:I5,parse:T5}});var Da=m((HCe,PA)=>{"use strict";var DC=kC(),ka=require("path").posix,bA=xA(),OC=Symbol("slurp"),qr=Symbol("type"),SA=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[qr]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=ns(e,r,100),this.mode=Ji(e,r+100,8),this.uid=Ji(e,r+108,8),this.gid=Ji(e,r+116,8),this.size=Ji(e,r+124,12),this.mtime=NC(e,r+136,12),this.cksum=Ji(e,r+148,12),this[OC](n),this[OC](i,!0),this[qr]=ns(e,r+156,1),this[qr]===""&&(this[qr]="0"),this[qr]==="0"&&this.path.substr(-1)==="/"&&(this[qr]="5"),this[qr]==="5"&&(this.size=0),this.linkpath=ns(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=ns(e,r+265,32),this.gname=ns(e,r+297,32),this.devmaj=Ji(e,r+329,8),this.devmin=Ji(e,r+337,8),e[r+475]!==0){let s=ns(e,r+345,155);this.path=s+"/"+this.path}else{let s=ns(e,r+345,130);s&&(this.path=s+"/"+this.path),this.atime=NC(e,r+476,12),this.ctime=NC(e,r+488,12)}let o=8*32;for(let s=r;s<r+148;s++)o+=e[s];for(let s=r+156;s<r+512;s++)o+=e[s];this.cksumValid=o===this.cksum,this.cksum===null&&o===8*32&&(this.nullBlock=!0)}[OC](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=O5(this.path||"",n),o=i[0],s=i[1];this.needPax=i[2],this.needPax=is(e,r,100,o)||this.needPax,this.needPax=Zi(e,r+100,8,this.mode)||this.needPax,this.needPax=Zi(e,r+108,8,this.uid)||this.needPax,this.needPax=Zi(e,r+116,8,this.gid)||this.needPax,this.needPax=Zi(e,r+124,12,this.size)||this.needPax,this.needPax=LC(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[qr].charCodeAt(0),this.needPax=is(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=is(e,r+265,32,this.uname)||this.needPax,this.needPax=is(e,r+297,32,this.gname)||this.needPax,this.needPax=Zi(e,r+329,8,this.devmaj)||this.needPax,this.needPax=Zi(e,r+337,8,this.devmin)||this.needPax,this.needPax=is(e,r+345,n,s)||this.needPax,e[r+475]!==0?this.needPax=is(e,r+345,155,s)||this.needPax:(this.needPax=is(e,r+345,130,s)||this.needPax,this.needPax=LC(e,r+476,12,this.atime)||this.needPax,this.needPax=LC(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,Zi(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return DC.name.get(this[qr])||this[qr]}get typeKey(){return this[qr]}set type(e){DC.code.has(e)?this[qr]=DC.code.get(e):this[qr]=e}},O5=(t,e)=>{let r=100,n=t,i="",o,s=ka.parse(t).root||".";if(Buffer.byteLength(n)<r)o=[n,i,!1];else{i=ka.dirname(n),n=ka.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=e?o=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=e?o=[n.substr(0,r-1),i,!0]:(n=ka.join(ka.basename(i),n),i=ka.dirname(i));while(i!==s&&!o);o||(o=[t.substr(0,r-1),"",!0])}return o},ns=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),NC=(t,e,r)=>N5(Ji(t,e,r)),N5=t=>t===null?null:new Date(t*1e3),Ji=(t,e,r)=>t[e]&128?bA.parse(t.slice(e,e+r)):F5(t,e,r),L5=t=>isNaN(t)?null:t,F5=(t,e,r)=>L5(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),q5={12:8589934591,8:2097151},Zi=(t,e,r,n)=>n===null?!1:n>q5[r]||n<0?(bA.encode(n,t.slice(e,e+r)),!0):(M5(t,e,r,n),!1),M5=(t,e,r,n)=>t.write($5(n,r),e,r,"ascii"),$5=(t,e)=>U5(Math.floor(t).toString(8),e),U5=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",LC=(t,e,r,n)=>n===null?!1:Zi(t,e,r,n.getTime()/1e3),j5=new Array(156).join("\0"),is=(t,e,r,n)=>n===null?!1:(t.write(n+j5,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);PA.exports=SA});var ap=m((BCe,IA)=>{"use strict";var H5=Da(),B5=require("path"),sp=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let o=0;o<512;o++)i[o]=0;new H5({path:("PaxHeader/"+B5.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let o=r+512;o<i.length;o++)i[o]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),o=Math.floor(Math.log(i)/Math.log(10))+1;return i+o>=Math.pow(10,o)&&(o+=1),o+i+n}};sp.parse=(t,e,r)=>new sp(V5(G5(t),e),r);var V5=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,G5=t=>t.replace(/\n$/,"").split(`
`).reduce(W5,Object.create(null)),W5=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let o=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(o*1e3):/^[0-9]+$/.test(o)?+o:o,t};IA.exports=sp});var cp=m((VCe,AA)=>{"use strict";AA.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var qC=m((GCe,RA)=>{"use strict";var up=["|","<",">","?",":"],FC=up.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),z5=new Map(up.map((t,e)=>[t,FC[e]])),K5=new Map(FC.map((t,e)=>[t,up[e]]));RA.exports={encode:t=>up.reduce((e,r)=>e.split(r).join(z5.get(r)),t),decode:t=>FC.reduce((e,r)=>e.split(r).join(K5.get(r)),t)}});var kA=m((WCe,TA)=>{"use strict";TA.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var VC=m((YCe,HA)=>{"use strict";var DA=Ra(),OA=ap(),NA=Da(),Hn=require("fs"),Oa=require("path"),Y5=16*1024*1024,LA=Symbol("process"),FA=Symbol("file"),qA=Symbol("directory"),MC=Symbol("symlink"),MA=Symbol("hardlink"),il=Symbol("header"),lp=Symbol("read"),$C=Symbol("lstat"),fp=Symbol("onlstat"),UC=Symbol("onread"),jC=Symbol("onreadlink"),HC=Symbol("openfile"),BC=Symbol("onopenfile"),os=Symbol("close"),dp=Symbol("mode"),$A=cp(),X5=qC(),UA=kA(),pp=$A(class extends DA{constructor(e,r){if(r=r||{},super(r),typeof e!="string")throw new TypeError("path is required");this.path=e,this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid(),this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||Y5,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=r.cwd||process.cwd(),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths&&Oa.win32.isAbsolute(e)){let i=Oa.win32.parse(e);this.path=e.substr(i.root.length),n=i.root}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=X5.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=r.absolute||Oa.resolve(this.cwd,e),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[fp](this.statCache.get(this.absolute)):this[$C]()}[$C](){Hn.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[fp](r)})}[fp](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=J5(e),this.emit("stat",e),this[LA]()}[LA](){switch(this.type){case"File":return this[FA]();case"Directory":return this[qA]();case"SymbolicLink":return this[MC]();default:return this.end()}}[dp](e){return UA(e,this.type==="Directory",this.portable)}[il](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new NA({path:this.path,linkpath:this.linkpath,mode:this[dp](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&this.write(new OA({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this.path,linkpath:this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),this.write(this.header.block)}[qA](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[il](),this.end()}[MC](){Hn.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[jC](r)})}[jC](e){this.linkpath=e.replace(/\\/g,"/"),this[il](),this.end()}[MA](e){this.type="Link",this.linkpath=Oa.relative(this.cwd,e).replace(/\\/g,"/"),this.stat.size=0,this[il](),this.end()}[FA](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[MA](r)}this.linkCache.set(e,this.absolute)}if(this[il](),this.stat.size===0)return this.end();this[HC]()}[HC](){Hn.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[BC](r)})}[BC](e){let r=512*Math.ceil(this.stat.size/512),n=Math.min(r,this.maxReadSize),i=Buffer.allocUnsafe(n);this[lp](e,i,0,i.length,0,this.stat.size,r)}[lp](e,r,n,i,o,s,a){Hn.read(e,r,n,i,o,(c,u)=>{if(c)return this[os](e,()=>this.emit("error",c));this[UC](e,r,n,i,o,s,a,u)})}[os](e,r){Hn.close(e,r)}[UC](e,r,n,i,o,s,a,c){if(c<=0&&s>0){let l=new Error("encountered unexpected EOF");return l.path=this.absolute,l.syscall="read",l.code="EOF",this[os](e,()=>this.emit("error",l))}if(c>s){let l=new Error("did not encounter expected EOF");return l.path=this.absolute,l.syscall="read",l.code="EOF",this[os](e,()=>this.emit("error",l))}if(c===s)for(let l=c;l<i&&c<a;l++)r[l+n]=0,c++,s++;let u=n===0&&c===r.length?r:r.slice(n,n+c);if(s-=c,a-=c,o+=c,n+=c,this.write(u),!s)return a&&this.write(Buffer.alloc(a)),this[os](e,l=>l?this.emit("error",l):this.end());n>=i&&(r=Buffer.allocUnsafe(i),n=0),i=r.length-n,this[lp](e,r,n,i,o,s,a)}}),jA=class extends pp{[$C](){this[fp](Hn.lstatSync(this.absolute))}[MC](){this[jC](Hn.readlinkSync(this.absolute))}[HC](){this[BC](Hn.openSync(this.absolute,"r"))}[lp](e,r,n,i,o,s,a){let c=!0;try{let u=Hn.readSync(e,r,n,i,o);this[UC](e,r,n,i,o,s,a,u),c=!1}finally{if(c)try{this[os](e,()=>{})}catch(u){}}}[os](e,r){Hn.closeSync(e),r()}},Q5=$A(class extends DA{constructor(e,r){r=r||{},super(r),this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.path=e.path,this.mode=this[dp](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=e.linkpath,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(Oa.isAbsolute(this.path)&&!this.preservePaths){let i=Oa.parse(this.path);n=i.root,this.path=this.path.substr(i.root.length)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new NA({path:this.path,linkpath:this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new OA({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this.path,linkpath:this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[dp](e){return UA(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&this.write(Buffer.alloc(this.blockRemain)),super.end()}});pp.Sync=jA;pp.Tar=Q5;var J5=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";HA.exports=pp});var Ep=m((QCe,XA)=>{"use strict";var GC=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},Z5=Ra(),eK=RC(),tK=ip(),WC=VC(),rK=WC.Sync,nK=WC.Tar,iK=Qu(),BA=Buffer.alloc(1024),hp=Symbol("onStat"),mp=Symbol("ended"),Bn=Symbol("queue"),Na=Symbol("current"),ss=Symbol("process"),gp=Symbol("processing"),VA=Symbol("processJob"),Vn=Symbol("jobs"),zC=Symbol("jobDone"),vp=Symbol("addFSEntry"),GA=Symbol("addTarEntry"),KC=Symbol("stat"),YC=Symbol("readdir"),yp=Symbol("onreaddir"),Cp=Symbol("pipe"),WA=Symbol("entry"),XC=Symbol("entryOpt"),QC=Symbol("writeEntryClass"),zA=Symbol("write"),JC=Symbol("ondrain"),wp=require("fs"),KA=require("path"),oK=cp(),ZC=oK(class extends Z5{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=(e.prefix||"").replace(/(\\|\/)+$/,""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[QC]=WC,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new eK.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[JC]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[JC]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[Bn]=new iK,this[Vn]=0,this.jobs=+e.jobs||4,this[gp]=!1,this[mp]=!1}[zA](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[mp]=!0,this[ss](),this}write(e){if(this[mp])throw new Error("write after end");return e instanceof tK?this[GA](e):this[vp](e),this.flowing}[GA](e){let r=KA.resolve(this.cwd,e.path);if(this.prefix&&(e.path=this.prefix+"/"+e.path.replace(/^\.(\/+|$)/,"")),!this.filter(e.path,e))e.resume();else{let n=new GC(e.path,r,!1);n.entry=new nK(e,this[XC](n)),n.entry.on("end",i=>this[zC](n)),this[Vn]+=1,this[Bn].push(n)}this[ss]()}[vp](e){let r=KA.resolve(this.cwd,e);this.prefix&&(e=this.prefix+"/"+e.replace(/^\.(\/+|$)/,"")),this[Bn].push(new GC(e,r)),this[ss]()}[KC](e){e.pending=!0,this[Vn]+=1;let r=this.follow?"stat":"lstat";wp[r](e.absolute,(n,i)=>{e.pending=!1,this[Vn]-=1,n?this.emit("error",n):this[hp](e,i)})}[hp](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[ss]()}[YC](e){e.pending=!0,this[Vn]+=1,wp.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[Vn]-=1,r)return this.emit("error",r);this[yp](e,n)})}[yp](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[ss]()}[ss](){if(!this[gp]){this[gp]=!0;for(let e=this[Bn].head;e!==null&&this[Vn]<this.jobs;e=e.next)if(this[VA](e.value),e.value.ignore){let r=e.next;this[Bn].removeNode(e),e.next=r}this[gp]=!1,this[mp]&&!this[Bn].length&&this[Vn]===0&&(this.zip?this.zip.end(BA):(super.write(BA),super.end()))}}get[Na](){return this[Bn]&&this[Bn].head&&this[Bn].head.value}[zC](e){this[Bn].shift(),this[Vn]-=1,this[ss]()}[VA](e){if(!e.pending){if(e.entry){e===this[Na]&&!e.piped&&this[Cp](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[hp](e,this.statCache.get(e.absolute)):this[KC](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[yp](e,this.readdirCache.get(e.absolute)):this[YC](e),!e.readdir))){if(e.entry=this[WA](e),!e.entry){e.ignore=!0;return}e===this[Na]&&!e.piped&&this[Cp](e)}}}[XC](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime}}[WA](e){this[Vn]+=1;try{return new this[QC](e.path,this[XC](e)).on("end",()=>this[zC](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[JC](){this[Na]&&this[Na].entry&&this[Na].entry.resume()}[Cp](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let o=this.prefix?e.path.slice(this.prefix.length+1)||"./":e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[vp](s+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),YA=class extends ZC{constructor(e){super(e);this[QC]=rK}pause(){}resume(){}[KC](e){let r=this.follow?"statSync":"lstatSync";this[hp](e,wp[r](e.absolute))}[YC](e,r){this[yp](e,wp.readdirSync(e.absolute))}[Cp](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let o=this.prefix?e.path.slice(this.prefix.length+1)||"./":e.path,s=o==="./"?"":o.replace(/\/*$/,"/");this[vp](s+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[zA](i)})}};ZC.Sync=YA;XA.exports=ZC});var Ha=m(sl=>{"use strict";var sK=Ra(),aK=require("events").EventEmitter,xr=require("fs"),ew=xr.writev;if(!ew){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;ew=(r,n,i,o)=>{let s=(c,u)=>o(c,u,n),a=new e;a.oncomplete=s,t.writeBuffers(r,n,i,a)}}var La=Symbol("_autoClose"),En=Symbol("_close"),ol=Symbol("_ended"),Ne=Symbol("_fd"),QA=Symbol("_finished"),eo=Symbol("_flags"),tw=Symbol("_flush"),rw=Symbol("_handleChunk"),nw=Symbol("_makeBuf"),_p=Symbol("_mode"),xp=Symbol("_needDrain"),Fa=Symbol("_onerror"),qa=Symbol("_onopen"),iw=Symbol("_onread"),Ma=Symbol("_onwrite"),to=Symbol("_open"),fi=Symbol("_path"),as=Symbol("_pos"),Gn=Symbol("_queue"),$a=Symbol("_read"),JA=Symbol("_readSize"),ro=Symbol("_reading"),bp=Symbol("_remain"),ZA=Symbol("_size"),Sp=Symbol("_write"),Ua=Symbol("_writing"),Pp=Symbol("_defaultFlag"),ja=Symbol("_errored"),ow=class extends sK{constructor(e,r){if(r=r||{},super(r),this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[ja]=!1,this[Ne]=typeof r.fd=="number"?r.fd:null,this[fi]=e,this[JA]=r.readSize||16*1024*1024,this[ro]=!1,this[ZA]=typeof r.size=="number"?r.size:Infinity,this[bp]=this[ZA],this[La]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[Ne]=="number"?this[$a]():this[to]()}get fd(){return this[Ne]}get path(){return this[fi]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[to](){xr.open(this[fi],"r",(e,r)=>this[qa](e,r))}[qa](e,r){e?this[Fa](e):(this[Ne]=r,this.emit("open",r),this[$a]())}[nw](){return Buffer.allocUnsafe(Math.min(this[JA],this[bp]))}[$a](){if(!this[ro]){this[ro]=!0;let e=this[nw]();if(e.length===0)return process.nextTick(()=>this[iw](null,0,e));xr.read(this[Ne],e,0,e.length,null,(r,n,i)=>this[iw](r,n,i))}}[iw](e,r,n){this[ro]=!1,e?this[Fa](e):this[rw](r,n)&&this[$a]()}[En](){if(this[La]&&typeof this[Ne]=="number"){let e=this[Ne];this[Ne]=null,xr.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[Fa](e){this[ro]=!0,this[En](),this.emit("error",e)}[rw](e,r){let n=!1;return this[bp]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[bp]<=0)&&(n=!1,this[En](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[Ne]=="number"&&this[$a]();break;case"error":return this[ja]?void 0:(this[ja]=!0,super.emit(e,r));default:return super.emit(e,r)}}},eR=class extends ow{[to](){let e=!0;try{this[qa](null,xr.openSync(this[fi],"r")),e=!1}finally{e&&this[En]()}}[$a](){let e=!0;try{if(!this[ro]){this[ro]=!0;do{let r=this[nw](),n=r.length===0?0:xr.readSync(this[Ne],r,0,r.length,null);if(!this[rw](n,r))break}while(!0);this[ro]=!1}e=!1}finally{e&&this[En]()}}[En](){if(this[La]&&typeof this[Ne]=="number"){let e=this[Ne];this[Ne]=null,xr.closeSync(e),this.emit("close")}}},sw=class extends aK{constructor(e,r){r=r||{},super(r),this.readable=!1,this.writable=!0,this[ja]=!1,this[Ua]=!1,this[ol]=!1,this[xp]=!1,this[Gn]=[],this[fi]=e,this[Ne]=typeof r.fd=="number"?r.fd:null,this[_p]=r.mode===void 0?438:r.mode,this[as]=typeof r.start=="number"?r.start:null,this[La]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[as]!==null?"r+":"w";this[Pp]=r.flags===void 0,this[eo]=this[Pp]?n:r.flags,this[Ne]===null&&this[to]()}emit(e,r){if(e==="error"){if(this[ja])return;this[ja]=!0}return super.emit(e,r)}get fd(){return this[Ne]}get path(){return this[fi]}[Fa](e){this[En](),this[Ua]=!0,this.emit("error",e)}[to](){xr.open(this[fi],this[eo],this[_p],(e,r)=>this[qa](e,r))}[qa](e,r){this[Pp]&&this[eo]==="r+"&&e&&e.code==="ENOENT"?(this[eo]="w",this[to]()):e?this[Fa](e):(this[Ne]=r,this.emit("open",r),this[tw]())}end(e,r){return e&&this.write(e,r),this[ol]=!0,!this[Ua]&&!this[Gn].length&&typeof this[Ne]=="number"&&this[Ma](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[ol]?(this.emit("error",new Error("write() after end()")),!1):this[Ne]===null||this[Ua]||this[Gn].length?(this[Gn].push(e),this[xp]=!0,!1):(this[Ua]=!0,this[Sp](e),!0)}[Sp](e){xr.write(this[Ne],e,0,e.length,this[as],(r,n)=>this[Ma](r,n))}[Ma](e,r){e?this[Fa](e):(this[as]!==null&&(this[as]+=r),this[Gn].length?this[tw]():(this[Ua]=!1,this[ol]&&!this[QA]?(this[QA]=!0,this[En](),this.emit("finish")):this[xp]&&(this[xp]=!1,this.emit("drain"))))}[tw](){if(this[Gn].length===0)this[ol]&&this[Ma](null,0);else if(this[Gn].length===1)this[Sp](this[Gn].pop());else{let e=this[Gn];this[Gn]=[],ew(this[Ne],e,this[as],(r,n)=>this[Ma](r,n))}}[En](){if(this[La]&&typeof this[Ne]=="number"){let e=this[Ne];this[Ne]=null,xr.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},tR=class extends sw{[to](){let e;if(this[Pp]&&this[eo]==="r+")try{e=xr.openSync(this[fi],this[eo],this[_p])}catch(r){if(r.code==="ENOENT")return this[eo]="w",this[to]();throw r}else e=xr.openSync(this[fi],this[eo],this[_p]);this[qa](null,e)}[En](){if(this[La]&&typeof this[Ne]=="number"){let e=this[Ne];this[Ne]=null,xr.closeSync(e),this.emit("close")}}[Sp](e){let r=!0;try{this[Ma](null,xr.writeSync(this[Ne],e,0,e.length,this[as])),r=!1}finally{if(r)try{this[En]()}catch(n){}}}};sl.ReadStream=ow;sl.ReadStreamSync=eR;sl.WriteStream=sw;sl.WriteStreamSync=tR});var Op=m((ewe,cR)=>{"use strict";var cK=cp(),uK=Da(),lK=require("events"),fK=Qu(),dK=1024*1024,pK=ip(),rR=ap(),hK=RC(),aw=Buffer.from([31,139]),zr=Symbol("state"),cs=Symbol("writeEntry"),di=Symbol("readEntry"),cw=Symbol("nextEntry"),nR=Symbol("processEntry"),Kr=Symbol("extendedHeader"),al=Symbol("globalExtendedHeader"),no=Symbol("meta"),iR=Symbol("emitMeta"),Ge=Symbol("buffer"),pi=Symbol("queue"),us=Symbol("ended"),oR=Symbol("emittedEnd"),ls=Symbol("emit"),br=Symbol("unzip"),Ip=Symbol("consumeChunk"),Ap=Symbol("consumeChunkSub"),uw=Symbol("consumeBody"),sR=Symbol("consumeMeta"),aR=Symbol("consumeHeader"),Rp=Symbol("consuming"),lw=Symbol("bufferConcat"),fw=Symbol("maybeEnd"),cl=Symbol("writing"),io=Symbol("aborted"),Tp=Symbol("onDone"),fs=Symbol("sawValidEntry"),kp=Symbol("sawNullBlock"),Dp=Symbol("sawEOF"),mK=t=>!0;cR.exports=cK(class extends lK{constructor(e){e=e||{},super(e),this.file=e.file||"",this[fs]=null,this.on(Tp,r=>{(this[zr]==="begin"||this[fs]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Tp,e.ondone):this.on(Tp,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||dK,this.filter=typeof e.filter=="function"?e.filter:mK,this.writable=!0,this.readable=!1,this[pi]=new fK,this[Ge]=null,this[di]=null,this[cs]=null,this[zr]="begin",this[no]="",this[Kr]=null,this[al]=null,this[us]=!1,this[br]=null,this[io]=!1,this[kp]=!1,this[Dp]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[aR](e,r){this[fs]===null&&(this[fs]=!1);let n;try{n=new uK(e,r,this[Kr],this[al])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[kp]?(this[Dp]=!0,this[zr]==="begin"&&(this[zr]="header"),this[ls]("eof")):(this[kp]=!0,this[ls]("nullBlock"));else if(this[kp]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let o=this[cs]=new pK(n,this[Kr],this[al]);if(!this[fs])if(o.remain){let s=()=>{o.invalid||(this[fs]=!0)};o.on("end",s)}else this[fs]=!0;o.meta?o.size>this.maxMetaEntrySize?(o.ignore=!0,this[ls]("ignoredEntry",o),this[zr]="ignore",o.resume()):o.size>0&&(this[no]="",o.on("data",s=>this[no]+=s),this[zr]="meta"):(this[Kr]=null,o.ignore=o.ignore||!this.filter(o.path,o),o.ignore?(this[ls]("ignoredEntry",o),this[zr]=o.remain?"ignore":"header",o.resume()):(o.remain?this[zr]="body":(this[zr]="header",o.end()),this[di]?this[pi].push(o):(this[pi].push(o),this[cw]())))}}}[nR](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[di]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[cw]()),r=!1)):(this[di]=null,r=!1),r}[cw](){do;while(this[nR](this[pi].shift()));if(!this[pi].length){let e=this[di];!e||e.flowing||e.size===e.remain?this[cl]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[uw](e,r){let n=this[cs],i=n.blockRemain,o=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(o),n.blockRemain||(this[zr]="header",this[cs]=null,n.end()),o.length}[sR](e,r){let n=this[cs],i=this[uw](e,r);return this[cs]||this[iR](n),i}[ls](e,r,n){!this[pi].length&&!this[di]?this.emit(e,r,n):this[pi].push([e,r,n])}[iR](e){switch(this[ls]("meta",this[no]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Kr]=rR.parse(this[no],this[Kr],!1);break;case"GlobalExtendedHeader":this[al]=rR.parse(this[no],this[al],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Kr]=this[Kr]||Object.create(null),this[Kr].path=this[no].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Kr]=this[Kr]||Object.create(null),this[Kr].linkpath=this[no].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[io]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[io])return;if(this[br]===null&&e){if(this[Ge]&&(e=Buffer.concat([this[Ge],e]),this[Ge]=null),e.length<aw.length)return this[Ge]=e,!0;for(let n=0;this[br]===null&&n<aw.length;n++)e[n]!==aw[n]&&(this[br]=!1);if(this[br]===null){let n=this[us];this[us]=!1,this[br]=new hK.Unzip,this[br].on("data",o=>this[Ip](o)),this[br].on("error",o=>this.abort(o)),this[br].on("end",o=>{this[us]=!0,this[Ip]()}),this[cl]=!0;let i=this[br][n?"end":"write"](e);return this[cl]=!1,i}}this[cl]=!0,this[br]?this[br].write(e):this[Ip](e),this[cl]=!1;let r=this[pi].length?!1:this[di]?this[di].flowing:!0;return!r&&!this[pi].length&&this[di].once("drain",n=>this.emit("drain")),r}[lw](e){e&&!this[io]&&(this[Ge]=this[Ge]?Buffer.concat([this[Ge],e]):e)}[fw](){if(this[us]&&!this[oR]&&!this[io]&&!this[Rp]){this[oR]=!0;let e=this[cs];if(e&&e.blockRemain){let r=this[Ge]?this[Ge].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[Ge]&&e.write(this[Ge]),e.end()}this[ls](Tp)}}[Ip](e){if(this[Rp])this[lw](e);else if(!e&&!this[Ge])this[fw]();else{if(this[Rp]=!0,this[Ge]){this[lw](e);let r=this[Ge];this[Ge]=null,this[Ap](r)}else this[Ap](e);for(;this[Ge]&&this[Ge].length>=512&&!this[io]&&!this[Dp];){let r=this[Ge];this[Ge]=null,this[Ap](r)}this[Rp]=!1}(!this[Ge]||this[us])&&this[fw]()}[Ap](e){let r=0,n=e.length;for(;r+512<=n&&!this[io]&&!this[Dp];)switch(this[zr]){case"begin":case"header":this[aR](e,r),r+=512;break;case"ignore":case"body":r+=this[uw](e,r);break;case"meta":r+=this[sR](e,r);break;default:throw new Error("invalid state: "+this[zr])}r<n&&(this[Ge]?this[Ge]=Buffer.concat([e.slice(r),this[Ge]]):this[Ge]=e.slice(r))}end(e){this[io]||(this[br]?this[br].end(e):(this[us]=!0,this.write(e)))}})});var Np=m((twe,dR)=>{"use strict";var gK=Aa(),uR=Op(),Ba=require("fs"),vK=Ha(),lR=require("path");dR.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=gK(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&CK(n,e),n.noResume||yK(n),n.file&&n.sync?wK(n):n.file?EK(n,r):fR(n)};var yK=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},CK=(t,e)=>{let r=new Map(e.map(o=>[o.replace(/\/+$/,""),!0])),n=t.filter,i=(o,s)=>{let a=s||lR.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(lR.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(o.replace(/\/+$/,"")):o=>i(o.replace(/\/+$/,""))},wK=t=>{let e=fR(t),r=t.file,n=!0,i;try{let o=Ba.statSync(r),s=t.maxReadSize||16*1024*1024;if(o.size<s)e.end(Ba.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(s);for(i=Ba.openSync(r,"r");a<o.size;){let u=Ba.readSync(i,c,0,s,a);a+=u,e.write(c.slice(0,u))}e.end()}n=!1}finally{if(n&&i)try{Ba.closeSync(i)}catch(o){}}},EK=(t,e)=>{let r=new uR(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("end",s),Ba.stat(i,(c,u)=>{if(c)a(c);else{let l=new vK.ReadStream(i,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return e?o.then(e,e):o},fR=t=>new uR(t)});var yR=m((rwe,vR)=>{"use strict";var _K=Aa(),Lp=Ep(),pR=Ha(),hR=Np(),mR=require("path");vR.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=_K(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?xK(n,e):n.file?bK(n,e,r):n.sync?SK(n,e):PK(n,e)};var xK=(t,e)=>{let r=new Lp.Sync(t),n=new pR.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),gR(r,e)},bK=(t,e,r)=>{let n=new Lp(t),i=new pR.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let o=new Promise((s,a)=>{i.on("error",a),i.on("close",s),n.on("error",a)});return dw(n,e),r?o.then(r,r):o},gR=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?hR({file:mR.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},dw=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return hR({file:mR.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>dw(t,e));t.add(r)}t.end()},SK=(t,e)=>{let r=new Lp.Sync(t);return gR(r,e),r},PK=(t,e)=>{let r=new Lp(t);return dw(r,e),r}});var pw=m((nwe,SR)=>{"use strict";var IK=Aa(),CR=Ep(),Yr=require("fs"),wR=Ha(),ER=Np(),_R=require("path"),xR=Da();SR.exports=(t,e,r)=>{let n=IK(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?AK(n,e):TK(n,e,r)};var AK=(t,e)=>{let r=new CR.Sync(t),n=!0,i,o;try{try{i=Yr.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=Yr.openSync(t.file,"w+");else throw c}let s=Yr.fstatSync(i),a=Buffer.alloc(512);e:for(o=0;o<s.size;o+=512){for(let l=0,f=0;l<512;l+=f){if(f=Yr.readSync(i,a,l,a.length-l,o+l),o===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new xR(a);if(!c.cksumValid)break;let u=512*Math.ceil(c.size/512);if(o+u+512>s.size)break;o+=u,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,RK(t,r,o,i,e)}finally{if(n)try{Yr.closeSync(i)}catch(s){}}},RK=(t,e,r,n,i)=>{let o=new wR.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(o),kK(e,i)},TK=(t,e,r)=>{e=Array.from(e);let n=new CR(t),i=(s,a,c)=>{let u=(h,g)=>{h?Yr.close(s,v=>c(h)):c(null,g)},l=0;if(a===0)return u(null,0);let f=0,d=Buffer.alloc(512),p=(h,g)=>{if(h)return u(h);if(f+=g,f<512&&g)return Yr.read(s,d,f,d.length-f,l+f,p);if(l===0&&d[0]===31&&d[1]===139)return u(new Error("cannot append to compressed archives"));if(f<512)return u(null,l);let v=new xR(d);if(!v.cksumValid)return u(null,l);let C=512*Math.ceil(v.size/512);if(l+C+512>a||(l+=C+512,l>=a))return u(null,l);t.mtimeCache&&t.mtimeCache.set(v.path,v.mtime),f=0,Yr.read(s,d,0,512,l,p)};Yr.read(s,d,0,512,l,p)},o=new Promise((s,a)=>{n.on("error",a);let c="r+",u=(l,f)=>{if(l&&l.code==="ENOENT"&&c==="r+")return c="w+",Yr.open(t.file,c,u);if(l)return a(l);Yr.fstat(f,(d,p)=>{if(d)return a(d);i(f,p.size,(h,g)=>{if(h)return a(h);let v=new wR.WriteStream(t.file,{fd:f,start:g});n.pipe(v),v.on("error",a),v.on("close",s),bR(n,e)})})};Yr.open(t.file,c,u)});return r?o.then(r,r):o},kK=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?ER({file:_R.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},bR=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return ER({file:_R.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>bR(t,e));t.add(r)}t.end()}});var IR=m((iwe,PR)=>{"use strict";var DK=Aa(),OK=pw();PR.exports=(t,e,r)=>{let n=DK(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),NK(n),OK(n,e,r)};var NK=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var TR=m((owe,RR)=>{var{promisify:AR}=require("util"),oo=require("fs"),LK=t=>{if(!t)t={mode:511,fs:oo};else if(typeof t=="object")t=A({mode:511,fs:oo},t);else if(typeof t=="number")t={mode:t,fs:oo};else if(typeof t=="string")t={mode:parseInt(t,8),fs:oo};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||oo.mkdir,t.mkdirAsync=AR(t.mkdir),t.stat=t.stat||t.fs.stat||oo.stat,t.statAsync=AR(t.stat),t.statSync=t.statSync||t.fs.statSync||oo.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||oo.mkdirSync,t};RR.exports=LK});var DR=m((swe,kR)=>{var FK=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:qK,parse:MK}=require("path"),$K=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=qK(t),FK==="win32"){let e=/[*|"<>?:]/,{root:r}=MK(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};kR.exports=$K});var qR=m((awe,FR)=>{var{dirname:OR}=require("path"),NR=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?NR(t,OR(e),e):void 0),LR=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?LR(t,OR(e),e):void 0}};FR.exports={findMade:NR,findMadeSync:LR}});var gw=m((cwe,$R)=>{var{dirname:MR}=require("path"),hw=(t,e,r)=>{e.recursive=!1;let n=MR(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return hw(n,e).then(o=>hw(t,e,o));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(o=>{if(o.isDirectory())return r;throw i},()=>{throw i})})},mw=(t,e,r)=>{let n=MR(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return mw(t,e,mw(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch(o){throw i}}};$R.exports={mkdirpManual:hw,mkdirpManualSync:mw}});var HR=m((uwe,jR)=>{var{dirname:UR}=require("path"),{findMade:UK,findMadeSync:jK}=qR(),{mkdirpManual:HK,mkdirpManualSync:BK}=gw(),VK=(t,e)=>(e.recursive=!0,UR(t)===t?e.mkdirAsync(t,e):UK(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return HK(t,e);throw i}))),GK=(t,e)=>{if(e.recursive=!0,UR(t)===t)return e.mkdirSync(t,e);let n=jK(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return BK(t,e);throw i}};jR.exports={mkdirpNative:VK,mkdirpNativeSync:GK}});var WR=m((lwe,GR)=>{var BR=require("fs"),WK=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,vw=WK.replace(/^v/,"").split("."),VR=+vw[0]>10||+vw[0]==10&&+vw[1]>=12,zK=VR?t=>t.mkdir===BR.mkdir:()=>!1,KK=VR?t=>t.mkdirSync===BR.mkdirSync:()=>!1;GR.exports={useNative:zK,useNativeSync:KK}});var JR=m((fwe,QR)=>{var Va=TR(),Ga=DR(),{mkdirpNative:zR,mkdirpNativeSync:KR}=HR(),{mkdirpManual:YR,mkdirpManualSync:XR}=gw(),{useNative:YK,useNativeSync:XK}=WR(),Wa=(t,e)=>(t=Ga(t),e=Va(e),YK(e)?zR(t,e):YR(t,e)),QK=(t,e)=>(t=Ga(t),e=Va(e),XK(e)?KR(t,e):XR(t,e));Wa.sync=QK;Wa.native=(t,e)=>zR(Ga(t),Va(e));Wa.manual=(t,e)=>YR(Ga(t),Va(e));Wa.nativeSync=(t,e)=>KR(Ga(t),Va(e));Wa.manualSync=(t,e)=>XR(Ga(t),Va(e));QR.exports=Wa});var oT=m((dwe,iT)=>{"use strict";var Xr=require("fs"),ds=require("path"),JK=Xr.lchown?"lchown":"chown",ZK=Xr.lchownSync?"lchownSync":"chownSync",ZR=Xr.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),eT=(t,e,r)=>{try{return Xr[ZK](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},e7=(t,e,r)=>{try{return Xr.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},t7=ZR?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):Xr.chown(t,e,r,n)}:(t,e,r,n)=>n,yw=ZR?(t,e,r)=>{try{return eT(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;e7(t,e,r)}}:(t,e,r)=>eT(t,e,r),r7=process.version,tT=(t,e,r)=>Xr.readdir(t,e,r),n7=(t,e)=>Xr.readdirSync(t,e);/^v4\./.test(r7)&&(tT=(t,e,r)=>Xr.readdir(t,r));var Fp=(t,e,r,n)=>{Xr[JK](t,e,r,t7(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},rT=(t,e,r,n,i)=>{if(typeof e=="string")return Xr.lstat(ds.resolve(t,e),(o,s)=>{if(o)return i(o.code!=="ENOENT"?o:null);s.name=e,rT(t,s,r,n,i)});if(e.isDirectory())Cw(ds.resolve(t,e.name),r,n,o=>{if(o)return i(o);let s=ds.resolve(t,e.name);Fp(s,r,n,i)});else{let o=ds.resolve(t,e.name);Fp(o,r,n,i)}},Cw=(t,e,r,n)=>{tT(t,{withFileTypes:!0},(i,o)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!o.length)return Fp(t,e,r,n);let s=o.length,a=null,c=u=>{if(!a){if(u)return n(a=u);if(--s==0)return Fp(t,e,r,n)}};o.forEach(u=>rT(t,u,e,r,c))})},i7=(t,e,r,n)=>{if(typeof e=="string")try{let i=Xr.lstatSync(ds.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&nT(ds.resolve(t,e.name),r,n),yw(ds.resolve(t,e.name),r,n)},nT=(t,e,r)=>{let n;try{n=n7(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return yw(t,e,r);throw i}return n&&n.length&&n.forEach(i=>i7(t,i,e,r)),yw(t,e,r)};iT.exports=Cw;Cw.sync=nT});var uT=m((pwe,Ew)=>{"use strict";var sT=JR(),Qr=require("fs"),qp=require("path"),aT=oT(),ww=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},ul=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}};Ew.exports=(t,e,r)=>{let n=e.umask,i=e.mode|448,o=(i&n)!=0,s=e.uid,a=e.gid,c=typeof s=="number"&&typeof a=="number"&&(s!==e.processUid||a!==e.processGid),u=e.preserve,l=e.unlink,f=e.cache,d=e.cwd,p=(v,C)=>{v?r(v):(f.set(t,!0),C&&c?aT(C,s,a,y=>p(y)):o?Qr.chmod(t,i,r):r())};if(f&&f.get(t)===!0)return p();if(t===d)return Qr.stat(t,(v,C)=>{(v||!C.isDirectory())&&(v=new ul(t,v&&v.code||"ENOTDIR")),p(v)});if(u)return sT(t,{mode:i}).then(v=>p(null,v),p);let g=qp.relative(d,t).split(/\/|\\/);Mp(d,g,i,f,l,d,null,p)};var Mp=(t,e,r,n,i,o,s,a)=>{if(!e.length)return a(null,s);let c=e.shift(),u=t+"/"+c;if(n.get(u))return Mp(u,e,r,n,i,o,s,a);Qr.mkdir(u,r,cT(u,e,r,n,i,o,s,a))},cT=(t,e,r,n,i,o,s,a)=>c=>{if(c){if(c.path&&qp.dirname(c.path)===o&&(c.code==="ENOTDIR"||c.code==="ENOENT"))return a(new ul(o,c.code));Qr.lstat(t,(u,l)=>{if(u)a(u);else if(l.isDirectory())Mp(t,e,r,n,i,o,s,a);else if(i)Qr.unlink(t,f=>{if(f)return a(f);Qr.mkdir(t,r,cT(t,e,r,n,i,o,s,a))});else{if(l.isSymbolicLink())return a(new ww(t,t+"/"+e.join("/")));a(c)}})}else s=s||t,Mp(t,e,r,n,i,o,s,a)};Ew.exports.sync=(t,e)=>{let r=e.umask,n=e.mode|448,i=(n&r)!=0,o=e.uid,s=e.gid,a=typeof o=="number"&&typeof s=="number"&&(o!==e.processUid||s!==e.processGid),c=e.preserve,u=e.unlink,l=e.cache,f=e.cwd,d=v=>{l.set(t,!0),v&&a&&aT.sync(v,o,s),i&&Qr.chmodSync(t,n)};if(l&&l.get(t)===!0)return d();if(t===f){let v=!1,C="ENOTDIR";try{v=Qr.statSync(t).isDirectory()}catch(y){C=y.code}finally{if(!v)throw new ul(t,C)}d();return}if(c)return d(sT.sync(t,n));let h=qp.relative(f,t).split(/\/|\\/),g=null;for(let v=h.shift(),C=f;v&&(C+="/"+v);v=h.shift())if(!l.get(C))try{Qr.mkdirSync(C,n),g=g||C,l.set(C,!0)}catch(y){if(y.path&&qp.dirname(y.path)===f&&(y.code==="ENOTDIR"||y.code==="ENOENT"))return new ul(f,y.code);let E=Qr.lstatSync(C);if(E.isDirectory()){l.set(C,!0);continue}else if(u){Qr.unlinkSync(C),Qr.mkdirSync(C,n),g=g||C,l.set(C,!0);continue}else if(E.isSymbolicLink())return new ww(C,C+"/"+h.join("/"))}return d(g)}});var dT=m((hwe,fT)=>{var lT=require("assert");fT.exports=()=>{let t=new Map,e=new Map,{join:r}=require("path"),n=l=>r(l).split(/[\\/]/).slice(0,-1).reduce((f,d)=>f.length?f.concat(r(f[f.length-1],d)):[d],[]),i=new Set,o=l=>{let f=e.get(l);if(!f)throw new Error("function does not have any path reservations");return{paths:f.paths.map(d=>t.get(d)),dirs:[...f.dirs].map(d=>t.get(d))}},s=l=>{let{paths:f,dirs:d}=o(l);return f.every(p=>p[0]===l)&&d.every(p=>p[0]instanceof Set&&p[0].has(l))},a=l=>i.has(l)||!s(l)?!1:(i.add(l),l(()=>c(l)),!0),c=l=>{if(!i.has(l))return!1;let{paths:f,dirs:d}=e.get(l),p=new Set;return f.forEach(h=>{let g=t.get(h);lT.equal(g[0],l),g.length===1?t.delete(h):(g.shift(),typeof g[0]=="function"?p.add(g[0]):g[0].forEach(v=>p.add(v)))}),d.forEach(h=>{let g=t.get(h);lT(g[0]instanceof Set),g[0].size===1&&g.length===1?t.delete(h):g[0].size===1?(g.shift(),p.add(g[0])):g[0].delete(l)}),i.delete(l),p.forEach(h=>a(h)),!0};return{check:s,reserve:(l,f)=>{let d=new Set(l.map(p=>n(p)).reduce((p,h)=>p.concat(h)));return e.set(f,{dirs:d,paths:l}),l.forEach(p=>{let h=t.get(p);h?h.push(f):t.set(p,[f])}),d.forEach(p=>{let h=t.get(p);h?h[h.length-1]instanceof Set?h[h.length-1].add(f):h.push(new Set([f])):t.set(p,[new Set([f])])}),a(f)}}}});var mT=m((mwe,hT)=>{var o7=process.env.__FAKE_PLATFORM__||process.platform,s7=o7==="win32",a7=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:c7,O_TRUNC:u7,O_WRONLY:l7,UV_FS_O_FILEMAP:pT=0}=a7.constants,f7=s7&&!!pT,d7=512*1024,p7=pT|u7|c7|l7;hT.exports=f7?t=>t<d7?p7:"w":()=>"w"});var Rw=m((gwe,RT)=>{"use strict";var h7=require("assert"),m7=Op(),Ae=require("fs"),g7=Ha(),hi=require("path"),gT=uT(),vT=qC(),v7=dT(),yT=Symbol("onEntry"),_w=Symbol("checkFs"),CT=Symbol("checkFs2"),xw=Symbol("isReusable"),mi=Symbol("makeFs"),bw=Symbol("file"),Sw=Symbol("directory"),$p=Symbol("link"),wT=Symbol("symlink"),ET=Symbol("hardlink"),_T=Symbol("unsupported"),xT=Symbol("checkPath"),za=Symbol("mkdir"),ur=Symbol("onError"),Up=Symbol("pending"),bT=Symbol("pend"),Ka=Symbol("unpend"),Pw=Symbol("ended"),Iw=Symbol("maybeClose"),Aw=Symbol("skip"),ll=Symbol("doChown"),fl=Symbol("uid"),dl=Symbol("gid"),ST=require("crypto"),PT=mT(),jp=()=>{throw new Error("sync function called cb somehow?!?")},y7=(t,e)=>{if(process.platform!=="win32")return Ae.unlink(t,e);let r=t+".DELETE."+ST.randomBytes(16).toString("hex");Ae.rename(t,r,n=>{if(n)return e(n);Ae.unlink(r,e)})},C7=t=>{if(process.platform!=="win32")return Ae.unlinkSync(t);let e=t+".DELETE."+ST.randomBytes(16).toString("hex");Ae.renameSync(t,e),Ae.unlinkSync(e)},IT=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,Hp=class extends m7{constructor(e){if(e||(e={}),e.ondone=r=>{this[Pw]=!0,this[Iw]()},super(e),this.reservations=v7(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[Up]=0,this[Pw]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||process.platform==="win32",this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=hi.resolve(e.cwd||process.cwd()),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[yT](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[Iw](){this[Pw]&&this[Up]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[xT](e){if(this.strip){let r=e.path.split(/\/|\\/);if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=e.linkpath.split(/\/|\\/);n.length>=this.strip&&(e.linkpath=n.slice(this.strip).join("/"))}}if(!this.preservePaths){let r=e.path;if(r.match(/(^|\/|\\)\.\.(\\|\/|$)/))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;if(hi.win32.isAbsolute(r)){let n=hi.win32.parse(r);e.path=r.substr(n.root.length);let i=n.root;this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r})}}if(this.win32){let r=hi.win32.parse(e.path);e.path=r.root===""?vT.encode(e.path):r.root+vT.encode(e.path.substr(r.root.length))}return hi.isAbsolute(e.path)?e.absolute=e.path:e.absolute=hi.resolve(this.cwd,e.path),!0}[yT](e){if(!this[xT](e))return e.resume();switch(h7.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[_w](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[_T](e)}}[ur](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[Ka](),r.resume())}[za](e,r,n){gT(e,{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[ll](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[fl](e){return IT(this.uid,e.uid,this.processUid)}[dl](e){return IT(this.gid,e.gid,this.processGid)}[bw](e,r){let n=e.mode&4095||this.fmode,i=new g7.WriteStream(e.absolute,{flags:PT(e.size),mode:n,autoClose:!1});i.on("error",c=>this[ur](c,e));let o=1,s=c=>{if(c)return this[ur](c,e);--o==0&&Ae.close(i.fd,u=>{r(),u?this[ur](u,e):this[Ka]()})};i.on("finish",c=>{let u=e.absolute,l=i.fd;if(e.mtime&&!this.noMtime){o++;let f=e.atime||new Date,d=e.mtime;Ae.futimes(l,f,d,p=>p?Ae.utimes(u,f,d,h=>s(h&&p)):s())}if(this[ll](e)){o++;let f=this[fl](e),d=this[dl](e);Ae.fchown(l,f,d,p=>p?Ae.chown(u,f,d,h=>s(h&&p)):s())}s()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>this[ur](c,e)),e.pipe(a)),a.pipe(i)}[Sw](e,r){let n=e.mode&4095||this.dmode;this[za](e.absolute,n,i=>{if(i)return r(),this[ur](i,e);let o=1,s=a=>{--o==0&&(r(),this[Ka](),e.resume())};e.mtime&&!this.noMtime&&(o++,Ae.utimes(e.absolute,e.atime||new Date,e.mtime,s)),this[ll](e)&&(o++,Ae.chown(e.absolute,this[fl](e),this[dl](e),s)),s()})}[_T](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[wT](e,r){this[$p](e,e.linkpath,"symlink",r)}[ET](e,r){this[$p](e,hi.resolve(this.cwd,e.linkpath),"link",r)}[bT](){this[Up]++}[Ka](){this[Up]--,this[Iw]()}[Aw](e){this[Ka](),e.resume()}[xw](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&process.platform!=="win32"}[_w](e){this[bT]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[CT](e,n))}[CT](e,r){this[za](hi.dirname(e.absolute),this.dmode,n=>{if(n)return r(),this[ur](n,e);Ae.lstat(e.absolute,(i,o)=>{o&&(this.keep||this.newer&&o.mtime>e.mtime)?(this[Aw](e),r()):i||this[xw](e,o)?this[mi](null,e,r):o.isDirectory()?e.type==="Directory"?!this.noChmod&&(!e.mode||(o.mode&4095)===e.mode)?this[mi](null,e,r):Ae.chmod(e.absolute,e.mode,s=>this[mi](s,e,r)):Ae.rmdir(e.absolute,s=>this[mi](s,e,r)):y7(e.absolute,s=>this[mi](s,e,r))})})}[mi](e,r,n){if(e)return this[ur](e,r);switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[bw](r,n);case"Link":return this[ET](r,n);case"SymbolicLink":return this[wT](r,n);case"Directory":case"GNUDumpDir":return this[Sw](r,n)}}[$p](e,r,n,i){Ae[n](r,e.absolute,o=>{if(o)return this[ur](o,e);i(),this[Ka](),e.resume()})}},AT=class extends Hp{[_w](e){let r=this[za](hi.dirname(e.absolute),this.dmode,jp);if(r)return this[ur](r,e);try{let n=Ae.lstatSync(e.absolute);if(this.keep||this.newer&&n.mtime>e.mtime)return this[Aw](e);if(this[xw](e,n))return this[mi](null,e,jp);try{return n.isDirectory()?e.type==="Directory"?!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode&&Ae.chmodSync(e.absolute,e.mode):Ae.rmdirSync(e.absolute):C7(e.absolute),this[mi](null,e,jp)}catch(i){return this[ur](i,e)}}catch(n){return this[mi](null,e,jp)}}[bw](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{Ae.closeSync(o)}catch(u){c=u}(a||c)&&this[ur](a||c,e)},o;try{o=Ae.openSync(e.absolute,PT(e.size),n)}catch(a){return i(a)}let s=this.transform&&this.transform(e)||e;s!==e&&(s.on("error",a=>this[ur](a,e)),e.pipe(s)),s.on("data",a=>{try{Ae.writeSync(o,a,0,a.length)}catch(c){i(c)}}),s.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let u=e.atime||new Date,l=e.mtime;try{Ae.futimesSync(o,u,l)}catch(f){try{Ae.utimesSync(e.absolute,u,l)}catch(d){c=f}}}if(this[ll](e)){let u=this[fl](e),l=this[dl](e);try{Ae.fchownSync(o,u,l)}catch(f){try{Ae.chownSync(e.absolute,u,l)}catch(d){c=c||f}}}i(c)})}[Sw](e,r){let n=e.mode&4095||this.dmode,i=this[za](e.absolute,n);if(i)return this[ur](i,e);if(e.mtime&&!this.noMtime)try{Ae.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch(o){}if(this[ll](e))try{Ae.chownSync(e.absolute,this[fl](e),this[dl](e))}catch(o){}e.resume()}[za](e,r){try{return gT.sync(e,{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[$p](e,r,n,i){try{Ae[n+"Sync"](r,e.absolute),e.resume()}catch(o){return this[ur](o,e)}}};Hp.Sync=AT;RT.exports=Hp});var NT=m((vwe,OT)=>{"use strict";var w7=Aa(),Bp=Rw(),TT=require("fs"),kT=Ha(),DT=require("path");OT.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=w7(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&E7(n,e),n.file&&n.sync?_7(n):n.file?x7(n,r):n.sync?b7(n):S7(n)};var E7=(t,e)=>{let r=new Map(e.map(o=>[o.replace(/\/+$/,""),!0])),n=t.filter,i=(o,s)=>{let a=s||DT.parse(o).root||".",c=o===a?!1:r.has(o)?r.get(o):i(DT.dirname(o),a);return r.set(o,c),c};t.filter=n?(o,s)=>n(o,s)&&i(o.replace(/\/+$/,"")):o=>i(o.replace(/\/+$/,""))},_7=t=>{let e=new Bp.Sync(t),r=t.file,n=TT.statSync(r),i=t.maxReadSize||16*1024*1024;new kT.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},x7=(t,e)=>{let r=new Bp(t),n=t.maxReadSize||16*1024*1024,i=t.file,o=new Promise((s,a)=>{r.on("error",a),r.on("close",s),TT.stat(i,(c,u)=>{if(c)a(c);else{let l=new kT.ReadStream(i,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return e?o.then(e,e):o},b7=t=>new Bp.Sync(t),S7=t=>new Bp(t)});var Vp=m(Rt=>{"use strict";Rt.c=Rt.create=yR();Rt.r=Rt.replace=pw();Rt.t=Rt.list=Np();Rt.u=Rt.update=IR();Rt.x=Rt.extract=NT();Rt.Pack=Ep();Rt.Unpack=Rw();Rt.Parse=Op();Rt.ReadEntry=ip();Rt.WriteEntry=VC();Rt.Header=Da();Rt.Pax=ap();Rt.types=kC()});var Ow=m((jwe,WT)=>{WT.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var Qp=m((Hwe,KT)=>{"use strict";var zT=Ow();KT.exports=function(e,r){if(!e)return function(i,o){return i?zT(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return zT(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var XT=m((Bwe,YT)=>{"use strict";var k7=Qp();YT.exports=function(t){return k7(Object.keys(t))}});var Nw=m((Vwe,QT)=>{"use strict";var D7=Ow();QT.exports=function(e,r){return function(n,i){if(n)return D7(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var ZT=m((Gwe,JT)=>{"use strict";JT.exports=function(e){var r=0;return e=e||Infinity,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var tk=m((Wwe,ek)=>{"use strict";ek.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var nk=m((zwe,rk)=>{"use strict";rk.exports=function(){return function(e,r){r(!0)}}});var ok=m((Kwe,ik)=>{"use strict";ik.exports=function(e){return function(r,n){n(e)}}});var ak=m((Ywe,sk)=>{"use strict";sk.exports={keys:XT(),once:Nw(),values:Qp(),count:ZT(),infinite:tk(),empty:nk(),error:ok()}});var Xa=m((Xwe,ck)=>{"use strict";ck.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,u=!1;c;)if(u=!1,n(null,function(l,f){if(u=!0,l=l||i){if(c=!1,r)r(l===!0?null:l);else if(l&&l!==!0)throw l}else e&&e(f)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!u){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var lk=m((Qwe,uk)=>{"use strict";var O7=Xa();uk.exports=function(e){return O7(null,e)}});var dk=m((Jwe,fk)=>{"use strict";var N7=Xa();fk.exports=function(e){return N7(function(r){console.log(r)},e)}});var Qa=m((Zwe,pk)=>{pk.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var gk=m((eEe,mk)=>{"use strict";function hk(t){return t}var L7=Qa(),F7=Xa();mk.exports=function(e,r){var n=!1;return r?e=L7(e)||hk:(r=e,e=hk),F7(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var Jp=m((tEe,vk)=>{"use strict";var q7=Xa();vk.exports=function(e,r,n){n||(n=r,r=null);var i=q7(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var Ck=m((rEe,yk)=>{"use strict";var M7=Jp();yk.exports=function(e){return M7(function(r,n){return r.push(n),r},[],e)}});var Ek=m((nEe,wk)=>{"use strict";var $7=Jp();wk.exports=function(e){return $7(function(r,n){return r+n},"",e)}});var xk=m((iEe,_k)=>{"use strict";_k.exports={drain:Xa(),onEnd:lk(),log:dk(),find:gk(),reduce:Jp(),collect:Ck(),concat:Ek()}});var Sk=m((oEe,bk)=>{"use strict";function U7(t){return t}var j7=Qa();bk.exports=function(e){return e?(e=j7(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):U7}});var Ik=m((sEe,Pk)=>{"use strict";function H7(t){return t}var B7=Qa();Pk.exports=function(e){if(!e)return H7;e=B7(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(u){r?n=c:c(a)}):o(a,function(u){c(a)})):o(null,function(u,l){u?c(u):i?c(i):(r=!0,e(l,function(f,d){r=!1,i?(c(i),n&&n(i)):f?s(f,c):c(null,d)}))})}}}});var Lw=m((aEe,Ak)=>{var V7=Qa();function G7(t){return t}Ak.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:V7(e)||G7}});var Zp=m((cEe,Rk)=>{"use strict";var W7=Lw();Rk.exports=function(e){return e=W7(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,u){if(!c&&!e(u))return s?a=!0:n(c,o);o(c,u)}),s=!1}}}});var kk=m((uEe,Tk)=>{"use strict";var z7=Lw(),K7=Zp();Tk.exports=function(e){return e=z7(e),K7(function(r){return!e(r)})}});var Ok=m((lEe,Dk)=>{"use strict";Dk.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,u){c?i(c):e&&e(u),a(c,u)})}}}});var Lk=m((fEe,Nk)=>{"use strict";Nk.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(u){n=!1,c(u||!0)})}return function(c,u){i&&!c?n?a(u):u(i):(i=c)?s(i,u):s(null,function(l,f){(i=i||l)?u(i):e(f)?u(null,f):(i=!0,n?u(null,f):a(u))})}}}});var Fw=m((dEe,Fk)=>{"use strict";function Y7(t){return t}var X7=Qa(),Q7=Zp();Fk.exports=function(e,r){e=X7(e)||Y7;var n={};return Q7(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var Mk=m((pEe,qk)=>{"use strict";var J7=Fw();qk.exports=function(e){return J7(e,!0)}});var Uk=m((hEe,$k)=>{"use strict";var Z7=Qp(),eY=Nw();$k.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(u){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=Z7(c):typeof c!="function"&&(c=eY(c)),r=c,o()})}}}}});var Hk=m((mEe,jk)=>{"use strict";jk.exports={map:Sk(),asyncMap:Ik(),filter:Zp(),filterNot:kk(),through:Ok(),take:Lk(),unique:Fw(),nonUnique:Mk(),flatten:Uk()}});var qw=m((gEe,Bk)=>{"use strict";Bk.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var eh=m((gs,zk)=>{"use strict";var Vk=ak(),Gk=xk(),Wk=Hk();gs=zk.exports=qw();gs.pull=gs;for(var so in Vk)gs[so]=Vk[so];for(var so in Wk)gs[so]=Wk[so];for(var so in Gk)gs[so]=Gk[so]});var zw=m((BEe,pD)=>{var HEe=pD.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var mD=m((VEe,hD)=>{var pY=zw();hD.exports=function(t,e){return function(r){var n=[],i,o;function s(u){n.push(u)}t=t||function(u){this.queue(u)},e=e||function(){this.queue(null)};var a={emit:function(u,l){u=="data"&&s(l),u=="end"&&(i=!0,s(null)),u=="error"&&(o=l)},queue:s},c;return function(u,l){if(i=i||u,u)return r(u,function(){if(c){var f=c;c=null,f(u)}l(u)});c=l,pY(function f(d){if(!!c)if(l=c,o)c=null,l(o);else if(n.length){var p=n.shift();c=null,l(p===null,p)}else r(i,function(h,g){if(h&&h!==!0)return o=h,d();if(i=i||h)e.call(a);else if(g!==null&&(t.call(a,g),o||i))return r(o||i,function(){c=null,l(o||i)});d(f)})})}}}});var vD=m((GEe,gD)=>{gD.exports=function(){var t=[],e=0;function r(){return t.reduce(function(n,i){return n+i.length},0)}return{length:e,data:this,add:function(n){if(!Buffer.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=e=e+n.length,t.push(n),this},has:function(n){return n==null?e>0:e>=n},get:function(n){var i;if(n==null||n===e){e=0;var o=t;return t=[],o.length==1?o[0]:Buffer.concat(o)}else if(t.length>1&&n<=(i=t[0].length)){var s=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),e-=n,s}else if(n<e){for(var a=[],c=0;c+t[0].length<n;){var u=t.shift();c+=u.length,a.push(u)}return c<n&&(a.push(t[0].slice(0,n-c)),t[0]=t[0].slice(n-c,t[0].length),this.length=e=e-n),Buffer.concat(a)}else throw new Error("could not get "+n+" bytes")}}}});var ED=m((WEe,wD)=>{"use strict";var hY=vD();function mY(t){return Number.isFinite(t)}function yD(t){return typeof t=="function"}function CD(t,e){return e?function(r,n){var i=setTimeout(function(){t(new Error("pull-reader: read exceeded timeout"),n)},e);t(r,function(o,s){clearTimeout(i),n(o,s)})}:t}wD.exports=function(t){var e=[],r,n,i=!1,o=hY(),s,a,c;function u(){for(;e.length;)if(e[0].length==null&&o.has(1))e.shift().cb(null,o.get());else if(o.has(e[0].length)){var d=e.shift();d.cb(null,o.get(d.length))}else if(s==!0&&e[0].length&&o.length<e[0].length){var p="stream ended with:"+o.length+" but wanted:"+e[0].length;e.shift().cb(new Error(p))}else if(s)e.shift().cb(s);else return!!e.length;return e.length||!o.has(1)||c}function l(){var d=u();d&&!i&&r&&!i&&!a&&(i=!0,n(null,function(p,h){if(i=!1,p)return s=p,u();o.add(h),l()}))}function f(d){if(c){for(;e.length;)e.shift().cb(c);return cb&&cb(c)}n=CD(d,t),r=d,l()}return f.abort=function(d,p){c=d||!0,r?(i=!0,r(c,function(){for(;e.length;)e.shift().cb(c);p&&p(c)})):p()},f.read=function(d,p,h){if(yD(p)&&(h=p,p=t),yD(h))e.push({length:mY(d)?d:null,cb:h}),l();else return a=!0,function(g,v){if(i||o.has(1)){if(g)return r(g,v);e.push({length:null,cb:v}),l()}else CD(r,p)(g,function(C,y){v(C,y)})}},f}});var OD=m((ys,DD)=>{var gY=mD(),vY=ED(),_D=0,xD=1,bD=2,SD="GOODBYE",yY=Buffer.isBuffer;function PD(t){return typeof t=="string"}function ID(t){var e=Buffer.alloc(9),r=0,n=t.value!==void 0?t.value:t.end;return PD(t)&&t===SD?(e.fill(0),[e,null]):(PD(n)?(r=xD,n=Buffer.from(n,"utf-8")):yY(n)?r=_D:(r=bD,n=Buffer.from(JSON.stringify(n),"utf-8")),r=t.stream<<3|t.end<<2|r,e[0]=r,e.writeUInt32BE(n.length,1),e.writeInt32BE(t.req||0,5),[e,n])}function AD(t){if(t.length!=9)throw new Error("expected header to be 9 bytes long");var e=t[0],r=t.readUInt32BE(1),n=t.readInt32BE(5);return{req:n,stream:!!(e&8),end:!!(e&4),value:null,length:r,type:e&3}}function RD(t,e){if(t.length!==e.length)throw new Error("incorrect length, expected:"+e.length+" found:"+t.length);if(_D===e.type)e.value=t;else if(xD===e.type)e.value=t.toString();else if(bD===e.type)e.value=JSON.parse(t.toString());else throw new Error("unknown message type");return e}function TD(){return gY(function(t){var e=ID(t);this.queue(e[0]),e[1]!==null&&this.queue(e[1])})}function kD(){var t=vY(),e=!1;return function(r){return t(r),function(n,i){if(e)return i(!0);if(n)return t.abort(n,i);t.read(9,function(o,s){if(o)return i(o);var a=AD(s);if(a.length===0)return e=!0,i(null,SD);t.read(a.length,function(c,u){if(c)return i(c);try{RD(u,a)}catch(l){return i(l)}i(null,a)})})}}}ys=DD.exports=function(t){return{source:TD()(t.source),sink:function(e){return t.sink(kD()(e))}}};ys.encodePair=ID;ys.decodeHead=AD;ys.decodeBody=RD;ys.encode=TD;ys.decode=kD});var FD=m((zEe,LD)=>{function Il(t){return t&&(t===!0?!0:{message:t.message,name:t.name,stack:t.stack})}LD.exports=function(t){return new Zr(t)};function Zr(t){this.ended=!1,this.opts=t,this._req_counter=1,this._requests={},this._instreams={},this._outstreams={},this._closecbs=[],this._closing=!1,this._closed=!1,t.close&&this._closecbs.push(t.close)}Zr.prototype.message=function(t){this.read({req:0,stream:!1,end:!1,value:t})};Zr.prototype.request=function(t,e){if(this._closing)return e(new Error("parent stream is closing"));var r=this._req_counter++,n=this;this._requests[r]=function(i,o){delete n._requests[r],e(i,o),n._maybedone(i)},this.read({req:r,stream:!1,end:!1,value:t})};Zr.prototype.stream=function(){if(this._closing)throw new Error("parent stream is closing");var t=this._req_counter++,e=this;return this._outstreams[t]=new Al(t,this,function(){delete e._outstreams[t]}),this._outstreams[t]};Zr.prototype.close=function(t){if(!t)throw new Error("packet-stream.close *must* have callback");if(this._closed)return t();this._closecbs.push(t),this._closing=!0,this._maybedone()};Zr.prototype.destroy=function(t){t=t||Il(t),this.ended=t,this._closing=!0;var e=t===!0?new Error("unexpected end of parent stream"):t,r=0;for(var n in this._requests)r++,this._requests[n](e);for(var n in this._instreams)r++,this._instreams[n].writeEnd=!0,this._instreams[n].destroy(e);for(var n in this._outstreams)r++,this._outstreams[n].writeEnd=!0,this._outstreams[n].destroy(e);r===0&&t===!0&&(e=null),this._maybedone(e)};Zr.prototype._maybedone=function(t){this._closed||!this._closing||Object.keys(this._requests).length!==0||Object.keys(this._instreams).length!==0||Object.keys(this._outstreams).length!==0||(this._closed=!0,this._closecbs.forEach(function(e){e(t)}),this.read(null,t||!0),this.opts=null,this._closecbs.length=0,this.read=ND)};function ND(t){console.error("packet-stream asked to read after closed",t)}Zr.prototype.read=function(t){console.error("please overwrite read method to do IO",t)};Zr.prototype.write=function(t,e){this.ended||(e?this.destroy(e):t.req&&!t.stream?this._onrequest(t):t.req&&t.stream?this._onstream(t):this._onmessage(t))};Zr.prototype._onmessage=function(t){this.opts&&typeof this.opts.message=="function"&&this.opts.message(t.value)};Zr.prototype._onrequest=function(t){var e=t.req*-1;if(t.req<0)typeof this._requests[e]=="function"&&this._requests[e](t.end?t.value:null,t.end?null:t.value);else if(this.opts&&typeof this.opts.request=="function"){var r=!1,n=this;this.opts.request(t.value,function(o,s){if(r)throw new Error("cb called twice from local api");r=!0,o?n.read({value:Il(o),end:!0,req:e}):n.read({value:s,end:!1,req:e}),n._maybedone()})}else{if(this.ended){var i=this.ended===!0?new Error("unexpected end of parent stream"):this.ended;this.read({value:Il(i),end:!0,stream:!1,req:e})}else this.read({value:{message:"Unable to handle requests",name:"NO_REQUEST_HANDLER",stack:null},end:!0,stream:!1,req:e});this._maybedone()}};Zr.prototype._onstream=function(t){if(t.req<0){var e=t.req*-1,r=this._outstreams[e];if(!r)return console.error("no stream for incoming msg",t);t.end?(r.writeEnd&&delete this._outstreams[e],r.readEnd=!0,r.read(null,t.value),this._maybedone()):r.read(t.value)}else{var e=t.req,n=this._instreams[e];if(!n){var i=this;n=this._instreams[e]=new Al(e*-1,this,function(){delete i._instreams[e]}),this.opts&&typeof this.opts.stream=="function"&&this.opts.stream(n)}t.end?(n.writeEnd&&delete this._instreams[e],n.readEnd=!0,n.read&&n.read(null,t.value),this._maybedone()):n.read?n.read(t.value):console.error("no .read for stream:",n.id,"dropped:",t)}};function Al(t,e,r){this.id=t,this.read=null,this.writeEnd=null,this.readEnd=null,this._ps=e,this._remove=r,this._seq_counter=1}Al.prototype.write=function(t,e){if(e){this.writeEnd=e;var r=this._ps;r&&(r.read({req:this.id,stream:!0,end:!0,value:Il(e)}),this.readEnd&&this.destroy(e),r._maybedone(e))}else this._ps&&this._ps.read({req:this.id,stream:!0,end:!1,value:t})};Al.prototype.end=function(t){this.write(null,Il(t||!0))};Al.prototype.destroy=function(t){if(this.writeEnd){if(!this.readEnd){this.readEnd=!0;try{this.read&&this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}}else{if(this.writeEnd=!0,!this.readEnd){this.readEnd=!0;try{this.read(null,t)}catch(e){console.error("Exception thrown by PacketStream substream end handler",e),console.error(e.stack)}}this.write(null,t)}this._ps&&(this._remove(),this._remove=null,this.read=ND,this._ps=null)}});var MD=m((KEe,Rl)=>{"use strict";var CY=eh();function wY(t){let e=!1;return(r,n)=>{e||(e=!0,t(r,n))}}function Kw(t,e){let r=[],n=!1,i,o,s=wY((a,c)=>{e&&e(a,c),t=null,e=null,i=null,o&&o(a||!0,()=>{})});return t.read=function(a,c){if(n=n||c,i){let u=i;i=null,u(n,a)}else n||r.push(a);n&&s(n!==!0?n:null)},{source(a,c){a?(t&&t.write(null,a),c(a),s(a!==!0?a:null)):r.length?c(null,r.shift()):n?c(n):i=c},sink(a){if(n)return o=null,a(n,()=>{});o=a,CY.drain(c=>{if(n)return!1;t.write(c)},c=>{t&&!t.writeEnd&&t.write(null,c||!0),s&&s(c)})(a)}}}function qD(t,e){return Kw(t,r=>{t.writeEnd||t.write(null,r||!0),e&&e(r)})}function EY(t){return qD(t).source}function _Y(t,e){return qD(t,e).sink}Rl.exports=Kw;Rl.exports.source=EY;Rl.exports.sink=_Y;Rl.exports.duplex=Kw});var UD=m((YEe,$D)=>{$D.exports=function(e){var r,n,i;function o(s){return function(a,c){s(a,function(u,l){if(u&&!i)return i=!0,c(null,e);u&&r?c(u):u?n=c:c(null,l)})}}return o.end=function(){return r=!0,n&&n(r),o},o}});var Yw=m((XEe,jD)=>{jD.exports=function(e,r,n){e(r),n&&n(r===!0?null:r)}});var lh=m((QEe,BD)=>{"use strict";var HD=Yw();BD.exports=function(e,r){if(!e)return function(i,o){return i?HD(o,i,r):o(!0)};Array.isArray(e)||(e=Object.keys(e).map(function(i){return e[i]}));var n=0;return function(i,o){if(i)return HD(o,i,r);n>=e.length?o(!0):o(null,e[n++])}}});var GD=m((JEe,VD)=>{"use strict";var xY=lh();VD.exports=function(t){return xY(Object.keys(t))}});var Xw=m((ZEe,WD)=>{"use strict";var bY=Yw();WD.exports=function(e,r){return function(n,i){if(n)return bY(i,n,r);if(e!=null){var o=e;e=null,i(null,o)}else i(!0)}}});var KD=m((e_e,zD)=>{"use strict";zD.exports=function(e){var r=0;return e=e||Infinity,function(n,i){if(n)return i&&i(n);if(r>e)return i(!0);i(null,r++)}}});var XD=m((t_e,YD)=>{"use strict";YD.exports=function(e){return e=e||Math.random,function(r,n){return r?n&&n(r):n(null,e())}}});var JD=m((r_e,QD)=>{"use strict";QD.exports=function(){return function(e,r){r(!0)}}});var eO=m((n_e,ZD)=>{"use strict";ZD.exports=function(e){return function(r,n){n(e)}}});var rO=m((i_e,tO)=>{"use strict";tO.exports={keys:GD(),once:Xw(),values:lh(),count:KD(),infinite:XD(),empty:JD(),error:eO()}});var tc=m((o_e,nO)=>{"use strict";nO.exports=function(e,r){var n,i;function o(s){if(n=s,i)return o.abort();(function a(){for(var c=!0,u=!1;c;)if(u=!1,n(null,function(l,f){if(u=!0,l=l||i){if(c=!1,r)r(l===!0?null:l);else if(l&&l!==!0)throw l}else e&&e(f)===!1||i?(c=!1,n(i||!0,r||function(){})):c||a()}),!u){c=!1;return}})()}return o.abort=function(s,a){if(typeof s=="function"&&(a=s,s=!0),i=s||!0,n)return n(i,a||function(){})},o}});var oO=m((s_e,iO)=>{"use strict";var SY=tc();iO.exports=function(e){return SY(null,e)}});var aO=m((a_e,sO)=>{"use strict";var PY=tc();sO.exports=function(e){return PY(function(r){console.log(r)},e)}});var rc=m((c_e,cO)=>{cO.exports=function(e){return e&&(typeof e=="string"?function(r){return r[e]}:typeof e=="object"&&typeof e.exec=="function"?function(r){var n=e.exec(r);return n&&n[0]}:e)}});var fO=m((u_e,lO)=>{"use strict";function uO(t){return t}var IY=rc(),AY=tc();lO.exports=function(e,r){var n=!1;return r?e=IY(e)||uO:(r=e,e=uO),AY(function(i){if(e(i))return n=!0,r(null,i),!1},function(i){n||r(i===!0?null:i,null)})}});var fh=m((l_e,dO)=>{"use strict";var RY=tc();dO.exports=function(e,r,n){n||(n=r,r=null);var i=RY(function(o){r=e(r,o)},function(o){n(o,r)});return arguments.length===2?function(o){o(null,function(s,a){if(s)return n(s===!0?null:s);r=a,i(o)})}:i}});var hO=m((f_e,pO)=>{"use strict";var TY=fh();pO.exports=function(e){return TY(function(r,n){return r.push(n),r},[],e)}});var gO=m((d_e,mO)=>{"use strict";var kY=fh();mO.exports=function(e){return kY(function(r,n){return r+n},"",e)}});var yO=m((p_e,vO)=>{"use strict";vO.exports={drain:tc(),onEnd:oO(),log:aO(),find:fO(),reduce:fh(),collect:hO(),concat:gO()}});var wO=m((h_e,CO)=>{"use strict";function DY(t){return t}var OY=rc();CO.exports=function(e){return e?(e=OY(e),function(r){return function(n,i){r(n,function(o,s){try{s=o?null:e(s)}catch(a){return r(a,function(){return i(a)})}i(o,s)})}}):DY}});var _O=m((m_e,EO)=>{"use strict";function NY(t){return t}var LY=rc();EO.exports=function(e){if(!e)return NY;e=LY(e);var r=!1,n,i;return function(o){return function s(a,c){if(i)return c(i);a?(i=a,r?o(a,function(){r?n=c:c(a)}):o(a,c)):o(null,function(u,l){u?c(u):i?c(i):(r=!0,e(l,function(f,d){r=!1,i?(c(i),n(i)):f?s(f,c):c(null,d)}))})}}}});var Qw=m((g_e,xO)=>{var FY=rc();function qY(t){return t}xO.exports=function(e){return typeof e=="object"&&typeof e.test=="function"?function(r){return e.test(r)}:FY(e)||qY}});var dh=m((v_e,bO)=>{"use strict";var MY=Qw();bO.exports=function(e){return e=MY(e),function(r){return function n(i,o){for(var s,a=!0;a;)a=!1,s=!0,r(i,function(c,u){if(!c&&!e(u))return s?a=!0:n(c,o);o(c,u)}),s=!1}}}});var PO=m((y_e,SO)=>{"use strict";var $Y=Qw(),UY=dh();SO.exports=function(e){return e=$Y(e),UY(function(r){return!e(r)})}});var AO=m((C_e,IO)=>{"use strict";IO.exports=function(e,r){var n=!1;function i(o){n||!r||(n=!0,r(o===!0?null:o))}return function(o){return function(s,a){return s&&i(s),o(s,function(c,u){c?i(c):e&&e(u),a(c,u)})}}}});var TO=m((w_e,RO)=>{"use strict";RO.exports=function(e,r){r=r||{};var n=r.last||!1,i=!1;if(typeof e=="number"){n=!0;var o=e;e=function(){return--o}}return function(s){function a(c){s(!0,function(u){n=!1,c(u||!0)})}return function(c,u){i?n?a(u):u(i):(i=c)?s(i,u):s(null,function(l,f){(i=i||l)?u(i):e(f)?u(null,f):(i=!0,n?u(null,f):a(u))})}}}});var Jw=m((E_e,kO)=>{"use strict";function jY(t){return t}var HY=rc(),BY=dh();kO.exports=function(e,r){e=HY(e)||jY;var n={};return BY(function(i){var o=e(i);return n[o]?!!r:(n[o]=!0,!r)})}});var OO=m((__e,DO)=>{"use strict";var VY=Jw();DO.exports=function(e){return VY(e,!0)}});var LO=m((x_e,NO)=>{"use strict";var GY=lh(),WY=Xw();NO.exports=function(){return function(e){var r;return function(n,i){n?r?r(n,function(a){e(a||n,i)}):e(n,i):r?o():s();function o(){r(null,function(a,c){a===!0?s():a?e(!0,function(u){i(a)}):i(null,c)})}function s(){r=null,e(null,function(a,c){if(a)return i(a);Array.isArray(c)||c&&typeof c=="object"?c=GY(c):typeof c!="function"&&(c=WY(c)),r=c,o()})}}}}});var qO=m((b_e,FO)=>{"use strict";FO.exports={map:wO(),asyncMap:_O(),filter:dh(),filterNot:PO(),through:AO(),take:TO(),unique:Jw(),nonUnique:OO(),flatten:LO()}});var $O=m((S_e,MO)=>{"use strict";MO.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var o=e;o&&typeof o.source=="function"&&(o=o.source);for(var i=1;i<r;i++){var s=arguments[i];typeof s=="function"?o=s(o):s&&typeof s=="object"&&(s.sink(o),o=s.source)}return o}});var VO=m((Tl,BO)=>{"use strict";var UO=rO(),jO=yO(),HO=qO();Tl=BO.exports=$O();for(var ao in UO)Tl[ao]=UO[ao];for(var ao in HO)Tl[ao]=HO[ao];for(var ao in jO)Tl[ao]=jO[ao]});var WO=m((P_e,GO)=>{var zY=UD(),Zw=VO();GO.exports=function(t,e){e=e||"GOODBYE";var r=zY(e);return{source:Zw(t.source,r),sink:Zw(Zw.filter(function(n){if(n!==e)return!0;r.end()}),t.sink)}}});var kl=m(xn=>{"use strict";var ph=eh();function KY(t){return t?Object.keys(t).length===0:!0}xn.set=function(e,r,n){let i,o;for(let s=0;s<r.length;s++){let a=r[s];e[a]=e[a]||{},i=e,o=a,e=e[a]}i[o]=n};xn.get=function(e,r){if(typeof r=="string")return e[r];let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],e==null)return e}return n};xn.prefix=function(e,r){let n;for(let i=0;i<r.length;i++){let o=r[i];if(n=e=e[o],typeof e!="object")return e}return typeof n!="object"?!!n:!1};function YY(t,e){for(let r in e){let n=e[r];t[n]||(t[n]={}),t=t[n]}return t}function XY(t,e){(function r(n,i){let o=e[i];if(n)e.length-1===i?delete n[o]:i<e.length&&r(n[o],i+1);else return;KY(n[o])&&delete n[o]})(t,0)}function QY(t,e){for(let r in e)t[r]=e[r];return t}xn.mount=function(e,r,n){if(!Array.isArray(r))throw new Error("path must be array of strings");return QY(YY(e,r),n)};xn.unmount=function(e,r){return XY(e,r)};var hh=t=>t==="source",mh=t=>t==="sink",zO=t=>t==="duplex",JY=t=>t==="sync",ZY=t=>t==="async",KO=t=>JY(t)||ZY(t),eX=t=>hh(t)||mh(t)||zO(t);xn.isRequest=KO;xn.isStream=eX;function eE(t){return function(e){e(t||!0,()=>{})}}function YO(t){return{source:ph.error(t),sink:eE(t)}}xn.errorAsStream=function(e,r){return hh(e)?ph.error(r):mh(e)?eE(r):YO(r)};xn.errorAsStreamOrCb=function(e,r,n){return KO(e)?n(r):hh(e)?ph.error(r):mh(e)?eE(r):n(r),YO(r)};xn.pipeToStream=function(e,r,n){hh(e)?r(n):mh(e)?n(r):zO(e)&&ph(r,n,r)}});var tE=m((R_e,QO)=>{function XO(t){if(t.stack&&t.name&&t.message)return t.stack.substring(t.name.length+3+t.message.length).split(`
`);if(t.stack)return t.stack.split(`
`)}function tX(t,e){return t.filter(function(r){return!~e.indexOf(r)})}var A_e=QO.exports=function(t,e){if(!(t.stack&&t.name&&t.message))return console.error(new Error("stackless error")),t;var r=new Error(e),n=tX(XO(r).slice(1),XO(t)).join(`
`);return r.__proto__=t,r.stack=r.name+": "+r.message+`
`+n+`
  `+t.stack,r}});var eN=m((T_e,ZO)=>{"use strict";var rX=FD(),rE=MD(),nX=WO(),nc=kl(),JO=tE();ZO.exports=function(e,r,n){let i=rX({message(){},request(s,a){if(!Array.isArray(s.args))return a(new Error(`invalid request, args should be array, was: ${JSON.stringify(s)}`));let c=s.name,u=s.args,l=!1,f=!1;u.push((d,p)=>{f=!0,l=!0,a(d,p)});try{e("async",c,u)}catch(d){if(l||f)throw JO(d,"no callback provided to muxrpc async funtion");a(d)}},stream(s){s.read=function(c,u){if(u)return s.write(null,u);let{name:l,type:f,args:d}=c,p,h;if(s.read=null,!nc.isStream(f))return s.write(null,new Error(`unsupported stream type: ${f}`));try{h=e(f,l,d)}catch(C){p=C}let v=rE[f==="source"?"sink":f==="sink"?"source":"duplex"](s);return nc.pipeToStream(f,v,p?nc.errorAsStream(f,p):h)}},close(s){if(i=null,o.ended=!0,!o.closed&&(o.closed=!0,n)){let a=n;n=null,a(s)}}}),o=nX(rE(i,()=>{}));return o=r?r(o):o,o.remoteCall=function(s,a,c,u){if(a==="emit")return i.message(c);if(!(nc.isRequest(s)||nc.isStream(s)))throw new Error(`unsupported type: ${JSON.stringify(s)}`);if(nc.isRequest(s))return i.request({name:a,args:c},u);let l=i.stream(),f=rE[s](l,u);return l.write({name:a,args:c,type:s}),f},o.isOpen=function(){return!i.ended},o.close=function(s,a){if(typeof s=="function"&&(a=s,s=!1),!i){a&&a();return}if(s){i.destroy(s),a&&a();return}return i.close(c=>{if(a)a(c);else if(c)throw JO(c,"no callback provided for muxrpc close")}),this},o.closed=!1,o}});var rN=m((k_e,tN)=>{"use strict";var iX=tE(),oX=kl();function nE(t,e,r,n){for(let i in e){let o=e[i],s=r?r.concat(i):[i];if(o&&typeof o=="object"){let a=o;t[i]=nE({},a,s,n)}else{let a=o;t[i]=(...c)=>n(a,s,c)}}return t}function sX(t){if(t)throw iX(t,"callback not provided")}function aX(t,e,r,n){t=t||{};function i(o,s,a){let c=typeof a[a.length-1]=="function"?a.pop():o==="sync"||o==="async"?null:sX;if(typeof c=="function"){let u;try{u=r(o,s,a,c)}catch(l){return oX.errorAsStreamOrCb(o,l,c)}return u}else return new Promise((u,l)=>{r(o,s,a,(f,d)=>{f?l(f):u(d)})})}return n?i("async","manifest",[function(o,s){if(o)return n(o);nE(t,s,null,i),n(null,s,t)}]):nE(t,e,null,i),t}tN.exports=aX});var oN=m((D_e,iN)=>{"use strict";var gh=kl();function nN(t){return Array.isArray(t)?t:t.split(".")}function cX(t){return t&&typeof t.pre=="function"&&typeof t.test=="function"&&typeof t.post=="function"}iN.exports=function(e){if(cX(e))return e;if(typeof e=="function")return{pre:e};let r=null,n={};function i(o){if(o.allow){r={};for(let s of o.allow)gh.set(r,nN(s),!0)}else r=null;if(o.deny)for(let s of o.deny)gh.set(n,nN(s),!0);else n={};return this}return e&&i(e),i.pre=o=>{if(o=Array.isArray(o)?o:[o],r&&!gh.prefix(r,o))return new Error(`method:${o} is not in list of allowed methods`);if(n&&gh.prefix(n,o))return new Error(`method:${o} is on list of disallowed methods`)},i.post=()=>{},i.test=o=>i.pre(o),i.get=()=>({allow:r,deny:n}),i}});var aN=m((O_e,sN)=>{"use strict";var uX=oN(),iE=kl();sN.exports=function(e,r,n){n=uX(n);function i(s,a){return s===iE.get(r,a)}function o(s,a,c){if(a==="emit")throw new Error("emit has been removed");if(s==="async"&&i("sync",a)){let u=c.pop(),l;try{l=iE.get(e,a).apply(this,c)}catch(f){return u(f)}return u(null,l)}if(!i(s,a))throw new Error(`no ${s}:${a}`);return iE.get(e,a).apply(this,c)}return function(a,c,u){let l=n.pre(c,u);if(l)throw l;return o.call(this,a,c,u)}}});var lN=m((N_e,uN)=>{"use strict";var lX=OD(),fX=require("events").EventEmitter,dX=eN(),pX=rN(),hX=aN();function cN(t,e,r,n,i,o,s){let a;typeof t=="function"&&(a=t,t={}),e=e||{},t=t||{};let c=new fX;o||(o=lX);let u,l={_emit(d,p){return c&&c._emit(d,p),l},id:n},f=dX(hX(r,e,i).bind(l),o,d=>{if(!c.closed&&(c.closed=!0,c.emit("closed"),u)){let p=u;u=null,p(d)}});if(pX(c,t,(d,p,h,g)=>{if(f.closed)throw new Error("stream is closed");return f.remoteCall(d,p,h,g)},a),c._emit=c.emit,s){Object.__defineGetter__.call(c,"id",()=>l.id),Object.__defineSetter__.call(c,"id",p=>{l.id=p});let d=!0;c.createStream=p=>{if(u=p,d)return d=!1,f;throw new Error("one stream per rpc")}}else c.stream=f;return c.closed=!1,c.close=function(d,p){return f.close(d,p),this},c}uN.exports=function(t,e,r){return arguments.length>3?cN.apply(this,arguments):function(n,i,o){return cN(t,e,n,o,i,r,!0)}}});var hN=m((vi,pN)=>{var L_e=qw(),mX=zw();function fN(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function dN(t,e,r){var n,i=!1,o;function s(){o||(o=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,u(),n?s():t(n=!0,s))}function c(l){u(),n||t(n=l,s)}function u(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){mX(function(l){t(null,function(f,d){if(n=n||f,f===!0)return e._isStdio?s():e.end();if(n=n||f)return fN(e),s(n);if(e._isStdio)e.write(d,function(){l()});else{var p=e.write(d);p===!1?e.once("drain",l):l()}})})})}function gX(t){var e=!1,r=!1,n;function i(){var o=t.read();if(o!==null&&n){var s=n;n=null,s(null,o)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(o){e=o,n&&n(e)}),function(o,s){n=s,e?s(e):r&&i()}}function vh(t){var e=[],r=[],n,i=!1,o;function s(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),s(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,s()}),t.on("close",function(){n=!0,s()}),t.on("error",function(a){n=a,s()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let l=function(){for(;r.length;)r.shift()(a);c(a)};var u=l;if(n)return l();t.once("close",l),fN(t)}else r.push(c),s()}}var vX=vh,yh=function(t,e){return function(r){return dN(r,t,e)}},Ch=function(t){return vh(t)};vi=pN.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return dN(r,t,e),vh(t)}:yh(t,e):Ch(t)};vi.sink=yh;vi.source=Ch;vi.read=vX;vi.read1=vh;vi.read2=gX;vi.duplex=function(t,e){return{source:Ch(t),sink:yh(t,e)}};vi.transform=function(t){return function(e){var r=Ch(t);return yh(t)(e),r}}});var gN=m((F_e,wh)=>{var yX=require("stream");wh.exports=oE;wh.exports.source=function(t){return oE(null,t)};wh.exports.sink=function(t){return oE(t,null)};var mN=typeof setImmediate=="undefined"?process.nextTick:setImmediate;function oE(t,e){t&&typeof t=="object"&&(e=t.source,t=t.sink);var r=[],n=[],i,o,s=new yX;s.writable=s.readable=!0,s.write=function(v){return r.length?r.shift()(null,v):n.push(v),r.length||(o=!0),!!r.length},s.end=function(){e?n.length?g():e(i=!0,r.length?r.shift():function(){}):r.length&&r.shift()(!0)},s.source=function(v,C){n.length?(C(null,n.shift()),n.length||s.emit("drain")):((i=i||v)?C(i):r.push(C),o&&(o=!1,s.emit("drain")))};var a;t&&(a=t(s.source)),a&&!e&&(e=a);var c=[],u=[],l=!1,f=!1,d=!1;if(s.sink=function(v){e=v,mN(g)},e){s.sink(e),s.paused=!0;var p=s.on.bind(s);s.on=(v,C)=>{var y=p(v,C);return v==="data"&&s.paused&&mN(s.resume.bind(s)),y};var h=s.pipe.bind(s);s.pipe=function(v,C){var y=h(v,C);return s.paused&&s.resume(),y}}function g(){if(f=!1,!(!e||d)){for(;c.length&&!s.paused;)s.emit("data",c.shift());if(!s.paused){if(l)return s.emit("end");d=!0,e(null,function v(C,y){d=!1,s.paused?(C===!0?l=C:C?s.emit("error",C):c.push(y),f=!0):C&&(i=C)!==!0?s.emit("error",C):(i=i||C)?s.emit("end"):(s.emit("data",y),d=!0,e(null,v))})}}}return s.pause=function(){return s.paused=!0,s},s.resume=function(){return s.paused=!1,g(),s},s.destroy=function(){!i&&e&&e(i=!0,function(){}),i=!0,r.length&&r.shift()(!0),s.emit("close")},s}});var cE=m((K_e,xN)=>{"use strict";var EN=require("child_process"),IX=1024*1024,_N={exec(t,e){EN.exec(t,{maxBuffer:2*IX,windowsHide:!0},e)},spawn(t,e,r){return EN.spawn(t,e,r)},stripLine(t,e){let r=0;for(;e-- >0;){let n=t.indexOf(`
`,r);n>=0&&(r=n+1)}return r>0?t.substring(r):t},split(t,e){let r=t.trim().split(/\s+/);return r.length>e&&(r[e-1]=r.slice(e-1).join(" ")),r},extractColumns(t,e,r){let n=t.split(/(\r\n|\n|\r)/),i=[];return r||(r=Math.max.apply(null,e)+1),n.forEach(o=>{let s=_N.split(o,r),a=[];e.forEach(c=>{a.push(s[c]||"")}),i.push(a)}),i},parseTable(t){let e=t.split(/(\r\n|\n|\r)/).filter(o=>o.trim().length>0),r=e.shift().trim().match(/(\w+\s*)/g);if(!r)return[];let n=[],i=r.map((o,s)=>{let a=[];return s===0?(a[0]=0,a[1]=o.length):(a[0]=n[s-1][1],a[1]=a[0]+o.length),n.push(a),o.trim()});return n[n.length-1][1]=Infinity,e.map(o=>{let s={};return n.forEach((a,c)=>{let u=i[c],l=o.substring(a[0],a[1]).trim();s[u]=l}),s})}};xN.exports=_N});var SN=m((Y_e,bN)=>{"use strict";var AX=require("os"),bh=require("fs"),en=cE(),RX=t=>new Promise((e,r)=>{bh.existsSync(t)?e():bh.mkdir(t,n=>{n?r(n):e()})}),uE={darwin(t){return new Promise((e,r)=>{en.exec("netstat -anv -p TCP && netstat -anv -p UDP",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=en.stripLine(i.toString(),2),a=en.extractColumns(s,[0,3,8],10).filter(c=>!!String(c[0]).match(/^(udp|tcp)/)).find(c=>{let u=String(c[1]).match(/\.(\d+)$/);if(u&&u[1]===String(t))return!0});a&&a[2].length?e(parseInt(a[2],10)):r(new Error(`pid of port (${t}) not found`))}})})},freebsd:"darwin",sunos:"darwin",linux(t){return new Promise((e,r)=>{let n="netstat -tunlp";en.exec(n,function(i,o,s){if(i)r(i);else{let a=s.toString().trim();a&&console.warn(a);let c=en.stripLine(o.toString(),2),u=en.extractColumns(c,[3,6],7).find(l=>{let f=String(l[0]).match(/:(\d+)$/);if(f&&f[1]===String(t))return!0});if(u&&u[1]){let l=u[1].split("/",1)[0];l.length?e(parseInt(l,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})},win32(t){return new Promise((e,r)=>{en.exec("netstat -ano",function(n,i,o){if(n)r(n);else{if(n=o.toString().trim(),n){r(n);return}let s=en.stripLine(i.toString(),4),a=en.extractColumns(s,[1,4],5).find(c=>{let u=String(c[0]).match(/:(\d+)$/);if(u&&u[1]===String(t))return!0});a&&a[1].length&&parseInt(a[1],10)>0?e(parseInt(a[1],10)):r(new Error(`pid of port (${t}) not found`))}})})},android(t){return new Promise((e,r)=>{let n=AX.tmpdir()+"/.find-process",i=n+"/"+process.pid,o='netstat -tunp >> "'+i+'"';RX(n).then(()=>{en.exec(o,()=>{bh.readFile(i,"utf8",(s,a)=>{if(bh.unlink(i,()=>{}),s)r(s);else{a=en.stripLine(a,2);let c=en.extractColumns(a,[3,6],7).find(u=>{let l=String(u[0]).match(/:(\d+)$/);if(l&&l[1]===String(t))return!0});if(c&&c[1]){let u=c[1].split("/",1)[0];u.length?e(parseInt(u,10)):r(new Error(`pid of port (${t}) not found`))}else r(new Error(`pid of port (${t}) not found`))}})})})})}};function TX(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in uE))return n(new Error(`platform ${e} is unsupported`));let i=uE[e];typeof i=="string"&&(i=uE[i]),i(t).then(r,n)})}bN.exports=TX});var RN=m((X_e,AN)=>{"use strict";var Sh=require("path"),lo=cE();function lE(t,e){return e?t&&t.match?t.match(e):!1:!0}function PN(t){let e=t.split(Sh.sep),r=e[e.length-1];r&&(e[e.length-1]=r.split(" ")[0]);let n=[];for(let i of e){let o=i.indexOf(" -");if(o>=0){n.push(i.substring(0,o).trim());break}else if(i.endsWith(" ")){n.push(i.trim());break}n.push(i)}return n.join(Sh.sep)}function IN(t){if(process.platform==="darwin"){let e=t.indexOf(".app/");if(e>=0)return Sh.basename(t.substring(0,e))}return Sh.basename(t)}var fE={darwin(t){return new Promise((e,r)=>{let n;"pid"in t?n=`ps -p ${t.pid} -ww -o pid,ppid,uid,gid,args`:n="ps ax -ww -o pid,ppid,uid,gid,args",lo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=lo.stripLine(o.toString(),1),u=lo.extractColumns(a,[0,1,2,3,4],5).filter(l=>l[0]&&t.pid?l[0]===String(t.pid):l[4]&&t.name?lE(l[4],t.name):!!l[0]).map(l=>{let f=String(l[4]),d=PN(f);return{pid:parseInt(l[0],10),ppid:parseInt(l[1],10),uid:parseInt(l[2],10),gid:parseInt(l[3],10),name:IN(d),bin:d,cmd:l[4]}});t.strict&&t.name&&(u=u.filter(l=>l.name===t.name)),e(u)}})})},linux:"darwin",sunos:"darwin",freebsd:"darwin",win32(t){return new Promise((e,r)=>{let n="WMIC path win32_process get Name,Processid,ParentProcessId,Commandline,ExecutablePath",i=[],o=lo.spawn("cmd",["/c",n],{detached:!1,windowsHide:!0});o.stdout.on("data",s=>{i.push(s.toString())}),o.on("close",s=>{if(s!==0)return r(new Error("Command '"+n+"' terminated with code: "+s));let a=lo.parseTable(i.join(`
`)).filter(c=>"pid"in t?c.ProcessId===String(t.pid):t.name?t.strict?c.Name===t.name||c.Name.endsWith(".exe")&&c.Name.slice(0,-4)===t.name:lE(c.CommandLine||c.Name,t.name):!0).map(c=>({pid:parseInt(c.ProcessId,10),ppid:parseInt(c.ParentProcessId,10),bin:c.ExecutablePath,name:c.Name,cmd:c.CommandLine}));e(a)})})},android(t){return new Promise((e,r)=>{let n="ps";lo.exec(n,function(i,o,s){if(i)"pid"in t?e([]):r(i);else{if(i=s.toString().trim(),i){r(i);return}let a=lo.stripLine(o.toString(),1),u=lo.extractColumns(a,[0,3],4).filter(l=>l[0]&&t.pid?l[0]===String(t.pid):l[1]&&t.name?lE(l[1],t.name):!!l[0]).map(l=>{let f=String(l[1]),d=PN(f);return{pid:parseInt(l[0],10),name:IN(d),bin:d,cmd:f}});t.strict&&t.name&&(u=u.filter(l=>l.name===t.name)),e(u)}})})}};function kX(t){let e=process.platform;return new Promise((r,n)=>{if(!(e in fE))return n(new Error(`platform ${e} is unsupported`));let i=fE[e];typeof i=="string"&&(i=fE[i]),i(t).then(r,n)})}AN.exports=kX});var DN=m((Q_e,kN)=>{"use strict";var DX=SN(),TN=RN(),dE={port(t,e){return DX(t,e).then(r=>dE.pid(r,e),()=>[])},pid(t,e){return TN({pid:t,strict:e})},name(t,e){return TN({name:t,strict:e})}};function OX(t,e,r){return new Promise((n,i)=>{t in dE?dE[t](e,r).then(n,i):i(new Error(`do not support find by "${t}"`))})}kN.exports=OX});var NN=m((J_e,ON)=>{"use strict";ON.exports=DN()});var Hl=m((Abe,fF)=>{var JZ="2.0.0",ZZ=256,eee=Number.MAX_SAFE_INTEGER||9007199254740991,tee=16;fF.exports={SEMVER_SPEC_VERSION:JZ,MAX_LENGTH:ZZ,MAX_SAFE_INTEGER:eee,MAX_SAFE_COMPONENT_LENGTH:tee}});var Bl=m((Rbe,dF)=>{var ree=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};dF.exports=ree});var Ps=m((Eo,pF)=>{var{MAX_SAFE_COMPONENT_LENGTH:XE}=Hl(),nee=Bl();Eo=pF.exports={};var iee=Eo.re=[],B=Eo.src=[],V=Eo.t={},oee=0,ae=(t,e,r)=>{let n=oee++;nee(n,e),V[t]=n,B[n]=e,iee[n]=new RegExp(e,r?"g":void 0)};ae("NUMERICIDENTIFIER","0|[1-9]\\d*");ae("NUMERICIDENTIFIERLOOSE","[0-9]+");ae("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");ae("MAINVERSION",`(${B[V.NUMERICIDENTIFIER]})\\.(${B[V.NUMERICIDENTIFIER]})\\.(${B[V.NUMERICIDENTIFIER]})`);ae("MAINVERSIONLOOSE",`(${B[V.NUMERICIDENTIFIERLOOSE]})\\.(${B[V.NUMERICIDENTIFIERLOOSE]})\\.(${B[V.NUMERICIDENTIFIERLOOSE]})`);ae("PRERELEASEIDENTIFIER",`(?:${B[V.NUMERICIDENTIFIER]}|${B[V.NONNUMERICIDENTIFIER]})`);ae("PRERELEASEIDENTIFIERLOOSE",`(?:${B[V.NUMERICIDENTIFIERLOOSE]}|${B[V.NONNUMERICIDENTIFIER]})`);ae("PRERELEASE",`(?:-(${B[V.PRERELEASEIDENTIFIER]}(?:\\.${B[V.PRERELEASEIDENTIFIER]})*))`);ae("PRERELEASELOOSE",`(?:-?(${B[V.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${B[V.PRERELEASEIDENTIFIERLOOSE]})*))`);ae("BUILDIDENTIFIER","[0-9A-Za-z-]+");ae("BUILD",`(?:\\+(${B[V.BUILDIDENTIFIER]}(?:\\.${B[V.BUILDIDENTIFIER]})*))`);ae("FULLPLAIN",`v?${B[V.MAINVERSION]}${B[V.PRERELEASE]}?${B[V.BUILD]}?`);ae("FULL",`^${B[V.FULLPLAIN]}$`);ae("LOOSEPLAIN",`[v=\\s]*${B[V.MAINVERSIONLOOSE]}${B[V.PRERELEASELOOSE]}?${B[V.BUILD]}?`);ae("LOOSE",`^${B[V.LOOSEPLAIN]}$`);ae("GTLT","((?:<|>)?=?)");ae("XRANGEIDENTIFIERLOOSE",`${B[V.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ae("XRANGEIDENTIFIER",`${B[V.NUMERICIDENTIFIER]}|x|X|\\*`);ae("XRANGEPLAIN",`[v=\\s]*(${B[V.XRANGEIDENTIFIER]})(?:\\.(${B[V.XRANGEIDENTIFIER]})(?:\\.(${B[V.XRANGEIDENTIFIER]})(?:${B[V.PRERELEASE]})?${B[V.BUILD]}?)?)?`);ae("XRANGEPLAINLOOSE",`[v=\\s]*(${B[V.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[V.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[V.XRANGEIDENTIFIERLOOSE]})(?:${B[V.PRERELEASELOOSE]})?${B[V.BUILD]}?)?)?`);ae("XRANGE",`^${B[V.GTLT]}\\s*${B[V.XRANGEPLAIN]}$`);ae("XRANGELOOSE",`^${B[V.GTLT]}\\s*${B[V.XRANGEPLAINLOOSE]}$`);ae("COERCE",`(^|[^\\d])(\\d{1,${XE}})(?:\\.(\\d{1,${XE}}))?(?:\\.(\\d{1,${XE}}))?(?:$|[^\\d])`);ae("COERCERTL",B[V.COERCE],!0);ae("LONETILDE","(?:~>?)");ae("TILDETRIM",`(\\s*)${B[V.LONETILDE]}\\s+`,!0);Eo.tildeTrimReplace="$1~";ae("TILDE",`^${B[V.LONETILDE]}${B[V.XRANGEPLAIN]}$`);ae("TILDELOOSE",`^${B[V.LONETILDE]}${B[V.XRANGEPLAINLOOSE]}$`);ae("LONECARET","(?:\\^)");ae("CARETTRIM",`(\\s*)${B[V.LONECARET]}\\s+`,!0);Eo.caretTrimReplace="$1^";ae("CARET",`^${B[V.LONECARET]}${B[V.XRANGEPLAIN]}$`);ae("CARETLOOSE",`^${B[V.LONECARET]}${B[V.XRANGEPLAINLOOSE]}$`);ae("COMPARATORLOOSE",`^${B[V.GTLT]}\\s*(${B[V.LOOSEPLAIN]})$|^$`);ae("COMPARATOR",`^${B[V.GTLT]}\\s*(${B[V.FULLPLAIN]})$|^$`);ae("COMPARATORTRIM",`(\\s*)${B[V.GTLT]}\\s*(${B[V.LOOSEPLAIN]}|${B[V.XRANGEPLAIN]})`,!0);Eo.comparatorTrimReplace="$1$2$3";ae("HYPHENRANGE",`^\\s*(${B[V.XRANGEPLAIN]})\\s+-\\s+(${B[V.XRANGEPLAIN]})\\s*$`);ae("HYPHENRANGELOOSE",`^\\s*(${B[V.XRANGEPLAINLOOSE]})\\s+-\\s+(${B[V.XRANGEPLAINLOOSE]})\\s*$`);ae("STAR","(<|>)?=?\\s*\\*");ae("GTE0","^\\s*>=\\s*0.0.0\\s*$");ae("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var Vl=m((Tbe,hF)=>{var see=["includePrerelease","loose","rtl"],aee=t=>t?typeof t!="object"?{loose:!0}:see.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};hF.exports=aee});var Jh=m((kbe,vF)=>{var mF=/^[0-9]+$/,gF=(t,e)=>{let r=mF.test(t),n=mF.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},cee=(t,e)=>gF(e,t);vF.exports={compareIdentifiers:gF,rcompareIdentifiers:cee}});var Jt=m((Dbe,EF)=>{var Zh=Bl(),{MAX_LENGTH:yF,MAX_SAFE_INTEGER:em}=Hl(),{re:CF,t:wF}=Ps(),uee=Vl(),{compareIdentifiers:Gl}=Jh(),rn=class{constructor(e,r){if(r=uee(r),e instanceof rn){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>yF)throw new TypeError(`version is longer than ${yF} characters`);Zh("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?CF[wF.LOOSE]:CF[wF.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>em||this.major<0)throw new TypeError("Invalid major version");if(this.minor>em||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>em||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<em)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Zh("SemVer.compare",this.version,this.options,e),!(e instanceof rn)){if(typeof e=="string"&&e===this.version)return 0;e=new rn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof rn||(e=new rn(e,this.options)),Gl(this.major,e.major)||Gl(this.minor,e.minor)||Gl(this.patch,e.patch)}comparePre(e){if(e instanceof rn||(e=new rn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(Zh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Gl(n,i)}while(++r)}compareBuild(e){e instanceof rn||(e=new rn(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(Zh("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Gl(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};EF.exports=rn});var Is=m((Obe,SF)=>{var{MAX_LENGTH:lee}=Hl(),{re:_F,t:xF}=Ps(),bF=Jt(),fee=Vl(),dee=(t,e)=>{if(e=fee(e),t instanceof bF)return t;if(typeof t!="string"||t.length>lee||!(e.loose?_F[xF.LOOSE]:_F[xF.FULL]).test(t))return null;try{return new bF(t,e)}catch(n){return null}};SF.exports=dee});var IF=m((Nbe,PF)=>{var pee=Is(),hee=(t,e)=>{let r=pee(t,e);return r?r.version:null};PF.exports=hee});var RF=m((Lbe,AF)=>{var mee=Is(),gee=(t,e)=>{let r=mee(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};AF.exports=gee});var kF=m((Fbe,TF)=>{var vee=Jt(),yee=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new vee(t,r).inc(e,n).version}catch(i){return null}};TF.exports=yee});var nn=m((qbe,OF)=>{var DF=Jt(),Cee=(t,e,r)=>new DF(t,r).compare(new DF(e,r));OF.exports=Cee});var tm=m((Mbe,NF)=>{var wee=nn(),Eee=(t,e,r)=>wee(t,e,r)===0;NF.exports=Eee});var qF=m(($be,FF)=>{var LF=Is(),_ee=tm(),xee=(t,e)=>{if(_ee(t,e))return null;{let r=LF(t),n=LF(e),i=r.prerelease.length||n.prerelease.length,o=i?"pre":"",s=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return o+a;return s}};FF.exports=xee});var $F=m((Ube,MF)=>{var bee=Jt(),See=(t,e)=>new bee(t,e).major;MF.exports=See});var jF=m((jbe,UF)=>{var Pee=Jt(),Iee=(t,e)=>new Pee(t,e).minor;UF.exports=Iee});var BF=m((Hbe,HF)=>{var Aee=Jt(),Ree=(t,e)=>new Aee(t,e).patch;HF.exports=Ree});var GF=m((Bbe,VF)=>{var Tee=Is(),kee=(t,e)=>{let r=Tee(t,e);return r&&r.prerelease.length?r.prerelease:null};VF.exports=kee});var zF=m((Vbe,WF)=>{var Dee=nn(),Oee=(t,e,r)=>Dee(e,t,r);WF.exports=Oee});var YF=m((Gbe,KF)=>{var Nee=nn(),Lee=(t,e)=>Nee(t,e,!0);KF.exports=Lee});var rm=m((Wbe,QF)=>{var XF=Jt(),Fee=(t,e,r)=>{let n=new XF(t,r),i=new XF(e,r);return n.compare(i)||n.compareBuild(i)};QF.exports=Fee});var ZF=m((zbe,JF)=>{var qee=rm(),Mee=(t,e)=>t.sort((r,n)=>qee(r,n,e));JF.exports=Mee});var t1=m((Kbe,e1)=>{var $ee=rm(),Uee=(t,e)=>t.sort((r,n)=>$ee(n,r,e));e1.exports=Uee});var Wl=m((Ybe,r1)=>{var jee=nn(),Hee=(t,e,r)=>jee(t,e,r)>0;r1.exports=Hee});var nm=m((Xbe,n1)=>{var Bee=nn(),Vee=(t,e,r)=>Bee(t,e,r)<0;n1.exports=Vee});var QE=m((Qbe,i1)=>{var Gee=nn(),Wee=(t,e,r)=>Gee(t,e,r)!==0;i1.exports=Wee});var im=m((Jbe,o1)=>{var zee=nn(),Kee=(t,e,r)=>zee(t,e,r)>=0;o1.exports=Kee});var om=m((Zbe,s1)=>{var Yee=nn(),Xee=(t,e,r)=>Yee(t,e,r)<=0;s1.exports=Xee});var JE=m((e0e,a1)=>{var Qee=tm(),Jee=QE(),Zee=Wl(),ete=im(),tte=nm(),rte=om(),nte=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Qee(t,r,n);case"!=":return Jee(t,r,n);case">":return Zee(t,r,n);case">=":return ete(t,r,n);case"<":return tte(t,r,n);case"<=":return rte(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};a1.exports=nte});var u1=m((t0e,c1)=>{var ite=Jt(),ote=Is(),{re:sm,t:am}=Ps(),ste=(t,e)=>{if(t instanceof ite)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(sm[am.COERCE]);else{let n;for(;(n=sm[am.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),sm[am.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;sm[am.COERCERTL].lastIndex=-1}return r===null?null:ote(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};c1.exports=ste});var g1=m((r0e,m1)=>{"use strict";var ate=Qu(),As=Symbol("max"),bi=Symbol("length"),vc=Symbol("lengthCalculator"),zl=Symbol("allowStale"),Rs=Symbol("maxAge"),Si=Symbol("dispose"),l1=Symbol("noDisposeOnSet"),qt=Symbol("lruList"),Pn=Symbol("cache"),f1=Symbol("updateAgeOnGet"),ZE=()=>1,d1=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[As]=e.max||Infinity,n=e.length||ZE;if(this[vc]=typeof n!="function"?ZE:n,this[zl]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Rs]=e.maxAge||0,this[Si]=e.dispose,this[l1]=e.noDisposeOnSet||!1,this[f1]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[As]=e||Infinity,Kl(this)}get max(){return this[As]}set allowStale(e){this[zl]=!!e}get allowStale(){return this[zl]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Rs]=e,Kl(this)}get maxAge(){return this[Rs]}set lengthCalculator(e){typeof e!="function"&&(e=ZE),e!==this[vc]&&(this[vc]=e,this[bi]=0,this[qt].forEach(r=>{r.length=this[vc](r.value,r.key),this[bi]+=r.length})),Kl(this)}get lengthCalculator(){return this[vc]}get length(){return this[bi]}get itemCount(){return this[qt].length}rforEach(e,r){r=r||this;for(let n=this[qt].tail;n!==null;){let i=n.prev;h1(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[qt].head;n!==null;){let i=n.next;h1(this,e,n,r),n=i}}keys(){return this[qt].toArray().map(e=>e.key)}values(){return this[qt].toArray().map(e=>e.value)}reset(){this[Si]&&this[qt]&&this[qt].length&&this[qt].forEach(e=>this[Si](e.key,e.value)),this[Pn]=new Map,this[qt]=new ate,this[bi]=0}dump(){return this[qt].map(e=>cm(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[qt]}set(e,r,n){if(n=n||this[Rs],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,o=this[vc](r,e);if(this[Pn].has(e)){if(o>this[As])return yc(this,this[Pn].get(e)),!1;let c=this[Pn].get(e).value;return this[Si]&&(this[l1]||this[Si](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[bi]+=o-c.length,c.length=o,this.get(e),Kl(this),!0}let s=new p1(e,r,o,i,n);return s.length>this[As]?(this[Si]&&this[Si](e,r),!1):(this[bi]+=s.length,this[qt].unshift(s),this[Pn].set(e,this[qt].head),Kl(this),!0)}has(e){if(!this[Pn].has(e))return!1;let r=this[Pn].get(e).value;return!cm(this,r)}get(e){return e_(this,e,!0)}peek(e){return e_(this,e,!1)}pop(){let e=this[qt].tail;return e?(yc(this,e),e.value):null}del(e){yc(this,this[Pn].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[Pn].forEach((e,r)=>e_(this,r,!1))}},e_=(t,e,r)=>{let n=t[Pn].get(e);if(n){let i=n.value;if(cm(t,i)){if(yc(t,n),!t[zl])return}else r&&(t[f1]&&(n.value.now=Date.now()),t[qt].unshiftNode(n));return i.value}},cm=(t,e)=>{if(!e||!e.maxAge&&!t[Rs])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Rs]&&r>t[Rs]},Kl=t=>{if(t[bi]>t[As])for(let e=t[qt].tail;t[bi]>t[As]&&e!==null;){let r=e.prev;yc(t,e),e=r}},yc=(t,e)=>{if(e){let r=e.value;t[Si]&&t[Si](r.key,r.value),t[bi]-=r.length,t[Pn].delete(r.key),t[qt].removeNode(e)}},p1=class{constructor(e,r,n,i,o){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=o||0}},h1=(t,e,r,n)=>{let i=r.value;cm(t,i)&&(yc(t,r),t[zl]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};m1.exports=d1});var on=m((n0e,w1)=>{var Cc=class{constructor(e,r){if(r=ute(r),e instanceof Cc)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new Cc(e.raw,r);if(e instanceof t_)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!y1(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&hte(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=v1.get(n);if(i)return i;let o=this.options.loose,s=o?Zt[jt.HYPHENRANGELOOSE]:Zt[jt.HYPHENRANGE];e=e.replace(s,bte(this.options.includePrerelease)),dt("hyphen replace",e),e=e.replace(Zt[jt.COMPARATORTRIM],fte),dt("comparator trim",e,Zt[jt.COMPARATORTRIM]),e=e.replace(Zt[jt.TILDETRIM],dte),e=e.replace(Zt[jt.CARETTRIM],pte),e=e.split(/\s+/).join(" ");let a=o?Zt[jt.COMPARATORLOOSE]:Zt[jt.COMPARATOR],c=e.split(" ").map(d=>mte(d,this.options)).join(" ").split(/\s+/).map(d=>xte(d,this.options)).filter(this.options.loose?d=>!!d.match(a):()=>!0).map(d=>new t_(d,this.options)),u=c.length,l=new Map;for(let d of c){if(y1(d))return[d];l.set(d.value,d)}l.size>1&&l.has("")&&l.delete("");let f=[...l.values()];return v1.set(n,f),f}intersects(e,r){if(!(e instanceof Cc))throw new TypeError("a Range is required");return this.set.some(n=>C1(n,r)&&e.set.some(i=>C1(i,r)&&n.every(o=>i.every(s=>o.intersects(s,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new lte(e,this.options)}catch(r){return!1}for(let r=0;r<this.set.length;r++)if(Ste(this.set[r],e,this.options))return!0;return!1}};w1.exports=Cc;var cte=g1(),v1=new cte({max:1e3}),ute=Vl(),t_=Yl(),dt=Bl(),lte=Jt(),{re:Zt,t:jt,comparatorTrimReplace:fte,tildeTrimReplace:dte,caretTrimReplace:pte}=Ps(),y1=t=>t.value==="<0.0.0-0",hte=t=>t.value==="",C1=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},mte=(t,e)=>(dt("comp",t,e),t=yte(t,e),dt("caret",t),t=gte(t,e),dt("tildes",t),t=wte(t,e),dt("xrange",t),t=_te(t,e),dt("stars",t),t),dr=t=>!t||t.toLowerCase()==="x"||t==="*",gte=(t,e)=>t.trim().split(/\s+/).map(r=>vte(r,e)).join(" "),vte=(t,e)=>{let r=e.loose?Zt[jt.TILDELOOSE]:Zt[jt.TILDE];return t.replace(r,(n,i,o,s,a)=>{dt("tilde",t,n,i,o,s,a);let c;return dr(i)?c="":dr(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:dr(s)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:a?(dt("replaceTilde pr",a),c=`>=${i}.${o}.${s}-${a} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${s} <${i}.${+o+1}.0-0`,dt("tilde return",c),c})},yte=(t,e)=>t.trim().split(/\s+/).map(r=>Cte(r,e)).join(" "),Cte=(t,e)=>{dt("caret",t,e);let r=e.loose?Zt[jt.CARETLOOSE]:Zt[jt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,s,a,c)=>{dt("caret",t,i,o,s,a,c);let u;return dr(o)?u="":dr(s)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:dr(a)?o==="0"?u=`>=${o}.${s}.0${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.0${n} <${+o+1}.0.0-0`:c?(dt("replaceCaret pr",c),o==="0"?s==="0"?u=`>=${o}.${s}.${a}-${c} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}-${c} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a}-${c} <${+o+1}.0.0-0`):(dt("no pr"),o==="0"?s==="0"?u=`>=${o}.${s}.${a}${n} <${o}.${s}.${+a+1}-0`:u=`>=${o}.${s}.${a}${n} <${o}.${+s+1}.0-0`:u=`>=${o}.${s}.${a} <${+o+1}.0.0-0`),dt("caret return",u),u})},wte=(t,e)=>(dt("replaceXRanges",t,e),t.split(/\s+/).map(r=>Ete(r,e)).join(" ")),Ete=(t,e)=>{t=t.trim();let r=e.loose?Zt[jt.XRANGELOOSE]:Zt[jt.XRANGE];return t.replace(r,(n,i,o,s,a,c)=>{dt("xRange",t,n,i,o,s,a,c);let u=dr(o),l=u||dr(s),f=l||dr(a),d=f;return i==="="&&d&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&d?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),i==="<"&&(c="-0"),n=`${i+o}.${s}.${a}${c}`):l?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:f&&(n=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),dt("xRange return",n),n})},_te=(t,e)=>(dt("replaceStars",t,e),t.trim().replace(Zt[jt.STAR],"")),xte=(t,e)=>(dt("replaceGTE0",t,e),t.trim().replace(Zt[e.includePrerelease?jt.GTE0PRE:jt.GTE0],"")),bte=t=>(e,r,n,i,o,s,a,c,u,l,f,d,p)=>(dr(n)?r="":dr(i)?r=`>=${n}.0.0${t?"-0":""}`:dr(o)?r=`>=${n}.${i}.0${t?"-0":""}`:s?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,dr(u)?c="":dr(l)?c=`<${+u+1}.0.0-0`:dr(f)?c=`<${u}.${+l+1}.0-0`:d?c=`<=${u}.${l}.${f}-${d}`:t?c=`<${u}.${l}.${+f+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),Ste=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(dt(t[n].semver),t[n].semver!==t_.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Yl=m((i0e,S1)=>{var Xl=Symbol("SemVer ANY"),Ql=class{static get ANY(){return Xl}constructor(e,r){if(r=Pte(r),e instanceof Ql){if(e.loose===!!r.loose)return e;e=e.value}n_("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Xl?this.value="":this.value=this.operator+this.semver.version,n_("comp",this)}parse(e){let r=this.options.loose?E1[_1.COMPARATORLOOSE]:E1[_1.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new x1(n[2],this.options.loose):this.semver=Xl}toString(){return this.value}test(e){if(n_("Comparator.test",e,this.options.loose),this.semver===Xl||e===Xl)return!0;if(typeof e=="string")try{e=new x1(e,this.options)}catch(r){return!1}return r_(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof Ql))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new b1(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new b1(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),o=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=r_(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=r_(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||o&&s||a||c}};S1.exports=Ql;var Pte=Vl(),{re:E1,t:_1}=Ps(),r_=JE(),n_=Bl(),x1=Jt(),b1=on()});var Jl=m((o0e,P1)=>{var Ite=on(),Ate=(t,e,r)=>{try{e=new Ite(e,r)}catch(n){return!1}return e.test(t)};P1.exports=Ate});var A1=m((s0e,I1)=>{var Rte=on(),Tte=(t,e)=>new Rte(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));I1.exports=Tte});var T1=m((a0e,R1)=>{var kte=Jt(),Dte=on(),Ote=(t,e,r)=>{let n=null,i=null,o=null;try{o=new Dte(e,r)}catch(s){return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new kte(n,r))}),n};R1.exports=Ote});var D1=m((c0e,k1)=>{var Nte=Jt(),Lte=on(),Fte=(t,e,r)=>{let n=null,i=null,o=null;try{o=new Lte(e,r)}catch(s){return null}return t.forEach(s=>{o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new Nte(n,r))}),n};k1.exports=Fte});var L1=m((u0e,N1)=>{var i_=Jt(),qte=on(),O1=Wl(),Mte=(t,e)=>{t=new qte(t,e);let r=new i_("0.0.0");if(t.test(r)||(r=new i_("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(s=>{let a=new i_(s.semver.version);switch(s.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!o||O1(a,o))&&(o=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&&(!r||O1(r,o))&&(r=o)}return r&&t.test(r)?r:null};N1.exports=Mte});var q1=m((l0e,F1)=>{var $te=on(),Ute=(t,e)=>{try{return new $te(t,e).range||"*"}catch(r){return null}};F1.exports=Ute});var um=m((f0e,j1)=>{var jte=Jt(),M1=Yl(),{ANY:Hte}=M1,Bte=on(),Vte=Jl(),$1=Wl(),U1=nm(),Gte=om(),Wte=im(),zte=(t,e,r,n)=>{t=new jte(t,n),e=new Bte(e,n);let i,o,s,a,c;switch(r){case">":i=$1,o=Gte,s=U1,a=">",c=">=";break;case"<":i=U1,o=Wte,s=$1,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Vte(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],f=null,d=null;if(l.forEach(p=>{p.semver===Hte&&(p=new M1(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&o(t,d.semver))return!1;if(d.operator===c&&s(t,d.semver))return!1}return!0};j1.exports=zte});var B1=m((d0e,H1)=>{var Kte=um(),Yte=(t,e,r)=>Kte(t,e,">",r);H1.exports=Yte});var G1=m((p0e,V1)=>{var Xte=um(),Qte=(t,e,r)=>Xte(t,e,"<",r);V1.exports=Qte});var K1=m((h0e,z1)=>{var W1=on(),Jte=(t,e,r)=>(t=new W1(t,r),e=new W1(e,r),t.intersects(e));z1.exports=Jte});var X1=m((m0e,Y1)=>{var Zte=Jl(),ere=nn();Y1.exports=(t,e,r)=>{let n=[],i=null,o=null,s=t.sort((l,f)=>ere(l,f,r));for(let l of s)Zte(l,e,r)?(o=l,i||(i=l)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,f]of n)l===f?a.push(l):!f&&l===s[0]?a.push("*"):f?l===s[0]?a.push(`<=${f}`):a.push(`${l} - ${f}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var tq=m((g0e,eq)=>{var Q1=on(),lm=Yl(),{ANY:o_}=lm,Zl=Jl(),s_=nn(),tre=(t,e,r={})=>{if(t===e)return!0;t=new Q1(t,r),e=new Q1(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let s=rre(i,o,r);if(n=n||s!==null,s)continue e}if(n)return!1}return!0},rre=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===o_){if(e.length===1&&e[0].semver===o_)return!0;r.includePrerelease?t=[new lm(">=0.0.0-0")]:t=[new lm(">=0.0.0")]}if(e.length===1&&e[0].semver===o_){if(r.includePrerelease)return!0;e=[new lm(">=0.0.0")]}let n=new Set,i,o;for(let p of t)p.operator===">"||p.operator===">="?i=J1(i,p,r):p.operator==="<"||p.operator==="<="?o=Z1(o,p,r):n.add(p.semver);if(n.size>1)return null;let s;if(i&&o){if(s=s_(i.semver,o.semver,r),s>0)return null;if(s===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let p of n){if(i&&!Zl(p,String(i),r)||o&&!Zl(p,String(o),r))return null;for(let h of e)if(!Zl(p,String(h),r))return!1;return!0}let a,c,u,l,f=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&o.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let p of e){if(l=l||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",i){if(d&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===d.major&&p.semver.minor===d.minor&&p.semver.patch===d.patch&&(d=!1),p.operator===">"||p.operator===">="){if(a=J1(i,p,r),a===p&&a!==i)return!1}else if(i.operator===">="&&!Zl(i.semver,String(p),r))return!1}if(o){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator==="<"||p.operator==="<="){if(c=Z1(o,p,r),c===p&&c!==o)return!1}else if(o.operator==="<="&&!Zl(o.semver,String(p),r))return!1}if(!p.operator&&(o||i)&&s!==0)return!1}return!(i&&u&&!o&&s!==0||o&&l&&!i&&s!==0||d||f)},J1=(t,e,r)=>{if(!t)return e;let n=s_(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},Z1=(t,e,r)=>{if(!t)return e;let n=s_(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};eq.exports=tre});var nq=m((v0e,rq)=>{var a_=Ps();rq.exports={re:a_.re,src:a_.src,tokens:a_.t,SEMVER_SPEC_VERSION:Hl().SEMVER_SPEC_VERSION,SemVer:Jt(),compareIdentifiers:Jh().compareIdentifiers,rcompareIdentifiers:Jh().rcompareIdentifiers,parse:Is(),valid:IF(),clean:RF(),inc:kF(),diff:qF(),major:$F(),minor:jF(),patch:BF(),prerelease:GF(),compare:nn(),rcompare:zF(),compareLoose:YF(),compareBuild:rm(),sort:ZF(),rsort:t1(),gt:Wl(),lt:nm(),eq:tm(),neq:QE(),gte:im(),lte:om(),cmp:JE(),coerce:u1(),Comparator:Yl(),Range:on(),satisfies:Jl(),toComparators:A1(),maxSatisfying:T1(),minSatisfying:D1(),minVersion:L1(),validRange:q1(),outside:um(),gtr:B1(),ltr:G1(),intersects:K1(),simplifyRange:X1(),subset:tq()}});var Ht=m((kIe,Kq)=>{"use strict";var Hre=function(){function t(){}return t.info=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.enableDebug&&console.info(t.TAG+e,r)},t.warn=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.disableWarnings||console.warn(t.TAG+e,r)},t.enableDebug=!1,t.disableWarnings=!1,t.disableErrors=!1,t.TAG="ApplicationInsights:",t}();Kq.exports=Hre});var fM=m((Z,lM)=>{Z=lM.exports=he;var Re;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Re=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:Re=function(){};Z.SEMVER_SPEC_VERSION="2.0.0";var F_=256,Fm=Number.MAX_SAFE_INTEGER||9007199254740991,q_=16,Fe=Z.re=[],L=Z.src=[],ue=0,Rc=ue++;L[Rc]="0|[1-9]\\d*";var Tc=ue++;L[Tc]="[0-9]+";var M_=ue++;L[M_]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var Yq=ue++;L[Yq]="("+L[Rc]+")\\.("+L[Rc]+")\\.("+L[Rc]+")";var Xq=ue++;L[Xq]="("+L[Tc]+")\\.("+L[Tc]+")\\.("+L[Tc]+")";var $_=ue++;L[$_]="(?:"+L[Rc]+"|"+L[M_]+")";var U_=ue++;L[U_]="(?:"+L[Tc]+"|"+L[M_]+")";var j_=ue++;L[j_]="(?:-("+L[$_]+"(?:\\."+L[$_]+")*))";var H_=ue++;L[H_]="(?:-?("+L[U_]+"(?:\\."+L[U_]+")*))";var B_=ue++;L[B_]="[0-9A-Za-z-]+";var uf=ue++;L[uf]="(?:\\+("+L[B_]+"(?:\\."+L[B_]+")*))";var V_=ue++,Qq="v?"+L[Yq]+L[j_]+"?"+L[uf]+"?";L[V_]="^"+Qq+"$";var G_="[v=\\s]*"+L[Xq]+L[H_]+"?"+L[uf]+"?",W_=ue++;L[W_]="^"+G_+"$";var kc=ue++;L[kc]="((?:<|>)?=?)";var qm=ue++;L[qm]=L[Tc]+"|x|X|\\*";var Mm=ue++;L[Mm]=L[Rc]+"|x|X|\\*";var Ns=ue++;L[Ns]="[v=\\s]*("+L[Mm]+")(?:\\.("+L[Mm]+")(?:\\.("+L[Mm]+")(?:"+L[j_]+")?"+L[uf]+"?)?)?";var Dc=ue++;L[Dc]="[v=\\s]*("+L[qm]+")(?:\\.("+L[qm]+")(?:\\.("+L[qm]+")(?:"+L[H_]+")?"+L[uf]+"?)?)?";var Jq=ue++;L[Jq]="^"+L[kc]+"\\s*"+L[Ns]+"$";var Zq=ue++;L[Zq]="^"+L[kc]+"\\s*"+L[Dc]+"$";var eM=ue++;L[eM]="(?:^|[^\\d])(\\d{1,"+q_+"})(?:\\.(\\d{1,"+q_+"}))?(?:\\.(\\d{1,"+q_+"}))?(?:$|[^\\d])";var $m=ue++;L[$m]="(?:~>?)";var Um=ue++;L[Um]="(\\s*)"+L[$m]+"\\s+";Fe[Um]=new RegExp(L[Um],"g");var Bre="$1~",tM=ue++;L[tM]="^"+L[$m]+L[Ns]+"$";var rM=ue++;L[rM]="^"+L[$m]+L[Dc]+"$";var jm=ue++;L[jm]="(?:\\^)";var Hm=ue++;L[Hm]="(\\s*)"+L[jm]+"\\s+";Fe[Hm]=new RegExp(L[Hm],"g");var Vre="$1^",nM=ue++;L[nM]="^"+L[jm]+L[Ns]+"$";var iM=ue++;L[iM]="^"+L[jm]+L[Dc]+"$";var z_=ue++;L[z_]="^"+L[kc]+"\\s*("+G_+")$|^$";var K_=ue++;L[K_]="^"+L[kc]+"\\s*("+Qq+")$|^$";var lf=ue++;L[lf]="(\\s*)"+L[kc]+"\\s*("+G_+"|"+L[Ns]+")";Fe[lf]=new RegExp(L[lf],"g");var Gre="$1$2$3",oM=ue++;L[oM]="^\\s*("+L[Ns]+")\\s+-\\s+("+L[Ns]+")\\s*$";var sM=ue++;L[sM]="^\\s*("+L[Dc]+")\\s+-\\s+("+L[Dc]+")\\s*$";var aM=ue++;L[aM]="(<|>)?=?\\s*\\*";for(var Ls=0;Ls<ue;Ls++)Re(Ls,L[Ls]),Fe[Ls]||(Fe[Ls]=new RegExp(L[Ls]));Z.parse=Fs;function Fs(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof he)return t;if(typeof t!="string"||t.length>F_)return null;var r=e.loose?Fe[W_]:Fe[V_];if(!r.test(t))return null;try{return new he(t,e)}catch(n){return null}}Z.valid=Wre;function Wre(t,e){var r=Fs(t,e);return r?r.version:null}Z.clean=zre;function zre(t,e){var r=Fs(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}Z.SemVer=he;function he(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof he){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>F_)throw new TypeError("version is longer than "+F_+" characters");if(!(this instanceof he))return new he(t,e);Re("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?Fe[W_]:Fe[V_]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Fm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Fm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Fm||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Fm)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}he.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};he.prototype.toString=function(){return this.version};he.prototype.compare=function(t){return Re("SemVer.compare",this.version,this.options,t),t instanceof he||(t=new he(t,this.options)),this.compareMain(t)||this.comparePre(t)};he.prototype.compareMain=function(t){return t instanceof he||(t=new he(t,this.options)),Oc(this.major,t.major)||Oc(this.minor,t.minor)||Oc(this.patch,t.patch)};he.prototype.comparePre=function(t){if(t instanceof he||(t=new he(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(Re("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return Oc(r,n)}while(++e)};he.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};Z.inc=Kre;function Kre(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new he(t,r).inc(e,n).version}catch(i){return null}}Z.diff=Yre;function Yre(t,e){if(Y_(t,e))return null;var r=Fs(t),n=Fs(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}Z.compareIdentifiers=Oc;var cM=/^[0-9]+$/;function Oc(t,e){var r=cM.test(t),n=cM.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}Z.rcompareIdentifiers=Xre;function Xre(t,e){return Oc(e,t)}Z.major=Qre;function Qre(t,e){return new he(t,e).major}Z.minor=Jre;function Jre(t,e){return new he(t,e).minor}Z.patch=Zre;function Zre(t,e){return new he(t,e).patch}Z.compare=Ai;function Ai(t,e,r){return new he(t,r).compare(new he(e,r))}Z.compareLoose=ene;function ene(t,e){return Ai(t,e,!0)}Z.rcompare=tne;function tne(t,e,r){return Ai(e,t,r)}Z.sort=rne;function rne(t,e){return t.sort(function(r,n){return Z.compare(r,n,e)})}Z.rsort=nne;function nne(t,e){return t.sort(function(r,n){return Z.rcompare(r,n,e)})}Z.gt=ff;function ff(t,e,r){return Ai(t,e,r)>0}Z.lt=Bm;function Bm(t,e,r){return Ai(t,e,r)<0}Z.eq=Y_;function Y_(t,e,r){return Ai(t,e,r)===0}Z.neq=uM;function uM(t,e,r){return Ai(t,e,r)!==0}Z.gte=X_;function X_(t,e,r){return Ai(t,e,r)>=0}Z.lte=Q_;function Q_(t,e,r){return Ai(t,e,r)<=0}Z.cmp=Vm;function Vm(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Y_(t,r,n);case"!=":return uM(t,r,n);case">":return ff(t,r,n);case">=":return X_(t,r,n);case"<":return Bm(t,r,n);case"<=":return Q_(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}Z.Comparator=cn;function cn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof cn){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof cn))return new cn(t,e);Re("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===df?this.value="":this.value=this.operator+this.semver.version,Re("comp",this)}var df={};cn.prototype.parse=function(t){var e=this.options.loose?Fe[z_]:Fe[K_],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new he(r[2],this.options.loose):this.semver=df};cn.prototype.toString=function(){return this.value};cn.prototype.test=function(t){return Re("Comparator.test",t,this.options.loose),this.semver===df?!0:(typeof t=="string"&&(t=new he(t,this.options)),Vm(t,this.operator,this.semver,this.options))};cn.prototype.intersects=function(t,e){if(!(t instanceof cn))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new tt(t.value,e),Gm(this.value,r,e);if(t.operator==="")return r=new tt(this.value,e),Gm(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=Vm(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=Vm(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c};Z.Range=tt;function tt(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof tt)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new tt(t.raw,e);if(t instanceof cn)return new tt(t.value,e);if(!(this instanceof tt))return new tt(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}tt.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};tt.prototype.toString=function(){return this.range};tt.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var r=e?Fe[sM]:Fe[oM];t=t.replace(r,pne),Re("hyphen replace",t),t=t.replace(Fe[lf],Gre),Re("comparator trim",t,Fe[lf]),t=t.replace(Fe[Um],Bre),t=t.replace(Fe[Hm],Vre),t=t.split(/\s+/).join(" ");var n=e?Fe[z_]:Fe[K_],i=t.split(" ").map(function(o){return one(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new cn(o,this.options)},this),i};tt.prototype.intersects=function(t,e){if(!(t instanceof tt))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};Z.toComparators=ine;function ine(t,e){return new tt(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function one(t,e){return Re("comp",t,e),t=cne(t,e),Re("caret",t),t=sne(t,e),Re("tildes",t),t=lne(t,e),Re("xrange",t),t=dne(t,e),Re("stars",t),t}function pr(t){return!t||t.toLowerCase()==="x"||t==="*"}function sne(t,e){return t.trim().split(/\s+/).map(function(r){return ane(r,e)}).join(" ")}function ane(t,e){var r=e.loose?Fe[rM]:Fe[tM];return t.replace(r,function(n,i,o,s,a){Re("tilde",t,n,i,o,s,a);var c;return pr(i)?c="":pr(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":pr(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(Re("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",Re("tilde return",c),c})}function cne(t,e){return t.trim().split(/\s+/).map(function(r){return une(r,e)}).join(" ")}function une(t,e){Re("caret",t,e);var r=e.loose?Fe[iM]:Fe[nM];return t.replace(r,function(n,i,o,s,a){Re("caret",t,n,i,o,s,a);var c;return pr(i)?c="":pr(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":pr(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(Re("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(Re("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),Re("caret return",c),c})}function lne(t,e){return Re("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return fne(r,e)}).join(" ")}function fne(t,e){t=t.trim();var r=e.loose?Fe[Zq]:Fe[Jq];return t.replace(r,function(n,i,o,s,a,c){Re("xRange",t,n,i,o,s,a,c);var u=pr(o),l=u||pr(s),f=l||pr(a),d=f;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":f&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),Re("xRange return",n),n})}function dne(t,e){return Re("replaceStars",t,e),t.trim().replace(Fe[aM],"")}function pne(t,e,r,n,i,o,s,a,c,u,l,f,d){return pr(r)?e="":pr(n)?e=">="+r+".0.0":pr(i)?e=">="+r+"."+n+".0":e=">="+e,pr(c)?a="":pr(u)?a="<"+(+c+1)+".0.0":pr(l)?a="<"+c+"."+(+u+1)+".0":f?a="<="+c+"."+u+"."+l+"-"+f:a="<="+a,(e+" "+a).trim()}tt.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new he(t,this.options));for(var e=0;e<this.set.length;e++)if(hne(this.set[e],t,this.options))return!0;return!1};function hne(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(Re(t[n].semver),t[n].semver!==df&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}Z.satisfies=Gm;function Gm(t,e,r){try{e=new tt(e,r)}catch(n){return!1}return e.test(t)}Z.maxSatisfying=mne;function mne(t,e,r){var n=null,i=null;try{var o=new tt(e,r)}catch(s){return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new he(n,r))}),n}Z.minSatisfying=gne;function gne(t,e,r){var n=null,i=null;try{var o=new tt(e,r)}catch(s){return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new he(n,r))}),n}Z.minVersion=vne;function vne(t,e){t=new tt(t,e);var r=new he("0.0.0");if(t.test(r)||(r=new he("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new he(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||ff(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}Z.validRange=yne;function yne(t,e){try{return new tt(t,e).range||"*"}catch(r){return null}}Z.ltr=Cne;function Cne(t,e,r){return J_(t,e,"<",r)}Z.gtr=wne;function wne(t,e,r){return J_(t,e,">",r)}Z.outside=J_;function J_(t,e,r,n){t=new he(t,n),e=new tt(e,n);var i,o,s,a,c;switch(r){case">":i=ff,o=Q_,s=Bm,a=">",c=">=";break;case"<":i=Bm,o=X_,s=ff,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Gm(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],f=null,d=null;if(l.forEach(function(p){p.semver===df&&(p=new cn(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&o(t,d.semver))return!1;if(d.operator===c&&s(t,d.semver))return!1}return!0}Z.prerelease=Ene;function Ene(t,e){var r=Fs(t,e);return r&&r.prerelease.length?r.prerelease:null}Z.intersects=_ne;function _ne(t,e,r){return t=new tt(t,r),e=new tt(e,r),t.intersects(e)}Z.coerce=xne;function xne(t){if(t instanceof he)return t;if(typeof t!="string")return null;var e=t.match(Fe[eM]);return e==null?null:Fs(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var ex=m(Z_=>{"use strict";Object.defineProperty(Z_,"__esModule",{value:!0});var bne=require("path"),Sne=fM(),dM=require("module"),Pne=Object.keys(process.binding("natives")),pM=dM.prototype.require;function Ine(t){var e={};return function(n){var i=pM.apply(this,arguments);if(t[n]){var o=dM._resolveFilename(n,this);if(e.hasOwnProperty(o))return e[o];var s=void 0;if(Pne.indexOf(n)<0)try{s=pM.call(this,bne.join(n,"package.json")).version}catch(d){return i}else s=process.version.substring(1);var a=s.indexOf("-");a>=0&&(s=s.substring(0,a));for(var c=i,u=0,l=t[n];u<l.length;u++){var f=l[u];Sne.satisfies(s,f.versionSpecifier)&&(c=f.patch(c,o))}return e[o]=c}return i}}Z_.makePatchingRequire=Ine});var hM=m((OIe,Ane)=>{Ane.exports={name:"diagnostic-channel",version:"0.2.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"^7.0.12",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"^2.2.1"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var Et=m(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});var Rne=ex(),Tne=ex();Wm.makePatchingRequire=Tne.makePatchingRequire;var mM=function(t){return!0},kne=function(){function t(){this.version=hM().version,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return t.prototype.shouldPublish=function(e){var r=this.subscribers[e];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},t.prototype.publish=function(e,r){if(!this.currentlyPublishing){var n=this.subscribers[e];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(o){var s=o.listener,a=o.filter;try{a&&a(!0)&&s(i)}catch(c){}}),this.currentlyPublishing=!1}}},t.prototype.subscribe=function(e,r,n){n===void 0&&(n=mM),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:r,filter:n})},t.prototype.unsubscribe=function(e,r,n){n===void 0&&(n=mM);var i=this.subscribers[e];if(i){for(var o=0;o<i.length;++o)if(i[o].listener===r&&i[o].filter===n)return i.splice(o,1),!0}return!1},t.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete e.knownPatches[r]})},t.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},t.prototype.addContextPreservation=function(e){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return e(r(n))}},t.prototype.registerMonkeyPatch=function(e,r){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(r)},t.prototype.getPatchesObject=function(){return this.knownPatches},t}();global.diagnosticsSource||(global.diagnosticsSource=new kne,gM=require("module"),gM.prototype.require=Rne.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var gM;Wm.channel=global.diagnosticsSource});var vM=m(zm=>{"use strict";Object.defineProperty(zm,"__esModule",{value:!0});zm.BaggageImpl=void 0;var Dne=function(){function t(e){this._entries=e?new Map(e):new Map}return t.prototype.getEntry=function(e){var r=this._entries.get(e);if(!!r)return Object.assign({},r)},t.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var r=e[0],n=e[1];return[r,n]})},t.prototype.setEntry=function(e,r){var n=new t(this._entries);return n._entries.set(e,r),n},t.prototype.removeEntry=function(e){var r=new t(this._entries);return r._entries.delete(e),r},t.prototype.removeEntries=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n=new t(this._entries),i=0,o=e;i<o.length;i++){var s=o[i];n._entries.delete(s)}return n},t.prototype.clear=function(){return new t},t}();zm.BaggageImpl=Dne});var yM=m(Km=>{"use strict";Object.defineProperty(Km,"__esModule",{value:!0});Km.baggageEntryMetadataSymbol=void 0;Km.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var wM=m(CM=>{"use strict";Object.defineProperty(CM,"__esModule",{value:!0})});var _M=m(EM=>{"use strict";Object.defineProperty(EM,"__esModule",{value:!0})});var bM=m(un=>{"use strict";var One=un&&un.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xM=un&&un.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&One(e,t,r)};Object.defineProperty(un,"__esModule",{value:!0});un.baggageEntryMetadataFromString=un.createBaggage=void 0;var Nne=vM(),Lne=yM();xM(wM(),un);xM(_M(),un);function Fne(t){return t===void 0&&(t={}),new Nne.BaggageImpl(new Map(Object.entries(t)))}un.createBaggage=Fne;function qne(t){return typeof t!="string"&&(t=""),{__TYPE__:Lne.baggageEntryMetadataSymbol,toString:function(){return t}}}un.baggageEntryMetadataFromString=qne});var PM=m(SM=>{"use strict";Object.defineProperty(SM,"__esModule",{value:!0})});var AM=m(IM=>{"use strict";Object.defineProperty(IM,"__esModule",{value:!0})});var RM=m(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.DiagConsoleLogger=void 0;var tx=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Mne=function(){function t(){function e(n){return function(){var i=arguments;if(console){var o=console[n];if(typeof o!="function"&&(o=console.log),typeof o=="function")return o.apply(console,i)}}}for(var r=0;r<tx.length;r++)this[tx[r].n]=e(tx[r].c)}return t}();Ym.DiagConsoleLogger=Mne});var Xm=m(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});pf.DiagLogLevel=void 0;var $ne;(function(t){t[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL"})($ne=pf.DiagLogLevel||(pf.DiagLogLevel={}))});var kM=m(Ro=>{"use strict";var Une=Ro&&Ro.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TM=Ro&&Ro.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Une(e,t,r)};Object.defineProperty(Ro,"__esModule",{value:!0});TM(RM(),Ro);TM(Xm(),Ro)});var rx=m(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.NOOP_TEXT_MAP_PROPAGATOR=Nc.NoopTextMapPropagator=void 0;var DM=function(){function t(){}return t.prototype.inject=function(e,r){},t.prototype.extract=function(e,r){return e},t.prototype.fields=function(){return[]},t}();Nc.NoopTextMapPropagator=DM;Nc.NOOP_TEXT_MAP_PROPAGATOR=new DM});var nx=m(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.defaultTextMapSetter=Lc.defaultTextMapGetter=void 0;Lc.defaultTextMapGetter={get:function(t,e){if(t!=null)return t[e]},keys:function(t){return t==null?[]:Object.keys(t)}};Lc.defaultTextMapSetter={set:function(t,e,r){t!=null&&(t[e]=r)}}});var NM=m(OM=>{"use strict";Object.defineProperty(OM,"__esModule",{value:!0})});var FM=m(LM=>{"use strict";Object.defineProperty(LM,"__esModule",{value:!0})});var MM=m(qM=>{"use strict";Object.defineProperty(qM,"__esModule",{value:!0})});var UM=m($M=>{"use strict";Object.defineProperty($M,"__esModule",{value:!0})});var ix=m(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.TraceFlags=void 0;var jne;(function(t){t[t.NONE=0]="NONE",t[t.SAMPLED=1]="SAMPLED"})(jne=hf.TraceFlags||(hf.TraceFlags={}))});var mf=m(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.isSpanContextValid=Mt.isValidSpanId=Mt.isValidTraceId=Mt.INVALID_SPAN_CONTEXT=Mt.INVALID_TRACEID=Mt.INVALID_SPANID=void 0;var Hne=ix(),Bne=/^([0-9a-f]{32})$/i,Vne=/^[0-9a-f]{16}$/i;Mt.INVALID_SPANID="0000000000000000";Mt.INVALID_TRACEID="00000000000000000000000000000000";Mt.INVALID_SPAN_CONTEXT={traceId:Mt.INVALID_TRACEID,spanId:Mt.INVALID_SPANID,traceFlags:Hne.TraceFlags.NONE};function jM(t){return Bne.test(t)&&t!==Mt.INVALID_TRACEID}Mt.isValidTraceId=jM;function HM(t){return Vne.test(t)&&t!==Mt.INVALID_SPANID}Mt.isValidSpanId=HM;function Gne(t){return jM(t.traceId)&&HM(t.spanId)}Mt.isSpanContextValid=Gne});var ox=m(Qm=>{"use strict";Object.defineProperty(Qm,"__esModule",{value:!0});Qm.NoopSpan=void 0;var Wne=mf(),zne=function(){function t(e){e===void 0&&(e=Wne.INVALID_SPAN_CONTEXT),this._spanContext=e}return t.prototype.context=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return this},t.prototype.setAttributes=function(e){return this},t.prototype.addEvent=function(e,r){return this},t.prototype.setStatus=function(e){return this},t.prototype.updateName=function(e){return this},t.prototype.end=function(e){},t.prototype.isRecording=function(){return!1},t.prototype.recordException=function(e,r){},t}();Qm.NoopSpan=zne});var Zm=m(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.ROOT_CONTEXT=Je.createContextKey=Je.setBaggage=Je.getBaggage=Je.isInstrumentationSuppressed=Je.unsuppressInstrumentation=Je.suppressInstrumentation=Je.getSpanContext=Je.setSpanContext=Je.setSpan=Je.getSpan=void 0;var Kne=ox(),BM=Jm("OpenTelemetry Context Key SPAN"),sx=Jm("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),VM=Jm("OpenTelemetry Baggage Key");function GM(t){return t.getValue(BM)||void 0}Je.getSpan=GM;function WM(t,e){return t.setValue(BM,e)}Je.setSpan=WM;function Yne(t,e){return WM(t,new Kne.NoopSpan(e))}Je.setSpanContext=Yne;function Xne(t){var e;return(e=GM(t))===null||e===void 0?void 0:e.context()}Je.getSpanContext=Xne;function Qne(t){return t.setValue(sx,!0)}Je.suppressInstrumentation=Qne;function Jne(t){return t.setValue(sx,!1)}Je.unsuppressInstrumentation=Jne;function Zne(t){return Boolean(t.getValue(sx))}Je.isInstrumentationSuppressed=Zne;function eie(t){return t.getValue(VM)||void 0}Je.getBaggage=eie;function tie(t,e){return t.setValue(VM,e)}Je.setBaggage=tie;function Jm(t){return Symbol.for(t)}Je.createContextKey=Jm;var rie=function(){function t(e){var r=this;r._currentContext=e?new Map(e):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var o=new t(r._currentContext);return o._currentContext.set(n,i),o},r.deleteValue=function(n){var i=new t(r._currentContext);return i._currentContext.delete(n),i}}return t}();Je.ROOT_CONTEXT=new rie});var eg=m(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.NOOP_TRACER=Fc.NoopTracer=void 0;var nie=Zm(),ax=ox(),iie=mf(),zM=function(){function t(){}return t.prototype.startSpan=function(e,r,n){var i=Boolean(r==null?void 0:r.root);if(i)return new ax.NoopSpan;var o=n&&nie.getSpanContext(n);return oie(o)&&iie.isSpanContextValid(o)?new ax.NoopSpan(o):new ax.NoopSpan},t}();Fc.NoopTracer=zM;function oie(t){return typeof t=="object"&&typeof t.spanId=="string"&&typeof t.traceId=="string"&&typeof t.traceFlags=="number"}Fc.NOOP_TRACER=new zM});var cx=m(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.NOOP_TRACER_PROVIDER=qc.NoopTracerProvider=void 0;var sie=eg(),KM=function(){function t(){}return t.prototype.getTracer=function(e,r){return sie.NOOP_TRACER},t}();qc.NoopTracerProvider=KM;qc.NOOP_TRACER_PROVIDER=new KM});var ux=m(tg=>{"use strict";Object.defineProperty(tg,"__esModule",{value:!0});tg.ProxyTracer=void 0;var aie=eg(),cie=function(){function t(e,r,n){this._provider=e,this.name=r,this.version=n}return t.prototype.startSpan=function(e,r,n){return this._getTracer().startSpan(e,r,n)},t.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):aie.NOOP_TRACER},t}();tg.ProxyTracer=cie});var lx=m(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.ProxyTracerProvider=void 0;var uie=ux(),lie=cx(),fie=function(){function t(){}return t.prototype.getTracer=function(e,r){var n;return(n=this.getDelegateTracer(e,r))!==null&&n!==void 0?n:new uie.ProxyTracer(this,e,r)},t.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:lie.NOOP_TRACER_PROVIDER},t.prototype.setDelegate=function(e){this._delegate=e},t.prototype.getDelegateTracer=function(e,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(e,r)},t}();rg.ProxyTracerProvider=fie});var XM=m(YM=>{"use strict";Object.defineProperty(YM,"__esModule",{value:!0})});var QM=m(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.SamplingDecision=void 0;var die;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(die=gf.SamplingDecision||(gf.SamplingDecision={}))});var ZM=m(JM=>{"use strict";Object.defineProperty(JM,"__esModule",{value:!0})});var e$=m(vf=>{"use strict";Object.defineProperty(vf,"__esModule",{value:!0});vf.SpanKind=void 0;var pie;(function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"})(pie=vf.SpanKind||(vf.SpanKind={}))});var r$=m(t$=>{"use strict";Object.defineProperty(t$,"__esModule",{value:!0})});var i$=m(n$=>{"use strict";Object.defineProperty(n$,"__esModule",{value:!0})});var o$=m(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});yf.SpanStatusCode=void 0;var hie;(function(t){t[t.UNSET=0]="UNSET",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR"})(hie=yf.SpanStatusCode||(yf.SpanStatusCode={}))});var a$=m(s$=>{"use strict";Object.defineProperty(s$,"__esModule",{value:!0})});var u$=m(c$=>{"use strict";Object.defineProperty(c$,"__esModule",{value:!0})});var f$=m(l$=>{"use strict";Object.defineProperty(l$,"__esModule",{value:!0})});var p$=m(d$=>{"use strict";Object.defineProperty(d$,"__esModule",{value:!0})});var fx=m(Mc=>{"use strict";var mie=Mc&&Mc.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.NoopContextManager=void 0;var gie=Zm(),vie=function(){function t(){}return t.prototype.active=function(){return gie.ROOT_CONTEXT},t.prototype.with=function(e,r,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return r.call.apply(r,mie([n],i))},t.prototype.bind=function(e,r){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}();Mc.NoopContextManager=vie});var m$=m(h$=>{"use strict";Object.defineProperty(h$,"__esModule",{value:!0})});var g$=m(ng=>{"use strict";Object.defineProperty(ng,"__esModule",{value:!0});ng._globalThis=void 0;ng._globalThis=typeof globalThis=="object"?globalThis:global});var v$=m(qs=>{"use strict";var yie=qs&&qs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Cie=qs&&qs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yie(e,t,r)};Object.defineProperty(qs,"__esModule",{value:!0});Cie(g$(),qs)});var y$=m(Ms=>{"use strict";var wie=Ms&&Ms.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Eie=Ms&&Ms.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wie(e,t,r)};Object.defineProperty(Ms,"__esModule",{value:!0});Eie(v$(),Ms)});var dx=m(ig=>{"use strict";Object.defineProperty(ig,"__esModule",{value:!0});ig.VERSION=void 0;ig.VERSION="0.18.1"});var E$=m($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.isCompatible=$c._makeCompatibilityCheck=void 0;var _ie=dx(),C$=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function w$(t){var e=new Set([t]),r=new Set,n=t.match(C$);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3]};function o(a){return r.add(a),!1}function s(a){return e.add(a),!0}return function(c){if(e.has(c))return!0;if(r.has(c))return!1;var u=c.match(C$);if(!u)return o(c);var l={major:+u[1],minor:+u[2],patch:+u[3]};return i.major!==l.major?o(c):i.major===0?i.minor===l.minor&&i.patch<=l.patch?s(c):o(c):i.minor<=l.minor?s(c):o(c)}}$c._makeCompatibilityCheck=w$;$c.isCompatible=w$(_ie.VERSION)});var Cf=m(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.unregisterGlobal=To.getGlobal=To.registerGlobal=void 0;var _$=_t(),xie=y$(),px=dx(),bie=E$(),Sie=px.VERSION.split(".")[0],Uc=Symbol.for("io.opentelemetry.js.api."+Sie),jc=xie._globalThis;function Pie(t,e,r){var n;r===void 0&&(r=!1),jc[Uc]=(n=jc[Uc])!==null&&n!==void 0?n:{version:px.VERSION};var i=jc[Uc];if(!r&&i[t]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);_$.diag.error(o.stack||o.message);return}if(i.version!==px.VERSION){var o=new Error("@opentelemetry/api: All API registration versions must match");_$.diag.error(o.stack||o.message);return}i[t]=e}To.registerGlobal=Pie;function Iie(t){var e,r,n=(e=jc[Uc])===null||e===void 0?void 0:e.version;if(!(!n||!bie.isCompatible(n)))return(r=jc[Uc])===null||r===void 0?void 0:r[t]}To.getGlobal=Iie;function Aie(t){var e=jc[Uc];e&&delete e[t]}To.unregisterGlobal=Aie});var x$=m(Hc=>{"use strict";var Rie=Hc&&Hc.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.ContextAPI=void 0;var Tie=fx(),hx=Cf(),mx="context",kie=new Tie.NoopContextManager,Die=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(e){return hx.registerGlobal(mx,e),e},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(e,r,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,Rie([e,r,n],o))},t.prototype.bind=function(e,r){return r===void 0&&(r=this.active()),this._getContextManager().bind(e,r)},t.prototype._getContextManager=function(){return hx.getGlobal(mx)||kie},t.prototype.disable=function(){this._getContextManager().disable(),hx.unregisterGlobal(mx)},t}();Hc.ContextAPI=Die});var S$=m(og=>{"use strict";Object.defineProperty(og,"__esModule",{value:!0});og.TraceAPI=void 0;var b$=lx(),Oie=mf(),gx=Cf(),vx="trace",Nie=function(){function t(){this._proxyTracerProvider=new b$.ProxyTracerProvider,this.isSpanContextValid=Oie.isSpanContextValid}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalTracerProvider=function(e){return this._proxyTracerProvider.setDelegate(e),gx.registerGlobal(vx,this._proxyTracerProvider),this._proxyTracerProvider},t.prototype.getTracerProvider=function(){return gx.getGlobal(vx)||this._proxyTracerProvider},t.prototype.getTracer=function(e,r){return this.getTracerProvider().getTracer(e,r)},t.prototype.disable=function(){gx.unregisterGlobal(vx),this._proxyTracerProvider=new b$.ProxyTracerProvider},t}();og.TraceAPI=Nie});var I$=m(sg=>{"use strict";Object.defineProperty(sg,"__esModule",{value:!0});sg.PropagationAPI=void 0;var Lie=rx(),P$=nx(),yx=Cf(),Cx="propagation",Fie=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalPropagator=function(e){return yx.registerGlobal(Cx,e),e},t.prototype.inject=function(e,r,n){return n===void 0&&(n=P$.defaultTextMapSetter),this._getGlobalPropagator().inject(e,r,n)},t.prototype.extract=function(e,r,n){return n===void 0&&(n=P$.defaultTextMapGetter),this._getGlobalPropagator().extract(e,r,n)},t.prototype.fields=function(){return this._getGlobalPropagator().fields()},t.prototype.disable=function(){yx.unregisterGlobal(Cx)},t.prototype._getGlobalPropagator=function(){return yx.getGlobal(Cx)||Lie.NOOP_TEXT_MAP_PROPAGATOR},t}();sg.PropagationAPI=Fie});var A$=m(ag=>{"use strict";Object.defineProperty(ag,"__esModule",{value:!0});ag.createLogLevelDiagLogger=void 0;var Ri=Xm();function qie(t,e){t<Ri.DiagLogLevel.NONE?t=Ri.DiagLogLevel.NONE:t>Ri.DiagLogLevel.ALL&&(t=Ri.DiagLogLevel.ALL),e=e||{};function r(n,i){var o=e[n];return typeof o=="function"&&t>=i?o.bind(e):function(){}}return{error:r("error",Ri.DiagLogLevel.ERROR),warn:r("warn",Ri.DiagLogLevel.WARN),info:r("info",Ri.DiagLogLevel.INFO),debug:r("debug",Ri.DiagLogLevel.DEBUG),verbose:r("verbose",Ri.DiagLogLevel.VERBOSE)}}ag.createLogLevelDiagLogger=qie});var R$=m(cg=>{"use strict";Object.defineProperty(cg,"__esModule",{value:!0});cg.DiagAPI=void 0;var Mie=A$(),$ie=Xm(),wx=Cf(),Uie="diag",jie=function(){function t(){function e(n){return function(){var i=wx.getGlobal("diag");if(!!i)return i[n].apply(i,arguments)}}var r=this;r.setLogger=function(n,i){var o;if(i===void 0&&(i=$ie.DiagLogLevel.INFO),n===r){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");r.error((o=s.stack)!==null&&o!==void 0?o:s.message);return}wx.registerGlobal("diag",Mie.createLogLevelDiagLogger(i,n),!0)},r.disable=function(){wx.unregisterGlobal(Uie)},r.verbose=e("verbose"),r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}();cg.DiagAPI=jie});var _t=m(G=>{"use strict";var Hie=G&&G.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Te=G&&G.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Hie(e,t,r)};Object.defineProperty(G,"__esModule",{value:!0});G.diag=G.propagation=G.trace=G.context=G.isValidSpanId=G.isValidTraceId=G.isSpanContextValid=G.INVALID_SPAN_CONTEXT=G.INVALID_TRACEID=G.INVALID_SPANID=void 0;Te(bM(),G);Te(PM(),G);Te(AM(),G);Te(kM(),G);Te(rx(),G);Te(nx(),G);Te(NM(),G);Te(FM(),G);Te(MM(),G);Te(UM(),G);Te(eg(),G);Te(cx(),G);Te(ux(),G);Te(lx(),G);Te(XM(),G);Te(QM(),G);Te(ZM(),G);Te(e$(),G);Te(r$(),G);Te(i$(),G);Te(o$(),G);Te(a$(),G);Te(ix(),G);Te(u$(),G);Te(f$(),G);Te(p$(),G);var Bc=mf();Object.defineProperty(G,"INVALID_SPANID",{enumerable:!0,get:function(){return Bc.INVALID_SPANID}});Object.defineProperty(G,"INVALID_TRACEID",{enumerable:!0,get:function(){return Bc.INVALID_TRACEID}});Object.defineProperty(G,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return Bc.INVALID_SPAN_CONTEXT}});Object.defineProperty(G,"isSpanContextValid",{enumerable:!0,get:function(){return Bc.isSpanContextValid}});Object.defineProperty(G,"isValidTraceId",{enumerable:!0,get:function(){return Bc.isValidTraceId}});Object.defineProperty(G,"isValidSpanId",{enumerable:!0,get:function(){return Bc.isValidSpanId}});Te(Zm(),G);Te(fx(),G);Te(m$(),G);var Bie=x$();G.context=Bie.ContextAPI.getInstance();var Vie=S$();G.trace=Vie.TraceAPI.getInstance();var Gie=I$();G.propagation=Gie.PropagationAPI.getInstance();var Wie=R$();G.diag=Wie.DiagAPI.instance();G.default={trace:G.trace,context:G.context,propagation:G.propagation,diag:G.diag}});var D$=m(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.isAttributeValue=Vc.sanitizeAttributes=void 0;function zie(t){let e={};if(t==null||typeof t!="object")return e;for(let[r,n]of Object.entries(t))T$(n)&&(Array.isArray(n)?e[r]=n.slice():e[r]=n);return e}Vc.sanitizeAttributes=zie;function T$(t){return t==null?!0:Array.isArray(t)?Kie(t):k$(t)}Vc.isAttributeValue=T$;function Kie(t){let e;for(let r of t)if(r!=null){if(!e){if(k$(r)){e=typeof r;continue}return!1}if(typeof r!==e)return!1}return!0}function k$(t){switch(typeof t){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}});var Ex=m(ug=>{"use strict";Object.defineProperty(ug,"__esModule",{value:!0});ug.loggingErrorHandler=void 0;var Yie=_t();function Xie(){return t=>{Yie.diag.error(Qie(t))}}ug.loggingErrorHandler=Xie;function Qie(t){return typeof t=="string"?t:JSON.stringify(Jie(t))}function Jie(t){let e={},r=t;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(e[n])return;let i=r[n];i&&(e[n]=String(i))}),r=Object.getPrototypeOf(r);return e}});var _x=m(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.globalErrorHandler=Gc.setGlobalErrorHandler=void 0;var Zie=Ex(),O$=Zie.loggingErrorHandler();function eoe(t){O$=t}Gc.setGlobalErrorHandler=eoe;var toe=t=>{try{O$(t)}catch(e){}};Gc.globalErrorHandler=toe});var xx=m(wf=>{"use strict";Object.defineProperty(wf,"__esModule",{value:!0});wf.TracesSamplerValues=void 0;var roe;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(roe=wf.TracesSamplerValues||(wf.TracesSamplerValues={}))});var N$=m($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.parseEnvironment=$s.DEFAULT_ENVIRONMENT=void 0;var ko=_t(),noe=xx(),ioe=",",ooe=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function soe(t){return ooe.indexOf(t)>-1}var aoe=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function coe(t){return aoe.indexOf(t)>-1}$s.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ko.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_SAMPLER:noe.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function uoe(t,e,r,n=-Infinity,i=Infinity){if(typeof r[t]!="undefined"){let o=Number(r[t]);isNaN(o)||(o<n?e[t]=n:o>i?e[t]=i:e[t]=o)}}function loe(t,e,r,n=ioe){let i=r[t];typeof i=="string"&&(e[t]=i.split(n).map(o=>o.trim()))}var foe={ALL:ko.DiagLogLevel.ALL,VERBOSE:ko.DiagLogLevel.VERBOSE,DEBUG:ko.DiagLogLevel.DEBUG,INFO:ko.DiagLogLevel.INFO,WARN:ko.DiagLogLevel.WARN,ERROR:ko.DiagLogLevel.ERROR,NONE:ko.DiagLogLevel.NONE};function doe(t,e,r){let n=r[t];if(typeof n=="string"){let i=foe[n.toUpperCase()];i!=null&&(e[t]=i)}}function poe(t){let e={};for(let r in $s.DEFAULT_ENVIRONMENT){let n=r;switch(n){case"OTEL_LOG_LEVEL":doe(n,e,t);break;default:if(soe(n))uoe(n,e,t);else if(coe(n))loe(n,e,t);else{let i=t[n];typeof i!="undefined"&&i!==null&&(e[n]=String(i))}}}return e}$s.parseEnvironment=poe});var F$=m(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});lg.getEnv=void 0;var hoe=require("os"),L$=N$();function moe(){let t=L$.parseEnvironment(process.env);return Object.assign({HOSTNAME:hoe.hostname()},L$.DEFAULT_ENVIRONMENT,t)}lg.getEnv=moe});var q$=m(fg=>{"use strict";Object.defineProperty(fg,"__esModule",{value:!0});fg.hexToBase64=void 0;function goe(t){let e=t.length,r="";for(let n=0;n<e;n+=2){let i=t.substring(n,n+2),o=parseInt(i,16);r+=String.fromCharCode(o)}return Buffer.from(r,"ascii").toString("base64")}fg.hexToBase64=goe});var j$=m(pg=>{"use strict";Object.defineProperty(pg,"__esModule",{value:!0});pg.RandomIdGenerator=void 0;var voe=8,M$=16,$$=class{constructor(){this.generateTraceId=U$(M$),this.generateSpanId=U$(voe)}};pg.RandomIdGenerator=$$;var dg=Buffer.allocUnsafe(M$);function U$(t){return function(){for(let r=0;r<t/4;r++)dg.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<t&&!(dg[r]>0);r++)r===t-1&&(dg[t-1]=1);return dg.toString("hex",0,t)}}});var H$=m(hg=>{"use strict";Object.defineProperty(hg,"__esModule",{value:!0});hg.otperformance=void 0;var yoe=require("perf_hooks");hg.otperformance=yoe.performance});var bx=m(mg=>{"use strict";Object.defineProperty(mg,"__esModule",{value:!0});mg.VERSION=void 0;mg.VERSION="0.19.0"});var B$=m(gg=>{"use strict";Object.defineProperty(gg,"__esModule",{value:!0});gg.SDK_INFO=void 0;var Coe=bx();gg.SDK_INFO={NAME:"opentelemetry",RUNTIME:"node",LANGUAGE:"nodejs",VERSION:Coe.VERSION}});var V$=m(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.unrefTimer=void 0;function woe(t){t.unref()}vg.unrefTimer=woe});var G$=m(ln=>{"use strict";var Eoe=ln&&ln.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wc=ln&&ln.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Eoe(e,t,r)};Object.defineProperty(ln,"__esModule",{value:!0});Wc(F$(),ln);Wc(q$(),ln);Wc(j$(),ln);Wc(H$(),ln);Wc(B$(),ln);Wc(V$(),ln)});var Sx=m(Us=>{"use strict";var _oe=Us&&Us.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xoe=Us&&Us.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_oe(e,t,r)};Object.defineProperty(Us,"__esModule",{value:!0});xoe(G$(),Us)});var K$=m(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.isTimeInput=xt.isTimeInputHrTime=xt.hrTimeToMicroseconds=xt.hrTimeToMilliseconds=xt.hrTimeToNanoseconds=xt.hrTimeToTimeStamp=xt.hrTimeDuration=xt.timeInputToHrTime=xt.hrTime=void 0;var Px=Sx(),Ix=9,Ef=Math.pow(10,Ix);function yg(t){let e=t/1e3,r=Math.trunc(e),n=Number((e-r).toFixed(Ix))*Ef;return[r,n]}function W$(){let t=Px.otperformance.timeOrigin;if(typeof t!="number"){let e=Px.otperformance;t=e.timing&&e.timing.fetchStart}return t}function z$(t){let e=yg(W$()),r=yg(typeof t=="number"?t:Px.otperformance.now()),n=e[0]+r[0],i=e[1]+r[1];return i>Ef&&(i-=Ef,n+=1),[n,i]}xt.hrTime=z$;function boe(t){if(Ax(t))return t;if(typeof t=="number")return t<W$()?z$(t):yg(t);if(t instanceof Date)return yg(t.getTime());throw TypeError("Invalid input type")}xt.timeInputToHrTime=boe;function Soe(t,e){let r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=Ef),[r,n]}xt.hrTimeDuration=Soe;function Poe(t){let e=Ix,r=`${"0".repeat(e)}${t[1]}Z`,n=r.substr(r.length-e-1);return new Date(t[0]*1e3).toISOString().replace("000Z",n)}xt.hrTimeToTimeStamp=Poe;function Ioe(t){return t[0]*Ef+t[1]}xt.hrTimeToNanoseconds=Ioe;function Aoe(t){return Math.round(t[0]*1e3+t[1]/1e6)}xt.hrTimeToMilliseconds=Aoe;function Roe(t){return Math.round(t[0]*1e6+t[1]/1e3)}xt.hrTimeToMicroseconds=Roe;function Ax(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}xt.isTimeInputHrTime=Ax;function Toe(t){return Ax(t)||typeof t=="number"||t instanceof Date}xt.isTimeInput=Toe});var X$=m(Y$=>{"use strict";Object.defineProperty(Y$,"__esModule",{value:!0})});var Q$=m(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.ExportResultCode=void 0;var koe;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(koe=_f.ExportResultCode||(_f.ExportResultCode={}))});var eU=m(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.CompositePropagator=void 0;var J$=_t(),Z$=class{constructor(e={}){var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,i)=>n.concat(i),[])))}inject(e,r,n){for(let i of this._propagators)try{i.inject(e,r,n)}catch(o){J$.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${o.message}`)}}extract(e,r,n){return this._propagators.reduce((i,o)=>{try{return o.extract(i,r,n)}catch(s){J$.diag.warn(`Failed to inject with ${o.constructor.name}. Err: ${s.message}`)}return i},e)}fields(){return this._fields.slice()}};Cg.CompositePropagator=Z$});var tU=m(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.validateValue=zc.validateKey=void 0;var Rx="[_0-9a-z-*/]",Doe=`[a-z]${Rx}{0,255}`,Ooe=`[a-z0-9]${Rx}{0,240}@[a-z]${Rx}{0,13}`,Noe=new RegExp(`^(?:${Doe}|${Ooe})$`),Loe=/^[ -~]{0,255}[!-~]$/,Foe=/,|=/;function qoe(t){return Noe.test(t)}zc.validateKey=qoe;function Moe(t){return Loe.test(t)&&!Foe.test(t)}zc.validateValue=Moe});var Tx=m(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});Eg.TraceState=void 0;var rU=tU(),nU=32,$oe=512,iU=",",oU="=",wg=class{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,r){let n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n}unset(e){let r=this._clone();return r._internalState.delete(e),r}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,r)=>(e.push(r+oU+this.get(r)),e),[]).join(iU)}_parse(e){e.length>$oe||(this._internalState=e.split(iU).reverse().reduce((r,n)=>{let i=n.trim(),o=i.indexOf(oU);if(o!==-1){let s=i.slice(0,o),a=i.slice(o+1,n.length);rU.validateKey(s)&&rU.validateValue(a)&&r.set(s,a)}return r},new Map),this._internalState.size>nU&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,nU))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new wg;return e._internalState=new Map(this._internalState),e}};Eg.TraceState=wg});var cU=m(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.HttpTraceContext=tr.parseTraceParent=tr.TRACE_STATE_HEADER=tr.TRACE_PARENT_HEADER=void 0;var xf=_t(),Uoe=Tx();tr.TRACE_PARENT_HEADER="traceparent";tr.TRACE_STATE_HEADER="tracestate";var joe="00",Hoe="(?!ff)[\\da-f]{2}",Boe="(?![0]{32})[\\da-f]{32}",Voe="(?![0]{16})[\\da-f]{16}",Goe="[\\da-f]{2}",Woe=new RegExp(`^\\s?(${Hoe})-(${Boe})-(${Voe})-(${Goe})(-.*)?\\s?$`);function sU(t){let e=Woe.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}tr.parseTraceParent=sU;var aU=class{inject(e,r,n){let i=xf.getSpanContext(e);if(!i||xf.isInstrumentationSuppressed(e)||!xf.isSpanContextValid(i))return;let o=`${joe}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||xf.TraceFlags.NONE).toString(16)}`;n.set(r,tr.TRACE_PARENT_HEADER,o),i.traceState&&n.set(r,tr.TRACE_STATE_HEADER,i.traceState.serialize())}extract(e,r,n){let i=n.get(r,tr.TRACE_PARENT_HEADER);if(!i)return e;let o=Array.isArray(i)?i[0]:i;if(typeof o!="string")return e;let s=sU(o);if(!s)return e;s.isRemote=!0;let a=n.get(r,tr.TRACE_STATE_HEADER);if(a){let c=Array.isArray(a)?a.join(","):a;s.traceState=new Uoe.TraceState(typeof c=="string"?c:void 0)}return xf.setSpanContext(e,s)}fields(){return[tr.TRACE_PARENT_HEADER,tr.TRACE_STATE_HEADER]}};tr.HttpTraceContext=aU});var lU=m(uU=>{"use strict";Object.defineProperty(uU,"__esModule",{value:!0})});var hU=m($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.HttpBaggage=$t.MAX_TOTAL_LENGTH=$t.MAX_PER_NAME_VALUE_PAIRS=$t.MAX_NAME_VALUE_PAIRS=$t.BAGGAGE_HEADER=void 0;var bf=_t(),zoe="=",fU=";",dU=",";$t.BAGGAGE_HEADER="baggage";$t.MAX_NAME_VALUE_PAIRS=180;$t.MAX_PER_NAME_VALUE_PAIRS=4096;$t.MAX_TOTAL_LENGTH=8192;var pU=class{inject(e,r,n){let i=bf.getBaggage(e);if(!i||bf.isInstrumentationSuppressed(e))return;let o=this._getKeyPairs(i).filter(a=>a.length<=$t.MAX_PER_NAME_VALUE_PAIRS).slice(0,$t.MAX_NAME_VALUE_PAIRS),s=this._serializeKeyPairs(o);s.length>0&&n.set(r,$t.BAGGAGE_HEADER,s)}_serializeKeyPairs(e){return e.reduce((r,n)=>{let i=`${r}${r!==""?dU:""}${n}`;return i.length>$t.MAX_TOTAL_LENGTH?r:i},"")}_getKeyPairs(e){return e.getAllEntries().map(([r,n])=>`${encodeURIComponent(r)}=${encodeURIComponent(n.value)}`)}extract(e,r,n){let i=n.get(r,$t.BAGGAGE_HEADER);if(!i)return e;let o={};return i.length===0||(i.split(dU).forEach(a=>{let c=this._parsePairKeyValue(a);if(c){let u={value:c.value};c.metadata&&(u.metadata=c.metadata),o[c.key]=u}}),Object.entries(o).length===0)?e:bf.setBaggage(e,bf.createBaggage(o))}_parsePairKeyValue(e){let r=e.split(fU);if(r.length<=0)return;let n=r.shift();if(!n)return;let i=n.split(zoe);if(i.length!==2)return;let o=decodeURIComponent(i[0].trim()),s=decodeURIComponent(i[1].trim()),a;return r.length>0&&(a=bf.baggageEntryMetadataFromString(r.join(fU))),{key:o,value:s,metadata:a}}fields(){return[$t.BAGGAGE_HEADER]}};$t.HttpBaggage=pU});var kx=m(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0});_g.AlwaysOffSampler=void 0;var Koe=_t(),mU=class{shouldSample(){return{decision:Koe.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};_g.AlwaysOffSampler=mU});var Dx=m(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.AlwaysOnSampler=void 0;var Yoe=_t(),gU=class{shouldSample(){return{decision:Yoe.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};xg.AlwaysOnSampler=gU});var CU=m(bg=>{"use strict";Object.defineProperty(bg,"__esModule",{value:!0});bg.ParentBasedSampler=void 0;var Ox=_t(),Xoe=_x(),vU=kx(),Nx=Dx(),yU=class{constructor(e){var r,n,i,o;this._root=e.root,this._root||(Xoe.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Nx.AlwaysOnSampler),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new Nx.AlwaysOnSampler,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new vU.AlwaysOffSampler,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new Nx.AlwaysOnSampler,this._localParentNotSampled=(o=e.localParentNotSampled)!==null&&o!==void 0?o:new vU.AlwaysOffSampler}shouldSample(e,r,n,i,o,s){let a=Ox.getSpanContext(e);return a?a.isRemote?a.traceFlags&Ox.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,o,s):this._remoteParentNotSampled.shouldSample(e,r,n,i,o,s):a.traceFlags&Ox.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,o,s):this._localParentNotSampled.shouldSample(e,r,n,i,o,s):this._root.shouldSample(e,r,n,i,o,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};bg.ParentBasedSampler=yU});var EU=m(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.TraceIdRatioBasedSampler=void 0;var Lx=_t(),wU=class{constructor(e=0){this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,r){return{decision:Lx.isValidTraceId(r)&&this._accumulate(r)<this._upperBound?Lx.SamplingDecision.RECORD_AND_SAMPLED:Lx.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e}_accumulate(e){let r=0;for(let n=0;n<e.length/8;n++){let i=n*8,o=parseInt(e.slice(i,i+8),16);r=(r^o)>>>0}return r}};Sg.TraceIdRatioBasedSampler=wU});var xU=m(_U=>{"use strict";Object.defineProperty(_U,"__esModule",{value:!0})});var SU=m(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.isUrlIgnored=Kc.urlMatches=void 0;function bU(t,e){return typeof e=="string"?t===e:!!t.match(e)}Kc.urlMatches=bU;function Qoe(t,e){if(!e)return!1;for(let r of e)if(bU(t,r))return!0;return!1}Kc.isUrlIgnored=Qoe});var PU=m(Pg=>{"use strict";Object.defineProperty(Pg,"__esModule",{value:!0});Pg.isWrapped=void 0;function Joe(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}Pg.isWrapped=Joe});var fn=m(qe=>{"use strict";var Zoe=qe&&qe.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),ht=qe&&qe.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Zoe(e,t,r)};Object.defineProperty(qe,"__esModule",{value:!0});ht(D$(),qe);ht(_x(),qe);ht(Ex(),qe);ht(K$(),qe);ht(X$(),qe);ht(Q$(),qe);ht(bx(),qe);ht(eU(),qe);ht(cU(),qe);ht(lU(),qe);ht(hU(),qe);ht(Sx(),qe);ht(kx(),qe);ht(Dx(),qe);ht(CU(),qe);ht(EU(),qe);ht(Tx(),qe);ht(xU(),qe);ht(SU(),qe);ht(PU(),qe);ht(xx(),qe)});var IU=m(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.RpcGrpcStatusCodeValues=ve.MessagingOperationValues=ve.MessagingDestinationKindValues=ve.HttpFlavorValues=ve.NetTransportValues=ve.FaasInvokedProviderValues=ve.FaasDocumentOperationValues=ve.FaasTriggerValues=ve.DbCassandraConsistencyLevelValues=ve.DbSystemValues=ve.SemanticAttributes=void 0;ve.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code"};var ese;(function(t){t.OTHER_SQL="other_sql",t.MSSQL="mssql",t.MYSQL="mysql",t.ORACLE="oracle",t.DB2="db2",t.POSTGRESQL="postgresql",t.REDSHIFT="redshift",t.HIVE="hive",t.CLOUDSCAPE="cloudscape",t.HSQLDB="hsqldb",t.PROGRESS="progress",t.MAXDB="maxdb",t.HANADB="hanadb",t.INGRES="ingres",t.FIRSTSQL="firstsql",t.EDB="edb",t.CACHE="cache",t.ADABAS="adabas",t.FIREBIRD="firebird",t.DERBY="derby",t.FILEMAKER="filemaker",t.INFORMIX="informix",t.INSTANTDB="instantdb",t.INTERBASE="interbase",t.MARIADB="mariadb",t.NETEZZA="netezza",t.PERVASIVE="pervasive",t.POINTBASE="pointbase",t.SQLITE="sqlite",t.SYBASE="sybase",t.TERADATA="teradata",t.VERTICA="vertica",t.H2="h2",t.COLDFUSION="coldfusion",t.CASSANDRA="cassandra",t.HBASE="hbase",t.MONGODB="mongodb",t.REDIS="redis",t.COUCHBASE="couchbase",t.COUCHDB="couchdb",t.COSMOSDB="cosmosdb",t.DYNAMODB="dynamodb",t.NEO4J="neo4j",t.GEODE="geode",t.ELASTICSEARCH="elasticsearch"})(ese=ve.DbSystemValues||(ve.DbSystemValues={}));var tse;(function(t){t.ALL="ALL",t.EACH_QUORUM="EACH_QUORUM",t.QUORUM="QUORUM",t.LOCAL_QUORUM="LOCAL_QUORUM",t.ONE="ONE",t.TWO="TWO",t.THREE="THREE",t.LOCAL_ONE="LOCAL_ONE",t.ANY="ANY",t.SERIAL="SERIAL",t.LOCAL_SERIAL="LOCAL_SERIAL"})(tse=ve.DbCassandraConsistencyLevelValues||(ve.DbCassandraConsistencyLevelValues={}));var rse;(function(t){t.DATASOURCE="datasource",t.HTTP="http",t.PUBSUB="pubsub",t.TIMER="timer",t.OTHER="other"})(rse=ve.FaasTriggerValues||(ve.FaasTriggerValues={}));var nse;(function(t){t.INSERT="insert",t.EDIT="edit",t.DELETE="delete"})(nse=ve.FaasDocumentOperationValues||(ve.FaasDocumentOperationValues={}));var ise;(function(t){t.AWS="aws",t.AZURE="azure",t.GCP="gcp"})(ise=ve.FaasInvokedProviderValues||(ve.FaasInvokedProviderValues={}));var ose;(function(t){t.IP_TCP="IP.TCP",t.IP_UDP="IP.UDP",t.IP="IP",t.UNIX="Unix",t.PIPE="pipe",t.INPROC="inproc",t.OTHER="other"})(ose=ve.NetTransportValues||(ve.NetTransportValues={}));var sse;(function(t){t.HTTP_1_0="1.0",t.HTTP_1_1="1.1",t.HTTP_2_0="2.0",t.SPDY="SPDY",t.QUIC="QUIC"})(sse=ve.HttpFlavorValues||(ve.HttpFlavorValues={}));var ase;(function(t){t.QUEUE="queue",t.TOPIC="topic"})(ase=ve.MessagingDestinationKindValues||(ve.MessagingDestinationKindValues={}));var cse;(function(t){t.RECEIVE="receive",t.PROCESS="process"})(cse=ve.MessagingOperationValues||(ve.MessagingOperationValues={}));var use;(function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(use=ve.RpcGrpcStatusCodeValues||(ve.RpcGrpcStatusCodeValues={}))});var AU=m(js=>{"use strict";var lse=js&&js.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),fse=js&&js.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lse(e,t,r)};Object.defineProperty(js,"__esModule",{value:!0});fse(IU(),js)});var RU=m(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.TelemetrySdkLanguageValues=ct.OsTypeValues=ct.HostArchValues=ct.AwsEcsLaunchtypeValues=ct.CloudPlatformValues=ct.CloudProviderValues=ct.ResourceAttributes=void 0;ct.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var dse;(function(t){t.AWS="aws",t.AZURE="azure",t.GCP="gcp"})(dse=ct.CloudProviderValues||(ct.CloudProviderValues={}));var pse;(function(t){t.AWS_EC2="aws_ec2",t.AWS_ECS="aws_ecs",t.AWS_EKS="aws_eks",t.AWS_LAMBDA="aws_lambda",t.AWS_ELASTICBEANSTALK="aws_elastic_beanstalk",t.AZURE_VM="azure_vm",t.AZURE_CONTAINERINSTANCES="azure_container_instances",t.AZURE_AKS="azure_aks",t.AZURE_FUNCTIONS="azure_functions",t.AZURE_APPSERVICE="azure_app_service",t.GCP_COMPUTEENGINE="gcp_compute_engine",t.GCP_CLOUDRUN="gcp_cloud_run",t.GCP_KUBERNETESENGINE="gcp_kubernetes_engine",t.GCP_CLOUDFUNCTIONS="gcp_cloud_functions",t.GCP_APPENGINE="gcp_app_engine"})(pse=ct.CloudPlatformValues||(ct.CloudPlatformValues={}));var hse;(function(t){t.EC2="ec2",t.FARGATE="fargate"})(hse=ct.AwsEcsLaunchtypeValues||(ct.AwsEcsLaunchtypeValues={}));var mse;(function(t){t.AMD64="amd64",t.ARM32="arm32",t.ARM64="arm64",t.IA64="ia64",t.PPC32="ppc32",t.PPC64="ppc64",t.X86="x86"})(mse=ct.HostArchValues||(ct.HostArchValues={}));var gse;(function(t){t.WINDOWS="WINDOWS",t.LINUX="LINUX",t.DARWIN="DARWIN",t.FREEBSD="FREEBSD",t.NETBSD="NETBSD",t.OPENBSD="OPENBSD",t.DRAGONFLYBSD="DRAGONFLYBSD",t.HPUX="HPUX",t.AIX="AIX",t.SOLARIS="SOLARIS",t.ZOS="ZOS"})(gse=ct.OsTypeValues||(ct.OsTypeValues={}));var vse;(function(t){t.CPP="cpp",t.DOTNET="dotnet",t.ERLANG="erlang",t.GO="go",t.JAVA="java",t.NODEJS="nodejs",t.PHP="php",t.PYTHON="python",t.RUBY="ruby",t.WEBJS="webjs"})(vse=ct.TelemetrySdkLanguageValues||(ct.TelemetrySdkLanguageValues={}))});var TU=m(Hs=>{"use strict";var yse=Hs&&Hs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Cse=Hs&&Hs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yse(e,t,r)};Object.defineProperty(Hs,"__esModule",{value:!0});Cse(RU(),Hs)});var DU=m(Do=>{"use strict";var wse=Do&&Do.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),kU=Do&&Do.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wse(e,t,r)};Object.defineProperty(Do,"__esModule",{value:!0});kU(AU(),Do);kU(TU(),Do)});var OU=m(Ig=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});Ig.ExceptionEventName=void 0;Ig.ExceptionEventName="exception"});var Fx=m(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});Ag.Span=void 0;var Oo=_t(),Zn=fn(),Bs=DU(),Ese=OU(),NU=class{constructor(e,r,n,i,o,s,a=[],c=Zn.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:Oo.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this.spanContext=i,this.parentSpanId=s,this.kind=o,this.links=a,this.startTime=Zn.timeInputToHrTime(c),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._traceParams=e.getActiveTraceParams(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}context(){return this.spanContext}setAttribute(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(Oo.diag.warn(`Invalid attribute key: ${e}`),this):Zn.isAttributeValue(r)?Object.keys(this.attributes).length>=this._traceParams.numberOfAttributesPerSpan&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?this:(this.attributes[e]=r,this):(Oo.diag.warn(`Invalid attribute value set for key: ${e}`),this)}setAttributes(e){for(let[r,n]of Object.entries(e))this.setAttribute(r,n);return this}addEvent(e,r,n){return this._isSpanEnded()?this:(this.events.length>=this._traceParams.numberOfEventsPerSpan&&(Oo.diag.warn("Dropping extra events."),this.events.shift()),Zn.isTimeInput(r)&&(typeof n=="undefined"&&(n=r),r=void 0),typeof n=="undefined"&&(n=Zn.hrTime()),this.events.push({name:e,attributes:r,time:Zn.timeInputToHrTime(n)}),this)}setStatus(e){return this._isSpanEnded()?this:(this.status=e,this)}updateName(e){return this._isSpanEnded()?this:(this.name=e,this)}end(e=Zn.hrTime()){if(this._isSpanEnded()){Oo.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=Zn.timeInputToHrTime(e),this._duration=Zn.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&Oo.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(e,r=Zn.hrTime()){let n={};typeof e=="string"?n[Bs.SemanticAttributes.EXCEPTION_MESSAGE]=e:e&&(e.code?n[Bs.SemanticAttributes.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[Bs.SemanticAttributes.EXCEPTION_TYPE]=e.name),e.message&&(n[Bs.SemanticAttributes.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[Bs.SemanticAttributes.EXCEPTION_STACKTRACE]=e.stack)),n[Bs.SemanticAttributes.EXCEPTION_TYPE]||n[Bs.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(Ese.ExceptionEventName,n,r):Oo.diag.warn(`Failed to record an exception ${e}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&Oo.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this.spanContext.traceId,this.spanContext.spanId),this._ended}};Ag.Span=NU});var qx=m(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.buildSamplerFromEnv=Xc.DEFAULT_CONFIG=void 0;var Rg=_t(),ut=fn(),_se=ut.getEnv();Xc.DEFAULT_CONFIG={sampler:LU(_se),traceParams:{numberOfAttributesPerSpan:ut.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,numberOfLinksPerSpan:ut.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,numberOfEventsPerSpan:ut.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};var xse=ut.TracesSamplerValues.AlwaysOn;function LU(t=ut.getEnv()){switch(t.OTEL_TRACES_SAMPLER){case ut.TracesSamplerValues.AlwaysOn:return new ut.AlwaysOnSampler;case ut.TracesSamplerValues.AlwaysOff:return new ut.AlwaysOffSampler;case ut.TracesSamplerValues.ParentBasedAlwaysOn:return new ut.ParentBasedSampler({root:new ut.AlwaysOnSampler});case ut.TracesSamplerValues.ParentBasedAlwaysOff:return new ut.ParentBasedSampler({root:new ut.AlwaysOffSampler});case ut.TracesSamplerValues.TraceIdRatio:return new ut.TraceIdRatioBasedSampler(FU(t));case ut.TracesSamplerValues.ParentBasedTraceIdRatio:return new ut.ParentBasedSampler({root:new ut.TraceIdRatioBasedSampler(FU(t))});default:return Rg.diag.error(`OTEL_TRACES_SAMPLER value "${t.OTEL_TRACES_SAMPLER} invalid, defaulting to ${xse}".`),new ut.AlwaysOnSampler}}Xc.buildSamplerFromEnv=LU;var Yc=1;function FU(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return Rg.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${Yc}.`),Yc;let e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(Rg.diag.error(`OTEL_TRACES_SAMPLER_ARG=${t.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${Yc}.`),Yc):e<0||e>1?(Rg.diag.error(`OTEL_TRACES_SAMPLER_ARG=${t.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${Yc}.`),Yc):e}});var qU=m(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});Tg.mergeConfig=void 0;var Mx=qx();function bse(t){let e={sampler:Mx.buildSamplerFromEnv()},r=Object.assign({},Mx.DEFAULT_CONFIG,e,t);return r.traceParams=Object.assign({},Mx.DEFAULT_CONFIG.traceParams,t.traceParams||{}),r}Tg.mergeConfig=bse});var UU=m(kg=>{"use strict";Object.defineProperty(kg,"__esModule",{value:!0});kg.Tracer=void 0;var Ar=_t(),MU=fn(),Sse=Fx(),Pse=qU(),$U=class{constructor(e,r,n){this._tracerProvider=n;let i=Pse.mergeConfig(r);this._sampler=i.sampler,this._traceParams=i.traceParams,this._idGenerator=r.idGenerator||new MU.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=e}startSpan(e,r={},n=Ar.context.active()){var i,o;if(Ar.isInstrumentationSuppressed(n))return Ar.diag.debug("Instrumentation suppressed, returning Noop Span"),Ar.NOOP_TRACER.startSpan(e,r,n);let s=Ise(r,n),a=this._idGenerator.generateSpanId(),c,u,l;!s||!Ar.trace.isSpanContextValid(s)?c=this._idGenerator.generateTraceId():(c=s.traceId,u=s.traceState,l=s.spanId);let f=(i=r.kind)!==null&&i!==void 0?i:Ar.SpanKind.INTERNAL,d=(o=r.links)!==null&&o!==void 0?o:[],p=MU.sanitizeAttributes(r.attributes),h=this._sampler.shouldSample(n,c,e,f,p,d),g=h.decision===Ar.SamplingDecision.RECORD_AND_SAMPLED?Ar.TraceFlags.SAMPLED:Ar.TraceFlags.NONE,v={traceId:c,spanId:a,traceFlags:g,traceState:u};if(h.decision===Ar.SamplingDecision.NOT_RECORD)return Ar.diag.debug("Recording is off, starting no recording span"),Ar.NOOP_TRACER.startSpan(e,r,Ar.setSpanContext(n,v));let C=new Sse.Span(this,n,e,v,f,l,d,r.startTime);return C.setAttributes(Object.assign(p,h.attributes)),C}getActiveTraceParams(){return this._traceParams}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};kg.Tracer=$U;function Ise(t,e){if(!t.root)return Ar.getSpanContext(e)}});var $x=m(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.PROCESS_RESOURCE=rr.SERVICE_RESOURCE=rr.TELEMETRY_SDK_RESOURCE=rr.K8S_RESOURCE=rr.HOST_RESOURCE=rr.CONTAINER_RESOURCE=rr.CLOUD_RESOURCE=void 0;rr.CLOUD_RESOURCE={PROVIDER:"cloud.provider",ACCOUNT_ID:"cloud.account.id",REGION:"cloud.region",ZONE:"cloud.zone"};rr.CONTAINER_RESOURCE={NAME:"container.name",ID:"container.id",IMAGE_NAME:"container.image.name",IMAGE_TAG:"container.image.tag"};rr.HOST_RESOURCE={ID:"host.id",NAME:"host.name",TYPE:"host.type",IMAGE_NAME:"host.image.name",IMAGE_ID:"host.image.id",IMAGE_VERSION:"host.image.version"};rr.K8S_RESOURCE={CLUSTER_NAME:"k8s.cluster.name",NAMESPACE_NAME:"k8s.namespace.name",POD_NAME:"k8s.pod.name",DEPLOYMENT_NAME:"k8s.deployment.name"};rr.TELEMETRY_SDK_RESOURCE={NAME:"telemetry.sdk.name",LANGUAGE:"telemetry.sdk.language",VERSION:"telemetry.sdk.version"};rr.SERVICE_RESOURCE={NAME:"service.name",NAMESPACE:"service.namespace",INSTANCE_ID:"service.instance.id",VERSION:"service.version"};rr.PROCESS_RESOURCE={COMMAND:"process.command",COMMAND_LINE:"process.command_line",NAME:"process.executable.name",OWNER:"process.owner",PATH:"process.executable.path",PID:"process.id"}});var Hx=m(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});Dg.Resource=void 0;var Ux=fn(),jx=$x(),No=class{constructor(e){this.attributes=e}static empty(){return No.EMPTY}static createTelemetrySDKResource(){return new No({[jx.TELEMETRY_SDK_RESOURCE.LANGUAGE]:Ux.SDK_INFO.LANGUAGE,[jx.TELEMETRY_SDK_RESOURCE.NAME]:Ux.SDK_INFO.NAME,[jx.TELEMETRY_SDK_RESOURCE.VERSION]:Ux.SDK_INFO.VERSION})}merge(e){if(!e||!Object.keys(e.attributes).length)return this;let r=Object.assign({},this.attributes,e.attributes);return new No(r)}};Dg.Resource=No;No.EMPTY=new No({})});var HU=m(Og=>{"use strict";Object.defineProperty(Og,"__esModule",{value:!0});Og.detectResources=void 0;var jU=Hx(),Bx=_t(),Ase=require("util"),Rse=async(t={})=>{let e=Object.assign(t),r=await Promise.all((e.detectors||[]).map(async n=>{try{let i=await n.detect(e);return Bx.diag.debug(`${n.constructor.name} found resource.`,i),i}catch(i){return Bx.diag.debug(`${n.constructor.name} failed: ${i.message}`),jU.Resource.empty()}}));return Tse(r),r.reduce((n,i)=>n.merge(i),jU.Resource.createTelemetrySDKResource())};Og.detectResources=Rse;var Tse=t=>{t.forEach(e=>{if(Object.keys(e.attributes).length>0){let r=Ase.inspect(e.attributes,{depth:2,breakLength:Infinity,sorted:!0,compact:!1});Bx.diag.verbose(r)}})}});var GU=m(Ng=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});Ng.envDetector=void 0;var BU=_t(),kse=fn(),Vx=Lg(),VU=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(e){try{let r=kse.getEnv().OTEL_RESOURCE_ATTRIBUTES;if(!r)return BU.diag.debug('EnvDetector failed: Environment variable "OTEL_RESOURCE_ATTRIBUTES" is missing.'),Vx.Resource.empty();let n=this._parseResourceAttributes(r);return new Vx.Resource(n)}catch(r){return BU.diag.debug(`EnvDetector failed: ${r.message}`),Vx.Resource.empty()}}_parseResourceAttributes(e){if(!e)return{};let r={},n=e.split(this._COMMA_SEPARATOR,-1);for(let i of n){let o=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(o.length!==2)continue;let[s,a]=o;if(s=s.trim(),a=a.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(s))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(a))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[s]=a}return r}_isValid(e){return e.length<=this._MAX_LENGTH&&this._isPrintableString(e)}_isPrintableString(e){for(let r=0;r<e.length;r++){let n=e.charAt(r);if(n<=" "||n>="~")return!1}return!0}_isValidAndNotEmpty(e){return e.length>0&&this._isValid(e)}};Ng.envDetector=new VU});var zU=m(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.processDetector=void 0;var Dse=_t(),ei=Lg(),WU=class{async detect(e){let r={[ei.PROCESS_RESOURCE.PID]:process.pid,[ei.PROCESS_RESOURCE.NAME]:process.title||"",[ei.PROCESS_RESOURCE.COMMAND]:process.argv[1]||"",[ei.PROCESS_RESOURCE.COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(r,e)}_getResourceAttributes(e,r){return e[ei.PROCESS_RESOURCE.NAME]===""||e[ei.PROCESS_RESOURCE.PATH]===""||e[ei.PROCESS_RESOURCE.COMMAND]===""||e[ei.PROCESS_RESOURCE.COMMAND_LINE]===""?(Dse.diag.debug("ProcessDetector failed: Unable to find required process resources. "),ei.Resource.empty()):new ei.Resource(Object.assign({},e))}};Fg.processDetector=new WU});var YU=m(Lo=>{"use strict";var Ose=Lo&&Lo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),KU=Lo&&Lo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Ose(e,t,r)};Object.defineProperty(Lo,"__esModule",{value:!0});KU(GU(),Lo);KU(zU(),Lo)});var QU=m(Fo=>{"use strict";var Nse=Fo&&Fo.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XU=Fo&&Fo.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Nse(e,t,r)};Object.defineProperty(Fo,"__esModule",{value:!0});XU(HU(),Fo);XU(YU(),Fo)});var JU=m(Vs=>{"use strict";var Lse=Vs&&Vs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Fse=Vs&&Vs.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Lse(e,t,r)};Object.defineProperty(Vs,"__esModule",{value:!0});Fse(QU(),Vs)});var ej=m(ZU=>{"use strict";Object.defineProperty(ZU,"__esModule",{value:!0})});var rj=m(tj=>{"use strict";Object.defineProperty(tj,"__esModule",{value:!0})});var Lg=m(Rn=>{"use strict";var qse=Rn&&Rn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Sf=Rn&&Rn.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qse(e,t,r)};Object.defineProperty(Rn,"__esModule",{value:!0});Sf(Hx(),Rn);Sf(JU(),Rn);Sf($x(),Rn);Sf(ej(),Rn);Sf(rj(),Rn)});var ij=m(qg=>{"use strict";Object.defineProperty(qg,"__esModule",{value:!0});qg.MultiSpanProcessor=void 0;var Mse=fn(),nj=class{constructor(e){this._spanProcessors=e}forceFlush(){let e=[];for(let r of this._spanProcessors)e.push(r.forceFlush());return new Promise(r=>{Promise.all(e).then(()=>{r()}).catch(n=>{Mse.globalErrorHandler(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(e,r){for(let n of this._spanProcessors)n.onStart(e,r)}onEnd(e){for(let r of this._spanProcessors)r.onEnd(e)}shutdown(){let e=[];for(let r of this._spanProcessors)e.push(r.shutdown());return new Promise((r,n)=>{Promise.all(e).then(()=>{r()},n)})}};qg.MultiSpanProcessor=nj});var sj=m(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.NoopSpanProcessor=void 0;var oj=class{onStart(e,r){}onEnd(e){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};Mg.NoopSpanProcessor=oj});var Lj=m((Tf,Zc)=>{var $se=200,aj="__lodash_hash_undefined__",Use=800,jse=16,cj=9007199254740991,uj="[object Arguments]",Hse="[object Array]",Bse="[object AsyncFunction]",Vse="[object Boolean]",Gse="[object Date]",Wse="[object Error]",lj="[object Function]",zse="[object GeneratorFunction]",Kse="[object Map]",Yse="[object Number]",Xse="[object Null]",fj="[object Object]",Qse="[object Proxy]",Jse="[object RegExp]",Zse="[object Set]",eae="[object String]",tae="[object Undefined]",rae="[object WeakMap]",nae="[object ArrayBuffer]",iae="[object DataView]",oae="[object Float32Array]",sae="[object Float64Array]",aae="[object Int8Array]",cae="[object Int16Array]",uae="[object Int32Array]",lae="[object Uint8Array]",fae="[object Uint8ClampedArray]",dae="[object Uint16Array]",pae="[object Uint32Array]",hae=/[\\^$.*+?()[\]{}|]/g,mae=/^\[object .+?Constructor\]$/,gae=/^(?:0|[1-9]\d*)$/,We={};We[oae]=We[sae]=We[aae]=We[cae]=We[uae]=We[lae]=We[fae]=We[dae]=We[pae]=!0;We[uj]=We[Hse]=We[nae]=We[Vse]=We[iae]=We[Gse]=We[Wse]=We[lj]=We[Kse]=We[Yse]=We[fj]=We[Jse]=We[Zse]=We[eae]=We[rae]=!1;var dj=typeof global=="object"&&global&&global.Object===Object&&global,vae=typeof self=="object"&&self&&self.Object===Object&&self,Pf=dj||vae||Function("return this")(),pj=typeof Tf=="object"&&Tf&&!Tf.nodeType&&Tf,If=pj&&typeof Zc=="object"&&Zc&&!Zc.nodeType&&Zc,hj=If&&If.exports===pj,Gx=hj&&dj.process,mj=function(){try{var t=If&&If.require&&If.require("util").types;return t||Gx&&Gx.binding&&Gx.binding("util")}catch(e){}}(),gj=mj&&mj.isTypedArray;function yae(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Cae(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function wae(t){return function(e){return t(e)}}function Eae(t,e){return t==null?void 0:t[e]}function _ae(t,e){return function(r){return t(e(r))}}var xae=Array.prototype,bae=Function.prototype,$g=Object.prototype,Wx=Pf["__core-js_shared__"],Ug=bae.toString,Ti=$g.hasOwnProperty,vj=function(){var t=/[^.]+$/.exec(Wx&&Wx.keys&&Wx.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),yj=$g.toString,Sae=Ug.call(Object),Pae=RegExp("^"+Ug.call(Ti).replace(hae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jg=hj?Pf.Buffer:void 0,Cj=Pf.Symbol,wj=Pf.Uint8Array,Ej=jg?jg.allocUnsafe:void 0,_j=_ae(Object.getPrototypeOf,Object),xj=Object.create,Iae=$g.propertyIsEnumerable,Aae=xae.splice,Gs=Cj?Cj.toStringTag:void 0,Hg=function(){try{var t=Yx(Object,"defineProperty");return t({},"",{}),t}catch(e){}}(),Rae=jg?jg.isBuffer:void 0,bj=Math.max,Tae=Date.now,Sj=Yx(Pf,"Map"),Af=Yx(Object,"create"),kae=function(){function t(){}return function(e){if(!zs(e))return{};if(xj)return xj(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Ws(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Dae(){this.__data__=Af?Af(null):{},this.size=0}function Oae(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Nae(t){var e=this.__data__;if(Af){var r=e[t];return r===aj?void 0:r}return Ti.call(e,t)?e[t]:void 0}function Lae(t){var e=this.__data__;return Af?e[t]!==void 0:Ti.call(e,t)}function Fae(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Af&&e===void 0?aj:e,this}Ws.prototype.clear=Dae;Ws.prototype.delete=Oae;Ws.prototype.get=Nae;Ws.prototype.has=Lae;Ws.prototype.set=Fae;function ki(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function qae(){this.__data__=[],this.size=0}function Mae(t){var e=this.__data__,r=Bg(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Aae.call(e,r,1),--this.size,!0}function $ae(t){var e=this.__data__,r=Bg(e,t);return r<0?void 0:e[r][1]}function Uae(t){return Bg(this.__data__,t)>-1}function jae(t,e){var r=this.__data__,n=Bg(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}ki.prototype.clear=qae;ki.prototype.delete=Mae;ki.prototype.get=$ae;ki.prototype.has=Uae;ki.prototype.set=jae;function Qc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Hae(){this.size=0,this.__data__={hash:new Ws,map:new(Sj||ki),string:new Ws}}function Bae(t){var e=Gg(this,t).delete(t);return this.size-=e?1:0,e}function Vae(t){return Gg(this,t).get(t)}function Gae(t){return Gg(this,t).has(t)}function Wae(t,e){var r=Gg(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}Qc.prototype.clear=Hae;Qc.prototype.delete=Bae;Qc.prototype.get=Vae;Qc.prototype.has=Gae;Qc.prototype.set=Wae;function Jc(t){var e=this.__data__=new ki(t);this.size=e.size}function zae(){this.__data__=new ki,this.size=0}function Kae(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Yae(t){return this.__data__.get(t)}function Xae(t){return this.__data__.has(t)}function Qae(t,e){var r=this.__data__;if(r instanceof ki){var n=r.__data__;if(!Sj||n.length<$se-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Qc(n)}return r.set(t,e),this.size=r.size,this}Jc.prototype.clear=zae;Jc.prototype.delete=Kae;Jc.prototype.get=Yae;Jc.prototype.has=Xae;Jc.prototype.set=Qae;function Jae(t,e){var r=Jx(t),n=!r&&Qx(t),i=!r&&!n&&Tj(t),o=!r&&!n&&!i&&Dj(t),s=r||n||i||o,a=s?Cae(t.length,String):[],c=a.length;for(var u in t)(e||Ti.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Aj(u,c)))&&a.push(u);return a}function zx(t,e,r){(r!==void 0&&!Wg(t[e],r)||r===void 0&&!(e in t))&&Kx(t,e,r)}function Zae(t,e,r){var n=t[e];(!(Ti.call(t,e)&&Wg(n,r))||r===void 0&&!(e in t))&&Kx(t,e,r)}function Bg(t,e){for(var r=t.length;r--;)if(Wg(t[r][0],e))return r;return-1}function Kx(t,e,r){e=="__proto__"&&Hg?Hg(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var ece=pce();function Vg(t){return t==null?t===void 0?tae:Xse:Gs&&Gs in Object(t)?hce(t):wce(t)}function Pj(t){return Rf(t)&&Vg(t)==uj}function tce(t){if(!zs(t)||yce(t))return!1;var e=eb(t)?Pae:mae;return e.test(bce(t))}function rce(t){return Rf(t)&&kj(t.length)&&!!We[Vg(t)]}function nce(t){if(!zs(t))return Cce(t);var e=Rj(t),r=[];for(var n in t)n=="constructor"&&(e||!Ti.call(t,n))||r.push(n);return r}function Ij(t,e,r,n,i){t!==e&&ece(e,function(o,s){if(i||(i=new Jc),zs(o))ice(t,e,s,r,Ij,n,i);else{var a=n?n(Xx(t,s),o,s+"",t,e,i):void 0;a===void 0&&(a=o),zx(t,s,a)}},Oj)}function ice(t,e,r,n,i,o,s){var a=Xx(t,r),c=Xx(e,r),u=s.get(c);if(u){zx(t,r,u);return}var l=o?o(a,c,r+"",t,e,s):void 0,f=l===void 0;if(f){var d=Jx(c),p=!d&&Tj(c),h=!d&&!p&&Dj(c);l=c,d||p||h?Jx(a)?l=a:Sce(a)?l=lce(a):p?(f=!1,l=ace(c,!0)):h?(f=!1,l=uce(c,!0)):l=[]:Pce(c)||Qx(c)?(l=a,Qx(a)?l=Ice(a):(!zs(a)||eb(a))&&(l=mce(c))):f=!1}f&&(s.set(c,l),i(l,c,n,o,s),s.delete(c)),zx(t,r,l)}function oce(t,e){return _ce(Ece(t,e,Nj),t+"")}var sce=Hg?function(t,e){return Hg(t,"toString",{configurable:!0,enumerable:!1,value:Rce(e),writable:!0})}:Nj;function ace(t,e){if(e)return t.slice();var r=t.length,n=Ej?Ej(r):new t.constructor(r);return t.copy(n),n}function cce(t){var e=new t.constructor(t.byteLength);return new wj(e).set(new wj(t)),e}function uce(t,e){var r=e?cce(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function lce(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function fce(t,e,r,n){var i=!r;r||(r={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=n?n(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),i?Kx(r,a,c):Zae(r,a,c)}return r}function dce(t){return oce(function(e,r){var n=-1,i=r.length,o=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,s&&gce(r[0],r[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++n<i;){var a=r[n];a&&t(e,a,n,o)}return e})}function pce(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),a=s.length;a--;){var c=s[t?a:++i];if(r(o[c],c,o)===!1)break}return e}}function Gg(t,e){var r=t.__data__;return vce(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Yx(t,e){var r=Eae(t,e);return tce(r)?r:void 0}function hce(t){var e=Ti.call(t,Gs),r=t[Gs];try{t[Gs]=void 0;var n=!0}catch(o){}var i=yj.call(t);return n&&(e?t[Gs]=r:delete t[Gs]),i}function mce(t){return typeof t.constructor=="function"&&!Rj(t)?kae(_j(t)):{}}function Aj(t,e){var r=typeof t;return e=e==null?cj:e,!!e&&(r=="number"||r!="symbol"&&gae.test(t))&&t>-1&&t%1==0&&t<e}function gce(t,e,r){if(!zs(r))return!1;var n=typeof e;return(n=="number"?Zx(r)&&Aj(e,r.length):n=="string"&&e in r)?Wg(r[e],t):!1}function vce(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function yce(t){return!!vj&&vj in t}function Rj(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||$g;return t===r}function Cce(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function wce(t){return yj.call(t)}function Ece(t,e,r){return e=bj(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=bj(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=n[i];return a[e]=r(s),yae(t,this,a)}}function Xx(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var _ce=xce(sce);function xce(t){var e=0,r=0;return function(){var n=Tae(),i=jse-(n-r);if(r=n,i>0){if(++e>=Use)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function bce(t){if(t!=null){try{return Ug.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Wg(t,e){return t===e||t!==t&&e!==e}var Qx=Pj(function(){return arguments}())?Pj:function(t){return Rf(t)&&Ti.call(t,"callee")&&!Iae.call(t,"callee")},Jx=Array.isArray;function Zx(t){return t!=null&&kj(t.length)&&!eb(t)}function Sce(t){return Rf(t)&&Zx(t)}var Tj=Rae||Tce;function eb(t){if(!zs(t))return!1;var e=Vg(t);return e==lj||e==zse||e==Bse||e==Qse}function kj(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=cj}function zs(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Rf(t){return t!=null&&typeof t=="object"}function Pce(t){if(!Rf(t)||Vg(t)!=fj)return!1;var e=_j(t);if(e===null)return!0;var r=Ti.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Ug.call(r)==Sae}var Dj=gj?wae(gj):rce;function Ice(t){return fce(t,Oj(t))}function Oj(t){return Zx(t)?Jae(t,!0):nce(t)}var Ace=dce(function(t,e,r){Ij(t,e,r)});function Rce(t){return function(){return t}}function Nj(t){return t}function Tce(){return!1}Zc.exports=Ace});var Fj=m(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.BasicTracerProvider=void 0;var zg=_t(),Kg=fn(),kce=Lg(),Dce=tb(),Oce=qx(),Nce=ij(),Lce=sj(),Fce=Lj(),kf=class{constructor(e={}){var r;this._registeredSpanProcessors=[],this._tracers=new Map,this.activeSpanProcessor=new Lce.NoopSpanProcessor;let n=Fce({},Oce.DEFAULT_CONFIG,e);this.resource=(r=n.resource)!==null&&r!==void 0?r:kce.Resource.createTelemetrySDKResource(),this._config=Object.assign({},n,{resource:this.resource})}getTracer(e,r){let n=`${e}@${r||""}`;return this._tracers.has(n)||this._tracers.set(n,new Dce.Tracer({name:e,version:r},this._config,this)),this._tracers.get(n)}addSpanProcessor(e){this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Nce.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(e={}){zg.trace.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&zg.context.setGlobalContextManager(e.contextManager),e.propagator&&zg.propagation.setGlobalPropagator(e.propagator)}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(e){var r;return(r=kf._registeredPropagators.get(e))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let e=[...new Set(Kg.getEnv().OTEL_PROPAGATORS)],n=e.map(i=>{let o=this._getPropagator(i);return o||zg.diag.warn(`Propagator "${i}" requested through environment variable is unavailable.`),o}).reduce((i,o)=>(o&&i.push(o),i),[]);if(n.length!==0)return e.length===1?n[0]:new Kg.CompositePropagator({propagators:n})}};Yg.BasicTracerProvider=kf;kf._registeredPropagators=new Map([["tracecontext",()=>new Kg.HttpTraceContext],["baggage",()=>new Kg.HttpBaggage]])});var Mj=m(Xg=>{"use strict";Object.defineProperty(Xg,"__esModule",{value:!0});Xg.ConsoleSpanExporter=void 0;var rb=fn(),qj=class{export(e,r){return this._sendSpans(e,r)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(e){return{traceId:e.spanContext.traceId,parentId:e.parentSpanId,name:e.name,id:e.spanContext.spanId,kind:e.kind,timestamp:rb.hrTimeToMicroseconds(e.startTime),duration:rb.hrTimeToMicroseconds(e.duration),attributes:e.attributes,status:e.status,events:e.events}}_sendSpans(e,r){for(let n of e)console.log(this._exportInfo(n));if(r)return r({code:rb.ExportResultCode.SUCCESS})}};Xg.ConsoleSpanExporter=qj});var Uj=m(Jg=>{"use strict";Object.defineProperty(Jg,"__esModule",{value:!0});Jg.BatchSpanProcessor=void 0;var nb=_t(),Qg=fn(),$j=class{constructor(e,r){this._exporter=e,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let n=Qg.getEnv();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r==null?void 0:r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r==null?void 0:r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r==null?void 0:r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(e){}onEnd(e){this._isShutdown||this._addToBuffer(e)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((e,r)=>{Promise.resolve().then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(e).catch(n=>{r(n)})}),this._shuttingDownPromise)}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise((e,r)=>{let n=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let o=0,s=i;o<s;o++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{e()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((e,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);nb.context.with(nb.suppressInstrumentation(nb.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),i=>{var o;clearTimeout(n),i.code===Qg.ExportResultCode.SUCCESS?e():r((o=i.error)!==null&&o!==void 0?o:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(e=>{Qg.globalErrorHandler(e)})},this._scheduledDelayMillis),Qg.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};Jg.BatchSpanProcessor=$j});var Bj=m(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.InMemorySpanExporter=void 0;var jj=fn(),Hj=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(e,r){if(this._stopped)return r({code:jj.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...e),setTimeout(()=>r({code:jj.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};Zg.InMemorySpanExporter=Hj});var Gj=m(Vj=>{"use strict";Object.defineProperty(Vj,"__esModule",{value:!0})});var Kj=m(ev=>{"use strict";Object.defineProperty(ev,"__esModule",{value:!0});ev.SimpleSpanProcessor=void 0;var ib=_t(),Wj=fn(),zj=class{constructor(e){this._exporter=e,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(e){}onEnd(e){this._isShutdown||ib.context.with(ib.suppressInstrumentation(ib.context.active()),()=>{this._exporter.export([e],r=>{var n;r.code!==Wj.ExportResultCode.SUCCESS&&Wj.globalErrorHandler((n=r.error)!==null&&n!==void 0?n:new Error(`SimpleSpanProcessor: span export failed (status ${r})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((e,r)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(e).catch(n=>{r(n)})}),this._shuttingDownPromise)}};ev.SimpleSpanProcessor=zj});var Xj=m(Yj=>{"use strict";Object.defineProperty(Yj,"__esModule",{value:!0})});var Jj=m(Qj=>{"use strict";Object.defineProperty(Qj,"__esModule",{value:!0})});var eH=m(Zj=>{"use strict";Object.defineProperty(Zj,"__esModule",{value:!0})});var tb=m(Bt=>{"use strict";var qce=Bt&&Bt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Tn=Bt&&Bt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&qce(e,t,r)};Object.defineProperty(Bt,"__esModule",{value:!0});Tn(UU(),Bt);Tn(Fj(),Bt);Tn(Mj(),Bt);Tn(Uj(),Bt);Tn(Bj(),Bt);Tn(Gj(),Bt);Tn(Kj(),Bt);Tn(Xj(),Bt);Tn(Fx(),Bt);Tn(Jj(),Bt);Tn(eH(),Bt)});var tH=m(Di=>{"use strict";var Mce=Di&&Di.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(Di,"__esModule",{value:!0});var tv=Et();Di.AzureMonitorSymbol="Azure_Monitor_Tracer";var $ce=function(t){try{var e=tb().BasicTracer,r=tv.channel.spanContextPropagator?{scopeManager:tv.channel.spanContextPropagator}:void 0,n=new e(r),i=n.startSpan;n.startSpan=function(o,s){if(!s||!s.parent){var a=n.getCurrentSpan();a&&a.operation&&a.operation.traceparent&&(s=Mce({},s,{parent:{traceId:a.operation.traceparent.traceId,spanId:a.operation.traceparent.spanId}}))}var c=i.call(this,o,s);return c.addEvent("Application Insights Integration enabled"),c},n.addSpanProcessor(new Uce),n[Di.AzureMonitorSymbol]=!0,t.setTracer(n)}catch(o){}return t},Uce=function(){function t(){}return t.prototype.onStart=function(e){},t.prototype.onEnd=function(e){tv.channel.publish("azure-coretracing",e)},t.prototype.shutdown=function(){},t}();Di.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:$ce};function jce(){tv.channel.registerMonkeyPatch("@azure/core-tracing",Di.azureCoreTracing)}Di.enable=jce});var nH=m(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});var rH=Et(),Hce=function(t){var e=t.prototype._emit;return t.prototype._emit=function(r,n){var i=e.apply(this,arguments);if(!n){var o=i;o||(o=e.call(this,r,!0)),rH.channel.publish("bunyan",{level:r.level,result:o})}return i},t};Df.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:Hce};function Bce(){rH.channel.registerMonkeyPatch("bunyan",Df.bunyan)}Df.enable=Bce});var oH=m(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});var ob=Et(),iH=require("stream"),Vce=function(t){var e=new iH.Writable,r=new iH.Writable;e.write=function(u){if(!u)return!0;var l=u.toString();return ob.channel.publish("console",{message:l}),!0},r.write=function(u){if(!u)return!0;var l=u.toString();return ob.channel.publish("console",{message:l,stderr:!0}),!0};for(var n=new t.Console(e,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],o=function(u){var l=t[u];l&&(t[u]=function(){if(n[u])try{n[u].apply(n,arguments)}catch(f){}return l.apply(t,arguments)})},s=0,a=i;s<a.length;s++){var c=a[s];o(c)}return t};Of.console={versionSpecifier:">= 4.0.0",patch:Vce};function Gce(){ob.channel.registerMonkeyPatch("console",Of.console),require("console")}Of.enable=Gce});var sH=m(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});var sb=Et(),Wce=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=sb.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=sb.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t};Nf.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:Wce};function zce(){sb.channel.registerMonkeyPatch("mongodb-core",Nf.mongoCore)}Nf.enable=zce});var cH=m(kn=>{"use strict";var aH=kn&&kn.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(kn,"__esModule",{value:!0});var nr=Et(),Kce=function(t){var e=t.instrument({operationIdGenerator:{next:function(){return nr.channel.bindToContext(function(n){return n()})}}}),r={};return e.on("started",function(n){r[n.requestId]||(r[n.requestId]=aH({},n,{time:new Date}))}),e.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return nr.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):nr.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),e.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return nr.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):nr.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),t},Yce=function(t){var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=nr.channel.bindToContext(function(o){return o()}),r[i.requestId]=aH({},i,{time:new Date}))}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return nr.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return nr.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t},Xce=function(t){var e=t.Server.prototype.connect;return t.Server.prototype.connect=function(){var n=e.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var a=typeof arguments[1]=="function"?1:2;return typeof arguments[a]=="function"&&(arguments[a]=nr.channel.bindToContext(arguments[a])),i.apply(this,arguments)};var o=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=nr.channel.bindToContext(arguments[1])),o.apply(this,arguments)},n},t},Qce=function(t){Xce(t);var e=t.instrument(),r={},n={};return e.on("started",function(i){r[i.requestId]||(n[i.requestId]=nr.channel.bindToContext(function(o){return o()}),r[i.requestId]=i)}),e.on("succeeded",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return nr.channel.publish("mongodb",{startedData:o,event:i,succeeded:!0})}),delete n[i.requestId])}),e.on("failed",function(i){var o=r[i.requestId];o&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return nr.channel.publish("mongodb",{startedData:o,event:i,succeeded:!1})}),delete n[i.requestId])}),t};kn.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:Kce};kn.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:Yce};kn.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:Qce};function Jce(){nr.channel.registerMonkeyPatch("mongodb",kn.mongo2),nr.channel.registerMonkeyPatch("mongodb",kn.mongo3),nr.channel.registerMonkeyPatch("mongodb",kn.mongo330)}kn.enable=Jce});var lH=m(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});var rv=Et(),uH=require("path"),Zce=function(t,e){var r=function(c,u){return function(l,f){var d=c[l];d&&(c[l]=function(){for(var h=arguments.length-1,g=arguments.length-1;g>=0;--g)if(typeof arguments[g]=="function"){h=g;break}else if(typeof arguments[g]!="undefined")break;var v=arguments[h],C={result:null,startTime:null,startDate:null};typeof v=="function"&&(f?(C.startTime=process.hrtime(),C.startDate=new Date,arguments[h]=rv.channel.bindToContext(f(C,v))):arguments[h]=rv.channel.bindToContext(v));var y=d.apply(this,arguments);return C.result=y,y})}},n=function(c,u){return r(c.prototype,u+".prototype")},i=["connect","changeUser","ping","statistics","end"],o=require(uH.dirname(e)+"/lib/Connection");i.forEach(function(c){return n(o,"Connection")(c)}),r(o,"Connection")("createQuery",function(c,u){return function(l){var f=process.hrtime(c.startTime),d=f[0]*1e3+f[1]/1e6|0;rv.channel.publish("mysql",{query:c.result,callbackArgs:arguments,err:l,duration:d,time:c.startDate}),u.apply(this,arguments)}});var s=["_enqueueCallback"],a=require(uH.dirname(e)+"/lib/Pool");return s.forEach(function(c){return n(a,"Pool")(c)}),t};Lf.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:Zce};function eue(){rv.channel.registerMonkeyPatch("mysql",Lf.mysql)}Lf.enable=eue});var dH=m(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var fH=Et();function tue(t){var e=t.prototype.connect;return t.prototype.connect=function(n){return n&&(arguments[0]=fH.channel.bindToContext(n)),e.apply(this,arguments)},t}Ff.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:tue};function rue(){fH.channel.registerMonkeyPatch("pg-pool",Ff.postgresPool1)}Ff.enable=rue});var hH=m(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});var eu=Et(),pH=require("events");function nue(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},u=process.hrtime(),l;function f(d){d&&d[n]&&(d=d[n]);var p=eu.channel.bindToContext(function(h,g){var v=process.hrtime(u);if(c.result=g&&{rowCount:g.rowCount,command:g.command},c.error=h,c.duration=Math.ceil(v[0]*1e3+v[1]/1e6),eu.channel.publish("postgres",c),h){if(d)return d.apply(this,arguments);l&&l instanceof pH.EventEmitter&&l.emit("error",h)}else d&&d.apply(this,arguments)});try{return Object.defineProperty(p,n,{value:d}),p}catch(h){return d}}try{typeof o=="string"?s instanceof Array?(c.query.preparable={text:o,args:s},a=f(a)):(c.query.text=o,a?a=f(a):s=f(s)):(typeof o.name=="string"?c.query.plan=o.name:o.values instanceof Array?c.query.preparable={text:o.text,args:o.values}:c.query.text=o.text,a?a=f(a):s?s=f(s):o.callback=f(o.callback))}catch(d){return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,l=r.apply(this,arguments),l},t}function iue(t,e){var r=t.Client.prototype.query,n="__diagnosticOriginalFunc";return t.Client.prototype.query=function(o,s,a){var c=this,u=!!a,l={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},f=process.hrtime(),d;function p(h){h&&h[n]&&(h=h[n]);var g=eu.channel.bindToContext(function(v,C){var y=process.hrtime(f);if(l.result=C&&{rowCount:C.rowCount,command:C.command},l.error=v,l.duration=Math.ceil(y[0]*1e3+y[1]/1e6),eu.channel.publish("postgres",l),v){if(h)return h.apply(this,arguments);d&&d instanceof pH.EventEmitter&&d.emit("error",v)}else h&&h.apply(this,arguments)});try{return Object.defineProperty(g,n,{value:h}),g}catch(v){return h}}try{typeof o=="string"?s instanceof Array?(l.query.preparable={text:o,args:s},u=typeof a=="function",a=u?p(a):a):(l.query.text=o,a?(u=typeof a=="function",a=u?p(a):a):(u=typeof s=="function",s=u?p(s):s)):(typeof o.name=="string"?l.query.plan=o.name:o.values instanceof Array?l.query.preparable={text:o.text,args:o.values}:l.query.text=o.text,a?(u=typeof a=="function",a=p(a)):s?(u=typeof s=="function",s=u?p(s):s):(u=typeof o.callback=="function",o.callback=u?p(o.callback):o.callback))}catch(h){return r.apply(this,arguments)}return arguments[0]=o,arguments[1]=s,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,d=r.apply(this,arguments),u?d:d.then(function(h){return p()(void 0,h),new c._Promise(function(g,v){g(h)})}).catch(function(h){return p()(h,void 0),new c._Promise(function(g,v){v(h)})})},t}Ks.postgres6={versionSpecifier:"6.*",patch:nue};Ks.postgres7={versionSpecifier:">=7.* <=8.*",patch:iue};function oue(){eu.channel.registerMonkeyPatch("pg",Ks.postgres6),eu.channel.registerMonkeyPatch("pg",Ks.postgres7)}Ks.enable=oue});var mH=m(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});var ab=Et(),sue=function(t){var e=t.RedisClient.prototype.internal_send_command;return t.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,o=process.hrtime(),s=new Date;r.callback=ab.channel.bindToContext(function(a,c){var u=process.hrtime(o),l=u[0]*1e3+u[1]/1e6|0;ab.channel.publish("redis",{duration:l,address:i,commandObj:r,err:a,result:c,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return e.call(this,r)},t};qf.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:sue};function aue(){ab.channel.registerMonkeyPatch("redis",qf.redis)}qf.enable=aue});var gH=m(Ys=>{"use strict";var cue=Ys&&Ys.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(Ys,"__esModule",{value:!0});var ub=Et(),uue=function(t){var e=t.Connection.prototype.makeRequest;return t.Connection.prototype.makeRequest=function(){function n(o){var s=process.hrtime(),a={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return ub.channel.bindToContext(function(c,u,l){var f=process.hrtime(s);a=cue({},a,{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!c&&{rowCount:u,rows:l},query:{text:this.parametersByName.statement.value},error:c,duration:Math.ceil(f[0]*1e3+f[1]/1e6)}),ub.channel.publish("tedious",a),o.call(this,c,u,l)})}var i=arguments[0];arguments[0].callback=n(i.callback),e.apply(this,arguments)},t};Ys.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:uue};function lue(){ub.channel.registerMonkeyPatch("tedious",Ys.tedious)}Ys.enable=lue});var vH=m(Dn=>{"use strict";var fue=Dn&&Dn.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),due=Dn&&Dn.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&(r[n[i]]=t[n[i]]);return r};Object.defineProperty(Dn,"__esModule",{value:!0});var nv=Et(),pue=function(t){var e=t.Logger.prototype.log,r,n=function(i,o,s){var a;return r===t.config.npm.levels?a="npm":r===t.config.syslog.levels?a="syslog":a="unknown",nv.channel.publish("winston",{level:i,message:o,meta:s,levelKind:a}),o};return t.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(o){return o!==n}),this.filters.push(n)),e.apply(this,arguments)},t},hue=function(t){var e=function(s,a){var c;return s.config.npm.levels[a]!=null?c="npm":s.config.syslog.levels[a]!=null?c="syslog":c="unknown",c},r=function(s){fue(a,s);function a(c,u){var l=s.call(this,u)||this;return l.winston=c,l}return a.prototype.log=function(c,u){var l=c.message,f=c.level,d=c.meta,p=due(c,["message","level","meta"]);f=typeof Symbol.for=="function"?c[Symbol.for("level")]:f,l=c instanceof Error?c:l;var h=e(this.winston,f);d=d||{};for(var g in p)p.hasOwnProperty(g)&&(d[g]=p[g]);nv.channel.publish("winston",{message:l,level:f,levelKind:h,meta:d}),u()},a}(t.Transport);function n(){var s=arguments[0].levels||t.config.npm.levels,a;for(var c in s)s.hasOwnProperty(c)&&(a=a===void 0||s[c]>s[a]?c:a);this.add(new r(t,{level:a}))}var i=t.createLogger;t.createLogger=function(){var a=arguments[0].levels||t.config.npm.levels,c;for(var u in a)a.hasOwnProperty(u)&&(c=c===void 0||a[u]>a[c]?u:c);var l=i.apply(this,arguments);l.add(new r(t,{level:c}));var f=l.configure;return l.configure=function(){f.apply(this,arguments),n.apply(this,arguments)},l};var o=t.createLogger;return t.configure=function(){o.apply(this,arguments),n.apply(this,arguments)},t.add(new r(t)),t};Dn.winston3={versionSpecifier:"3.x",patch:hue};Dn.winston2={versionSpecifier:"2.x",patch:pue};function mue(){nv.channel.registerMonkeyPatch("winston",Dn.winston2),nv.channel.registerMonkeyPatch("winston",Dn.winston3)}Dn.enable=mue});var RH=m(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});var yH=tH();Rr.azuresdk=yH;var CH=nH();Rr.bunyan=CH;var wH=oH();Rr.console=wH;var EH=sH();Rr.mongodbCore=EH;var _H=cH();Rr.mongodb=_H;var xH=lH();Rr.mysql=xH;var bH=dH();Rr.pgPool=bH;var SH=hH();Rr.pg=SH;var PH=mH();Rr.redis=PH;var IH=gH();Rr.tedious=IH;var AH=vH();Rr.winston=AH;function gue(){CH.enable(),wH.enable(),EH.enable(),_H.enable(),xH.enable(),SH.enable(),bH.enable(),PH.enable(),AH.enable(),yH.enable(),IH.enable()}Rr.enable=gue});var sv=m(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});var lb=Ht();tu.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var fb="DiagnosticChannel";if(tu.IsInitialized){ti=RH(),TH=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",iv=TH.split(","),db={bunyan:ti.bunyan,console:ti.console,mongodb:ti.mongodb,mongodbCore:ti.mongodbCore,mysql:ti.mysql,redis:ti.redis,pg:ti.pg,pgPool:ti.pgPool,winston:ti.winston};for(ov in db)iv.indexOf(ov)===-1&&(db[ov].enable(),lb.info(fb,"Subscribed to "+ov+" events"));iv.length>0&&lb.info(fb,"Some modules will not be patched",iv)}else lb.info(fb,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var ti,TH,iv,db,ov;function vue(t){!tu.IsInitialized||Et().channel.addContextPreservation(t)}tu.registerContextPreservation=vue});var zH=m((ee,WH)=>{ee=WH.exports=me;var ke;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?ke=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:ke=function(){};ee.SEMVER_SPEC_VERSION="2.0.0";var pb=256,av=Number.MAX_SAFE_INTEGER||9007199254740991,hb=16,Me=ee.re=[],F=ee.src=[],le=0,ru=le++;F[ru]="0|[1-9]\\d*";var nu=le++;F[nu]="[0-9]+";var mb=le++;F[mb]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var kH=le++;F[kH]="("+F[ru]+")\\.("+F[ru]+")\\.("+F[ru]+")";var DH=le++;F[DH]="("+F[nu]+")\\.("+F[nu]+")\\.("+F[nu]+")";var gb=le++;F[gb]="(?:"+F[ru]+"|"+F[mb]+")";var vb=le++;F[vb]="(?:"+F[nu]+"|"+F[mb]+")";var yb=le++;F[yb]="(?:-("+F[gb]+"(?:\\."+F[gb]+")*))";var Cb=le++;F[Cb]="(?:-?("+F[vb]+"(?:\\."+F[vb]+")*))";var wb=le++;F[wb]="[0-9A-Za-z-]+";var Mf=le++;F[Mf]="(?:\\+("+F[wb]+"(?:\\."+F[wb]+")*))";var Eb=le++,OH="v?"+F[kH]+F[yb]+"?"+F[Mf]+"?";F[Eb]="^"+OH+"$";var _b="[v=\\s]*"+F[DH]+F[Cb]+"?"+F[Mf]+"?",xb=le++;F[xb]="^"+_b+"$";var iu=le++;F[iu]="((?:<|>)?=?)";var cv=le++;F[cv]=F[nu]+"|x|X|\\*";var uv=le++;F[uv]=F[ru]+"|x|X|\\*";var Xs=le++;F[Xs]="[v=\\s]*("+F[uv]+")(?:\\.("+F[uv]+")(?:\\.("+F[uv]+")(?:"+F[yb]+")?"+F[Mf]+"?)?)?";var ou=le++;F[ou]="[v=\\s]*("+F[cv]+")(?:\\.("+F[cv]+")(?:\\.("+F[cv]+")(?:"+F[Cb]+")?"+F[Mf]+"?)?)?";var NH=le++;F[NH]="^"+F[iu]+"\\s*"+F[Xs]+"$";var LH=le++;F[LH]="^"+F[iu]+"\\s*"+F[ou]+"$";var FH=le++;F[FH]="(?:^|[^\\d])(\\d{1,"+hb+"})(?:\\.(\\d{1,"+hb+"}))?(?:\\.(\\d{1,"+hb+"}))?(?:$|[^\\d])";var lv=le++;F[lv]="(?:~>?)";var fv=le++;F[fv]="(\\s*)"+F[lv]+"\\s+";Me[fv]=new RegExp(F[fv],"g");var yue="$1~",qH=le++;F[qH]="^"+F[lv]+F[Xs]+"$";var MH=le++;F[MH]="^"+F[lv]+F[ou]+"$";var dv=le++;F[dv]="(?:\\^)";var pv=le++;F[pv]="(\\s*)"+F[dv]+"\\s+";Me[pv]=new RegExp(F[pv],"g");var Cue="$1^",$H=le++;F[$H]="^"+F[dv]+F[Xs]+"$";var UH=le++;F[UH]="^"+F[dv]+F[ou]+"$";var bb=le++;F[bb]="^"+F[iu]+"\\s*("+_b+")$|^$";var Sb=le++;F[Sb]="^"+F[iu]+"\\s*("+OH+")$|^$";var $f=le++;F[$f]="(\\s*)"+F[iu]+"\\s*("+_b+"|"+F[Xs]+")";Me[$f]=new RegExp(F[$f],"g");var wue="$1$2$3",jH=le++;F[jH]="^\\s*("+F[Xs]+")\\s+-\\s+("+F[Xs]+")\\s*$";var HH=le++;F[HH]="^\\s*("+F[ou]+")\\s+-\\s+("+F[ou]+")\\s*$";var BH=le++;F[BH]="(<|>)?=?\\s*\\*";for(var Qs=0;Qs<le;Qs++)ke(Qs,F[Qs]),Me[Qs]||(Me[Qs]=new RegExp(F[Qs]));ee.parse=Js;function Js(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof me)return t;if(typeof t!="string"||t.length>pb)return null;var r=e.loose?Me[xb]:Me[Eb];if(!r.test(t))return null;try{return new me(t,e)}catch(n){return null}}ee.valid=Eue;function Eue(t,e){var r=Js(t,e);return r?r.version:null}ee.clean=_ue;function _ue(t,e){var r=Js(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}ee.SemVer=me;function me(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof me){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>pb)throw new TypeError("version is longer than "+pb+" characters");if(!(this instanceof me))return new me(t,e);ke("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?Me[xb]:Me[Eb]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>av||this.major<0)throw new TypeError("Invalid major version");if(this.minor>av||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>av||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<av)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}me.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};me.prototype.toString=function(){return this.version};me.prototype.compare=function(t){return ke("SemVer.compare",this.version,this.options,t),t instanceof me||(t=new me(t,this.options)),this.compareMain(t)||this.comparePre(t)};me.prototype.compareMain=function(t){return t instanceof me||(t=new me(t,this.options)),su(this.major,t.major)||su(this.minor,t.minor)||su(this.patch,t.patch)};me.prototype.comparePre=function(t){if(t instanceof me||(t=new me(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(ke("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return su(r,n)}while(++e)};me.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};ee.inc=xue;function xue(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new me(t,r).inc(e,n).version}catch(i){return null}}ee.diff=bue;function bue(t,e){if(Pb(t,e))return null;var r=Js(t),n=Js(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}ee.compareIdentifiers=su;var VH=/^[0-9]+$/;function su(t,e){var r=VH.test(t),n=VH.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}ee.rcompareIdentifiers=Sue;function Sue(t,e){return su(e,t)}ee.major=Pue;function Pue(t,e){return new me(t,e).major}ee.minor=Iue;function Iue(t,e){return new me(t,e).minor}ee.patch=Aue;function Aue(t,e){return new me(t,e).patch}ee.compare=Oi;function Oi(t,e,r){return new me(t,r).compare(new me(e,r))}ee.compareLoose=Rue;function Rue(t,e){return Oi(t,e,!0)}ee.rcompare=Tue;function Tue(t,e,r){return Oi(e,t,r)}ee.sort=kue;function kue(t,e){return t.sort(function(r,n){return ee.compare(r,n,e)})}ee.rsort=Due;function Due(t,e){return t.sort(function(r,n){return ee.rcompare(r,n,e)})}ee.gt=Uf;function Uf(t,e,r){return Oi(t,e,r)>0}ee.lt=hv;function hv(t,e,r){return Oi(t,e,r)<0}ee.eq=Pb;function Pb(t,e,r){return Oi(t,e,r)===0}ee.neq=GH;function GH(t,e,r){return Oi(t,e,r)!==0}ee.gte=Ib;function Ib(t,e,r){return Oi(t,e,r)>=0}ee.lte=Ab;function Ab(t,e,r){return Oi(t,e,r)<=0}ee.cmp=mv;function mv(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Pb(t,r,n);case"!=":return GH(t,r,n);case">":return Uf(t,r,n);case">=":return Ib(t,r,n);case"<":return hv(t,r,n);case"<=":return Ab(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}ee.Comparator=dn;function dn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof dn){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof dn))return new dn(t,e);ke("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===jf?this.value="":this.value=this.operator+this.semver.version,ke("comp",this)}var jf={};dn.prototype.parse=function(t){var e=this.options.loose?Me[bb]:Me[Sb],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new me(r[2],this.options.loose):this.semver=jf};dn.prototype.toString=function(){return this.value};dn.prototype.test=function(t){return ke("Comparator.test",t,this.options.loose),this.semver===jf?!0:(typeof t=="string"&&(t=new me(t,this.options)),mv(t,this.operator,this.semver,this.options))};dn.prototype.intersects=function(t,e){if(!(t instanceof dn))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new rt(t.value,e),gv(this.value,r,e);if(t.operator==="")return r=new rt(this.value,e),gv(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=mv(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=mv(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c};ee.Range=rt;function rt(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof rt)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new rt(t.raw,e);if(t instanceof dn)return new rt(t.value,e);if(!(this instanceof rt))return new rt(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}rt.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};rt.prototype.toString=function(){return this.range};rt.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var r=e?Me[HH]:Me[jH];t=t.replace(r,Hue),ke("hyphen replace",t),t=t.replace(Me[$f],wue),ke("comparator trim",t,Me[$f]),t=t.replace(Me[fv],yue),t=t.replace(Me[pv],Cue),t=t.split(/\s+/).join(" ");var n=e?Me[bb]:Me[Sb],i=t.split(" ").map(function(o){return Nue(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new dn(o,this.options)},this),i};rt.prototype.intersects=function(t,e){if(!(t instanceof rt))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};ee.toComparators=Oue;function Oue(t,e){return new rt(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function Nue(t,e){return ke("comp",t,e),t=que(t,e),ke("caret",t),t=Lue(t,e),ke("tildes",t),t=$ue(t,e),ke("xrange",t),t=jue(t,e),ke("stars",t),t}function hr(t){return!t||t.toLowerCase()==="x"||t==="*"}function Lue(t,e){return t.trim().split(/\s+/).map(function(r){return Fue(r,e)}).join(" ")}function Fue(t,e){var r=e.loose?Me[MH]:Me[qH];return t.replace(r,function(n,i,o,s,a){ke("tilde",t,n,i,o,s,a);var c;return hr(i)?c="":hr(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":hr(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(ke("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",ke("tilde return",c),c})}function que(t,e){return t.trim().split(/\s+/).map(function(r){return Mue(r,e)}).join(" ")}function Mue(t,e){ke("caret",t,e);var r=e.loose?Me[UH]:Me[$H];return t.replace(r,function(n,i,o,s,a){ke("caret",t,n,i,o,s,a);var c;return hr(i)?c="":hr(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":hr(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(ke("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(ke("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),ke("caret return",c),c})}function $ue(t,e){return ke("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return Uue(r,e)}).join(" ")}function Uue(t,e){t=t.trim();var r=e.loose?Me[LH]:Me[NH];return t.replace(r,function(n,i,o,s,a,c){ke("xRange",t,n,i,o,s,a,c);var u=hr(o),l=u||hr(s),f=l||hr(a),d=f;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":f&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),ke("xRange return",n),n})}function jue(t,e){return ke("replaceStars",t,e),t.trim().replace(Me[BH],"")}function Hue(t,e,r,n,i,o,s,a,c,u,l,f,d){return hr(r)?e="":hr(n)?e=">="+r+".0.0":hr(i)?e=">="+r+"."+n+".0":e=">="+e,hr(c)?a="":hr(u)?a="<"+(+c+1)+".0.0":hr(l)?a="<"+c+"."+(+u+1)+".0":f?a="<="+c+"."+u+"."+l+"-"+f:a="<="+a,(e+" "+a).trim()}rt.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new me(t,this.options));for(var e=0;e<this.set.length;e++)if(Bue(this.set[e],t,this.options))return!0;return!1};function Bue(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(ke(t[n].semver),t[n].semver!==jf&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}ee.satisfies=gv;function gv(t,e,r){try{e=new rt(e,r)}catch(n){return!1}return e.test(t)}ee.maxSatisfying=Vue;function Vue(t,e,r){var n=null,i=null;try{var o=new rt(e,r)}catch(s){return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new me(n,r))}),n}ee.minSatisfying=Gue;function Gue(t,e,r){var n=null,i=null;try{var o=new rt(e,r)}catch(s){return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new me(n,r))}),n}ee.minVersion=Wue;function Wue(t,e){t=new rt(t,e);var r=new me("0.0.0");if(t.test(r)||(r=new me("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new me(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Uf(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}ee.validRange=zue;function zue(t,e){try{return new rt(t,e).range||"*"}catch(r){return null}}ee.ltr=Kue;function Kue(t,e,r){return Rb(t,e,"<",r)}ee.gtr=Yue;function Yue(t,e,r){return Rb(t,e,">",r)}ee.outside=Rb;function Rb(t,e,r,n){t=new me(t,n),e=new rt(e,n);var i,o,s,a,c;switch(r){case">":i=Uf,o=Ab,s=hv,a=">",c=">=";break;case"<":i=hv,o=Ib,s=Uf,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(gv(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],f=null,d=null;if(l.forEach(function(p){p.semver===jf&&(p=new dn(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&o(t,d.semver))return!1;if(d.operator===c&&s(t,d.semver))return!1}return!0}ee.prerelease=Xue;function Xue(t,e){var r=Js(t,e);return r&&r.prerelease.length?r.prerelease:null}ee.intersects=Que;function Que(t,e,r){return t=new rt(t,r),e=new rt(e,r),t.intersects(e)}ee.coerce=Jue;function Jue(t){if(t instanceof me)return t;if(typeof t!="string")return null;var e=t.match(Me[FH]);return e==null?null:Js(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var vv=m((ZRe,XH)=>{"use strict";function Tb(t){return typeof t=="function"}var mr=console.error.bind(console);function Hf(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function Bf(t){t&&t.logger&&(Tb(t.logger)?mr=t.logger:mr("new logger isn't a function, not replacing"))}function KH(t,e,r){if(!t||!t[e]){mr("no original function "+e+" to wrap");return}if(!r){mr("no wrapper function"),mr(new Error().stack);return}if(!Tb(t[e])||!Tb(r)){mr("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return Hf(i,"__original",n),Hf(i,"__unwrap",function(){t[e]===i&&Hf(t,e,n)}),Hf(i,"__wrapped",!0),Hf(t,e,i),i}function Zue(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{mr("must provide one or more modules to patch"),mr(new Error().stack);return}if(!(e&&Array.isArray(e))){mr("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){KH(n,i,r)})})}function YH(t,e){if(!t||!t[e]){mr("no function to unwrap."),mr(new Error().stack);return}if(!t[e].__unwrap)mr("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function ele(t,e){if(t)Array.isArray(t)||(t=[t]);else{mr("must provide one or more modules to patch"),mr(new Error().stack);return}if(!(e&&Array.isArray(e))){mr("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){YH(r,n)})})}Bf.wrap=KH;Bf.massWrap=Zue;Bf.unwrap=YH;Bf.massUnwrap=ele;XH.exports=Bf});var wv=m((eTe,eB)=>{"use strict";var QH=vv(),au=QH.wrap,yv=QH.unwrap,Ni="wrap@before";function Cv(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function tle(t,e){for(var r=e.length,n=0;n<r;n++){var i=e[n],o=t[Ni];if(typeof o=="function")o(i);else if(Array.isArray(o))for(var s=o.length,a=0;a<s;a++)o[a](i)}}function JH(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function rle(t,e,r){var n=JH(t,e),i=n.filter(function(o){return r.indexOf(o)===-1});i.length>0&&tle(t,i)}function ZH(t,e){if(!!t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}eB.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(c,u){var l=JH(this,c).slice();try{var f=s.call(this,c,u);return rle(this,c,l),f}finally{this.on.__wrapped||au(this,"on",i),this.addListener.__wrapped||au(this,"addListener",i)}}}function o(s){return function(c){if(!this._events||!this._events[c])return s.apply(this,arguments);var u=this._events[c];function l(f){return function(){this._events[c]=u;try{return f.apply(this,arguments)}finally{u=this._events[c],this._events[c]=ZH(u,n)}}}au(this,"removeListener",l);try{return this._events[c]=ZH(u,n),s.apply(this,arguments)}finally{yv(this,"removeListener"),this._events[c]=u}}}e[Ni]?typeof e[Ni]=="function"?Cv(e,Ni,[e[Ni],r]):Array.isArray(e[Ni])&&e[Ni].push(r):Cv(e,Ni,r),e.__wrapped||(au(e,"addListener",i),au(e,"on",i),au(e,"emit",o),Cv(e,"__unwrap",function(){yv(e,"addListener"),yv(e,"on"),yv(e,"emit"),delete e[Ni],delete e.__wrapped}),Cv(e,"__wrapped",!0))}});var iB=m((tTe,nB)=>{"use strict";var Se=require("util"),Li=require("assert"),nle=wv(),ze=require("async_hooks"),Vf="cls@contexts",Gf="error@context",nt=process.env.DEBUG_CLS_HOOKED,Pe=-1;nB.exports={getNamespace:tB,createNamespace:ile,destroyNamespace:rB,reset:ole,ERROR_SYMBOL:Gf};function pn(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}pn.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,nt){let n=" ".repeat(this._indent<0?0:this._indent);Ze(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+Pe+" active:"+Se.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};pn.prototype.get=function(e){if(!this.active){if(nt){let r=ze.currentId(),n=ze.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ze(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${Pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(nt){let r=ze.executionAsyncId(),n=ze.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ze(i+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+Pe+" active:"+Se.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),Ze(`${i}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${Pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${Se.inspect(this.active)}`)}return this.active[e]};pn.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=Pe,nt){let r=ze.executionAsyncId(),n=ze.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ze(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${Pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${Se.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};pn.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(nt){let n=ze.triggerAsyncId(),i=ze.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Ze(`${o}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${Pe} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${Se.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[Gf]=r),n}finally{if(nt){let n=ze.triggerAsyncId(),i=ze.executionAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Ze(`${o}CONTEXT-RUN END: (${this.name}) currentUid:${Pe} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${Se.inspect(r)}`)}this.exit(r)}};pn.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};pn.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return nt&&Ze("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+Pe+" len:"+this._set.length+" "+Se.inspect(r)),n.then(i=>(nt&&Ze("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+Pe+" len:"+this._set.length+" "+Se.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Gf]=r,nt&&Ze("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+Pe+" len:"+this._set.length+" "+Se.inspect(r)),this.exit(r),i})};pn.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[Gf]=r),o}finally{n.exit(r)}}};pn.prototype.enter=function(e){if(Li.ok(e,"context must be provided for entering"),nt){let r=ze.executionAsyncId(),n=ze.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Ze(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${Pe} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${Se.inspect(e)}`)}this._set.push(this.active),this.active=e};pn.prototype.exit=function(e){if(Li.ok(e,"context must be provided for exiting"),nt){let n=ze.executionAsyncId(),i=ze.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);Ze(`${o}CONTEXT-EXIT: (${this.name}) currentUid:${Pe} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${Se.inspect(e)}`)}if(this.active===e){Li.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(nt&&Ze("??ERROR?? context exiting but not entered - ignoring: "+Se.inspect(e)),Li.ok(r>=0,`context not currently entered; can't exit. 
`+Se.inspect(this)+`
`+Se.inspect(e))):(Li.ok(r,"can't remove top context"),this._set.splice(r,1))};pn.prototype.bindEmitter=function(e){Li.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[Vf]||(s[Vf]=Object.create(null)),s[Vf][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[Vf]))return s;let a=s,c=s[Vf];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}nle(e,i,o)};pn.prototype.fromException=function(e){return e[Gf]};function tB(t){return process.namespaces[t]}function ile(t){Li.ok(t,"namespace must be given a name."),nt&&Ze(`NS-CREATING NAMESPACE (${t})`);let e=new pn(t);return e.id=Pe,ze.createHook({init(n,i,o,s){if(Pe=ze.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),nt){let a=" ".repeat(e._indent<0?0:e._indent);Ze(`${a}INIT [${i}] (${t}) asyncId:${n} currentUid:${Pe} triggerId:${o} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(Pe===0){let a=ze.triggerAsyncId(),c=e._contexts.get(a);if(c){if(e._contexts.set(n,c),nt){let u=" ".repeat(e._indent<0?0:e._indent);Ze(`${u}INIT USING CONTEXT FROM TRIGGERID [${i}] (${t}) asyncId:${n} currentUid:${Pe} triggerId:${a} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(nt){let u=" ".repeat(e._indent<0?0:e._indent);Ze(`${u}INIT MISSING CONTEXT [${i}] (${t}) asyncId:${n} currentUid:${Pe} triggerId:${a} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(nt&&i==="PROMISE"){Ze(Se.inspect(s,{showHidden:!0}));let a=s.parentId,c=" ".repeat(e._indent<0?0:e._indent);Ze(`${c}INIT RESOURCE-PROMISE [${i}] (${t}) parentId:${a} asyncId:${n} currentUid:${Pe} triggerId:${o} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){Pe=ze.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Pe),i){if(nt){let o=ze.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);Ze(`${s}BEFORE (${t}) asyncId:${n} currentUid:${Pe} triggerId:${o} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Se.inspect(i)}`),e._indent+=2}e.enter(i)}else if(nt){let o=ze.triggerAsyncId(),s=" ".repeat(e._indent<0?0:e._indent);Ze(`${s}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Pe} triggerId:${o} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${Se.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){Pe=ze.executionAsyncId();let i;if(i=e._contexts.get(n)||e._contexts.get(Pe),i){if(nt){let o=ze.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);Ze(`${s}AFTER (${t}) asyncId:${n} currentUid:${Pe} triggerId:${o} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Se.inspect(i)}`)}e.exit(i)}else if(nt){let o=ze.triggerAsyncId();e._indent-=2;let s=" ".repeat(e._indent<0?0:e._indent);Ze(`${s}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${Pe} triggerId:${o} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Se.inspect(i)}`)}},destroy(n){if(Pe=ze.executionAsyncId(),nt){let i=ze.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);Ze(`${o}DESTROY (${t}) currentUid:${Pe} asyncId:${n} triggerId:${i} active:${Se.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${Se.inspect(e._contexts.get(Pe))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function rB(t){let e=tB(t);Li.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Li.ok(e.id,"don't assign to process.namespaces directly! "+Se.inspect(e)),process.namespaces[t]=null}function ole(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){rB(t)}),process.namespaces=Object.create(null)}process.namespaces={};function Ze(...t){nt&&process._rawDebug(`${Se.format(...t)}`)}});var sB=m((rTe,oB)=>{"use strict";function sle(){}oB.exports=function(){let e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let c=0;c<arguments.length;c++)i[c]=arguments[c];let o=i[0];if(typeof o!="function")throw new TypeError("callback is not a function");let s=new sle,a=--r.counter;return e.init.call(s,a,0,null,null),i[0]=function(){e.pre.call(s,a);let c=!0;try{o.apply(this,arguments),c=!1}finally{c&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(s,a,!0),e.destroy.call(null,a)})}e.post.call(s,a,!1),e.destroy.call(null,a)},n.apply(process,i)}}});var cB=m((nTe,aB)=>{"use strict";function ale(){}aB.exports=function(){let e=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=c;function o(u,l,f,d){return typeof u!="function"?d?s(f):a(f):function(){e.pre.call(l,f);try{return u.apply(this,arguments)}finally{e.post.call(l,f,!1),e.destroy.call(null,f)}}}function s(u){return function(f){return e.destroy.call(null,u),f}}function a(u){return function(f){throw e.destroy.call(null,u),f}}function c(u,l){if(!r.enabled)return i.call(this,u,l);let f=new ale,d=--r.counter;return e.init.call(f,d,0,null,null),i.call(this,o(u,f,d,!0),o(l,f,d,!1))}}});var lB=m((iTe,uB)=>{"use strict";var jr=require("timers");function cle(){}function ule(){}function lle(){}var fle=new Map,dle=new Map,ple=new Map,kb=null,Db=!1;uB.exports=function(){Ob(this._hooks,this._state,"setTimeout","clearTimeout",cle,fle,!0),Ob(this._hooks,this._state,"setInterval","clearInterval",ule,dle,!1),Ob(this._hooks,this._state,"setImmediate","clearImmediate",lle,ple,!0),global.setTimeout=jr.setTimeout,global.setInterval=jr.setInterval,global.setImmediate=jr.setImmediate,global.clearTimeout=jr.clearTimeout,global.clearInterval=jr.clearInterval,global.clearImmediate=jr.clearImmediate};function Ob(t,e,r,n,i,o,s){let a=jr[r],c=jr[n];jr[r]=function(){if(!e.enabled)return a.apply(jr,arguments);let u=new Array(arguments.length);for(let h=0;h<arguments.length;h++)u[h]=arguments[h];let l=u[0];if(typeof l!="function")throw new TypeError('"callback" argument must be a function');let f=new i,d=--e.counter,p;return t.init.call(f,d,0,null,null),u[0]=function(){kb=p,t.pre.call(f,d);let h=!0;try{l.apply(this,arguments),h=!1}finally{h&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(f,d,!0),o.delete(p),t.destroy.call(null,d)})}t.post.call(f,d,!1),kb=null,(s||Db)&&(Db=!1,o.delete(p),t.destroy.call(null,d))},p=a.apply(jr,u),o.set(p,d),p},jr[n]=function(u){if(kb===u&&u!==null)Db=!0;else if(o.has(u)){let l=o.get(u);o.delete(u),t.destroy.call(null,l)}c.apply(jr,arguments)}}});var Nb=m((oTe,hle)=>{hle.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var pB=m((sTe,dB)=>{"use strict";var Wf=process.binding("async_wrap"),mle=Wf.Providers.TIMERWRAP,fB={nextTick:sB(),promise:cB(),timers:lB()},zf=new Set;function gle(){this.enabled=!1,this.counter=0}function Lb(){let t=this.initFns=[],e=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,o,s,a){if(o===mle){zf.add(i);return}for(let c of t)c(i,this,o,s,a)},this.pre=function(i){if(!zf.has(i))for(let o of e)o(i,this)},this.post=function(i,o){if(!zf.has(i))for(let s of r)s(i,this,o)},this.destroy=function(i){if(zf.has(i)){zf.delete(i);return}for(let o of n)o(i)}}Lb.prototype.add=function(t){t.init&&this.initFns.push(t.init),t.pre&&this.preFns.push(t.pre),t.post&&this.postFns.push(t.post),t.destroy&&this.destroyFns.push(t.destroy)};function Ev(t,e){let r=t.indexOf(e);r!==-1&&t.splice(r,1)}Lb.prototype.remove=function(t){t.init&&Ev(this.initFns,t.init),t.pre&&Ev(this.preFns,t.pre),t.post&&Ev(this.postFns,t.post),t.destroy&&Ev(this.destroyFns,t.destroy)};function Kf(){this._state=new gle,this._hooks=new Lb,this.version=Nb().version,this.providers=Wf.Providers;for(let t of Object.keys(fB))fB[t].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),Wf.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}dB.exports=Kf;Kf.prototype.addHooks=function(t){this._hooks.add(t)};Kf.prototype.removeHooks=function(t){this._hooks.remove(t)};Kf.prototype.enable=function(){this._state.enabled=!0,Wf.enable()};Kf.prototype.disable=function(){this._state.enabled=!1,Wf.disable()}});var Fb=m((aTe,vle)=>{vle.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var mB=m((cTe,hB)=>{function yle(t){try{return Error.prototype.toString.call(t)}catch(e){try{return"<error: "+e+">"}catch(r){return"<error>"}}}hB.exports=function(e,r){var n=[];n.push(yle(e));for(var i=0;i<r.length;i++){var o=r[i],s;try{s=o.toString()}catch(a){try{s="<error: "+a+">"}catch(c){s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var CB=m((uTe,yB)=>{var _v=mB();function gB(){this.extend=new Yf,this.filter=new Yf,this.format=new Xf,this.version=Fb().version}var qb=!1;gB.prototype.callSite=function t(e){e||(e={}),qb=!0;var r={};Error.captureStackTrace(r,t);var n=r.stack;return qb=!1,n=n.slice(e.slice||0),e.extend&&(n=this.extend._modify(r,n)),e.filter&&(n=this.filter._modify(r,n)),n};var qo=new gB;function Yf(){this._modifiers=[]}Yf.prototype._modify=function(t,e){for(var r=0,n=this._modifiers.length;r<n;r++)e=this._modifiers[r](t,e);return e};Yf.prototype.attach=function(t){this._modifiers.push(t)};Yf.prototype.deattach=function(t){var e=this._modifiers.indexOf(t);return e===-1?!1:(this._modifiers.splice(e,1),!0)};function Xf(){this._formater=_v,this._previous=void 0}Xf.prototype.replace=function(t){t?this._formater=t:this.restore()};Xf.prototype.restore=function(){this._formater=_v,this._previous=void 0};Xf.prototype._backup=function(){this._previous=this._formater};Xf.prototype._roolback=function(){this._previous===_v?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&qo.format.replace(Error.prepareStackTrace);var Mb=!1;function vB(t,e){if(qb)return e;if(Mb)return _v(t,e);var r=e.concat();r=qo.extend._modify(t,r),r=qo.filter._modify(t,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(t)&&Object.getOwnPropertyDescriptor(t,"callSite")===void 0&&(t.callSite={original:e,mutated:r}),Mb=!0;var n=qo.format._formater(t,r);return Mb=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return vB},set:function(t){t===vB?qo.format._roolback():(qo.format._backup(),qo.format.replace(t))}});function Cle(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:Cle,set:function(t){Object.defineProperty(this,"callSite",{value:t,writable:!0,configurable:!0})},configurable:!0});yB.exports=qo});var Ub=m((lTe,$b)=>{if(global._stackChain)if(global._stackChain.version===Fb().version)$b.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else $b.exports=global._stackChain=CB()});var wB=m((fTe,jb)=>{"use strict";var wle=pB();if(global._asyncHook)if(global._asyncHook.version===Nb().version)jb.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else Ub().filter.attach(function(e,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),jb.exports=global._asyncHook=new wle});var PB=m((dTe,SB)=>{"use strict";var mt=require("util"),Fi=require("assert"),Ele=wv(),cu=wB(),Qf="cls@contexts",Jf="error@context",EB=[];for(let t in cu.providers)EB[cu.providers[t]]=t;var lt=process.env.DEBUG_CLS_HOOKED,bt=-1;SB.exports={getNamespace:_B,createNamespace:_le,destroyNamespace:xB,reset:xle,ERROR_SYMBOL:Jf};function hn(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map}hn.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return lt&&gt("    SETTING KEY:"+e+"="+r+" in ns:"+this.name+" uid:"+bt+" active:"+mt.inspect(this.active,!0)),this.active[e]=r,r};hn.prototype.get=function(e){if(!this.active){lt&&gt("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+bt+" active:"+mt.inspect(this.active,!0));return}return lt&&gt("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+bt+" active:"+mt.inspect(this.active,!0)),this.active[e]};hn.prototype.createContext=function(){lt&&gt("   CREATING Context: "+this.name+" uid:"+bt+" len:"+this._set.length+"  active:"+mt.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=bt,lt&&gt("   CREATED Context: "+this.name+" uid:"+bt+" len:"+this._set.length+"  context:"+mt.inspect(e,!0,2,!0)),e};hn.prototype.run=function(e){let r=this.createContext();this.enter(r);try{return lt&&gt(" BEFORE RUN: "+this.name+" uid:"+bt+" len:"+this._set.length+" "+mt.inspect(r)),e(r),r}catch(n){throw n&&(n[Jf]=r),n}finally{lt&&gt(" AFTER RUN: "+this.name+" uid:"+bt+" len:"+this._set.length+" "+mt.inspect(r)),this.exit(r)}};hn.prototype.runAndReturn=function(e){var r;return this.run(function(n){r=e(n)}),r};hn.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return lt&&gt(" BEFORE runPromise: "+this.name+" uid:"+bt+" len:"+this._set.length+" "+mt.inspect(r)),n.then(i=>(lt&&gt(" AFTER runPromise: "+this.name+" uid:"+bt+" len:"+this._set.length+" "+mt.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Jf]=r,lt&&gt(" AFTER runPromise: "+this.name+" uid:"+bt+" len:"+this._set.length+" "+mt.inspect(r)),this.exit(r),i})};hn.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(o){throw o&&(o[Jf]=r),o}finally{n.exit(r)}}};hn.prototype.enter=function(e){Fi.ok(e,"context must be provided for entering"),lt&&gt("  ENTER "+this.name+" uid:"+bt+" len:"+this._set.length+" context: "+mt.inspect(e)),this._set.push(this.active),this.active=e};hn.prototype.exit=function(e){if(Fi.ok(e,"context must be provided for exiting"),lt&&gt("  EXIT "+this.name+" uid:"+bt+" len:"+this._set.length+" context: "+mt.inspect(e)),this.active===e){Fi.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(lt&&gt("??ERROR?? context exiting but not entered - ignoring: "+mt.inspect(e)),Fi.ok(r>=0,`context not currently entered; can't exit. 
`+mt.inspect(this)+`
`+mt.inspect(e))):(Fi.ok(r,"can't remove top context"),this._set.splice(r,1))};hn.prototype.bindEmitter=function(e){Fi.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[Qf]||(s[Qf]=Object.create(null)),s[Qf][n]={namespace:r,context:r.active})}function o(s){if(!(s&&s[Qf]))return s;let a=s,c=s[Qf];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}Ele(e,i,o)};hn.prototype.fromException=function(e){return e[Jf]};function _B(t){return process.namespaces[t]}function _le(t){Fi.ok(t,"namespace must be given a name."),lt&&gt("CREATING NAMESPACE "+t);let e=new hn(t);return e.id=bt,cu.addHooks({init(r,n,i,o,s){bt=r,o?(e._contexts.set(r,e._contexts.get(o)),lt&&gt("PARENTID: "+t+" uid:"+r+" parent:"+o+" provider:"+i)):e._contexts.set(bt,e.active),lt&&gt("INIT "+t+" uid:"+r+" parent:"+o+" provider:"+EB[i]+" active:"+mt.inspect(e.active,!0))},pre(r,n){bt=r;let i=e._contexts.get(r);i?(lt&&gt(" PRE "+t+" uid:"+r+" handle:"+xv(n)+" context:"+mt.inspect(i)),e.enter(i)):lt&&gt(" PRE MISSING CONTEXT "+t+" uid:"+r+" handle:"+xv(n))},post(r,n){bt=r;let i=e._contexts.get(r);i?(lt&&gt(" POST "+t+" uid:"+r+" handle:"+xv(n)+" context:"+mt.inspect(i)),e.exit(i)):lt&&gt(" POST MISSING CONTEXT "+t+" uid:"+r+" handle:"+xv(n))},destroy(r){bt=r,lt&&gt("DESTROY "+t+" uid:"+r+" context:"+mt.inspect(e._contexts.get(bt))+" active:"+mt.inspect(e.active,!0)),e._contexts.delete(r)}}),process.namespaces[t]=e,e}function xB(t){let e=_B(t);Fi.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Fi.ok(e.id,"don't assign to process.namespaces directly! "+mt.inspect(e)),process.namespaces[t]=null}function xle(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){xB(t)}),process.namespaces=Object.create(null)}process.namespaces={};cu._state&&!cu._state.enabled&&cu.enable();function gt(t){process.env.DEBUG&&process._rawDebug(t)}function xv(t){if(!t)return t;if(typeof t=="function")return t.name?t.name:(t.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(t.constructor&&t.constructor.name)return t.constructor.name}if(lt){Hb=Ub();for(bB in Hb.filter._modifiers)Hb.filter.deattach(bB)}var Hb,bB});var IB=m((pTe,Bb)=>{"use strict";var ble=zH();process&&ble.gte(process.versions.node,"8.0.0")?Bb.exports=iB():Bb.exports=PB()});var VB=m((te,BB)=>{te=BB.exports=ge;var De;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?De=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),console.log.apply(console,t)}:De=function(){};te.SEMVER_SPEC_VERSION="2.0.0";var Vb=256,bv=Number.MAX_SAFE_INTEGER||9007199254740991,Gb=16,$e=te.re=[],q=te.src=[],fe=0,uu=fe++;q[uu]="0|[1-9]\\d*";var lu=fe++;q[lu]="[0-9]+";var Wb=fe++;q[Wb]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var AB=fe++;q[AB]="("+q[uu]+")\\.("+q[uu]+")\\.("+q[uu]+")";var RB=fe++;q[RB]="("+q[lu]+")\\.("+q[lu]+")\\.("+q[lu]+")";var zb=fe++;q[zb]="(?:"+q[uu]+"|"+q[Wb]+")";var Kb=fe++;q[Kb]="(?:"+q[lu]+"|"+q[Wb]+")";var Yb=fe++;q[Yb]="(?:-("+q[zb]+"(?:\\."+q[zb]+")*))";var Xb=fe++;q[Xb]="(?:-?("+q[Kb]+"(?:\\."+q[Kb]+")*))";var Qb=fe++;q[Qb]="[0-9A-Za-z-]+";var Zf=fe++;q[Zf]="(?:\\+("+q[Qb]+"(?:\\."+q[Qb]+")*))";var Jb=fe++,TB="v?"+q[AB]+q[Yb]+"?"+q[Zf]+"?";q[Jb]="^"+TB+"$";var Zb="[v=\\s]*"+q[RB]+q[Xb]+"?"+q[Zf]+"?",e0=fe++;q[e0]="^"+Zb+"$";var fu=fe++;q[fu]="((?:<|>)?=?)";var Sv=fe++;q[Sv]=q[lu]+"|x|X|\\*";var Pv=fe++;q[Pv]=q[uu]+"|x|X|\\*";var Zs=fe++;q[Zs]="[v=\\s]*("+q[Pv]+")(?:\\.("+q[Pv]+")(?:\\.("+q[Pv]+")(?:"+q[Yb]+")?"+q[Zf]+"?)?)?";var du=fe++;q[du]="[v=\\s]*("+q[Sv]+")(?:\\.("+q[Sv]+")(?:\\.("+q[Sv]+")(?:"+q[Xb]+")?"+q[Zf]+"?)?)?";var kB=fe++;q[kB]="^"+q[fu]+"\\s*"+q[Zs]+"$";var DB=fe++;q[DB]="^"+q[fu]+"\\s*"+q[du]+"$";var OB=fe++;q[OB]="(?:^|[^\\d])(\\d{1,"+Gb+"})(?:\\.(\\d{1,"+Gb+"}))?(?:\\.(\\d{1,"+Gb+"}))?(?:$|[^\\d])";var Iv=fe++;q[Iv]="(?:~>?)";var Av=fe++;q[Av]="(\\s*)"+q[Iv]+"\\s+";$e[Av]=new RegExp(q[Av],"g");var Sle="$1~",NB=fe++;q[NB]="^"+q[Iv]+q[Zs]+"$";var LB=fe++;q[LB]="^"+q[Iv]+q[du]+"$";var Rv=fe++;q[Rv]="(?:\\^)";var Tv=fe++;q[Tv]="(\\s*)"+q[Rv]+"\\s+";$e[Tv]=new RegExp(q[Tv],"g");var Ple="$1^",FB=fe++;q[FB]="^"+q[Rv]+q[Zs]+"$";var qB=fe++;q[qB]="^"+q[Rv]+q[du]+"$";var t0=fe++;q[t0]="^"+q[fu]+"\\s*("+Zb+")$|^$";var r0=fe++;q[r0]="^"+q[fu]+"\\s*("+TB+")$|^$";var ed=fe++;q[ed]="(\\s*)"+q[fu]+"\\s*("+Zb+"|"+q[Zs]+")";$e[ed]=new RegExp(q[ed],"g");var Ile="$1$2$3",MB=fe++;q[MB]="^\\s*("+q[Zs]+")\\s+-\\s+("+q[Zs]+")\\s*$";var $B=fe++;q[$B]="^\\s*("+q[du]+")\\s+-\\s+("+q[du]+")\\s*$";var UB=fe++;q[UB]="(<|>)?=?\\s*\\*";for(var ea=0;ea<fe;ea++)De(ea,q[ea]),$e[ea]||($e[ea]=new RegExp(q[ea]));te.parse=ta;function ta(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ge)return t;if(typeof t!="string"||t.length>Vb)return null;var r=e.loose?$e[e0]:$e[Jb];if(!r.test(t))return null;try{return new ge(t,e)}catch(n){return null}}te.valid=Ale;function Ale(t,e){var r=ta(t,e);return r?r.version:null}te.clean=Rle;function Rle(t,e){var r=ta(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null}te.SemVer=ge;function ge(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof ge){if(t.loose===e.loose)return t;t=t.version}else if(typeof t!="string")throw new TypeError("Invalid Version: "+t);if(t.length>Vb)throw new TypeError("version is longer than "+Vb+" characters");if(!(this instanceof ge))return new ge(t,e);De("SemVer",t,e),this.options=e,this.loose=!!e.loose;var r=t.trim().match(e.loose?$e[e0]:$e[Jb]);if(!r)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>bv||this.major<0)throw new TypeError("Invalid major version");if(this.minor>bv||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>bv||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<bv)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}ge.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};ge.prototype.toString=function(){return this.version};ge.prototype.compare=function(t){return De("SemVer.compare",this.version,this.options,t),t instanceof ge||(t=new ge(t,this.options)),this.compareMain(t)||this.comparePre(t)};ge.prototype.compareMain=function(t){return t instanceof ge||(t=new ge(t,this.options)),pu(this.major,t.major)||pu(this.minor,t.minor)||pu(this.patch,t.patch)};ge.prototype.comparePre=function(t){if(t instanceof ge||(t=new ge(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var r=this.prerelease[e],n=t.prerelease[e];if(De("prerelease compare",e,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return pu(r,n)}while(++e)};ge.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this};te.inc=Tle;function Tle(t,e,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new ge(t,r).inc(e,n).version}catch(i){return null}}te.diff=kle;function kle(t,e){if(n0(t,e))return null;var r=ta(t),n=ta(e),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return o}te.compareIdentifiers=pu;var jB=/^[0-9]+$/;function pu(t,e){var r=jB.test(t),n=jB.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1}te.rcompareIdentifiers=Dle;function Dle(t,e){return pu(e,t)}te.major=Ole;function Ole(t,e){return new ge(t,e).major}te.minor=Nle;function Nle(t,e){return new ge(t,e).minor}te.patch=Lle;function Lle(t,e){return new ge(t,e).patch}te.compare=qi;function qi(t,e,r){return new ge(t,r).compare(new ge(e,r))}te.compareLoose=Fle;function Fle(t,e){return qi(t,e,!0)}te.rcompare=qle;function qle(t,e,r){return qi(e,t,r)}te.sort=Mle;function Mle(t,e){return t.sort(function(r,n){return te.compare(r,n,e)})}te.rsort=$le;function $le(t,e){return t.sort(function(r,n){return te.rcompare(r,n,e)})}te.gt=td;function td(t,e,r){return qi(t,e,r)>0}te.lt=kv;function kv(t,e,r){return qi(t,e,r)<0}te.eq=n0;function n0(t,e,r){return qi(t,e,r)===0}te.neq=HB;function HB(t,e,r){return qi(t,e,r)!==0}te.gte=i0;function i0(t,e,r){return qi(t,e,r)>=0}te.lte=o0;function o0(t,e,r){return qi(t,e,r)<=0}te.cmp=Dv;function Dv(t,e,r,n){switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return n0(t,r,n);case"!=":return HB(t,r,n);case">":return td(t,r,n);case">=":return i0(t,r,n);case"<":return kv(t,r,n);case"<=":return o0(t,r,n);default:throw new TypeError("Invalid operator: "+e)}}te.Comparator=mn;function mn(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof mn){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof mn))return new mn(t,e);De("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===rd?this.value="":this.value=this.operator+this.semver.version,De("comp",this)}var rd={};mn.prototype.parse=function(t){var e=this.options.loose?$e[t0]:$e[r0],r=t.match(e);if(!r)throw new TypeError("Invalid comparator: "+t);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new ge(r[2],this.options.loose):this.semver=rd};mn.prototype.toString=function(){return this.value};mn.prototype.test=function(t){return De("Comparator.test",t,this.options.loose),this.semver===rd?!0:(typeof t=="string"&&(t=new ge(t,this.options)),Dv(t,this.operator,this.semver,this.options))};mn.prototype.intersects=function(t,e){if(!(t instanceof mn))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var r;if(this.operator==="")return r=new it(t.value,e),Ov(this.value,r,e);if(t.operator==="")return r=new it(this.value,e),Ov(t.semver,r,e);var n=(this.operator===">="||this.operator===">")&&(t.operator===">="||t.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(t.operator==="<="||t.operator==="<"),o=this.semver.version===t.semver.version,s=(this.operator===">="||this.operator==="<=")&&(t.operator===">="||t.operator==="<="),a=Dv(this.semver,"<",t.semver,e)&&(this.operator===">="||this.operator===">")&&(t.operator==="<="||t.operator==="<"),c=Dv(this.semver,">",t.semver,e)&&(this.operator==="<="||this.operator==="<")&&(t.operator===">="||t.operator===">");return n||i||o&&s||a||c};te.Range=it;function it(t,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),t instanceof it)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new it(t.raw,e);if(t instanceof mn)return new it(t.value,e);if(!(this instanceof it))return new it(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+t);this.format()}it.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range};it.prototype.toString=function(){return this.range};it.prototype.parseRange=function(t){var e=this.options.loose;t=t.trim();var r=e?$e[$B]:$e[MB];t=t.replace(r,Yle),De("hyphen replace",t),t=t.replace($e[ed],Ile),De("comparator trim",t,$e[ed]),t=t.replace($e[Av],Sle),t=t.replace($e[Tv],Ple),t=t.split(/\s+/).join(" ");var n=e?$e[t0]:$e[r0],i=t.split(" ").map(function(o){return jle(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new mn(o,this.options)},this),i};it.prototype.intersects=function(t,e){if(!(t instanceof it))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return t.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};te.toComparators=Ule;function Ule(t,e){return new it(t,e).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function jle(t,e){return De("comp",t,e),t=Vle(t,e),De("caret",t),t=Hle(t,e),De("tildes",t),t=Wle(t,e),De("xrange",t),t=Kle(t,e),De("stars",t),t}function gr(t){return!t||t.toLowerCase()==="x"||t==="*"}function Hle(t,e){return t.trim().split(/\s+/).map(function(r){return Ble(r,e)}).join(" ")}function Ble(t,e){var r=e.loose?$e[LB]:$e[NB];return t.replace(r,function(n,i,o,s,a){De("tilde",t,n,i,o,s,a);var c;return gr(i)?c="":gr(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":gr(s)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":a?(De("replaceTilde pr",a),c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0",De("tilde return",c),c})}function Vle(t,e){return t.trim().split(/\s+/).map(function(r){return Gle(r,e)}).join(" ")}function Gle(t,e){De("caret",t,e);var r=e.loose?$e[qB]:$e[FB];return t.replace(r,function(n,i,o,s,a){De("caret",t,n,i,o,s,a);var c;return gr(i)?c="":gr(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":gr(s)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":a?(De("replaceCaret pr",a),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+"-"+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(De("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+s+" <"+i+"."+o+"."+(+s+1):c=">="+i+"."+o+"."+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+s+" <"+(+i+1)+".0.0"),De("caret return",c),c})}function Wle(t,e){return De("replaceXRanges",t,e),t.split(/\s+/).map(function(r){return zle(r,e)}).join(" ")}function zle(t,e){t=t.trim();var r=e.loose?$e[DB]:$e[kB];return t.replace(r,function(n,i,o,s,a,c){De("xRange",t,n,i,o,s,a,c);var u=gr(o),l=u||gr(s),f=l||gr(a),d=f;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(s=0),a=0,i===">"?(i=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i==="<="&&(i="<",l?o=+o+1:s=+s+1),n=i+o+"."+s+"."+a):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":f&&(n=">="+o+"."+s+".0 <"+o+"."+(+s+1)+".0"),De("xRange return",n),n})}function Kle(t,e){return De("replaceStars",t,e),t.trim().replace($e[UB],"")}function Yle(t,e,r,n,i,o,s,a,c,u,l,f,d){return gr(r)?e="":gr(n)?e=">="+r+".0.0":gr(i)?e=">="+r+"."+n+".0":e=">="+e,gr(c)?a="":gr(u)?a="<"+(+c+1)+".0.0":gr(l)?a="<"+c+"."+(+u+1)+".0":f?a="<="+c+"."+u+"."+l+"-"+f:a="<="+a,(e+" "+a).trim()}it.prototype.test=function(t){if(!t)return!1;typeof t=="string"&&(t=new ge(t,this.options));for(var e=0;e<this.set.length;e++)if(Xle(this.set[e],t,this.options))return!0;return!1};function Xle(t,e,r){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(n=0;n<t.length;n++)if(De(t[n].semver),t[n].semver!==rd&&t[n].semver.prerelease.length>0){var i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}te.satisfies=Ov;function Ov(t,e,r){try{e=new it(e,r)}catch(n){return!1}return e.test(t)}te.maxSatisfying=Qle;function Qle(t,e,r){var n=null,i=null;try{var o=new it(e,r)}catch(s){return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new ge(n,r))}),n}te.minSatisfying=Jle;function Jle(t,e,r){var n=null,i=null;try{var o=new it(e,r)}catch(s){return null}return t.forEach(function(s){o.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new ge(n,r))}),n}te.minVersion=Zle;function Zle(t,e){t=new it(t,e);var r=new ge("0.0.0");if(t.test(r)||(r=new ge("0.0.0-0"),t.test(r)))return r;r=null;for(var n=0;n<t.set.length;++n){var i=t.set[n];i.forEach(function(o){var s=new ge(o.semver.version);switch(o.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||td(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return r&&t.test(r)?r:null}te.validRange=efe;function efe(t,e){try{return new it(t,e).range||"*"}catch(r){return null}}te.ltr=tfe;function tfe(t,e,r){return s0(t,e,"<",r)}te.gtr=rfe;function rfe(t,e,r){return s0(t,e,">",r)}te.outside=s0;function s0(t,e,r,n){t=new ge(t,n),e=new it(e,n);var i,o,s,a,c;switch(r){case">":i=td,o=o0,s=kv,a=">",c=">=";break;case"<":i=kv,o=i0,s=td,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Ov(t,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],f=null,d=null;if(l.forEach(function(p){p.semver===rd&&(p=new mn(">=0.0.0")),f=f||p,d=d||p,i(p.semver,f.semver,n)?f=p:s(p.semver,d.semver,n)&&(d=p)}),f.operator===a||f.operator===c||(!d.operator||d.operator===a)&&o(t,d.semver))return!1;if(d.operator===c&&s(t,d.semver))return!1}return!0}te.prerelease=nfe;function nfe(t,e){var r=ta(t,e);return r&&r.prerelease.length?r.prerelease:null}te.intersects=ife;function ife(t,e,r){return t=new it(t,r),e=new it(e,r),t.intersects(e)}te.coerce=ofe;function ofe(t){if(t instanceof ge)return t;if(typeof t!="string")return null;var e=t.match($e[OB]);return e==null?null:ta(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var zB=m((hTe,WB)=>{var sfe=vv().wrap,a0=1<<0,c0=1<<1,u0=1<<2,Nv=1<<3,Ue=[],afe=0,ir=!1,Mo=[],hu,l0;function f0(t,e){var r=t.length,n=e.length,i=[];if(r===0&&n===0)return i;for(var o=0;o<r;o++)i[o]=t[o];if(n===0)return i;for(var s=0;s<n;s++){var a=!0;for(o=0;o<r;o++)if(t[o].uid===e[s].uid){a=!1;break}a&&i.push(e[s])}return i}process._fatalException?(Lv=!1,hu=function(e){var r=Ue.length;if(Lv||r===0)return!1;var n=!1;Lv=!0;for(var i=0;i<r;++i){var o=Ue[i];if((o.flags&Nv)!=0){var s=mu&&mu[o.uid];n=o.error(s,e)||n}}return Lv=!1,Mo.length>0&&(Ue=Mo.pop()),mu=void 0,n&&!ir},l0=function(e,r,n){var i=[];ir=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,(s.flags&a0)!=0){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return ir=!1,function(){mu=i,Mo.push(Ue),Ue=f0(r,Ue),ir=!0;for(var c=0;c<n;++c)(r[c].flags&c0)>0&&r[c].before(this,i[r[c].uid]);ir=!1;var u=e.apply(this,arguments);for(ir=!0,c=0;c<n;++c)(r[c].flags&u0)>0&&r[c].after(this,i[r[c].uid]);return ir=!1,Ue=Mo.pop(),mu=void 0,u}},sfe(process,"_fatalException",function(t){return function(r){return hu(r)||t(r)}})):(d0=!1,hu=function(e){if(d0)throw e;for(var r=!1,n=Ue.length,i=0;i<n;++i){var o=Ue[i];(o.flags&Nv)!=0&&(r=o.error(null,e)||r)}if(!r&&ir)throw e},l0=function(e,r,n){var i=[];ir=!0;for(var o=0;o<n;++o){var s=r[o];if(i[s.uid]=s.data,(s.flags&a0)!=0){var a=s.create(s.data);a!==void 0&&(i[s.uid]=a)}}return ir=!1,function(){var c=!1,u=!1;Mo.push(Ue),Ue=f0(r,Ue),ir=!0;for(var l=0;l<n;++l)(r[l].flags&c0)>0&&r[l].before(this,i[r[l].uid]);ir=!1;var f;try{f=e.apply(this,arguments)}catch(d){c=!0;for(var l=0;l<n;++l)if((Ue[l].flags&Nv)!=0)try{u=Ue[l].error(i[r[l].uid],d)||u}catch(h){throw d0=!0,h}if(!u)throw process.removeListener("uncaughtException",hu),process._originalNextTick(function(){process.addListener("uncaughtException",hu)}),d}finally{if(!c||u){for(ir=!0,l=0;l<n;++l)(r[l].flags&u0)>0&&r[l].after(this,i[r[l].uid]);ir=!1}Ue=Mo.pop()}return f}},process.addListener("uncaughtException",hu));var Lv,mu,d0;function cfe(t,e,r){ir=!0;for(var n=0;n<r;++n){var i=e[n];i.create&&i.create(i.data)}return ir=!1,function(){Mo.push(Ue),Ue=f0(e,Ue);var o=t.apply(this,arguments);return Ue=Mo.pop(),o}}function ufe(t){var e=Ue.length;if(e===0)return t;for(var r=Ue.slice(),n=0;n<e;++n)if(r[n].flags>0)return l0(t,r,e);return cfe(t,r,e)}function ri(t,e){typeof t.create=="function"&&(this.create=t.create,this.flags|=a0),typeof t.before=="function"&&(this.before=t.before,this.flags|=c0),typeof t.after=="function"&&(this.after=t.after,this.flags|=u0),typeof t.error=="function"&&(this.error=t.error,this.flags|=Nv),this.uid=++afe,this.data=e===void 0?null:e}ri.prototype.create=void 0;ri.prototype.before=void 0;ri.prototype.after=void 0;ri.prototype.error=void 0;ri.prototype.data=void 0;ri.prototype.uid=0;ri.prototype.flags=0;function GB(t,e){if(typeof t!="object"||!t)throw new TypeError("callbacks argument must be an object");return t instanceof ri?t:new ri(t,e)}function lfe(t,e){var r;t instanceof ri?r=t:r=GB(t,e);for(var n=!1,i=0;i<Ue.length;i++)if(r===Ue[i]){n=!0;break}return n||Ue.push(r),r}function ffe(t){for(var e=0;e<Ue.length;e++)if(t===Ue[e]){Ue.splice(e,1);break}}process.createAsyncListener=GB;process.addAsyncListener=lfe;process.removeAsyncListener=ffe;WB.exports=ufe});var YB=m((gTe,KB)=>{"use strict";KB.exports=(t,e)=>class extends t{constructor(n){var i,o;super(a);var s=this;try{n.apply(i,o)}catch(c){o[1](c)}return s;function a(c,u){i=this,o=[l,f];function l(d){return e(s,!1),c(d)}function f(d){return e(s,!1),u(d)}}}}});var r2=m(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var XB=vv(),Fv=VB(),Tr=XB.wrap,$o=XB.massWrap,ot=zB(),dfe=require("util"),pfe=Fv.gte(process.version,"6.0.0"),p0=Fv.gte(process.version,"7.0.0"),hfe=Fv.gte(process.version,"8.0.0"),mfe=Fv.gte(process.version,"11.0.0"),ni=require("net");p0&&!ni._normalizeArgs?ni._normalizeArgs=function(t){if(t.length===0)return[{},null];var e=t[0],r={};typeof e=="object"&&e!==null?r=e:wfe(e)?r.path=e:(r.port=e,t.length>1&&typeof t[1]=="string"&&(r.host=t[1]));var n=t[t.length-1];return typeof n!="function"?[r,null]:[r,n]}:!p0&&!ni._normalizeConnectArgs&&(ni._normalizeConnectArgs=function(t){var e={};function r(i){return(i=Number(i))>=0?i:!1}typeof t[0]=="object"&&t[0]!==null?e=t[0]:typeof t[0]=="string"&&r(t[0])===!1?e.path=t[0]:(e.port=t[0],typeof t[1]=="string"&&(e.host=t[1]));var n=t[t.length-1];return typeof n=="function"?[e,n]:[e]});"_setUpListenHandle"in ni.Server.prototype?Tr(ni.Server.prototype,"_setUpListenHandle",QB):Tr(ni.Server.prototype,"_listen2",QB);function QB(t){return function(){this.on("connection",function(e){e._handle&&(e._handle.onread=ot(e._handle.onread))});try{return t.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=ot(this._handle.onconnection))}}}function JB(t){if(t&&t._handle){var e=t._handle;e._originalOnread||(e._originalOnread=e.onread),e.onread=ot(e._originalOnread)}}Tr(ni.Socket.prototype,"connect",function(t){return function(){var e;hfe&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?e=arguments[0]:e=p0?ni._normalizeArgs(arguments):ni._normalizeConnectArgs(arguments),e[1]&&(e[1]=ot(e[1]));var r=t.apply(this,e);return JB(this),r}});var gfe=require("http");Tr(gfe.Agent.prototype,"addRequest",function(t){return function(e){var r=e.onSocket;return e.onSocket=ot(function(n){return JB(n),r.apply(this,arguments)}),t.apply(this,arguments)}});var h0=require("child_process");function ZB(t){Array.isArray(t.stdio)&&t.stdio.forEach(function(e){e&&e._handle&&(e._handle.onread=ot(e._handle.onread),Tr(e._handle,"close",Mv))}),t._handle&&(t._handle.onexit=ot(t._handle.onexit))}h0.ChildProcess?Tr(h0.ChildProcess.prototype,"spawn",function(t){return function(){var e=t.apply(this,arguments);return ZB(this),e}}):$o(h0,["execFile","fork","spawn"],function(t){return function(){var e=t.apply(this,arguments);return ZB(e),e}});process._fatalException||(process._originalNextTick=process.nextTick);var m0=[];process._nextDomainTick&&m0.push("_nextDomainTick");process._tickDomainCallback&&m0.push("_tickDomainCallback");$o(process,m0,ii);Tr(process,"nextTick",Mv);var g0=["setTimeout","setInterval"];global.setImmediate&&g0.push("setImmediate");var e2=require("timers"),vfe=global.setTimeout===e2.setTimeout;$o(e2,g0,Mv);vfe&&$o(global,g0,Mv);var v0=require("dns");$o(v0,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],ii);v0.resolveNaptr&&Tr(v0,"resolveNaptr",ii);var ra=require("fs");$o(ra,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],ii);ra.lchown&&Tr(ra,"lchown",ii);ra.lchmod&&Tr(ra,"lchmod",ii);ra.ftruncate&&Tr(ra,"ftruncate",ii);var nd;try{nd=require("zlib")}catch(t){}nd&&nd.Deflate&&nd.Deflate.prototype&&(na=Object.getPrototypeOf(nd.Deflate.prototype),na._transform?Tr(na,"_transform",ii):na.write&&na.flush&&na.end&&$o(na,["write","flush","end"],ii));var na,y0;try{y0=require("crypto")}catch(t){}y0&&(C0=["pbkdf2","randomBytes"],mfe||C0.push("pseudoRandomBytes"),$o(y0,C0,ii));var C0,qv=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";qv&&(t2=process.addAsyncListener({create:function(){qv=!1}}),global.Promise.resolve(!0).then(function(){qv=!1}),process.removeAsyncListener(t2));var t2;qv&&yfe();function yfe(){var t=global.Promise;function e(s){if(!(this instanceof e))return t(s);if(typeof s!="function")return new t(s);var a,c,u=new t(l);u.__proto__=e.prototype;try{s.apply(a,c)}catch(f){c[1](f)}return u;function l(f,d){a=this,c=[p,h];function p(g){return n(u,!1),f(g)}function h(g){return n(u,!1),d(g)}}}if(dfe.inherits(e,t),Tr(t.prototype,"then",o),t.prototype.chain&&Tr(t.prototype,"chain",o),pfe)global.Promise=YB()(t,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof t[s]=="function"&&(e[s]=t[s])}),global.Promise=e}function n(s,a){(!s.__asl_wrapper||a)&&(s.__asl_wrapper=ot(i))}function i(s,a,c,u){var l;try{return l=a.call(s,c),{returnVal:l,error:!1}}catch(f){return{errorVal:f,error:!0}}finally{l instanceof t?u.__asl_wrapper=function(){var d=l.__asl_wrapper||i;return d.apply(this,arguments)}:n(u,!0)}}function o(s){return function(){var c=this,u=s.apply(c,Array.prototype.map.call(arguments,l));return u.__asl_wrapper=function(d,p,h,g){return c.__asl_wrapper?(c.__asl_wrapper(d,function(){},null,u),u.__asl_wrapper(d,p,h,g)):i(d,p,h,g)},u;function l(f){return typeof f!="function"?f:ot(function(d){var p=(c.__asl_wrapper||i)(this,f,d,u);if(p.error)throw p.errorVal;return p.returnVal})}}}}function ii(t){var e=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=ot(arguments[n])}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=ot(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof n=="function"&&(n=ot(n)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof i=="function"&&(i=ot(i)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof o=="function"&&(o=ot(o)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof s=="function"&&(s=ot(s)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof a=="function"&&(a=ot(a)),t.call(this,r,n,i,o,s,a))};default:return e}}function Mv(t){var e=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=ot(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return t.apply(this,r||arguments)};switch(t.length){case 1:return function(r){return arguments.length!==1?e.apply(this,arguments):(typeof r=="function"&&(r=ot(r)),t.call(this,r))};case 2:return function(r,n){return arguments.length!==2?e.apply(this,arguments):(typeof r=="function"&&(r=ot(r)),t.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?e.apply(this,arguments):(typeof r=="function"&&(r=ot(r)),t.call(this,r,n,i))};case 4:return function(r,n,i,o){return arguments.length!==4?e.apply(this,arguments):(typeof r=="function"&&(r=ot(r)),t.call(this,r,n,i,o))};case 5:return function(r,n,i,o,s){return arguments.length!==5?e.apply(this,arguments):(typeof r=="function"&&(r=ot(r)),t.call(this,r,n,i,o,s))};case 6:return function(r,n,i,o,s,a){return arguments.length!==6?e.apply(this,arguments):(typeof r=="function"&&(r=ot(r)),t.call(this,r,n,i,o,s,a))};default:return e}}function Cfe(t){return(t=Number(t))>=0?t:!1}function wfe(t){return typeof t=="string"&&Cfe(t)===!1}});var a2=m((CTe,s2)=>{"use strict";var Mi=require("assert"),Efe=wv(),id="cls@contexts",w0="error@context";process.addAsyncListener||r2();function On(t){this.name=t,this.active=null,this._set=[],this.id=null}On.prototype.set=function(t,e){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[t]=e,e};On.prototype.get=function(t){if(!!this.active)return this.active[t]};On.prototype.createContext=function(){return Object.create(this.active)};On.prototype.run=function(t){var e=this.createContext();this.enter(e);try{return t(e),e}catch(r){throw r&&(r[w0]=e),r}finally{this.exit(e)}};On.prototype.runAndReturn=function(t){var e;return this.run(function(r){e=t(r)}),e};On.prototype.bind=function(t,e){e||(this.active?e=this.active:e=this.createContext());var r=this;return function(){r.enter(e);try{return t.apply(this,arguments)}catch(n){throw n&&(n[w0]=e),n}finally{r.exit(e)}}};On.prototype.enter=function(t){Mi.ok(t,"context must be provided for entering"),this._set.push(this.active),this.active=t};On.prototype.exit=function(t){if(Mi.ok(t,"context must be provided for exiting"),this.active===t){Mi.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var e=this._set.lastIndexOf(t);Mi.ok(e>=0,"context not currently entered; can't exit"),Mi.ok(e,"can't remove top context"),this._set.splice(e,1)};On.prototype.bindEmitter=function(t){Mi.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");var e=this,r="context@"+this.name;function n(o){!o||(o[id]||(o[id]=Object.create(null)),o[id][r]={namespace:e,context:e.active})}function i(o){if(!(o&&o[id]))return o;var s=o,a=o[id];return Object.keys(a).forEach(function(c){var u=a[c];s=u.namespace.bind(s,u.context)}),s}Efe(t,n,i)};On.prototype.fromException=function(t){return t[w0]};function n2(t){return process.namespaces[t]}function _fe(t){Mi.ok(t,"namespace must be given a name!");var e=new On(t);return e.id=process.addAsyncListener({create:function(){return e.active},before:function(r,n){n&&e.enter(n)},after:function(r,n){n&&e.exit(n)},error:function(r){r&&e.exit(r)}}),process.namespaces[t]=e,e}function i2(t){var e=n2(t);Mi.ok(e,"can't delete nonexistent namespace!"),Mi.ok(e.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(e.id),process.namespaces[t]=null}function o2(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){i2(t)}),process.namespaces=Object.create(null)}process.namespaces||o2();s2.exports={getNamespace:n2,createNamespace:_fe,destroyNamespace:i2,reset:o2}});var gu=m(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});var xfe=Ht(),bfe=sv(),Sfe=function(){function t(){}return t.getCurrentContext=function(){if(!t.enabled)return null;var e=t.session.get(t.CONTEXT_NAME);return e===void 0?null:e},t.generateContextObject=function(e,r,n,i,o,s){return r=r||e,this.enabled?{operation:{name:n,id:e,parentId:r,traceparent:o,tracestate:s},customProperties:new Pfe(i)}:null},t.runWithContext=function(e,r){if(t.enabled)return t.session.bind(r,(n={},n[t.CONTEXT_NAME]=e,n))();return r();var n},t.wrapEmitter=function(e){t.enabled&&t.session.bindEmitter(e)},t.wrapCallback=function(e){return t.enabled?t.session.bind(e):e},t.enable=function(e){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}t.hasEverEnabled||(this.forceClsHooked=e,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(t.forceClsHooked===!0||t.forceClsHooked===void 0&&t.shouldUseClsHooked()?this.cls=IB():this.cls=a2()),t.session=this.cls.createNamespace("AI-CLS-Session"),bfe.registerContextPreservation(function(r){return t.session.bind(r)})),this.enabled=!0}},t.disable=function(){this.enabled=!1},t.reset=function(){t.hasEverEnabled&&(t.session=null,t.session=this.cls.createNamespace("AI-CLS-Session"))},t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},t.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},t.canUseClsHooked=function(){var e=process.versions.node.split("."),r=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,n=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,i=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(r&&n)&&i},t.enabled=!1,t.hasEverEnabled=!1,t.forceClsHooked=void 0,t.CONTEXT_NAME="ApplicationInsights-Context",t}();E0.CorrelationContextManager=Sfe;var Pfe=function(){function t(e){this.props=[],this.addHeaderData(e)}return t.prototype.addHeaderData=function(e){var r=e?e.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},t.prototype.serializeToHeader=function(){return this.props.map(function(e){return e.key+"="+e.value}).join(", ")},t.prototype.getProperty=function(e){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===e)return n.value}},t.prototype.setProperty=function(e,r){if(t.bannedCharacters.test(e)||t.bannedCharacters.test(r)){xfe.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+e+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===e){i.value=r;return}}this.props.push({key:e,value:r})},t.bannedCharacters=/[,=]/,t}()});var $i=m((ETe,c2)=>{"use strict";var Ife=function(){function t(){}return t}();c2.exports=Ife});var l2=m((_0,u2)=>{"use strict";var Afe=_0&&_0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rfe=$i(),Tfe=function(t){Afe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(Rfe);u2.exports=Tfe});var x0=m((_Te,f2)=>{"use strict";var kfe=function(){function t(){}return t}();f2.exports=kfe});var p2=m((xTe,d2)=>{"use strict";var Dfe=function(){function t(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return t}();d2.exports=Dfe});var m2=m((b0,h2)=>{"use strict";var Ofe=b0&&b0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nfe=x0(),Lfe=function(t){Ofe(e,t);function e(){return t.call(this)||this}return e}(Nfe);h2.exports=Lfe});var P0=m((bTe,g2)=>{"use strict";var S0;(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(S0||(S0={}));g2.exports=S0});var y2=m((STe,v2)=>{"use strict";var Ffe=P0(),qfe=function(){function t(){this.kind=Ffe.Measurement}return t}();v2.exports=qfe});var w2=m((PTe,C2)=>{"use strict";var Mfe=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return t}();C2.exports=Mfe});var A0=m((I0,E2)=>{"use strict";var $fe=I0&&I0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ufe=$i(),jfe=function(t){$fe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(Ufe);E2.exports=jfe});var x2=m((R0,_2)=>{"use strict";var Hfe=R0&&R0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bfe=$i(),Vfe=function(t){Hfe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return e}(Bfe);_2.exports=Vfe});var S2=m((ITe,b2)=>{"use strict";var Gfe=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return t}();b2.exports=Gfe});var I2=m((T0,P2)=>{"use strict";var Wfe=T0&&T0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zfe=$i(),Kfe=function(t){Wfe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r}return e}(zfe);P2.exports=Kfe});var R2=m((k0,A2)=>{"use strict";var Yfe=k0&&k0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xfe=$i(),Qfe=function(t){Yfe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return e}(Xfe);A2.exports=Qfe});var k2=m((D0,T2)=>{"use strict";var Jfe=D0&&D0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zfe=A0(),ede=function(t){Jfe(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(Zfe);T2.exports=ede});var O2=m((O0,D2)=>{"use strict";var tde=O0&&O0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rde=$i(),nde=function(t){tde(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return e}(rde);D2.exports=nde});var L2=m((N0,N2)=>{"use strict";var ide=N0&&N0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ode=$i(),sde=function(t){ide(e,t);function e(){var r=t.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return e}(ode);N2.exports=sde});var q2=m((ATe,F2)=>{"use strict";var L0;(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(L0||(L0={}));F2.exports=L0});var $2=m((RTe,M2)=>{"use strict";var ade=function(){function t(){}return t}();M2.exports=ade});var F0=m(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.AvailabilityData=l2();St.Base=x0();St.ContextTagKeys=p2();St.Data=m2();St.DataPoint=y2();St.DataPointType=P0();St.Domain=$i();St.Envelope=w2();St.EventData=A0();St.ExceptionData=x2();St.ExceptionDetails=S2();St.MessageData=I2();St.MetricData=R2();St.PageViewData=k2();St.RemoteDependencyData=O2();St.RequestData=L2();St.SeverityLevel=q2();St.StackFrame=$2()});var U2=m($v=>{"use strict";Object.defineProperty($v,"__esModule",{value:!0});var ia=F0(),cde=function(){function t(){}return t.TYPE_HTTP="Http",t.TYPE_AI="Http (tracked component)",t}();$v.RemoteDependencyDataConstants=cde;function ude(t){return"properties"in t||t instanceof ia.EventData||t instanceof ia.ExceptionData||t instanceof ia.MessageData||t instanceof ia.MetricData||t instanceof ia.PageViewData||t instanceof ia.RemoteDependencyData||t instanceof ia.RequestData}$v.domainSupportsProperties=ude});var j2=m(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});function lde(t){switch(t){case vr.Event:return"EventData";case vr.Exception:return"ExceptionData";case vr.Trace:return"MessageData";case vr.Metric:return"MetricData";case vr.Request:return"RequestData";case vr.Dependency:return"RemoteDependencyData";case vr.Availability:return"AvailabilityData"}}oa.telemetryTypeToBaseType=lde;function fde(t){switch(t){case"EventData":return vr.Event;case"ExceptionData":return vr.Exception;case"MessageData":return vr.Trace;case"MetricData":return vr.Metric;case"RequestData":return vr.Request;case"RemoteDependencyData":return vr.Dependency;case"AvailabilityData":return vr.Availability}}oa.baseTypeToTelemetryType=fde;oa.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData"};var vr;(function(t){t[t.Event=0]="Event",t[t.Exception=1]="Exception",t[t.Trace=2]="Trace",t[t.Metric=3]="Metric",t[t.Request=4]="Request",t[t.Dependency=5]="Dependency",t[t.Availability=6]="Availability"})(vr=oa.TelemetryType||(oa.TelemetryType={}))});var H2=m(Uv=>{"use strict";function dde(t){for(var e in t)Uv.hasOwnProperty(e)||(Uv[e]=t[e])}Object.defineProperty(Uv,"__esModule",{value:!0});dde(j2())});var Hr=m(jv=>{"use strict";function q0(t){for(var e in t)jv.hasOwnProperty(e)||(jv[e]=t[e])}Object.defineProperty(jv,"__esModule",{value:!0});q0(U2());q0(F0());q0(H2())});var V2=m(Hv=>{"use strict";Object.defineProperty(Hv,"__esModule",{value:!0});var B2=Hr(),M0=Et(),sa=[],$0=function(t){var e=t.data.message;sa.forEach(function(r){e instanceof Error?r.trackException({exception:e}):(e.lastIndexOf(`
`)==e.length-1&&(e=e.substring(0,e.length-1)),r.trackTrace({message:e,severity:t.data.stderr?B2.SeverityLevel.Warning:B2.SeverityLevel.Information}))})};function pde(t,e){t?(sa.length===0&&M0.channel.subscribe("console",$0),sa.push(e)):(sa=sa.filter(function(r){return r!=e}),sa.length===0&&M0.channel.unsubscribe("console",$0))}Hv.enable=pde;function hde(){M0.channel.unsubscribe("console",$0),sa=[]}Hv.dispose=hde});var G2=m(Bv=>{"use strict";Object.defineProperty(Bv,"__esModule",{value:!0});var vu=Hr(),U0=Et(),aa=[],mde={10:vu.SeverityLevel.Verbose,20:vu.SeverityLevel.Verbose,30:vu.SeverityLevel.Information,40:vu.SeverityLevel.Warning,50:vu.SeverityLevel.Error,60:vu.SeverityLevel.Critical},j0=function(t){var e=t.data.result;aa.forEach(function(r){var n=mde[t.data.level];e instanceof Error?r.trackException({exception:e}):r.trackTrace({message:e,severity:n})})};function gde(t,e){t?(aa.length===0&&U0.channel.subscribe("bunyan",j0),aa.push(e)):(aa=aa.filter(function(r){return r!=e}),aa.length===0&&U0.channel.unsubscribe("bunyan",j0))}Bv.enable=gde;function vde(){U0.channel.unsubscribe("bunyan",j0),aa=[]}Bv.dispose=vde});var W2=m(Vv=>{"use strict";Object.defineProperty(Vv,"__esModule",{value:!0});var Vt=Hr(),H0=Et(),ca=[],yde={syslog:function(t){var e={emerg:Vt.SeverityLevel.Critical,alert:Vt.SeverityLevel.Critical,crit:Vt.SeverityLevel.Critical,error:Vt.SeverityLevel.Error,warning:Vt.SeverityLevel.Warning,notice:Vt.SeverityLevel.Information,info:Vt.SeverityLevel.Information,debug:Vt.SeverityLevel.Verbose};return e[t]===void 0?Vt.SeverityLevel.Information:e[t]},npm:function(t){var e={error:Vt.SeverityLevel.Error,warn:Vt.SeverityLevel.Warning,info:Vt.SeverityLevel.Information,verbose:Vt.SeverityLevel.Verbose,debug:Vt.SeverityLevel.Verbose,silly:Vt.SeverityLevel.Verbose};return e[t]===void 0?Vt.SeverityLevel.Information:e[t]},unknown:function(t){return Vt.SeverityLevel.Information}},B0=function(t){var e=t.data.message;ca.forEach(function(r){if(e instanceof Error)r.trackException({exception:e,properties:t.data.meta});else{var n=yde[t.data.levelKind](t.data.level);r.trackTrace({message:e,severity:n,properties:t.data.meta})}})};function Cde(t,e){t?(ca.length===0&&H0.channel.subscribe("winston",B0),ca.push(e)):(ca=ca.filter(function(r){return r!=e}),ca.length===0&&H0.channel.unsubscribe("winston",B0))}Vv.enable=Cde;function wde(){H0.channel.unsubscribe("winston",B0),ca=[]}Vv.dispose=wde});var K2=m((MTe,z2)=>{"use strict";var Ede=sv(),_de=function(){function t(e){if(t.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=e,t.INSTANCE=this}return t.prototype.enable=function(e,r){Ede.IsInitialized&&(V2().enable(e&&r,this._client),G2().enable(e,this._client),W2().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1,!1)},t._methodNames=["debug","info","log","warn","error"],t}();z2.exports=_de});var X2=m(($Te,Y2)=>{"use strict";var xde=function(){function t(e){if(t.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e;var r=process.versions.node.split(".");t._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.enable=function(e){var r=this;if(e){this._isInitialized=!0;var n=this;if(!this._exceptionListenerHandle){var i=function(o,s,a){a===void 0&&(a=new Error(t._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:a}),r._client.flush({isAppCrashing:!0}),o&&s&&process.listeners(s).length===1&&(console.error(a),process.exit(1))};t._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1),process.on(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,t.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1),process.on(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(t._canUseUncaughtExceptionMonitor?process.removeListener(t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(t.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(t.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.INSTANCE=null,t.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",t.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",t.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",t._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",t._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",t._canUseUncaughtExceptionMonitor=!1,t}();Y2.exports=xde});var yu=m(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";Le.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";Le.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var or;(function(t){t.COMMITTED_BYTES="\\Memory\\Committed Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",t.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",t.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",t.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",t.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",t.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",t.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(or=Le.QuickPulseCounter||(Le.QuickPulseCounter={}));var Gv;(function(t){t.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",t.AVAILABLE_BYTES="\\Memory\\Available Bytes",t.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",t.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",t.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",t.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(Gv=Le.PerformanceCounter||(Le.PerformanceCounter={}));Le.PerformanceToQuickPulseCounter=(Nn={},Nn[Gv.PROCESSOR_TIME]=or.PROCESSOR_TIME,Nn[Gv.REQUEST_RATE]=or.REQUEST_RATE,Nn[Gv.REQUEST_DURATION]=or.REQUEST_DURATION,Nn[or.COMMITTED_BYTES]=or.COMMITTED_BYTES,Nn[or.REQUEST_FAILURE_RATE]=or.REQUEST_FAILURE_RATE,Nn[or.DEPENDENCY_RATE]=or.DEPENDENCY_RATE,Nn[or.DEPENDENCY_FAILURE_RATE]=or.DEPENDENCY_FAILURE_RATE,Nn[or.DEPENDENCY_DURATION]=or.DEPENDENCY_DURATION,Nn[or.EXCEPTION_RATE]=or.EXCEPTION_RATE,Nn);Le.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability"};Le.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument"};Le.TelemetryTypeStringToQuickPulseType={EventData:Le.QuickPulseType.Event,ExceptionData:Le.QuickPulseType.Exception,MessageData:Le.QuickPulseType.Trace,MetricData:Le.QuickPulseType.Metric,RequestData:Le.QuickPulseType.Request,RemoteDependencyData:Le.QuickPulseType.Dependency,AvailabilityData:Le.QuickPulseType.Availability};Le.TelemetryTypeStringToQuickPulseDocumentType={EventData:Le.QuickPulseDocumentType.Event,ExceptionData:Le.QuickPulseDocumentType.Exception,MessageData:Le.QuickPulseDocumentType.Trace,MetricData:Le.QuickPulseDocumentType.Metric,RequestData:Le.QuickPulseDocumentType.Request,RemoteDependencyData:Le.QuickPulseDocumentType.Dependency,AvailabilityData:Le.QuickPulseDocumentType.Availability};var Nn});var zv=m((jTe,Q2)=>{"use strict";var Wv=require("os"),gn=yu(),bde=function(){function t(e,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,t.INSTANCE||(t.INSTANCE=this),this._isInitialized=!1,this._client=e,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return t.prototype.enable=function(e,r){var n=this;this._isEnabled=e,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),e?this._handle||(this._lastCpus=Wv.cpus(),this._lastRequests={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:t._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},t.countRequest=function(e,r){var n;if(!!t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalRequestExecutionTime+=n,r===!1&&t._totalFailedRequestCount++,t._totalRequestCount++}},t.countException=function(){t._totalExceptionCount++},t.countDependency=function(e,r){var n;if(!!t.isEnabled()){if(typeof e=="string")n=+new Date("1970-01-01T"+e+"Z");else if(typeof e=="number")n=e;else return;t._intervalDependencyExecutionTime+=n,r===!1&&t._totalFailedDependencyCount++,t._totalDependencyCount++}},t.prototype.isInitialized=function(){return this._isInitialized},t.isEnabled=function(){return t.INSTANCE&&t.INSTANCE._isEnabled},t.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},t.prototype._trackCpu=function(){var e=Wv.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var r=0,n=0,i=0,o=0,s=0,a=0;!!e&&a<e.length;a++){var c=e[a],u=this._lastCpus[a],l="% cpu("+a+") ",f=c.model,d=c.speed,p=c.times,h=u.times,g=p.user-h.user||0;r+=g;var v=p.sys-h.sys||0;n+=v;var C=p.nice-h.nice||0;i+=C;var y=p.idle-h.idle||0;o+=y;var E=p.irq-h.irq||0;s+=E}var w=void 0;if(typeof process.cpuUsage=="function"){var x=process.cpuUsage(),_=process.hrtime(),S=x.user-this._lastAppCpuUsage.user+(x.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var I=(_[0]-this._lastHrtime[0])*1e6+(_[1]-this._lastHrtime[1])/1e3||0;w=100*S/(I*e.length)}this._lastAppCpuUsage=x,this._lastHrtime=_}var R=r+n+i+o+s||1;this._client.trackMetric({name:gn.PerformanceCounter.PROCESSOR_TIME,value:(R-o)/R*100}),this._client.trackMetric({name:gn.PerformanceCounter.PROCESS_TIME,value:w||r/R*100})}this._lastCpus=e},t.prototype._trackMemory=function(){var e=Wv.freemem(),r=process.memoryUsage().rss,n=Wv.totalmem()-e;this._client.trackMetric({name:gn.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:gn.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:gn.QuickPulseCounter.COMMITTED_BYTES,value:n})},t.prototype._trackNetwork=function(){var e=this._lastRequests,r={totalRequestCount:t._totalRequestCount,totalFailedRequestCount:t._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-e.totalRequestCount||0,i=r.totalFailedRequestCount-e.totalFailedRequestCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=t._intervalRequestExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:gn.PerformanceCounter.REQUEST_RATE,value:c}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:gn.PerformanceCounter.REQUEST_DURATION,value:a}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:gn.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},t.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastDependencies,r={totalDependencyCount:t._totalDependencyCount,totalFailedDependencyCount:t._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-e.totalDependencyCount||0,i=r.totalFailedDependencyCount-e.totalFailedDependencyCount||0,o=r.time-e.time,s=o/1e3,a=(t._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=t._intervalDependencyExecutionTime,o>0){var c=n/s,u=i/s;this._client.trackMetric({name:gn.QuickPulseCounter.DEPENDENCY_RATE,value:c}),this._client.trackMetric({name:gn.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:gn.QuickPulseCounter.DEPENDENCY_DURATION,value:a})}this._lastDependencies=r}},t.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var e=this._lastExceptions,r={totalExceptionCount:t._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-e.totalExceptionCount||0,i=r.time-e.time,o=i/1e3;if(i>0){var s=n/o;this._client.trackMetric({name:gn.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t._totalRequestCount=0,t._totalFailedRequestCount=0,t._lastRequestExecutionTime=0,t._totalDependencyCount=0,t._totalFailedDependencyCount=0,t._lastDependencyExecutionTime=0,t._totalExceptionCount=0,t._intervalDependencyExecutionTime=0,t._intervalRequestExecutionTime=0,t}();Q2.exports=bde});var Cu=m((HTe,J2)=>{"use strict";J2.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var Ln=m((W0,eV)=>{"use strict";var V0=W0&&W0.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Sde=require("http"),Z2=require("https"),G0=require("url"),Kv=require("constants"),od=Ht(),wu=Cu(),Pde=function(){function t(){}return t.getCookie=function(e,r){var n="";if(e&&e.length&&typeof r=="string")for(var i=e+"=",o=r.split(";"),s=0;s<o.length;s++){var r=o[s];if(r=t.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,o[s].length);break}}return n},t.trim=function(e){return typeof e=="string"?e.replace(/^\s+|\s+$/g,""):""},t.int32ArrayToBase64=function(e){var r=function(a,c){return String.fromCharCode(a>>c&255)},n=function(a){return r(a,24)+r(a,16)+r(a,8)+r(a,0)},i=e.map(n).join(""),o=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=o.toString("base64");return s.substr(0,s.indexOf("="))},t.random32=function(){return 4294967296*Math.random()|0},t.randomu32=function(){return t.random32()+2147483648},t.w3cTraceId=function(){for(var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=t.random32(),r+=e[n&15]+e[n>>4&15]+e[n>>8&15]+e[n>>12&15]+e[n>>16&15]+e[n>>20&15]+e[n>>24&15]+e[n>>28&15];var o=e[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+o+r.substr(16,3)+r.substr(19,12)},t.isValidW3CId=function(e){return e.length===32&&e!=="00000000000000000000000000000000"},t.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},t.isError=function(e){return e instanceof Error},t.isPrimitive=function(e){var r=typeof e;return r==="string"||r==="number"||r==="boolean"},t.isDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"},t.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var r=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(e/(1e3*60))%60,i=""+Math.floor(e/(1e3*60*60))%24,o=Math.floor(e/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=o>0?o+".":"";return s+i+":"+n+":"+r},t.extractError=function(e){var r=e;return{message:e.message,code:r.code||r.id||""}},t.extractObject=function(e){return e instanceof Error?t.extractError(e):typeof e.toJSON=="function"?e.toJSON():e},t.validateStringMap=function(e){if(typeof e!="object"){od.info("Invalid properties dropped from payload");return}var r={};for(var n in e){var i="",o=e[n],s=typeof o;if(t.isPrimitive(o))i=o.toString();else if(o===null||s==="undefined")i="";else if(s==="function"){od.info("key: "+n+" was function; will not serialize");continue}else{var a=t.isArray(o)?o:t.extractObject(o);try{t.isPrimitive(a)?i=a:i=JSON.stringify(a)}catch(c){i=o.constructor.name.toString()+" (Error: "+c.message+")",od.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,t.MAX_PROPERTY_LENGTH)}return r},t.canIncludeCorrelationHeader=function(e,r){var n=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var o=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));if(o.test(G0.parse(r).hostname))return!1}return!0},t.getCorrelationContextTarget=function(e,r){var n=e.headers&&e.headers[wu.requestContextHeader];if(n)for(var i=n.split(","),o=0;o<i.length;++o){var s=i[o].split("=");if(s.length==2&&s[0]==r)return s[1]}},t.makeRequest=function(e,r,n,i){r&&r.indexOf("//")===0&&(r="https:"+r);var o=G0.parse(r),s=V0({},n,{host:o.hostname,port:o.port,path:o.pathname}),a=void 0;if(o.protocol==="https:"&&(a=e.proxyHttpsUrl||void 0),o.protocol==="http:"&&(a=e.proxyHttpUrl||void 0),a){a.indexOf("//")===0&&(a="http:"+a);var c=G0.parse(a);c.protocol==="https:"?(od.info("Proxies that use HTTPS are not supported"),a=void 0):s=V0({},s,{host:c.hostname,port:c.port||"80",path:r,headers:V0({},s.headers,{Host:o.hostname})})}var u=o.protocol==="https:"&&!a;return u&&e.httpsAgent!==void 0?s.agent=e.httpsAgent:!u&&e.httpAgent!==void 0?s.agent=e.httpAgent:u&&(s.agent=t.tlsRestrictedAgent),u?Z2.request(s,i):Sde.request(s,i)},t.safeIncludeCorrelationHeader=function(e,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(o){od.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",o,n)}i?t.addCorrelationIdHeaderFromString(e,r,i):r.setHeader(wu.requestContextHeader,wu.requestContextSourceKey+"="+e.config.correlationId)},t.addCorrelationIdHeaderFromString=function(e,r,n){var i=n.split(","),o=wu.requestContextSourceKey+"=",s=i.some(function(a){return a.substring(0,o.length)===o});s||r.setHeader(wu.requestContextHeader,n+","+wu.requestContextSourceKey+"="+e.config.correlationId)},t.MAX_PROPERTY_LENGTH=8192,t.tlsRestrictedAgent=new Z2.Agent({secureOptions:Kv.SSL_OP_NO_SSLv2|Kv.SSL_OP_NO_SSLv3|Kv.SSL_OP_NO_TLSv1|Kv.SSL_OP_NO_TLSv1_1}),t}();eV.exports=Pde});var z0=m((BTe,tV)=>{"use strict";var Ide=function(){function t(){}return t.prototype.getUrl=function(){return this.url},t.prototype.RequestParser=function(){this.startTime=+new Date},t.prototype._setStatus=function(e,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=e;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var o in r)i[o]=r[o]&&r[o].toString&&r[o].toString()}this.properties=i},t.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},t}();tV.exports=Ide});var ua=m((VTe,rV)=>{"use strict";var Yv=Ln(),K0=Ht(),Ade=function(){function t(){}return t.queryCorrelationId=function(e,r){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId";if(t.completedLookups.hasOwnProperty(n)){r(t.completedLookups[n]);return}else if(t.pendingLookups[n]){t.pendingLookups[n].push(r);return}t.pendingLookups[n]=[r];var i=function(){if(!!t.pendingLookups[n]){var o={method:"GET",disableAppInsightsAutoCollection:!0};K0.info(t.TAG,o);var s=Yv.makeRequest(e,n,o,function(a){if(a.statusCode===200){var c="";a.setEncoding("utf-8"),a.on("data",function(u){c+=u}),a.on("end",function(){K0.info(t.TAG,c);var u=t.correlationIdPrefix+c;t.completedLookups[n]=u,t.pendingLookups[n]&&t.pendingLookups[n].forEach(function(l){return l(u)}),delete t.pendingLookups[n]})}else a.statusCode>=400&&a.statusCode<500?(t.completedLookups[n]=void 0,delete t.pendingLookups[n]):setTimeout(i,e.correlationIdRetryIntervalMs)});s&&(s.on("error",function(a){K0.warn(t.TAG,a)}),s.end())}};setTimeout(i,0)},t.cancelCorrelationIdQuery=function(e,r){var n=e.profileQueryEndpoint+"/api/profiles/"+e.instrumentationKey+"/appId",i=t.pendingLookups[n];i&&(t.pendingLookups[n]=i.filter(function(o){return o!=r}),t.pendingLookups[n].length==0&&delete t.pendingLookups[n])},t.generateRequestId=function(e){if(e){e=e[0]=="|"?e:"|"+e,e[e.length-1]!=="."&&(e+=".");var r=(t.currentRootId++).toString(16);return t.appendSuffix(e,r,"_")}else return t.generateRootId()},t.getRootId=function(e){var r=e.indexOf(".");r<0&&(r=e.length);var n=e[0]==="|"?1:0;return e.substring(n,r)},t.generateRootId=function(){return"|"+Yv.w3cTraceId()+"."},t.appendSuffix=function(e,r,n){if(e.length+r.length<t.requestIdMaxLength)return e+r+n;var i=t.requestIdMaxLength-9;if(e.length>i)for(;i>1;--i){var o=e[i-1];if(o==="."||o==="_")break}if(i<=1)return t.generateRootId();for(r=Yv.randomu32().toString(16);r.length<8;)r="0"+r;return e.substring(0,i)+r+"#"},t.TAG="CorrelationIdManager",t.correlationIdPrefix="cid-v1:",t.w3cEnabled=!1,t.pendingLookups={},t.completedLookups={},t.requestIdMaxLength=1024,t.currentRootId=Yv.randomu32(),t}();rV.exports=Ade});var iV=m((X0,nV)=>{"use strict";var Rde=X0&&X0.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sd=require("url"),Y0=Hr(),Tde=Ln(),kde=Cu(),Dde=z0(),Ode=ua(),Nde=function(t){Rde(e,t);function e(r,n){var i=t.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=e._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return e.prototype.onError=function(r){this._setStatus(void 0,r)},e.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=Tde.getCorrelationContextTarget(r,kde.requestContextTargetKey)},e.prototype.getDependencyTelemetry=function(r,n){var i=sd.parse(this.url);i.search=void 0,i.hash=void 0;var o=this.method.toUpperCase()+" "+i.pathname,s=Y0.RemoteDependencyDataConstants.TYPE_HTTP,a=i.hostname;this.correlationId?(s=Y0.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==Ode.correlationIdPrefix&&(a=i.hostname+" | "+this.correlationId)):s=Y0.RemoteDependencyDataConstants.TYPE_HTTP,i.port&&(a+=":"+i.port);var c={id:n,name:o,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:a};if(r){for(var u in r)c[u]||(c[u]=r[u]);if(r.properties)for(var u in r.properties)c.properties[u]=r.properties[u]}return c},e._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")r=sd.parse(r);else{var i=r;r={},i&&Object.keys(i).forEach(function(a){r[a]=i[a]})}if(r.path){var o=sd.parse(r.path);r.pathname=o.pathname,r.search=o.search}if(r.host&&r.port){var s=sd.parse("http://"+r.host);!s.port&&r.port&&(r.hostname=r.host,delete r.host)}return r.protocol=r.protocol||n.agent&&n.agent.protocol||void 0,r.hostname=r.hostname||"localhost",sd.format(r)},e}(Dde);nV.exports=Nde});var Q0=m((GTe,oV)=>{"use strict";var Gt=Ln(),Lde=ua(),Fde=function(){function t(e,r){if(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.version=t.DEFAULT_VERSION,e&&typeof e=="string")if(e.split(",").length>1)this.traceId=Gt.w3cTraceId(),this.spanId=Gt.w3cTraceId().substr(0,16);else{var n=e.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=Gt.w3cTraceId(),this.spanId=Gt.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=t.DEFAULT_VERSION,this.traceId=Gt.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=Gt.w3cTraceId(),this.spanId=Gt.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=t.DEFAULT_VERSION,this.traceId=Gt.w3cTraceId(),this.spanId=Gt.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=t.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=t.DEFAULT_TRACE_FLAG,this.traceId=Gt.w3cTraceId()),t.isValidTraceId(this.traceId)||(this.traceId=Gt.w3cTraceId()),t.isValidSpanId(this.spanId)||(this.spanId=Gt.w3cTraceId().substr(0,16),this.traceId=Gt.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var o=Lde.getRootId(r);t.isValidTraceId(o)||(this.legacyRootId=o,o=Gt.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=o,this.spanId=r}else this.traceId=Gt.w3cTraceId(),this.spanId=Gt.w3cTraceId().substr(0,16)}return t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},t.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},t.prototype.updateSpanId=function(){this.spanId=Gt.w3cTraceId().substr(0,16)},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}();oV.exports=Fde});var aV=m(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var sV=Et(),Eu=[];_u.subscriber=function(t){t.data.event.commandName==="ismaster",Eu.forEach(function(e){var r=t.data.startedData&&t.data.startedData.databaseName||"Unknown database";e.trackDependency({target:r,data:t.data.event.commandName,name:t.data.event.commandName,duration:t.data.event.duration,success:t.data.succeeded,resultCode:t.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})};function qde(t,e){t?(Eu.length===0&&sV.channel.subscribe("mongodb",_u.subscriber),Eu.push(e)):(Eu=Eu.filter(function(r){return r!=e}),Eu.length===0&&sV.channel.unsubscribe("mongodb",_u.subscriber))}_u.enable=qde});var uV=m(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});var cV=Et(),xu=[];bu.subscriber=function(t){xu.forEach(function(e){var r=t.data.query||{},n=r.sql||"Unknown query",i=!t.data.err,o=r._connection||{},s=o.config||{},a=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;e.trackDependency({target:a,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"mysql"})})};function Mde(t,e){t?(xu.length===0&&cV.channel.subscribe("mysql",bu.subscriber),xu.push(e)):(xu=xu.filter(function(r){return r!=e}),xu.length===0&&cV.channel.unsubscribe("mysql",bu.subscriber))}bu.enable=Mde});var fV=m(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var lV=Et(),Su=[];Pu.subscriber=function(t){Su.forEach(function(e){t.data.commandObj.command!=="info"&&e.trackDependency({target:t.data.address,name:t.data.commandObj.command,data:t.data.commandObj.command,duration:t.data.duration,success:!t.data.err,resultCode:t.data.err?"1":"0",dependencyTypeName:"redis"})})};function $de(t,e){t?(Su.length===0&&lV.channel.subscribe("redis",Pu.subscriber),Su.push(e)):(Su=Su.filter(function(r){return r!=e}),Su.length===0&&lV.channel.unsubscribe("redis",Pu.subscriber))}Pu.enable=$de});var pV=m(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});var dV=Et(),Iu=[];Au.subscriber=function(t){Iu.forEach(function(e){var r=t.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!t.data.error,o=t.data.database.host+":"+t.data.database.port;e.trackDependency({target:o,data:n,name:n,duration:t.data.duration,success:i,resultCode:i?"0":"1",dependencyTypeName:"postgres"})})};function Ude(t,e){t?(Iu.length===0&&dV.channel.subscribe("postgres",Au.subscriber),Iu.push(e)):(Iu=Iu.filter(function(r){return r!=e}),Iu.length===0&&dV.channel.unsubscribe("postgres",Au.subscriber))}Au.enable=Ude});var ad=m((XTe,vV)=>{"use strict";var la=require("http"),Ru=require("https"),J0=Ht(),hV=Ln(),Uo=Cu(),jde=iV(),mV=gu(),gV=ua(),Z0=Q0(),Hde=sv(),Bde=function(){function t(e){if(t.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),Hde.IsInitialized&&(aV().enable(e,this._client),uV().enable(e,this._client),fV().enable(e,this._client),pV().enable(e,this._client))},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=la.get,n=la.request,i=Ru.request,o=function(s,a){var c=!a[t.disableCollectionRequestOption]&&!s[t.alreadyAutoCollectedFlag];s[t.alreadyAutoCollectedFlag]=!0,s&&a&&c&&(mV.CorrelationContextManager.wrapEmitter(s),t.trackRequest(e._client,{options:a,request:s}))};la.request=function(s){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=n.call.apply(n,[la,s].concat(a));return o(u,s),u},Ru.request=function(s){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=i.call.apply(i,[Ru,s].concat(a));return o(u,s),u},la.get=function(s){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(l=la.request).call.apply(l,[la,s].concat(a));return u.end(),u;var l},Ru.get=function(s){for(var a=[],c=1;c<arguments.length;c++)a[c-1]=arguments[c];var u=(l=Ru.request).call.apply(l,[Ru,s].concat(a));return u.end(),u;var l}},t.trackRequest=function(e,r){if(!r.options||!r.request||!e){J0.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!e);return}var n=new jde(r.options,r.request),i=mV.CorrelationContextManager.getCurrentContext(),o,s;if(i&&i.operation&&i.operation.traceparent&&Z0.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),o=i.operation.traceparent.getBackCompatRequestId();else if(gV.w3cEnabled){var a=new Z0;s=a.toString(),o=a.getBackCompatRequestId()}else o=i&&i.operation&&i.operation.parentId+t.requestNumber+++".";if(hV.canIncludeCorrelationHeader(e,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&e.config&&e.config.correlationId){var c=r.request.getHeader(Uo.requestContextHeader);try{hV.safeIncludeCorrelationHeader(e,r.request,c)}catch(f){J0.warn("Request-Context header could not be set. Correlation of requests may be lost",f)}if(i&&i.operation)try{if(r.request.setHeader(Uo.requestIdHeader,o),r.request.setHeader(Uo.parentIdHeader,i.operation.id),r.request.setHeader(Uo.rootIdHeader,o),s||i.operation.traceparent)r.request.setHeader(Uo.traceparentHeader,s||i.operation.traceparent.toString());else if(gV.w3cEnabled){var a=new Z0().toString();r.request.setHeader(Uo.traceparentHeader,a)}if(i.operation.tracestate){var u=i.operation.tracestate.toString();u&&r.request.setHeader(Uo.traceStateHeader,u)}var l=i.customProperties.serializeToHeader();l&&r.request.setHeader(Uo.correlationContextHeader,l)}catch(f){J0.warn("Correlation headers could not be set. Correlation of requests may be lost.",f)}}r.request.on&&(r.request.on("response",function(f){n.onResponse(f);var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects["http.ClientResponse"]=f,e.trackDependency(d)}),r.request.on("error",function(f){n.onError(f);var d=n.getDependencyTelemetry(r,o);d.contextObjects=d.contextObjects||{},d.contextObjects["http.RequestOptions"]=r.options,d.contextObjects["http.ClientRequest"]=r.request,d.contextObjects.Error=f,e.trackDependency(d)}))},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1},t.disableCollectionRequestOption="disableAppInsightsAutoCollection",t.requestNumber=1,t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();vV.exports=Bde});var CV=m((QTe,yV)=>{"use strict";var Vde=function(){function t(e){this.fieldmap=[],!!e&&(this.fieldmap=this.parseHeader(e))}return t.prototype.toString=function(){var e=this.fieldmap;return!e||e.length==0?null:e.join(", ")},t.validateKeyChars=function(e){var r=e.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),o=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),s=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return o&&s}else if(r.length==1)return Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},t.prototype.parseHeader=function(e){var r=[],n={},i=e.split(",");if(i.length>32)return null;for(var o=0,s=i;o<s.length;o++){var a=s[o],c=a.trim();if(c.length!==0){var u=c.split("=");if(u.length!==2||!t.validateKeyChars(u[0])||n[u[0]])return null;n[u[0]]=!0,r.push(c)}}return r},t.strict=!0,t}();yV.exports=Vde});var _V=m((tS,EV)=>{"use strict";var Gde=tS&&tS.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xv=require("url"),Wde=Hr(),wV=Ln(),fa=Cu(),zde=z0(),jo=ua(),Kde=CV(),eS=Q0(),Yde=function(t){Gde(e,t);function e(r,n){var i=t.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return e.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},e.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},e.prototype.getRequestTelemetry=function(r){var n={id:this.requestId,name:this.method+" "+Xv.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r){for(var i in r)n[i]||(n[i]=r[i]);if(r.properties)for(var i in r.properties)n.properties[i]=r.properties[i]}return n},e.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[e.keys.locationIp]=r[e.keys.locationIp]||this._getIp(),n[e.keys.sessionId]=r[e.keys.sessionId]||this._getId("ai_session"),n[e.keys.userId]=r[e.keys.userId]||this._getId("ai_user"),n[e.keys.userAuthUserId]=r[e.keys.userAuthUserId]||this._getId("ai_authUser"),n[e.keys.operationName]=this.getOperationName(r),n[e.keys.operationParentId]=this.getOperationParentId(r),n[e.keys.operationId]=this.getOperationId(r),n},e.prototype.getOperationId=function(r){return r[e.keys.operationId]||this.operationId},e.prototype.getOperationParentId=function(r){return r[e.keys.operationParentId]||this.parentId||this.getOperationId(r)},e.prototype.getOperationName=function(r){return r[e.keys.operationName]||this.method+" "+Xv.parse(this.url).pathname},e.prototype.getRequestId=function(){return this.requestId},e.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},e.prototype.getTraceparent=function(){return this.traceparent},e.prototype.getTracestate=function(){return this.tracestate},e.prototype.getLegacyRootId=function(){return this.legacyRootId},e.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=Xv.parse(r.url),o=i.pathname,s=i.search,a=Xv.format({protocol:n?"https":"http",host:r.headers.host,pathname:o,search:s});return a},e.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(o){var s=r.exec(o);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},e.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=e.parseId(wV.getCookie(r,n));return i},e.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},e.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=wV.getCorrelationContextTarget(r,fa.requestContextSourceKey),r.headers){var i=r.headers[fa.traceStateHeader],o=r.headers[fa.traceparentHeader],s=r.headers[fa.requestIdHeader],a=r.headers[fa.parentIdHeader],c=r.headers[fa.rootIdHeader];this.correlationContextHeader=r.headers[fa.correlationContextHeader],jo.w3cEnabled&&(o||i)?(this.traceparent=new eS(o),this.tracestate=o&&i&&new Kde(i),this.setBackCompatFromThisTraceContext()):s?jo.w3cEnabled?(this.traceparent=new eS(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=jo.generateRequestId(this.parentId),this.operationId=jo.getRootId(this.requestId)):jo.w3cEnabled?(this.traceparent=new eS,this.traceparent.parentId=a,this.traceparent.legacyRootId=c||a,this.setBackCompatFromThisTraceContext()):(this.parentId=a,this.requestId=jo.generateRequestId(c||this.parentId),this.correlationContextHeader=null,this.operationId=jo.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=jo.getRootId(this.requestId))}},e.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},e.keys=new Wde.ContextTagKeys,e}(zde);EV.exports=Yde});var nS=m((JTe,IV)=>{"use strict";var xV=require("http"),bV=require("https"),SV=Ht(),PV=Ln(),Xde=Cu(),rS=_V(),Ui=gu(),Qde=zv(),Jde=function(){function t(e){if(t.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");t.INSTANCE=this,this._client=e}return t.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||Qde.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},t.prototype.useAutoCorrelation=function(e,r){e&&!this._isAutoCorrelating?Ui.CorrelationContextManager.enable(r):!e&&this._isAutoCorrelating&&Ui.CorrelationContextManager.disable(),this._isAutoCorrelating=e},t.prototype.isInitialized=function(){return this._isInitialized},t.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},t.prototype._generateCorrelationContext=function(e){if(!!this._isAutoCorrelating)return Ui.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},t.prototype._initialize=function(){var e=this;this._isInitialized=!0;var r=function(s){if(!!s){if(typeof s!="function")throw new Error("onRequest handler must be a function");return function(a,c){Ui.CorrelationContextManager.wrapEmitter(a),Ui.CorrelationContextManager.wrapEmitter(c);var u=a&&!a[t.alreadyAutoCollectedFlag];if(a&&u){var l=new rS(a),f=e._generateCorrelationContext(l);Ui.CorrelationContextManager.runWithContext(f,function(){e._isEnabled&&(a[t.alreadyAutoCollectedFlag]=!0,t.trackRequest(e._client,{request:a,response:c},l)),typeof s=="function"&&s(a,c)})}else typeof s=="function"&&s(a,c)}}},n=function(s){var a=s.addListener.bind(s);s.addListener=function(c,u){switch(c){case"request":case"checkContinue":return a(c,r(u));default:return a(c,u)}},s.on=s.addListener},i=xV.createServer;xV.createServer=function(s){var a=i(r(s));return n(a),a};var o=bV.createServer;bV.createServer=function(s,a){var c=o(s,r(a));return n(c),c}},t.trackRequestSync=function(e,r){if(!r.request||!r.response||!e){SV.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!e);return}t.addResponseCorrelationIdHeader(e,r.response);var n=Ui.CorrelationContextManager.getCurrentContext(),i=new rS(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(e.context.tags)||n.operation.id,n.operation.name=i.getOperationName(e.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),t.endRequest(e,i,r,r.duration,r.error)},t.trackRequest=function(e,r,n){if(!r.request||!r.response||!e){SV.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!e);return}var i=Ui.CorrelationContextManager.getCurrentContext(),o=n||new rS(r.request,i&&i.operation.parentId);PV.canIncludeCorrelationHeader(e,o.getUrl())&&t.addResponseCorrelationIdHeader(e,r.response),i&&!n&&(i.operation.id=o.getOperationId(e.context.tags)||i.operation.id,i.operation.name=o.getOperationName(e.context.tags)||i.operation.name,i.operation.parentId=o.getOperationParentId(e.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(o.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){t.endRequest(e,o,r,null,null)}),r.request.on&&r.request.on("error",function(s){t.endRequest(e,o,r,null,s)})},t.addResponseCorrelationIdHeader=function(e,r){if(e.config&&e.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(Xde.requestContextHeader);PV.safeIncludeCorrelationHeader(e,r,n)}},t.endRequest=function(e,r,n,i,o){o?r.onError(o,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(e.context.tags),n.tagOverrides)for(var a in n.tagOverrides)s.tagOverrides[a]=n.tagOverrides[a];var c=r.getLegacyRootId();c&&(s.properties.ai_legacyRootId=c),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,e.trackRequest(s)},t.prototype.dispose=function(){t.INSTANCE=null,this.enable(!1),this._isInitialized=!1,Ui.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},t.alreadyAutoCollectedFlag="_appInsightsAutoCollected",t}();IV.exports=Jde});var TV=m((ZTe,RV)=>{"use strict";var AV=yu(),Zde=function(){function t(){}return t.parse=function(e){if(!e)return{};var r=e.split(t._FIELDS_SEPARATOR),n=r.reduce(function(o,s){var a=s.split(t._FIELD_KEY_VALUE_SEPARATOR);if(a.length===2){var c=a[0].toLowerCase(),u=a[1];o[c]=u}return o},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||AV.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||AV.DEFAULT_LIVEMETRICS_ENDPOINT}return n},t._FIELDS_SEPARATOR=";",t._FIELD_KEY_VALUE_SEPARATOR="=",t}();RV.exports=Zde});var Qv=m((eke,OV)=>{"use strict";var iS=ua(),kV=TV(),DV=yu(),epe=require("url"),tpe=function(){function t(e){var r=this;this.endpointBase=DV.DEFAULT_BREEZE_ENDPOINT;var n=process.env[t.ENV_connectionString],i=kV.parse(e),o=kV.parse(n),s=!i.instrumentationkey&&Object.keys(i).length>0?null:e;this.instrumentationKey=i.instrumentationkey||s||o.instrumentationkey||t._getInstrumentationKey(),this.endpointUrl=(i.ingestionendpoint||o.ingestionendpoint||this.endpointBase)+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(a){return r.correlationId=a},this.proxyHttpUrl=process.env[t.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[t.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=i.ingestionendpoint||o.ingestionendpoint||process.env[t.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=i.liveendpoint||o.liveendpoint||process.env[t.ENV_quickPulseHost]||DV.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=epe.parse(this._quickPulseHost).host)}return Object.defineProperty(t.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){iS.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=iS.correlationIdPrefix,iS.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!0,configurable:!0}),t._getInstrumentationKey=function(){var e=process.env[t.ENV_iKey]||process.env[t.ENV_azurePrefix+t.ENV_iKey]||process.env[t.legacy_ENV_iKey]||process.env[t.ENV_azurePrefix+t.legacy_ENV_iKey];if(!e||e=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return e},t.ENV_azurePrefix="APPSETTING_",t.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",t.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",t.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",t.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",t.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",t.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",t.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",t.ENV_http_proxy="http_proxy",t.ENV_https_proxy="https_proxy",t}();OV.exports=tpe});var FV=m((sS,LV)=>{"use strict";var cd=sS&&sS.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},oS=require("os"),da=Hr(),NV=yu(),rpe=Ln(),npe=Ht(),ipe=rpe.w3cTraceId(),ope=function(){function t(){}return t.createQuickPulseEnvelope=function(e,r,n,i){var o=oS&&typeof oS.hostname=="function"&&oS.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||o,a={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:ipe,MachineName:o,Instance:s};return a},t.createQuickPulseMetric=function(e){var r;return r={Name:e.name,Value:e.value,Weight:e.count||1},r},t.telemetryEnvelopeToQuickPulseDocument=function(e){switch(e.data.baseType){case da.TelemetryTypeString.Event:return t.createQuickPulseEventDocument(e);case da.TelemetryTypeString.Exception:return t.createQuickPulseExceptionDocument(e);case da.TelemetryTypeString.Trace:return t.createQuickPulseTraceDocument(e);case da.TelemetryTypeString.Dependency:return t.createQuickPulseDependencyDocument(e);case da.TelemetryTypeString.Request:return t.createQuickPulseRequestDocument(e)}return null},t.createQuickPulseEventDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.name,i=cd({},r,{Name:n});return i},t.createQuickPulseTraceDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.severityLevel||0,i=cd({},r,{Message:e.data.baseData.message,SeverityLevel:da.SeverityLevel[n]});return i},t.createQuickPulseExceptionDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData.exceptions,i="",o="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(c){i+=c.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),o=n[0].message,s=n[0].typeName);var a=cd({},r,{Exception:i,ExceptionMessage:o,ExceptionType:s});return a},t.createQuickPulseRequestDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=cd({},r,{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},t.createQuickPulseDependencyDocument=function(e){var r=t.createQuickPulseDocument(e),n=e.data.baseData,i=cd({},r,{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},t.createQuickPulseDocument=function(e){var r,n,i,o;e.data.baseType?(n=NV.TelemetryTypeStringToQuickPulseType[e.data.baseType],r=NV.TelemetryTypeStringToQuickPulseDocumentType[e.data.baseType]):npe.warn("Document type invalid; not sending live metric document",e.data.baseType),i=e.tags[t.keys.operationId],o=t.aggregateProperties(e);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:o};return s},t.aggregateProperties=function(e){var r=[],n=e.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var o=n[i],s={key:i,value:o};r.push(s)}var a=e.data.baseData.properties||{};for(var i in a)if(a.hasOwnProperty(i)){var o=a[i],s={key:i,value:o};r.push(s)}return r},t.keys=new da.ContextTagKeys,t}();LV.exports=ope});var $V=m((tke,MV)=>{"use strict";var spe=require("https"),ape=ad(),qV=Ht(),aS={method:"POST",time:"x-ms-qps-transmission-time",subscribed:"x-ms-qps-subscribed"},cpe=function(){function t(e){this._config=e,this._consecutiveErrors=0}return t.prototype.ping=function(e,r){this._submitData(e,r,"ping")},t.prototype.post=function(e,r){this._submitData([e],r,"post")},t.prototype._submitData=function(e,r,n){var i=this,o=JSON.stringify(e),s=(c={},c[ape.disableCollectionRequestOption]=!0,c.host=this._config.quickPulseHost,c.method=aS.method,c.path="/QuickPulseService.svc/"+n+"?ikey="+this._config.instrumentationKey,c.headers=(u={Expect:"100-continue"},u[aS.time]=1e4*Date.now(),u["Content-Type"]="application/json",u["Content-Length"]=Buffer.byteLength(o),u),c),a=spe.request(s,function(l){var f=l.headers[aS.subscribed]==="true";i._consecutiveErrors=0,r(f,l)});a.on("error",function(l){i._consecutiveErrors++;var f="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";i._consecutiveErrors%t.MAX_QPS_FAILURES_BEFORE_WARN==0?(f="Live Metrics endpoint could not be reached "+i._consecutiveErrors+" consecutive times. Most recent error:",qV.warn(t.TAG,f,l)):qV.info(t.TAG,f,l),r()}),a.write(o),a.end();var c,u},t.TAG="QuickPulseSender",t.MAX_QPS_FAILURES_BEFORE_WARN=25,t}();MV.exports=cpe});var Jv=m((rke,BV)=>{"use strict";var ji=require("os"),UV=require("fs"),jV=require("path"),upe=Hr(),HV=Ht(),lpe=function(){function t(e){this.keys=new upe.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return t.prototype._loadApplicationContext=function(e){if(e=e||jV.resolve(__dirname,"../../../../package.json"),!t.appVersion[e]){t.appVersion[e]="unknown";try{var r=JSON.parse(UV.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.appVersion[e]=r.version)}catch(n){HV.info("unable to read app version: ",n)}}this.tags[this.keys.applicationVersion]=t.appVersion[e]},t.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=ji&&ji.hostname(),this.tags[this.keys.deviceOSVersion]=ji&&ji.type()+" "+ji.release(),this.tags[this.keys.cloudRole]=t.DefaultRoleName,this.tags["ai.device.osArchitecture"]=ji&&ji.arch(),this.tags["ai.device.osPlatform"]=ji&&ji.platform()},t.prototype._loadInternalContext=function(){var e=jV.resolve(__dirname,"../../package.json");if(!t.sdkVersion){t.sdkVersion="unknown";try{var r=JSON.parse(UV.readFileSync(e,"utf8"));r&&typeof r.version=="string"&&(t.sdkVersion=r.version)}catch(n){HV.info("unable to read app version: ",n)}}this.tags[this.keys.internalSdkVersion]="node:"+t.sdkVersion},t.DefaultRoleName="Web",t.appVersion={},t.sdkVersion=null,t}();BV.exports=lpe});var GV=m((nke,VV)=>{"use strict";var fpe=Ht(),dpe=Qv(),cS=FV(),ppe=$V(),hpe=yu(),mpe=Jv(),gpe=function(){function t(e,r){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this.config=new dpe(e),this.context=r||new mpe,this._sender=new ppe(this.config),this._isEnabled=!1}return t.prototype.addCollector=function(e){this._collectors.push(e)},t.prototype.trackMetric=function(e){this._addMetric(e)},t.prototype.addDocument=function(e){var r=cS.telemetryEnvelopeToQuickPulseDocument(e);r&&this._documents.push(r)},t.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},t.prototype.enableCollectors=function(e){this._collectors.forEach(function(r){r.enable(e)})},t.prototype._addMetric=function(e){var r=e.value,n=e.count||1,i=hpe.PerformanceToQuickPulseCounter[e.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=cS.createQuickPulseMetric(e),this._metrics[i].Name=i,this._metrics[i].Weight=1))},t.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},t.prototype._goQuickPulse=function(){var e=this,r=Object.keys(this._metrics).map(function(o){return e._metrics[o]}),n=cS.createQuickPulseEnvelope(r,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer(),this._isCollectingData?this._post(n):this._ping(n);var i=this._isCollectingData?t.POST_INTERVAL:t.PING_INTERVAL;this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=t.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=t.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=t.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref()},t.prototype._ping=function(e){this._sender.ping(e,this._quickPulseDone.bind(this))},t.prototype._post=function(e){this._sender.post(e,this._quickPulseDone.bind(this))},t.prototype._quickPulseDone=function(e,r){e!=null?(this._isCollectingData!==e&&(fpe.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},t.MAX_POST_WAIT_TIME=2e4,t.MAX_PING_WAIT_TIME=6e4,t.FALLBACK_INTERVAL=6e4,t.PING_INTERVAL=5e3,t.POST_INTERVAL=1e3,t}();VV.exports=gpe});var zV=m(ld=>{"use strict";var vpe=ld&&ld.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};Object.defineProperty(ld,"__esModule",{value:!0});var WV=Qv(),ud=Jv(),ype=Ht(),Cpe=function(){function t(e){this._disabledMetrics={},t.INSTANCE&&t.INSTANCE.dispose(),t.INSTANCE=this,this._client=e}return t.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},t.prototype.enable=function(e,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),!!t.isNodeVersionCompatible()){if(t._metricsAvailable==null&&e&&!this._isInitialized)try{var o=require("applicationinsights-native-metrics");t._emitter=new o,t._metricsAvailable=!0,ype.info("Native metrics module successfully loaded!")}catch(s){t._metricsAvailable=!1;return}this._isEnabled=e,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&t._emitter?(t._emitter.enable(!0,n),this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref()):t._emitter&&(t._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},t.prototype.dispose=function(){this.enable(!1)},t.parseEnabled=function(e){var r=process.env[WV.ENV_nativeMetricsDisableAll],n=process.env[WV.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(n){var i=n.split(","),o={};if(i.length>0)for(var s=0,a=i;s<a.length;s++){var c=a[s];o[c]=!0}return typeof e=="object"?{isEnabled:!0,disabledMetrics:vpe({},e,o)}:{isEnabled:e,disabledMetrics:o}}return typeof e=="boolean"?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},t.prototype._trackNativeMetrics=function(){var e=!0;typeof this._isEnabled!="object"&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},t.prototype._trackGarbageCollection=function(){if(!this._disabledMetrics.gc){var e=t._emitter.getGCData();for(var r in e){var n=e[r].metrics,i=r+" Garbage Collection Duration",o=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,max:n.max,min:n.min,stdDev:o,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ud.sdkVersion,s)})}var s}},t.prototype._trackEventLoop=function(){if(!this._disabledMetrics.loop){var e=t._emitter.getLoopData(),r=e.loopUsage;if(r.count!=0){var n="Event Loop CPU Time",i=Math.sqrt(r.sumSquares/r.count-Math.pow(r.total/r.count,2))||0;this._client.trackMetric({name:n,value:r.total,count:r.count,min:r.min,max:r.max,stdDev:i,tagOverrides:(o={},o[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ud.sdkVersion,o)});var o}}},t.prototype._trackHeapUsage=function(){if(!this._disabledMetrics.heap){var e=process.memoryUsage(),r=e.heapUsed,n=e.heapTotal,i=e.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:r,count:1,tagOverrides:(o={},o[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ud.sdkVersion,o)}),this._client.trackMetric({name:"Memory Total (Heap)",value:n,count:1,tagOverrides:(s={},s[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ud.sdkVersion,s)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:i-n,count:1,tagOverrides:(a={},a[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+ud.sdkVersion,a)});var o,s,a}},t}();ld.AutoCollectNativePerformance=Cpe});var XV=m((oke,YV)=>{"use strict";var KV=Ht(),wpe=function(){function t(e,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return t.prototype.setUseDiskRetryCaching=function(e,r,n){this._sender.setDiskRetryMode(e,r,n)},t.prototype.send=function(e){var r=this;if(!this._isDisabled()){if(!e){KV.warn("Cannot send null/undefined telemetry");return}var n=this._stringify(e);if(typeof n=="string"){if(this._buffer.push(n),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}}},t.prototype.triggerSend=function(e,r){var n=this._buffer.length<1;if(!n){var i=this._buffer.join(`
`);e?(this._sender.saveOnCrash(i),typeof r=="function"&&r("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(i):new Buffer(i),r)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},t.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(r){KV.warn("Failed to serialize payload",r,e)}},t}();YV.exports=wpe});var ZV=m(Zv=>{"use strict";Object.defineProperty(Zv,"__esModule",{value:!0});var QV=Hr();function Epe(t,e){var r=t.sampleRate,n=!1;return r==null||r>=100||t.data&&QV.TelemetryType.Metric===QV.baseTypeToTelemetryType(t.data.baseType)?!0:(e.correlationContext&&e.correlationContext.operation?n=JV(e.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}Zv.samplingTelemetryProcessor=Epe;function JV(t){var e=-2147483648,r=2147483647,n=5381;if(!t)return 0;for(;t.length<8;)t=t+t;for(var i=0;i<t.length;i++)n=((n<<5)+n|0)+t.charCodeAt(i)|0;return n=n<=e?r:Math.abs(n),n/r*100}Zv.getSamplingHashCode=JV});var e3=m(fS=>{"use strict";Object.defineProperty(fS,"__esModule",{value:!0});var uS=zv(),lS=Hr();function _pe(t,e){switch(e&&e.addDocument(t),t.data.baseType){case lS.TelemetryTypeString.Exception:uS.countException();break;case lS.TelemetryTypeString.Request:var r=t.data.baseData;uS.countRequest(r.duration,r.success);break;case lS.TelemetryTypeString.Dependency:var n=t.data.baseData;uS.countDependency(n.duration,n.success);break}return!0}fS.performanceMetricsTelemetryProcessor=_pe});var r3=m(ey=>{"use strict";function t3(t){for(var e in t)ey.hasOwnProperty(e)||(ey[e]=t[e])}Object.defineProperty(ey,"__esModule",{value:!0});t3(ZV());t3(e3())});var i3=m((uke,n3)=>{"use strict";var yr=require("fs"),ty=require("os"),Hi=require("path"),xpe=require("zlib"),Tu=require("child_process"),sr=Ht(),bpe=ad(),Spe=Ln(),Ppe=function(){function t(e,r,n){if(this._config=e,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=t.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=t.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!t.OS_PROVIDES_FILE_PROTECTION)if(t.USE_ICACLS){try{t.OS_PROVIDES_FILE_PROTECTION=yr.existsSync(t.ICACLS_PATH)}catch(i){}t.OS_PROVIDES_FILE_PROTECTION||sr.warn(t.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else t.OS_PROVIDES_FILE_PROTECTION=!0}return t.prototype.setDiskRetryMode=function(e,r,n){this._enableDiskRetryMode=t.OS_PROVIDES_FILE_PROTECTION&&e,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),e&&!t.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,sr.warn(t.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},t.prototype.send=function(e,r){var n=this,i=this._config.endpointUrl,o={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};xpe.gzip(e,function(s,a){var c=a;s?(sr.warn(s),c=e,o.headers["Content-Length"]=e.length.toString()):(o.headers["Content-Encoding"]="gzip",o.headers["Content-Length"]=a.length),sr.info(t.TAG,o),o[bpe.disableCollectionRequestOption]=!0;var u=function(f){f.setEncoding("utf-8");var d="";f.on("data",function(p){d+=p}),f.on("end",function(){n._numConsecutiveFailures=0,sr.info(t.TAG,d),typeof n._onSuccess=="function"&&n._onSuccess(d),typeof r=="function"&&r(d),n._enableDiskRetryMode&&(f.statusCode===200?setTimeout(function(){return n._sendFirstFileOnDisk()},n._resendInterval).unref():(f.statusCode===408||f.statusCode===429||f.statusCode===439||f.statusCode===500||f.statusCode===503)&&n._storeToDisk(e))})},l=Spe.makeRequest(n._config,i,o,u);l.on("error",function(f){if(n._numConsecutiveFailures++,!n._enableDiskRetryMode||n._numConsecutiveFailures>0&&n._numConsecutiveFailures%t.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var d="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";n._enableDiskRetryMode&&(d="Ingestion endpoint could not be reached "+n._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),sr.warn(t.TAG,d,f)}else{var d="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";sr.info(t.TAG,d,f)}if(n._onErrorHelper(f),typeof r=="function"){var p="error sending telemetry";f&&typeof f.toString=="function"&&(p=f.toString()),r(p)}n._enableDiskRetryMode&&n._storeToDisk(e)}),l.write(c),l.end()})},t.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},t.prototype._runICACLS=function(e,r){var n=Tu.spawn(t.ICACLS_PATH,e,{windowsHide:!0});n.on("error",function(i){return r(i)}),n.on("close",function(i,o){return r(i===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i+")"))})},t.prototype._runICACLSSync=function(e){if(Tu.spawnSync){var r=Tu.spawnSync(t.ICACLS_PATH,e,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},t.prototype._getACLIdentity=function(e){if(t.ACL_IDENTITY)return e(null,t.ACL_IDENTITY);var r=Tu.spawn(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",function(i){return n+=i}),r.on("error",function(i){return e(i,null)}),r.on("close",function(i,o){return t.ACL_IDENTITY=n&&n.trim(),e(i===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),t.ACL_IDENTITY)})},t.prototype._getACLIdentitySync=function(){if(t.ACL_IDENTITY)return t.ACL_IDENTITY;if(Tu.spawnSync){var e=Tu.spawnSync(t.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(e.error)throw e.error;if(e.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+e.status+")");return t.ACL_IDENTITY=e.stdout&&e.stdout.toString().trim(),t.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},t.prototype._getACLArguments=function(e,r){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},t.prototype._applyACLRules=function(e,r){var n=this;if(!t.USE_ICACLS)return r(null);if(t.ACLED_DIRECTORIES[e]===void 0)t.ACLED_DIRECTORIES[e]=!1,this._getACLIdentity(function(i,o){if(i)return t.ACLED_DIRECTORIES[e]=!1,r(i);n._runICACLS(n._getACLArguments(e,o),function(s){return t.ACLED_DIRECTORIES[e]=!s,r(s)})});else return r(t.ACLED_DIRECTORIES[e]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},t.prototype._applyACLRulesSync=function(e){if(t.USE_ICACLS){if(t.ACLED_DIRECTORIES[e]===void 0){this._runICACLSSync(this._getACLArguments(e,this._getACLIdentitySync())),t.ACLED_DIRECTORIES[e]=!0;return}else if(!t.ACLED_DIRECTORIES[e])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},t.prototype._confirmDirExists=function(e,r){var n=this;yr.lstat(e,function(i,o){i&&i.code==="ENOENT"?yr.mkdir(e,function(s){s&&s.code!=="EEXIST"?r(s):n._applyACLRules(e,r)}):!i&&o.isDirectory()?n._applyACLRules(e,r):r(i||new Error("Path existed but was not a directory"))})},t.prototype._getShallowDirectorySize=function(e,r){yr.readdir(e,function(n,i){if(n)return r(n,-1);var o=null,s=0,a=0;if(i.length===0){r(null,0);return}for(var c=0;c<i.length;c++)yr.stat(Hi.join(e,i[c]),function(u,l){a++,u?o=u:l.isFile()&&(s+=l.size),a===i.length&&(o?r(o,-1):r(o,s))})})},t.prototype._getShallowDirectorySizeSync=function(e){for(var r=yr.readdirSync(e),n=0,i=0;i<r.length;i++)n+=yr.statSync(Hi.join(e,r[i])).size;return n},t.prototype._storeToDisk=function(e){var r=this,n=Hi.join(ty.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey);sr.info(t.TAG,"Checking existance of data storage directory: "+n),this._confirmDirExists(n,function(i){if(i){sr.warn(t.TAG,"Error while checking/creating directory: "+(i&&i.message)),r._onErrorHelper(i);return}r._getShallowDirectorySize(n,function(o,s){if(o||s<0){sr.warn(t.TAG,"Error while checking directory size: "+(o&&o.message)),r._onErrorHelper(o);return}else if(s>r._maxBytesOnDisk){sr.warn(t.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+s);return}var a=new Date().getTime()+".ai.json",c=Hi.join(n,a);sr.info(t.TAG,"saving data to disk at: "+c),yr.writeFile(c,e,{mode:384},function(u){return r._onErrorHelper(u)})})})},t.prototype._storeToDiskSync=function(e){var r=Hi.join(ty.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey);try{sr.info(t.TAG,"Checking existance of data storage directory: "+r),yr.existsSync(r)||yr.mkdirSync(r),this._applyACLRulesSync(r);var n=this._getShallowDirectorySizeSync(r);if(n>this._maxBytesOnDisk){sr.info(t.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+n);return}var i=new Date().getTime()+".ai.json",o=Hi.join(r,i);sr.info(t.TAG,"saving data before crash to disk at: "+o),yr.writeFileSync(o,e,{mode:384})}catch(s){sr.warn(t.TAG,"Error while saving data to disk: "+(s&&s.message)),this._onErrorHelper(s)}},t.prototype._sendFirstFileOnDisk=function(){var e=this,r=Hi.join(ty.tmpdir(),t.TEMPDIR_PREFIX+this._config.instrumentationKey);yr.exists(r,function(n){n&&yr.readdir(r,function(i,o){if(i)e._onErrorHelper(i);else if(o=o.filter(function(c){return Hi.basename(c).indexOf(".ai.json")>-1}),o.length>0){var s=o[0],a=Hi.join(r,s);yr.readFile(a,function(c,u){c?e._onErrorHelper(c):yr.unlink(a,function(l){l?e._onErrorHelper(l):e.send(u)})})}})})},t.prototype._onErrorHelper=function(e){typeof this._onError=="function"&&this._onError(e)},t.TAG="Sender",t.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",t.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",t.ACLED_DIRECTORIES={},t.ACL_IDENTITY=null,t.WAIT_BETWEEN_RESEND=60*1e3,t.MAX_BYTES_ON_DISK=50*1e3*1e3,t.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,t.TEMPDIR_PREFIX="appInsights-node",t.OS_PROVIDES_FILE_PROTECTION=!1,t.USE_ICACLS=ty.type()==="Windows_NT",t}();n3.exports=Ppe});var a3=m((lke,s3)=>{"use strict";var ie=Hr(),Fn=Ln(),Ipe=gu(),Ape=function(){function t(){}return t.createEnvelope=function(e,r,n,i,o){var s=null;switch(r){case ie.TelemetryType.Trace:s=t.createTraceData(e);break;case ie.TelemetryType.Dependency:s=t.createDependencyData(e);break;case ie.TelemetryType.Event:s=t.createEventData(e);break;case ie.TelemetryType.Exception:s=t.createExceptionData(e);break;case ie.TelemetryType.Request:s=t.createRequestData(e);break;case ie.TelemetryType.Metric:s=t.createMetricData(e);break;case ie.TelemetryType.Availability:s=t.createAvailabilityData(e);break}if(n&&ie.domainSupportsProperties(s.baseData)){if(s&&s.baseData)if(!s.baseData.properties)s.baseData.properties=n;else for(var a in n)s.baseData.properties[a]||(s.baseData.properties[a]=n[a]);s.baseData.properties=Fn.validateStringMap(s.baseData.properties)}var c=o&&o.instrumentationKey||"",u=new ie.Envelope;return u.data=s,u.iKey=c,u.name="Microsoft.ApplicationInsights."+c.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),u.tags=this.getTags(i,e.tagOverrides),u.time=new Date().toISOString(),u.ver=1,u.sampleRate=o?o.samplingPercentage:100,r===ie.TelemetryType.Metric&&(u.sampleRate=100),u},t.createTraceData=function(e){var r=new ie.MessageData;r.message=e.message,r.properties=e.properties,isNaN(e.severity)?r.severityLevel=ie.SeverityLevel.Information:r.severityLevel=e.severity;var n=new ie.Data;return n.baseType=ie.telemetryTypeToBaseType(ie.TelemetryType.Trace),n.baseData=r,n},t.createDependencyData=function(e){var r=new ie.RemoteDependencyData;typeof e.name=="string"&&(r.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),r.data=e.data,r.target=e.target,r.duration=Fn.msToTimeSpan(e.duration),r.success=e.success,r.type=e.dependencyTypeName,r.properties=e.properties,r.resultCode=e.resultCode?e.resultCode+"":"",e.id?r.id=e.id:r.id=Fn.w3cTraceId();var n=new ie.Data;return n.baseType=ie.telemetryTypeToBaseType(ie.TelemetryType.Dependency),n.baseData=r,n},t.createEventData=function(e){var r=new ie.EventData;r.name=e.name,r.properties=e.properties,r.measurements=e.measurements;var n=new ie.Data;return n.baseType=ie.telemetryTypeToBaseType(ie.TelemetryType.Event),n.baseData=r,n},t.createExceptionData=function(e){var r=new ie.ExceptionData;r.properties=e.properties,isNaN(e.severity)?r.severityLevel=ie.SeverityLevel.Error:r.severityLevel=e.severity,r.measurements=e.measurements,r.exceptions=[];var n=e.exception.stack,i=new ie.ExceptionDetails;i.message=e.exception.message,i.typeName=e.exception.name,i.parsedStack=this.parseStack(n),i.hasFullStack=Fn.isArray(i.parsedStack)&&i.parsedStack.length>0,r.exceptions.push(i);var o=new ie.Data;return o.baseType=ie.telemetryTypeToBaseType(ie.TelemetryType.Exception),o.baseData=r,o},t.createRequestData=function(e){var r=new ie.RequestData;e.id?r.id=e.id:r.id=Fn.w3cTraceId(),r.name=e.name,r.url=e.url,r.source=e.source,r.duration=Fn.msToTimeSpan(e.duration),r.responseCode=e.resultCode?e.resultCode+"":"",r.success=e.success,r.properties=e.properties;var n=new ie.Data;return n.baseType=ie.telemetryTypeToBaseType(ie.TelemetryType.Request),n.baseData=r,n},t.createMetricData=function(e){var r=new ie.MetricData;r.metrics=[];var n=new ie.DataPoint;n.count=isNaN(e.count)?1:e.count,n.kind=ie.DataPointType.Aggregation,n.max=isNaN(e.max)?e.value:e.max,n.min=isNaN(e.min)?e.value:e.min,n.name=e.name,n.stdDev=isNaN(e.stdDev)?0:e.stdDev,n.value=e.value,r.metrics.push(n),r.properties=e.properties;var i=new ie.Data;return i.baseType=ie.telemetryTypeToBaseType(ie.TelemetryType.Metric),i.baseData=r,i},t.createAvailabilityData=function(e){var r=new ie.AvailabilityData;e.id?r.id=e.id:r.id=Fn.w3cTraceId(),r.name=e.name,r.duration=Fn.msToTimeSpan(e.duration),r.success=e.success,r.runLocation=e.runLocation,r.message=e.message,r.measurements=e.measurements,r.properties=e.properties;var n=new ie.Data;return n.baseType=ie.telemetryTypeToBaseType(ie.TelemetryType.Availability),n.baseData=r,n},t.getTags=function(e,r){var n=Ipe.CorrelationContextManager.getCurrentContext(),i={};if(e&&e.tags)for(var o in e.tags)i[o]=e.tags[o];if(r)for(var o in r)i[o]=r[o];return n&&(i[e.keys.operationId]=i[e.keys.operationId]||n.operation.id,i[e.keys.operationName]=i[e.keys.operationName]||n.operation.name,i[e.keys.operationParentId]=i[e.keys.operationParentId]||n.operation.parentId),i},t.parseStack=function(e){var r=void 0;if(typeof e=="string"){var n=e.split(`
`);r=[];for(var i=0,o=0,s=0;s<=n.length;s++){var a=n[s];if(o3.regex.test(a)){var c=new o3(n[s],i++);o+=c.sizeInBytes,r.push(c)}}var u=32*1024;if(o>u)for(var l=0,f=r.length-1,d=0,p=l,h=f;l<f;){var g=r[l].sizeInBytes,v=r[f].sizeInBytes;if(d+=g+v,d>u){var C=h-p+1;r.splice(p,C);break}p=l,h=f,l++,f--}}return r},t}(),o3=function(){function t(e,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=Fn.trim(e);var n=e.match(t.regex);n&&n.length>=5&&(this.method=Fn.trim(n[2])||this.method,this.fileName=Fn.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=t.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return t.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}();s3.exports=Ape});var d3=m((fke,f3)=>{"use strict";var Rpe=require("url"),Tpe=Qv(),kpe=Jv(),Ho=Hr(),Dpe=XV(),c3=r3(),u3=gu(),Ope=i3(),Npe=Ln(),l3=Ht(),Lpe=a3(),Fpe=function(){function t(e){this._telemetryProcessors=[];var r=new Tpe(e);this.config=r,this.context=new kpe,this.commonProperties={};var n=new Ope(this.config);this.channel=new Dpe(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return t.prototype.trackAvailability=function(e){this.track(e,Ho.TelemetryType.Availability)},t.prototype.trackTrace=function(e){this.track(e,Ho.TelemetryType.Trace)},t.prototype.trackMetric=function(e){this.track(e,Ho.TelemetryType.Metric)},t.prototype.trackException=function(e){e&&e.exception&&!Npe.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,Ho.TelemetryType.Exception)},t.prototype.trackEvent=function(e){this.track(e,Ho.TelemetryType.Event)},t.prototype.trackRequest=function(e){this.track(e,Ho.TelemetryType.Request)},t.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=Rpe.parse(e.data).host),this.track(e,Ho.TelemetryType.Dependency)},t.prototype.flush=function(e){this.channel.triggerSend(e?!!e.isAppCrashing:!1,e?e.callback:void 0)},t.prototype.track=function(e,r){if(e&&Ho.telemetryTypeToBaseType(r)){var n=Lpe.createEnvelope(e,r,this.commonProperties,this.context,this.config);e.time&&(n.time=e.time.toISOString());var i=this.runTelemetryProcessors(n,e.contextObjects);i=i&&c3.samplingTelemetryProcessor(n,{correlationContext:u3.CorrelationContextManager.getCurrentContext()}),c3.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),i&&this.channel.send(n)}else l3.warn("track() requires telemetry object and telemetryType to be specified.")},t.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},t.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},t.prototype.runTelemetryProcessors=function(e,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=u3.CorrelationContextManager.getCurrentContext();for(var o=0;o<i;++o)try{var s=this._telemetryProcessors[o];if(s&&s.apply(null,[e,r])===!1){n=!1;break}}catch(a){n=!0,l3.warn("One of telemetry processors failed, telemetry item will be sent.",a,e)}return n},t}();f3.exports=Fpe});var m3=m((dS,h3)=>{"use strict";var qpe=dS&&dS.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mpe=d3(),p3=nS(),$pe=ad(),ry=Ht(),Upe=function(t){qpe(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?p3.trackRequestSync(this,r):ry.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},e.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&ry.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?p3.trackRequest(this,r):ry.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},e.prototype.trackNodeHttpDependency=function(r){r&&r.request?$pe.trackRequest(this,r):ry.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},e}(Mpe);h3.exports=Upe});var N3=m(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});var g3=gu(),jpe=K2(),Hpe=X2(),v3=zv(),Bpe=ad(),Vpe=nS(),Gpe=ua(),fd=Ht(),Wpe=GV(),y3=zV();re.TelemetryClient=m3();re.Contracts=Hr();var C3;(function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C"})(C3=re.DistributedTracingModes||(re.DistributedTracingModes={}));var w3=!0,E3=!1,_3=!0,x3=!0,b3=!0,S3=!0,P3=!0,pS=!0,I3,ny=!1,A3=!0,R3,T3=void 0,k3=void 0,dd,pd,hd,ku,pa,md,Bo=!1,D3;function zpe(t){return re.defaultClient?fd.info("The default client is already setup"):(re.defaultClient=new re.TelemetryClient(t),dd=new jpe(re.defaultClient),pd=new Hpe(re.defaultClient),hd=new v3(re.defaultClient),pa=new Vpe(re.defaultClient),md=new Bpe(re.defaultClient),ku||(ku=new y3.AutoCollectNativePerformance(re.defaultClient))),re.defaultClient&&re.defaultClient.channel&&re.defaultClient.channel.setUseDiskRetryCaching(P3,T3,k3),hS}re.setup=zpe;function O3(){return re.defaultClient?(Bo=!0,dd.enable(w3,E3),pd.enable(_3),hd.enable(x3),ku.enable(A3,R3),pa.useAutoCorrelation(pS,I3),pa.enable(b3),md.enable(S3),re.liveMetricsClient&&ny&&re.liveMetricsClient.enable(ny)):fd.warn("Start cannot be called before setup"),hS}re.start=O3;function Kpe(){return pS?g3.CorrelationContextManager.getCurrentContext():null}re.getCorrelationContext=Kpe;function Ype(t){return g3.CorrelationContextManager.wrapCallback(t)}re.wrapWithCorrelationContext=Ype;var hS=function(){function t(){}return t.setDistributedTracingMode=function(e){return Gpe.w3cEnabled=e===C3.AI_AND_W3C,t},t.setAutoCollectConsole=function(e,r){return r===void 0&&(r=!1),w3=e,E3=r,Bo&&dd.enable(e,r),t},t.setAutoCollectExceptions=function(e){return _3=e,Bo&&pd.enable(e),t},t.setAutoCollectPerformance=function(e,r){r===void 0&&(r=!0),x3=e;var n=y3.AutoCollectNativePerformance.parseEnabled(r);return A3=n.isEnabled,R3=n.disabledMetrics,Bo&&(hd.enable(e),ku.enable(n.isEnabled,n.disabledMetrics)),t},t.setAutoCollectRequests=function(e){return b3=e,Bo&&pa.enable(e),t},t.setAutoCollectDependencies=function(e){return S3=e,Bo&&md.enable(e),t},t.setAutoDependencyCorrelation=function(e,r){return pS=e,I3=r,Bo&&pa.useAutoCorrelation(e,r),t},t.setUseDiskRetryCaching=function(e,r,n){return P3=e,T3=r,k3=n,re.defaultClient&&re.defaultClient.channel&&re.defaultClient.channel.setUseDiskRetryCaching(e,r,n),t},t.setInternalLogging=function(e,r){return e===void 0&&(e=!1),r===void 0&&(r=!0),fd.enableDebug=e,fd.disableWarnings=!r,t},t.setSendLiveMetrics=function(e){return e===void 0&&(e=!1),re.defaultClient?(!re.liveMetricsClient&&e?(re.liveMetricsClient=new Wpe(re.defaultClient.config.instrumentationKey),D3=new v3(re.liveMetricsClient,1e3,!0),re.liveMetricsClient.addCollector(D3),re.defaultClient.quickPulseClient=re.liveMetricsClient):re.liveMetricsClient&&re.liveMetricsClient.enable(e),ny=e,t):(fd.warn("Live metrics client cannot be setup without the default client"),t)},t.start=O3,t}();re.Configuration=hS;function Xpe(){re.defaultClient=null,Bo=!1,dd&&dd.dispose(),pd&&pd.dispose(),hd&&hd.dispose(),ku&&ku.dispose(),pa&&pa.dispose(),md&&md.dispose(),re.liveMetricsClient&&(re.liveMetricsClient.enable(!1),ny=!1,re.liveMetricsClient=void 0)}re.dispose=Xpe});var F3=m(mS=>{"use strict";Object.defineProperty(mS,"__esModule",{value:!0});process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var Qpe=require("fs"),L3=require("os"),Jpe=require("path"),Ve=require("vscode"),iy=N3(),Zpe=function(){function t(e,r,n,i){var o=this;this.extensionId=e,this.extensionVersion=r,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!i;var s=process.env.VSCODE_LOGS||"";s&&e&&process.env.VSCODE_LOG_LEVEL==="trace"&&(s=Jpe.join(s,e+".txt"),this.logStream=Qpe.createWriteStream(s,{flags:"a",encoding:"utf8",autoClose:!0})),this.updateUserOptIn(n),Ve.env.onDidChangeTelemetryEnabled!==void 0?this.optOutListener=Ve.env.onDidChangeTelemetryEnabled(function(){return o.updateUserOptIn(n)}):this.optOutListener=Ve.workspace.onDidChangeConfiguration(function(){return o.updateUserOptIn(n)})}return t.prototype.updateUserOptIn=function(e){var r=Ve.workspace.getConfiguration(t.TELEMETRY_CONFIG_ID),n=Ve.env.isTelemetryEnabled===void 0?r.get(t.TELEMETRY_CONFIG_ENABLED_ID,!0):Ve.env.isTelemetryEnabled;this.userOptIn!==n&&(this.userOptIn=n,this.userOptIn?this.createAppInsightsClient(e):this.dispose())},t.prototype.createAppInsightsClient=function(e){iy.defaultClient?(this.appInsightsClient=new iy.TelemetryClient(e),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(iy.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=iy.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),Ve&&Ve.env&&(this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId]=Ve.env.machineId,this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId]=Ve.env.sessionId),e&&e.indexOf("AIF-")===0&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1",this.firstParty=!0)},t.prototype.getCommonProperties=function(){var e=Object.create(null);if(e["common.os"]=L3.platform(),e["common.platformversion"]=(L3.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,Ve&&Ve.env){switch(e["common.vscodemachineid"]=Ve.env.machineId,e["common.vscodesessionid"]=Ve.env.sessionId,e["common.vscodeversion"]=Ve.version,e["common.isnewappinstall"]=Ve.env.isNewAppInstall,Ve.env.uiKind){case Ve.UIKind.Web:e["common.uikind"]="web";break;case Ve.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(Ve.env.remoteName)}return e},t.prototype.cleanRemoteName=function(e){if(!e)return"none";var r="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(function(n){e.indexOf(n+"+")===0&&(r=n)}),r},t.prototype.shouldSendErrorTelemetry=function(){return this.firstParty?this.cleanRemoteName(Ve.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===Ve.ExtensionKind.Workspace||Ve.env.uiKind===Ve.UIKind.Web):!0},Object.defineProperty(t.prototype,"extension",{get:function(){return this._extension===void 0&&(this._extension=Ve.extensions.getExtension(this.extensionId)),this._extension},enumerable:!1,configurable:!0}),t.prototype.cloneAndChange=function(e,r){if(e===null||typeof e!="object"||typeof r!="function")return e;var n={};for(var i in e)n[i]=r(i,e[i]);return n},t.prototype.anonymizeFilePaths=function(e,r){if(e==null)return"";var n=[new RegExp(Ve.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")];this.extension&&n.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));var i=e;if(r){for(var o=[],s=0,a=n;s<a.length;s++)for(var c=a[s];;){var u=c.exec(e);if(!u)break;o.push([u.index,c.lastIndex])}var l=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,f=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g,d=0;i="";for(var p=function(){var C=f.exec(e);if(!C)return"break";!l.test(C[0])&&o.every(function(y){var E=y[0],w=y[1];return C.index<E||C.index>=w})&&(i+=e.substring(d,C.index)+"<REDACTED: user-file-path>",d=f.lastIndex)};;){var h=p();if(h==="break")break}d<e.length&&(i+=e.substr(d))}for(var g=0,v=n;g<v.length;g++){var c=v[g];i=i.replace(c,"")}return i},t.prototype.sendTelemetryEvent=function(e,r,n){var i=this;if(this.userOptIn&&e&&this.appInsightsClient){var o=this.cloneAndChange(r,function(s,a){return i.anonymizeFilePaths(a,i.firstParty)});this.appInsightsClient.trackEvent({name:this.extensionId+"/"+e,properties:o,measurements:n}),this.logStream&&this.logStream.write("telemetry/"+e+" "+JSON.stringify({properties:r,measurements:n})+`
`)}},t.prototype.sendTelemetryErrorEvent=function(e,r,n,i){var o=this;if(this.userOptIn&&e&&this.appInsightsClient){var s=this.cloneAndChange(r,function(a,c){return o.shouldSendErrorTelemetry()?o.anonymizeFilePaths(c,o.firstParty):i===void 0||i.indexOf(a)!==-1?"REDACTED":o.anonymizeFilePaths(c,o.firstParty)});this.appInsightsClient.trackEvent({name:this.extensionId+"/"+e,properties:s,measurements:n}),this.logStream&&this.logStream.write("telemetry/"+e+" "+JSON.stringify({properties:r,measurements:n})+`
`)}},t.prototype.sendTelemetryException=function(e,r,n){var i=this;if(this.shouldSendErrorTelemetry()&&this.userOptIn&&e&&this.appInsightsClient){var o=this.cloneAndChange(r,function(s,a){return i.anonymizeFilePaths(a,i.firstParty)});this.appInsightsClient.trackException({exception:e,properties:o,measurements:n}),this.logStream&&this.logStream.write("telemetry/"+e.name+" "+e.message+" "+JSON.stringify({properties:r,measurements:n})+`
`)}},t.prototype.dispose=function(){var e=this;this.optOutListener.dispose();var r=new Promise(function(i){if(!e.logStream)return i(void 0);e.logStream.on("finish",i),e.logStream.end()}),n=new Promise(function(i){e.appInsightsClient?e.appInsightsClient.flush({callback:function(){e.appInsightsClient=void 0,i(void 0)}}):i(void 0)});return Promise.all([n,r])},t.TELEMETRY_CONFIG_ID="telemetry",t.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",t}();mS.default=Zpe});var gS=m(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});var oy=require("vscode"),gd=class{constructor(e,r,n){this.extensionName=e,this.extensionVersion=r,this.targetPopulation=n}static trimVersionSuffix(e){let r=/\-[a-zA-Z0-9]+$/;return e.split(r)[0]}getFilterValue(e){switch(e){case Bi.ApplicationVersion:return gd.trimVersionSuffix(oy.version);case Bi.Build:return oy.env.appName;case Bi.ClientId:return oy.env.machineId;case Bi.ExtensionName:return this.extensionName;case Bi.ExtensionVersion:return gd.trimVersionSuffix(this.extensionVersion);case Bi.Language:return oy.env.language;case Bi.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let e=new Map,r=Object.values(Bi);for(let n of r)e.set(n,this.getFilterValue(n));return e}};ha.VSCodeFilterProvider=gd;var Bi;(function(t){t.Market="X-MSEdge-Market",t.CorpNet="X-FD-Corpnet",t.ApplicationVersion="X-VSCode-AppVersion",t.Build="X-VSCode-Build",t.ClientId="X-MSEdge-ClientId",t.ExtensionName="X-VSCode-ExtensionName",t.ExtensionVersion="X-VSCode-ExtensionVersion",t.Language="X-VSCode-Language",t.TargetPopulation="X-VSCode-TargetPopulation"})(Bi=ha.Filters||(ha.Filters={}));var ehe;(function(t){t.Team="team",t.Internal="internal",t.Insiders="insider",t.Public="public"})(ehe=ha.TargetPopulation||(ha.TargetPopulation={}))});var M3=m(vS=>{"use strict";Object.defineProperty(vS,"__esModule",{value:!0});var q3=class{constructor(e){this.telemetry=e,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let e=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,e}};vS.BaseFeatureProvider=q3});var U3=m(yS=>{"use strict";Object.defineProperty(yS,"__esModule",{value:!0});var the=M3(),$3=class extends the.BaseFeatureProvider{constructor(e,r){super(e);this.telemetry=e,this.filterProviders=r,this.cachedTelemetryEvents=[]}getFilters(){let e=new Map;for(let r of this.filterProviders){let n=r.getFilters();for(let i of n.keys()){let o=n.get(i);e.set(i,o)}}return e}PostEventToTelemetry(e){if(this.cachedTelemetryEvents.includes(e))return;let r=JSON.stringify(e);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",r]])),this.cachedTelemetryEvents.push(e)}};yS.FilteredFeatureProvider=$3});var H3=m(CS=>{"use strict";Object.defineProperty(CS,"__esModule",{value:!0});var rhe=U3(),j3=class extends rhe.FilteredFeatureProvider{constructor(e,r,n){super(r,n);this.httpClient=e,this.telemetry=r,this.filterProviders=n}async fetch(){let e=this.getFilters(),r={};for(let a of e.keys()){let c=e.get(a);r[a]=c}let n=await this.httpClient.get({headers:r});e.keys.length>0&&this.PostEventToTelemetry(r);let i=n.data,o=i.Configs,s=[];for(let a of o)if(!!a.Parameters)for(let c of Object.keys(a.Parameters)){let u=c+(a.Parameters[c]?"":"cf");s.includes(u)||s.push(u)}return{features:s,assignmentContext:i.AssignmentContext,configs:o}}};CS.TasApiFeatureProvider=j3});var wS=m((yke,B3)=>{"use strict";B3.exports=function(e,r){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(r,i)}}});var Cr=m((Cke,W3)=>{"use strict";var nhe=wS(),ma=Object.prototype.toString;function ES(t){return ma.call(t)==="[object Array]"}function _S(t){return typeof t=="undefined"}function ihe(t){return t!==null&&!_S(t)&&t.constructor!==null&&!_S(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function ohe(t){return ma.call(t)==="[object ArrayBuffer]"}function she(t){return typeof FormData!="undefined"&&t instanceof FormData}function ahe(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function che(t){return typeof t=="string"}function uhe(t){return typeof t=="number"}function V3(t){return t!==null&&typeof t=="object"}function sy(t){if(ma.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function lhe(t){return ma.call(t)==="[object Date]"}function fhe(t){return ma.call(t)==="[object File]"}function dhe(t){return ma.call(t)==="[object Blob]"}function G3(t){return ma.call(t)==="[object Function]"}function phe(t){return V3(t)&&G3(t.pipe)}function hhe(t){return typeof URLSearchParams!="undefined"&&t instanceof URLSearchParams}function mhe(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function ghe(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function xS(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),ES(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function bS(){var t={};function e(i,o){sy(t[o])&&sy(i)?t[o]=bS(t[o],i):sy(i)?t[o]=bS({},i):ES(i)?t[o]=i.slice():t[o]=i}for(var r=0,n=arguments.length;r<n;r++)xS(arguments[r],e);return t}function vhe(t,e,r){return xS(e,function(i,o){r&&typeof i=="function"?t[o]=nhe(i,r):t[o]=i}),t}function yhe(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}W3.exports={isArray:ES,isArrayBuffer:ohe,isBuffer:ihe,isFormData:she,isArrayBufferView:ahe,isString:che,isNumber:uhe,isObject:V3,isPlainObject:sy,isUndefined:_S,isDate:lhe,isFile:fhe,isBlob:dhe,isFunction:G3,isStream:phe,isURLSearchParams:hhe,isStandardBrowserEnv:ghe,forEach:xS,merge:bS,extend:vhe,trim:mhe,stripBOM:yhe}});var ay=m((wke,K3)=>{"use strict";var Du=Cr();function z3(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}K3.exports=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(Du.isURLSearchParams(r))i=r.toString();else{var o=[];Du.forEach(r,function(c,u){c===null||typeof c=="undefined"||(Du.isArray(c)?u=u+"[]":c=[c],Du.forEach(c,function(f){Du.isDate(f)?f=f.toISOString():Du.isObject(f)&&(f=JSON.stringify(f)),o.push(z3(u)+"="+z3(f))}))}),i=o.join("&")}if(i){var s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var X3=m((Eke,Y3)=>{"use strict";var Che=Cr();function cy(){this.handlers=[]}cy.prototype.use=function(e,r){return this.handlers.push({fulfilled:e,rejected:r}),this.handlers.length-1};cy.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};cy.prototype.forEach=function(e){Che.forEach(this.handlers,function(n){n!==null&&e(n)})};Y3.exports=cy});var J3=m((_ke,Q3)=>{"use strict";var whe=Cr();Q3.exports=function(e,r,n){return whe.forEach(n,function(o){e=o(e,r)}),e}});var SS=m((xke,Z3)=>{"use strict";Z3.exports=function(e){return!!(e&&e.__CANCEL__)}});var tG=m((bke,eG)=>{"use strict";var Ehe=Cr();eG.exports=function(e,r){Ehe.forEach(e,function(i,o){o!==r&&o.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[o])})}});var PS=m((Ske,rG)=>{"use strict";rG.exports=function(e,r,n,i,o){return e.config=r,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var uy=m((Pke,nG)=>{"use strict";var _he=PS();nG.exports=function(e,r,n,i,o){var s=new Error(e);return _he(s,r,n,i,o)}});var IS=m((Ike,iG)=>{"use strict";var xhe=uy();iG.exports=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(xhe("Request failed with status code "+n.status,n.config,null,n.request,n))}});var sG=m((Ake,oG)=>{"use strict";var ly=Cr();oG.exports=ly.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,s,a){var c=[];c.push(r+"="+encodeURIComponent(n)),ly.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),ly.isString(o)&&c.push("path="+o),ly.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var cG=m((Rke,aG)=>{"use strict";aG.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var lG=m((Tke,uG)=>{"use strict";uG.exports=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}});var AS=m((kke,fG)=>{"use strict";var bhe=cG(),She=lG();fG.exports=function(e,r){return e&&!bhe(r)?She(e,r):r}});var pG=m((Dke,dG)=>{"use strict";var RS=Cr(),Phe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];dG.exports=function(e){var r={},n,i,o;return e&&RS.forEach(e.split(`
`),function(a){if(o=a.indexOf(":"),n=RS.trim(a.substr(0,o)).toLowerCase(),i=RS.trim(a.substr(o+1)),n){if(r[n]&&Phe.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r}});var gG=m((Oke,mG)=>{"use strict";var hG=Cr();mG.exports=hG.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var s=o;return e&&(r.setAttribute("href",s),s=r.href),r.setAttribute("href",s),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(s){var a=hG.isString(s)?i(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}()});var yG=m((Nke,vG)=>{"use strict";var fy=Cr(),Ihe=IS(),Ahe=sG(),Rhe=ay(),The=AS(),khe=pG(),Dhe=gG(),TS=uy();vG.exports=function(e){return new Promise(function(n,i){var o=e.data,s=e.headers;fy.isFormData(o)&&delete s["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var c=e.auth.username||"",u=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.Authorization="Basic "+btoa(c+":"+u)}var l=The(e.baseURL,e.url);if(a.open(e.method.toUpperCase(),Rhe(l,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(!(!a||a.readyState!==4)&&!(a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0))){var p="getAllResponseHeaders"in a?khe(a.getAllResponseHeaders()):null,h=!e.responseType||e.responseType==="text"?a.responseText:a.response,g={data:h,status:a.status,statusText:a.statusText,headers:p,config:e,request:a};Ihe(n,i,g),a=null}},a.onabort=function(){!a||(i(TS("Request aborted",e,"ECONNABORTED",a)),a=null)},a.onerror=function(){i(TS("Network Error",e,null,a)),a=null},a.ontimeout=function(){var p="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(p=e.timeoutErrorMessage),i(TS(p,e,"ECONNABORTED",a)),a=null},fy.isStandardBrowserEnv()){var f=(e.withCredentials||Dhe(l))&&e.xsrfCookieName?Ahe.read(e.xsrfCookieName):void 0;f&&(s[e.xsrfHeaderName]=f)}if("setRequestHeader"in a&&fy.forEach(s,function(p,h){typeof o=="undefined"&&h.toLowerCase()==="content-type"?delete s[h]:a.setRequestHeader(h,p)}),fy.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),e.responseType)try{a.responseType=e.responseType}catch(d){if(e.responseType!=="json")throw d}typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(p){!a||(a.abort(),i(p),a=null)}),o||(o=null),a.send(o)})}});var wG=m((Lke,CG)=>{var dy;CG.exports=function(){if(!dy)try{dy=pC()("follow-redirects")}catch(t){dy=function(){}}dy.apply(null,arguments)}});var LS=m((Fke,NS)=>{var Ou=require("url"),kS=Ou.URL,Ohe=require("http"),Nhe=require("https"),EG=require("stream").Writable,Lhe=require("assert"),_G=wG(),DS=Object.create(null);["abort","aborted","connect","error","socket","timeout"].forEach(function(t){DS[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var Fhe=py("ERR_FR_REDIRECTION_FAILURE",""),qhe=py("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),Mhe=py("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),$he=py("ERR_STREAM_WRITE_AFTER_END","write after end");function Br(t,e){EG.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}Br.prototype=Object.create(EG.prototype);Br.prototype.abort=function(){this._currentRequest.removeAllListeners(),this._currentRequest.on("error",bG),this._currentRequest.abort(),this.emit("abort"),this.removeAllListeners()};Br.prototype.write=function(t,e,r){if(this._ending)throw new $he;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new Mhe),this.abort())};Br.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};Br.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};Br.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};Br.prototype.setTimeout=function(t,e){var r=this;e&&this.on("timeout",e);function n(){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),i()},t)}function i(){clearTimeout(this._timeout),e&&r.removeListener("timeout",e),this.socket||r._currentRequest.removeListener("socket",n)}return this.socket?n():this._currentRequest.once("socket",n),this.once("response",i),this.once("error",i),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){Br.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(Br.prototype,t,{get:function(){return this._currentRequest[t]}})});Br.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};Br.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Ou.format(this._options),n._redirectable=this;for(var i in DS)i&&n.on(i,DS[i]);if(this._isRedirect){var o=0,s=this,a=this._requestBodyBuffers;(function c(u){if(n===s._currentRequest)if(u)s.emit("error",u);else if(o<a.length){var l=a[o++];n.finished||n.write(l.data,l.encoding,c)}else s._ended&&n.end()})()}};Br.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",bG),this._currentRequest.abort(),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new qhe);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],OS(/^content-/i,this._options.headers));var n=OS(/^host$/i,this._options.headers)||Ou.parse(this._currentUrl).hostname,i=Ou.resolve(this._currentUrl,r);_G("redirecting to",i),this._isRedirect=!0;var o=Ou.parse(i);if(Object.assign(this._options,o),o.hostname!==n&&OS(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var s={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,s)}catch(c){this.emit("error",c);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(c){var a=new Fhe("Redirected request failed: "+c.message);a.cause=c,this.emit("error",a)}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function xG(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",o=r[i]=t[n],s=e[n]=Object.create(o);function a(u,l,f){if(typeof u=="string"){var d=u;try{u=SG(new kS(d))}catch(p){u=Ou.parse(d)}}else kS&&u instanceof kS?u=SG(u):(f=l,l=u,u={protocol:i});return typeof l=="function"&&(f=l,l=null),l=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},u,l),l.nativeProtocols=r,Lhe.equal(l.protocol,i,"protocol mismatch"),_G("options",l),new Br(l,f)}function c(u,l,f){var d=s.request(u,l,f);return d.end(),d}Object.defineProperties(s,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function bG(){}function SG(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function OS(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r}function py(t,e){function r(n){Error.captureStackTrace(this,this.constructor),this.message=n||e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}NS.exports=xG({http:Ohe,https:Nhe});NS.exports.wrap=xG});var PG=m((qke,Uhe)=>{Uhe.exports={name:"axios",version:"0.21.1",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test && bundlesize",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://github.com/axios/axios",devDependencies:{bundlesize:"^0.17.0",coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^5.2.0",sinon:"^4.5.0",typescript:"^2.8.1","url-search-params":"^0.10.0",webpack:"^1.13.1","webpack-dev-server":"^1.14.1"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.10.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var DG=m((Mke,kG)=>{"use strict";var vd=Cr(),IG=IS(),jhe=AS(),Hhe=ay(),Bhe=require("http"),Vhe=require("https"),Ghe=LS().http,Whe=LS().https,AG=require("url"),zhe=require("zlib"),Khe=PG(),FS=uy(),qS=PS(),RG=/https:?/;function TG(t,e,r){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=r,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+n}t.beforeRedirect=function(o){o.headers.host=o.host,TG(o,e,o.href)}}kG.exports=function(e){return new Promise(function(n,i){var o=function(P){n(P)},s=function(P){i(P)},a=e.data,c=e.headers;if(!c["User-Agent"]&&!c["user-agent"]&&(c["User-Agent"]="axios/"+Khe.version),a&&!vd.isStream(a)){if(!Buffer.isBuffer(a))if(vd.isArrayBuffer(a))a=Buffer.from(new Uint8Array(a));else if(vd.isString(a))a=Buffer.from(a,"utf-8");else return s(FS("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));c["Content-Length"]=a.length}var u=void 0;if(e.auth){var l=e.auth.username||"",f=e.auth.password||"";u=l+":"+f}var d=jhe(e.baseURL,e.url),p=AG.parse(d),h=p.protocol||"http:";if(!u&&p.auth){var g=p.auth.split(":"),v=g[0]||"",C=g[1]||"";u=v+":"+C}u&&delete c.Authorization;var y=RG.test(h),E=y?e.httpsAgent:e.httpAgent,w={path:Hhe(p.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:c,agent:E,agents:{http:e.httpAgent,https:e.httpsAgent},auth:u};e.socketPath?w.socketPath=e.socketPath:(w.hostname=p.hostname,w.port=p.port);var x=e.proxy;if(!x&&x!==!1){var _=h.slice(0,-1)+"_proxy",S=process.env[_]||process.env[_.toUpperCase()];if(S){var I=AG.parse(S),R=process.env.no_proxy||process.env.NO_PROXY,T=!0;if(R){var U=R.split(",").map(function(P){return P.trim()});T=!U.some(function(P){return P?P==="*"||P[0]==="."&&p.hostname.substr(p.hostname.length-P.length)===P?!0:p.hostname===P:!1})}if(T&&(x={host:I.hostname,port:I.port,protocol:I.protocol},I.auth)){var W=I.auth.split(":");x.auth={username:W[0],password:W[1]}}}}x&&(w.headers.host=p.hostname+(p.port?":"+p.port:""),TG(w,x,h+"//"+p.hostname+(p.port?":"+p.port:"")+w.path));var K,oe=y&&(x?RG.test(x.protocol):!0);e.transport?K=e.transport:e.maxRedirects===0?K=oe?Vhe:Bhe:(e.maxRedirects&&(w.maxRedirects=e.maxRedirects),K=oe?Whe:Ghe),e.maxBodyLength>-1&&(w.maxBodyLength=e.maxBodyLength);var X=K.request(w,function(P){if(!X.aborted){var O=P,$=P.req||X;if(P.statusCode!==204&&$.method!=="HEAD"&&e.decompress!==!1)switch(P.headers["content-encoding"]){case"gzip":case"compress":case"deflate":O=O.pipe(zhe.createUnzip()),delete P.headers["content-encoding"];break}var Q={status:P.statusCode,statusText:P.statusMessage,headers:P.headers,config:e,request:$};if(e.responseType==="stream")Q.data=O,IG(o,s,Q);else{var se=[];O.on("data",function(xe){se.push(xe),e.maxContentLength>-1&&Buffer.concat(se).length>e.maxContentLength&&(O.destroy(),s(FS("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,$)))}),O.on("error",function(xe){X.aborted||s(qS(xe,e,null,$))}),O.on("end",function(){var xe=Buffer.concat(se);e.responseType!=="arraybuffer"&&(xe=xe.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(xe=vd.stripBOM(xe))),Q.data=xe,IG(o,s,Q)})}}});X.on("error",function(P){X.aborted&&P.code!=="ERR_FR_TOO_MANY_REDIRECTS"||s(qS(P,e,null,X))}),e.timeout&&X.setTimeout(e.timeout,function(){X.abort(),s(FS("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",X))}),e.cancelToken&&e.cancelToken.promise.then(function(P){X.aborted||(X.abort(),s(P))}),vd.isStream(a)?a.on("error",function(P){s(qS(P,e,null,X))}).pipe(X):X.end(a)})}});var MS=m(($ke,LG)=>{"use strict";var kr=Cr(),OG=tG(),Yhe={"Content-Type":"application/x-www-form-urlencoded"};function NG(t,e){!kr.isUndefined(t)&&kr.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Xhe(){var t;return typeof XMLHttpRequest!="undefined"?t=yG():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(t=DG()),t}var hy={adapter:Xhe(),transformRequest:[function(e,r){return OG(r,"Accept"),OG(r,"Content-Type"),kr.isFormData(e)||kr.isArrayBuffer(e)||kr.isBuffer(e)||kr.isStream(e)||kr.isFile(e)||kr.isBlob(e)?e:kr.isArrayBufferView(e)?e.buffer:kr.isURLSearchParams(e)?(NG(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):kr.isObject(e)?(NG(r,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if(typeof e=="string")try{e=JSON.parse(e)}catch(r){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};hy.headers={common:{Accept:"application/json, text/plain, */*"}};kr.forEach(["delete","get","head"],function(e){hy.headers[e]={}});kr.forEach(["post","put","patch"],function(e){hy.headers[e]=kr.merge(Yhe)});LG.exports=hy});var MG=m((Uke,qG)=>{"use strict";var FG=Cr(),$S=J3(),Qhe=SS(),Jhe=MS();function US(t){t.cancelToken&&t.cancelToken.throwIfRequested()}qG.exports=function(e){US(e),e.headers=e.headers||{},e.data=$S(e.data,e.headers,e.transformRequest),e.headers=FG.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),FG.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||Jhe.adapter;return r(e).then(function(i){return US(e),i.data=$S(i.data,i.headers,e.transformResponse),i},function(i){return Qhe(i)||(US(e),i&&i.response&&(i.response.data=$S(i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var jS=m((jke,$G)=>{"use strict";var ar=Cr();$G.exports=function(e,r){r=r||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function c(d,p){return ar.isPlainObject(d)&&ar.isPlainObject(p)?ar.merge(d,p):ar.isPlainObject(p)?ar.merge({},p):ar.isArray(p)?p.slice():p}function u(d){ar.isUndefined(r[d])?ar.isUndefined(e[d])||(n[d]=c(void 0,e[d])):n[d]=c(e[d],r[d])}ar.forEach(i,function(p){ar.isUndefined(r[p])||(n[p]=c(void 0,r[p]))}),ar.forEach(o,u),ar.forEach(s,function(p){ar.isUndefined(r[p])?ar.isUndefined(e[p])||(n[p]=c(void 0,e[p])):n[p]=c(void 0,r[p])}),ar.forEach(a,function(p){p in r?n[p]=c(e[p],r[p]):p in e&&(n[p]=c(void 0,e[p]))});var l=i.concat(o).concat(s).concat(a),f=Object.keys(e).concat(Object.keys(r)).filter(function(p){return l.indexOf(p)===-1});return ar.forEach(f,u),n}});var BG=m((Hke,HG)=>{"use strict";var UG=Cr(),Zhe=ay(),jG=X3(),eme=MG(),my=jS();function yd(t){this.defaults=t,this.interceptors={request:new jG,response:new jG}}yd.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=my(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=[eme,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach(function(o){r.unshift(o.fulfilled,o.rejected)}),this.interceptors.response.forEach(function(o){r.push(o.fulfilled,o.rejected)});r.length;)n=n.then(r.shift(),r.shift());return n};yd.prototype.getUri=function(e){return e=my(this.defaults,e),Zhe(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};UG.forEach(["delete","get","head","options"],function(e){yd.prototype[e]=function(r,n){return this.request(my(n||{},{method:e,url:r,data:(n||{}).data}))}});UG.forEach(["post","put","patch"],function(e){yd.prototype[e]=function(r,n,i){return this.request(my(i||{},{method:e,url:r,data:n}))}});HG.exports=yd});var BS=m((Bke,VG)=>{"use strict";function HS(t){this.message=t}HS.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};HS.prototype.__CANCEL__=!0;VG.exports=HS});var WG=m((Vke,GG)=>{"use strict";var tme=BS();function gy(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;t(function(i){r.reason||(r.reason=new tme(i),e(r.reason))})}gy.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};gy.source=function(){var e,r=new gy(function(i){e=i});return{token:r,cancel:e}};GG.exports=gy});var KG=m((Gke,zG)=>{"use strict";zG.exports=function(e){return function(n){return e.apply(null,n)}}});var XG=m((Wke,YG)=>{"use strict";YG.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var ZG=m((zke,VS)=>{"use strict";var QG=Cr(),rme=wS(),vy=BG(),nme=jS(),ime=MS();function JG(t){var e=new vy(t),r=rme(vy.prototype.request,e);return QG.extend(r,vy.prototype,e),QG.extend(r,e),r}var qn=JG(ime);qn.Axios=vy;qn.create=function(e){return JG(nme(qn.defaults,e))};qn.Cancel=BS();qn.CancelToken=WG();qn.isCancel=SS();qn.all=function(e){return Promise.all(e)};qn.spread=KG();qn.isAxiosError=XG();VS.exports=qn;VS.exports.default=qn});var tW=m((Kke,eW)=>{eW.exports=ZG()});var nW=m(GS=>{"use strict";Object.defineProperty(GS,"__esModule",{value:!0});var ome=tW(),rW=class{constructor(e){this.endpoint=e}get(e){return ome.default.get(this.endpoint,Object.assign(Object.assign({},e),{proxy:!1}))}};GS.AxiosHttpClient=rW});var oW=m(WS=>{"use strict";Object.defineProperty(WS,"__esModule",{value:!0});var iW=class{constructor(){this.storage=new Map}async getValue(e,r){return this.storage.has(e)?await Promise.resolve(this.storage.get(e)):await Promise.resolve(r||void 0)}setValue(e,r){this.storage.set(e,r)}};WS.MemoryKeyValueStorage=iW});var aW=m(zS=>{"use strict";Object.defineProperty(zS,"__esModule",{value:!0});var sme=oW(),sW=class{constructor(e,r,n,i,o,s){this.telemetry=e,this.featuresTelemetryPropertyName=r,this.assignmentContextTelemetryPropertyName=n,this.telemetryEventName=i,this.storageKey=o,this.storage=s,this.featuresConsumed=!1,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(s=new sme.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData(),this.initializePromise=this.loadCachePromise,this.initialFetch=new Promise((a,c)=>{this.resolveInitialFetchPromise=a})}get features(){return this._features}set features(e){this._features=e,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(e=!1){if(this.fetchPromise!=null){try{await this.fetchPromise}catch(r){}return this.features}if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async r=>await r.getFeatures()));try{let r=await this.fetchPromise;this.updateFeatures(r,e)}catch(r){}return this.fetchPromise=void 0,this.resolveInitialFetchPromise&&(this.resolveInitialFetchPromise(),this.resolveInitialFetchPromise=void 0),this.features}updateFeatures(e,r=!1){let n={features:[],assignmentContext:"",configs:[]};for(let i of e){for(let o of i.features)n.features.includes(o)||n.features.push(o);for(let o of i.configs){let s=n.configs.find(a=>a.Id===o.Id);s?s.Parameters=Object.assign(Object.assign({},s.Parameters),o.Parameters):n.configs.push(o)}n.assignmentContext+=i.assignmentContext}(r||!this.featuresConsumed)&&(this.features=n),this.storage&&this.storage.setValue(this.storageKey,n)}async loadCachedFeatureData(){let e;this.storage&&(e=await this.storage.getValue(this.storageKey),e!==void 0&&e.configs===void 0&&(e.configs=[])),this.features.features.length===0&&(this.features=e||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(e){return this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isCachedFlightEnabled(e){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(e),this.features.features.includes(e)}async isFlightEnabledAsync(e){let r=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(e),r.features.includes(e)}getTreatmentVariable(e,r){var n;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${e}.${r}`),(n=this.features.configs.find(o=>o.Id===e))===null||n===void 0?void 0:n.Parameters[r]}async getTreatmentVariableAsync(e,r,n){if(n){let i=this.featuresConsumed,o=this.getTreatmentVariable(e,r);if(o===void 0)this.featuresConsumed=i;else return o}return await this.getFeaturesAsync(!0),this.getTreatmentVariable(e,r)}PostEventToTelemetry(e){this.cachedTelemetryEvents.includes(e)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",e]])),this.cachedTelemetryEvents.push(e))}invokeInit(){this.init()}addFeatureProvider(...e){if(!(e==null||this.featureProviders==null))for(let r of e)this.featureProviders.push(r)}};zS.ExperimentationServiceBase=sW});var uW=m(KS=>{"use strict";Object.defineProperty(KS,"__esModule",{value:!0});var cW=class{constructor(e){this.fetchInterval=e}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(e){this.onTick=e}StartPolling(e=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(e&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}};KS.PollingService=cW});var fW=m(YS=>{"use strict";Object.defineProperty(YS,"__esModule",{value:!0});var ame=aW(),cme=uW(),lW=class extends ame.ExperimentationServiceBase{constructor(e,r,n,i,o,s,a,c){super(e,i,o,s,a,c);if(this.telemetry=e,this.filterProviders=r,this.refreshRateMs=n,this.featuresTelemetryPropertyName=i,this.assignmentContextTelemetryPropertyName=o,this.telemetryEventName=s,this.storageKey=a,this.storage=c,n<1e3&&n!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");n>0&&(this.pollingService=new cme.PollingService(n),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(e=!1){if(this.pollingService){this.pollingService.StopPolling();let r=await super.getFeaturesAsync(e);return this.pollingService.StartPolling(),r}else return await super.getFeaturesAsync(e)}};YS.ExperimentationServiceAutoPolling=lW});var dW=m(QS=>{"use strict";Object.defineProperty(QS,"__esModule",{value:!0});var ume=H3(),lme=nW(),fme=fW(),XS=class extends fme.ExperimentationServiceAutoPolling{constructor(e){super(e.telemetry,e.filterProviders||[],e.refetchInterval!=null?e.refetchInterval:0,e.featuresTelemetryPropertyName,e.assignmentContextTelemetryPropertyName,e.telemetryEventName,e.storageKey,e.keyValueStorage);this.options=e,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new ume.TasApiFeatureProvider(new lme.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}};QS.ExperimentationService=XS;XS.REFRESH_RATE_IN_MINUTES=30});var pW=m(JS=>{"use strict";Object.defineProperty(JS,"__esModule",{value:!0});var dme=dW();JS.ExperimentationService=dme.ExperimentationService});var mW=m(ZS=>{"use strict";Object.defineProperty(ZS,"__esModule",{value:!0});var hW=class{constructor(e){this.mementoGlobalStorage=e}async getValue(e,r){return await this.mementoGlobalStorage.get(e)||r}setValue(e,r){this.mementoGlobalStorage.update(e,r)}};ZS.MementoKeyValueStorage=hW});var vW=m(eP=>{"use strict";Object.defineProperty(eP,"__esModule",{value:!0});var gW=class{constructor(){this.initializePromise=Promise.resolve(),this.initialFetch=Promise.resolve()}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}};eP.default=gW});var CW=m(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0});var pme=gS(),hme=pW(),tP=require("vscode"),mme=mW(),gme=vW(),vme="https://default.exp-tas.com/vscode/ab",yme="query-expfeature",Cme="VSCode.ABExp.Features",wme="abexp.assignmentcontext",Eme="VSCode.ABExp.FeatureData",_me=1e3*60*30;function yW(t,e,r,n,i,...o){if(!i)throw new Error("Memento storage was not provided.");let s=tP.workspace.getConfiguration("telemetry");if(!(tP.env.isTelemetryEnabled===void 0?s.get("enableTelemetry",!0):tP.env.isTelemetryEnabled))return new gme.default;let u=[new pme.VSCodeFilterProvider(t,e,r),...o],l=new mme.MementoKeyValueStorage(i);return new hme.ExperimentationService({filterProviders:u,telemetry:n,storageKey:Eme,keyValueStorage:l,featuresTelemetryPropertyName:Cme,assignmentContextTelemetryPropertyName:wme,telemetryEventName:yme,endpoint:vme,refetchInterval:_me})}yy.getExperimentationService=yW;async function xme(t,e,r,n,i,...o){let s=yW(t,e,r,n,i,...o);return await s.initializePromise,s}yy.getExperimentationServiceAsync=xme});var EW=m(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var wW=CW();Cd.getExperimentationService=wW.getExperimentationService;Cd.getExperimentationServiceAsync=wW.getExperimentationServiceAsync;var bme=gS();Cd.TargetPopulation=bme.TargetPopulation});var GW=m((VDe,zme)=>{zme.exports={Aacute:"\xC1",aacute:"\xE1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223E",acd:"\u223F",acE:"\u223E\u0333",Acirc:"\xC2",acirc:"\xE2",acute:"\xB4",Acy:"\u0410",acy:"\u0430",AElig:"\xC6",aelig:"\xE6",af:"\u2061",Afr:"\u{1D504}",afr:"\u{1D51E}",Agrave:"\xC0",agrave:"\xE0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03B1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2A3F",amp:"&",AMP:"&",andand:"\u2A55",And:"\u2A53",and:"\u2227",andd:"\u2A5C",andslope:"\u2A58",andv:"\u2A5A",ang:"\u2220",ange:"\u29A4",angle:"\u2220",angmsdaa:"\u29A8",angmsdab:"\u29A9",angmsdac:"\u29AA",angmsdad:"\u29AB",angmsdae:"\u29AC",angmsdaf:"\u29AD",angmsdag:"\u29AE",angmsdah:"\u29AF",angmsd:"\u2221",angrt:"\u221F",angrtvb:"\u22BE",angrtvbd:"\u299D",angsph:"\u2222",angst:"\xC5",angzarr:"\u237C",Aogon:"\u0104",aogon:"\u0105",Aopf:"\u{1D538}",aopf:"\u{1D552}",apacir:"\u2A6F",ap:"\u2248",apE:"\u2A70",ape:"\u224A",apid:"\u224B",apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224A",Aring:"\xC5",aring:"\xE5",Ascr:"\u{1D49C}",ascr:"\u{1D4B6}",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224D",Atilde:"\xC3",atilde:"\xE3",Auml:"\xC4",auml:"\xE4",awconint:"\u2233",awint:"\u2A11",backcong:"\u224C",backepsilon:"\u03F6",backprime:"\u2035",backsim:"\u223D",backsimeq:"\u22CD",Backslash:"\u2216",Barv:"\u2AE7",barvee:"\u22BD",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23B5",bbrktbrk:"\u23B6",bcong:"\u224C",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201E",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29B0",bepsi:"\u03F6",bernou:"\u212C",Bernoullis:"\u212C",Beta:"\u0392",beta:"\u03B2",beth:"\u2136",between:"\u226C",Bfr:"\u{1D505}",bfr:"\u{1D51F}",bigcap:"\u22C2",bigcirc:"\u25EF",bigcup:"\u22C3",bigodot:"\u2A00",bigoplus:"\u2A01",bigotimes:"\u2A02",bigsqcup:"\u2A06",bigstar:"\u2605",bigtriangledown:"\u25BD",bigtriangleup:"\u25B3",biguplus:"\u2A04",bigvee:"\u22C1",bigwedge:"\u22C0",bkarow:"\u290D",blacklozenge:"\u29EB",blacksquare:"\u25AA",blacktriangle:"\u25B4",blacktriangledown:"\u25BE",blacktriangleleft:"\u25C2",blacktriangleright:"\u25B8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20E5",bnequiv:"\u2261\u20E5",bNot:"\u2AED",bnot:"\u2310",Bopf:"\u{1D539}",bopf:"\u{1D553}",bot:"\u22A5",bottom:"\u22A5",bowtie:"\u22C8",boxbox:"\u29C9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250C",boxdR:"\u2552",boxDr:"\u2553",boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252C",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229F",boxplus:"\u229E",boxtimes:"\u22A0",boxul:"\u2518",boxuL:"\u255B",boxUl:"\u255C",boxUL:"\u255D",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255A",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253C",boxvH:"\u256A",boxVh:"\u256B",boxVH:"\u256C",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251C",boxvR:"\u255E",boxVr:"\u255F",boxVR:"\u2560",bprime:"\u2035",breve:"\u02D8",Breve:"\u02D8",brvbar:"\xA6",bscr:"\u{1D4B7}",Bscr:"\u212C",bsemi:"\u204F",bsim:"\u223D",bsime:"\u22CD",bsolb:"\u29C5",bsol:"\\",bsolhsub:"\u27C8",bull:"\u2022",bullet:"\u2022",bump:"\u224E",bumpE:"\u2AAE",bumpe:"\u224F",Bumpeq:"\u224E",bumpeq:"\u224F",Cacute:"\u0106",cacute:"\u0107",capand:"\u2A44",capbrcup:"\u2A49",capcap:"\u2A4B",cap:"\u2229",Cap:"\u22D2",capcup:"\u2A47",capdot:"\u2A40",CapitalDifferentialD:"\u2145",caps:"\u2229\uFE00",caret:"\u2041",caron:"\u02C7",Cayleys:"\u212D",ccaps:"\u2A4D",Ccaron:"\u010C",ccaron:"\u010D",Ccedil:"\xC7",ccedil:"\xE7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2A4C",ccupssm:"\u2A50",Cdot:"\u010A",cdot:"\u010B",cedil:"\xB8",Cedilla:"\xB8",cemptyv:"\u29B2",cent:"\xA2",centerdot:"\xB7",CenterDot:"\xB7",cfr:"\u{1D520}",Cfr:"\u212D",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03A7",chi:"\u03C7",circ:"\u02C6",circeq:"\u2257",circlearrowleft:"\u21BA",circlearrowright:"\u21BB",circledast:"\u229B",circledcirc:"\u229A",circleddash:"\u229D",CircleDot:"\u2299",circledR:"\xAE",circledS:"\u24C8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25CB",cirE:"\u29C3",cire:"\u2257",cirfnint:"\u2A10",cirmid:"\u2AEF",cirscir:"\u29C2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201D",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2A74",colone:"\u2254",coloneq:"\u2254",comma:",",commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2A6D",Congruent:"\u2261",conint:"\u222E",Conint:"\u222F",ContourIntegral:"\u222E",copf:"\u{1D554}",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\xA9",COPY:"\xA9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21B5",cross:"\u2717",Cross:"\u2A2F",Cscr:"\u{1D49E}",cscr:"\u{1D4B8}",csub:"\u2ACF",csube:"\u2AD1",csup:"\u2AD0",csupe:"\u2AD2",ctdot:"\u22EF",cudarrl:"\u2938",cudarrr:"\u2935",cuepr:"\u22DE",cuesc:"\u22DF",cularr:"\u21B6",cularrp:"\u293D",cupbrcap:"\u2A48",cupcap:"\u2A46",CupCap:"\u224D",cup:"\u222A",Cup:"\u22D3",cupcup:"\u2A4A",cupdot:"\u228D",cupor:"\u2A45",cups:"\u222A\uFE00",curarr:"\u21B7",curarrm:"\u293C",curlyeqprec:"\u22DE",curlyeqsucc:"\u22DF",curlyvee:"\u22CE",curlywedge:"\u22CF",curren:"\xA4",curvearrowleft:"\u21B6",curvearrowright:"\u21B7",cuvee:"\u22CE",cuwed:"\u22CF",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232D",dagger:"\u2020",Dagger:"\u2021",daleth:"\u2138",darr:"\u2193",Darr:"\u21A1",dArr:"\u21D3",dash:"\u2010",Dashv:"\u2AE4",dashv:"\u22A3",dbkarow:"\u290F",dblac:"\u02DD",Dcaron:"\u010E",dcaron:"\u010F",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21CA",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2A77",deg:"\xB0",Del:"\u2207",Delta:"\u0394",delta:"\u03B4",demptyv:"\u29B1",dfisht:"\u297F",Dfr:"\u{1D507}",dfr:"\u{1D521}",dHar:"\u2965",dharl:"\u21C3",dharr:"\u21C2",DiacriticalAcute:"\xB4",DiacriticalDot:"\u02D9",DiacriticalDoubleAcute:"\u02DD",DiacriticalGrave:"`",DiacriticalTilde:"\u02DC",diam:"\u22C4",diamond:"\u22C4",Diamond:"\u22C4",diamondsuit:"\u2666",diams:"\u2666",die:"\xA8",DifferentialD:"\u2146",digamma:"\u03DD",disin:"\u22F2",div:"\xF7",divide:"\xF7",divideontimes:"\u22C7",divonx:"\u22C7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231E",dlcrop:"\u230D",dollar:"$",Dopf:"\u{1D53B}",dopf:"\u{1D555}",Dot:"\xA8",dot:"\u02D9",DotDot:"\u20DC",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22A1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222F",DoubleDot:"\xA8",DoubleDownArrow:"\u21D3",DoubleLeftArrow:"\u21D0",DoubleLeftRightArrow:"\u21D4",DoubleLeftTee:"\u2AE4",DoubleLongLeftArrow:"\u27F8",DoubleLongLeftRightArrow:"\u27FA",DoubleLongRightArrow:"\u27F9",DoubleRightArrow:"\u21D2",DoubleRightTee:"\u22A8",DoubleUpArrow:"\u21D1",DoubleUpDownArrow:"\u21D5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",Downarrow:"\u21D3",DownArrowUpArrow:"\u21F5",DownBreve:"\u0311",downdownarrows:"\u21CA",downharpoonleft:"\u21C3",downharpoonright:"\u21C2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295E",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21BD",DownRightTeeVector:"\u295F",DownRightVectorBar:"\u2957",DownRightVector:"\u21C1",DownTeeArrow:"\u21A7",DownTee:"\u22A4",drbkarow:"\u2910",drcorn:"\u231F",drcrop:"\u230C",Dscr:"\u{1D49F}",dscr:"\u{1D4B9}",DScy:"\u0405",dscy:"\u0455",dsol:"\u29F6",Dstrok:"\u0110",dstrok:"\u0111",dtdot:"\u22F1",dtri:"\u25BF",dtrif:"\u25BE",duarr:"\u21F5",duhar:"\u296F",dwangle:"\u29A6",DZcy:"\u040F",dzcy:"\u045F",dzigrarr:"\u27FF",Eacute:"\xC9",eacute:"\xE9",easter:"\u2A6E",Ecaron:"\u011A",ecaron:"\u011B",Ecirc:"\xCA",ecirc:"\xEA",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042D",ecy:"\u044D",eDDot:"\u2A77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\u{1D508}",efr:"\u{1D522}",eg:"\u2A9A",Egrave:"\xC8",egrave:"\xE8",egs:"\u2A96",egsdot:"\u2A98",el:"\u2A99",Element:"\u2208",elinters:"\u23E7",ell:"\u2113",els:"\u2A95",elsdot:"\u2A97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25FB",emptyv:"\u2205",EmptyVerySmallSquare:"\u25AB",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014A",eng:"\u014B",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\u{1D53C}",eopf:"\u{1D556}",epar:"\u22D5",eparsl:"\u29E3",eplus:"\u2A71",epsi:"\u03B5",Epsilon:"\u0395",epsilon:"\u03B5",epsiv:"\u03F5",eqcirc:"\u2256",eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2A96",eqslantless:"\u2A95",Equal:"\u2A75",equals:"=",EqualTilde:"\u2242",equest:"\u225F",Equilibrium:"\u21CC",equiv:"\u2261",equivDD:"\u2A78",eqvparsl:"\u29E5",erarr:"\u2971",erDot:"\u2253",escr:"\u212F",Escr:"\u2130",esdot:"\u2250",Esim:"\u2A73",esim:"\u2242",Eta:"\u0397",eta:"\u03B7",ETH:"\xD0",eth:"\xF0",Euml:"\xCB",euml:"\xEB",euro:"\u20AC",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\uFB03",fflig:"\uFB00",ffllig:"\uFB04",Ffr:"\u{1D509}",ffr:"\u{1D523}",filig:"\uFB01",FilledSmallSquare:"\u25FC",FilledVerySmallSquare:"\u25AA",fjlig:"fj",flat:"\u266D",fllig:"\uFB02",fltns:"\u25B1",fnof:"\u0192",Fopf:"\u{1D53D}",fopf:"\u{1D557}",forall:"\u2200",ForAll:"\u2200",fork:"\u22D4",forkv:"\u2AD9",Fouriertrf:"\u2131",fpartint:"\u2A0D",frac12:"\xBD",frac13:"\u2153",frac14:"\xBC",frac15:"\u2155",frac16:"\u2159",frac18:"\u215B",frac23:"\u2154",frac25:"\u2156",frac34:"\xBE",frac35:"\u2157",frac38:"\u215C",frac45:"\u2158",frac56:"\u215A",frac58:"\u215D",frac78:"\u215E",frasl:"\u2044",frown:"\u2322",fscr:"\u{1D4BB}",Fscr:"\u2131",gacute:"\u01F5",Gamma:"\u0393",gamma:"\u03B3",Gammad:"\u03DC",gammad:"\u03DD",gap:"\u2A86",Gbreve:"\u011E",gbreve:"\u011F",Gcedil:"\u0122",Gcirc:"\u011C",gcirc:"\u011D",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2A8C",gel:"\u22DB",geq:"\u2265",geqq:"\u2267",geqslant:"\u2A7E",gescc:"\u2AA9",ges:"\u2A7E",gesdot:"\u2A80",gesdoto:"\u2A82",gesdotol:"\u2A84",gesl:"\u22DB\uFE00",gesles:"\u2A94",Gfr:"\u{1D50A}",gfr:"\u{1D524}",gg:"\u226B",Gg:"\u22D9",ggg:"\u22D9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2AA5",gl:"\u2277",glE:"\u2A92",glj:"\u2AA4",gnap:"\u2A8A",gnapprox:"\u2A8A",gne:"\u2A88",gnE:"\u2269",gneq:"\u2A88",gneqq:"\u2269",gnsim:"\u22E7",Gopf:"\u{1D53E}",gopf:"\u{1D558}",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22DB",GreaterFullEqual:"\u2267",GreaterGreater:"\u2AA2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2A7E",GreaterTilde:"\u2273",Gscr:"\u{1D4A2}",gscr:"\u210A",gsim:"\u2273",gsime:"\u2A8E",gsiml:"\u2A90",gtcc:"\u2AA7",gtcir:"\u2A7A",gt:">",GT:">",Gt:"\u226B",gtdot:"\u22D7",gtlPar:"\u2995",gtquest:"\u2A7C",gtrapprox:"\u2A86",gtrarr:"\u2978",gtrdot:"\u22D7",gtreqless:"\u22DB",gtreqqless:"\u2A8C",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\uFE00",gvnE:"\u2269\uFE00",Hacek:"\u02C7",hairsp:"\u200A",half:"\xBD",hamilt:"\u210B",HARDcy:"\u042A",hardcy:"\u044A",harrcir:"\u2948",harr:"\u2194",hArr:"\u21D4",harrw:"\u21AD",Hat:"^",hbar:"\u210F",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22B9",hfr:"\u{1D525}",Hfr:"\u210C",HilbertSpace:"\u210B",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21FF",homtht:"\u223B",hookleftarrow:"\u21A9",hookrightarrow:"\u21AA",hopf:"\u{1D559}",Hopf:"\u210D",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\u{1D4BD}",Hscr:"\u210B",hslash:"\u210F",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224E",HumpEqual:"\u224F",hybull:"\u2043",hyphen:"\u2010",Iacute:"\xCD",iacute:"\xED",ic:"\u2063",Icirc:"\xCE",icirc:"\xEE",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\xA1",iff:"\u21D4",ifr:"\u{1D526}",Ifr:"\u2111",Igrave:"\xCC",igrave:"\xEC",ii:"\u2148",iiiint:"\u2A0C",iiint:"\u222D",iinfin:"\u29DC",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012A",imacr:"\u012B",image:"\u2111",ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22B7",imped:"\u01B5",Implies:"\u21D2",incare:"\u2105",in:"\u2208",infin:"\u221E",infintie:"\u29DD",inodot:"\u0131",intcal:"\u22BA",int:"\u222B",Int:"\u222C",integers:"\u2124",Integral:"\u222B",intercal:"\u22BA",Intersection:"\u22C2",intlarhk:"\u2A17",intprod:"\u2A3C",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012E",iogon:"\u012F",Iopf:"\u{1D540}",iopf:"\u{1D55A}",Iota:"\u0399",iota:"\u03B9",iprod:"\u2A3C",iquest:"\xBF",iscr:"\u{1D4BE}",Iscr:"\u2110",isin:"\u2208",isindot:"\u22F5",isinE:"\u22F9",isins:"\u22F4",isinsv:"\u22F3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\xCF",iuml:"\xEF",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\u{1D50D}",jfr:"\u{1D527}",jmath:"\u0237",Jopf:"\u{1D541}",jopf:"\u{1D55B}",Jscr:"\u{1D4A5}",jscr:"\u{1D4BF}",Jsercy:"\u0408",jsercy:"\u0458",Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039A",kappa:"\u03BA",kappav:"\u03F0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041A",kcy:"\u043A",Kfr:"\u{1D50E}",kfr:"\u{1D528}",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040C",kjcy:"\u045C",Kopf:"\u{1D542}",kopf:"\u{1D55C}",Kscr:"\u{1D4A6}",kscr:"\u{1D4C0}",lAarr:"\u21DA",Lacute:"\u0139",lacute:"\u013A",laemptyv:"\u29B4",lagran:"\u2112",Lambda:"\u039B",lambda:"\u03BB",lang:"\u27E8",Lang:"\u27EA",langd:"\u2991",langle:"\u27E8",lap:"\u2A85",Laplacetrf:"\u2112",laquo:"\xAB",larrb:"\u21E4",larrbfs:"\u291F",larr:"\u2190",Larr:"\u219E",lArr:"\u21D0",larrfs:"\u291D",larrhk:"\u21A9",larrlp:"\u21AB",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21A2",latail:"\u2919",lAtail:"\u291B",lat:"\u2AAB",late:"\u2AAD",lates:"\u2AAD\uFE00",lbarr:"\u290C",lBarr:"\u290E",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298B",lbrksld:"\u298F",lbrkslu:"\u298D",Lcaron:"\u013D",lcaron:"\u013E",Lcedil:"\u013B",lcedil:"\u013C",lceil:"\u2308",lcub:"{",Lcy:"\u041B",lcy:"\u043B",ldca:"\u2936",ldquo:"\u201C",ldquor:"\u201E",ldrdhar:"\u2967",ldrushar:"\u294B",ldsh:"\u21B2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27E8",LeftArrowBar:"\u21E4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21D0",LeftArrowRightArrow:"\u21C6",leftarrowtail:"\u21A2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27E6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21C3",LeftFloor:"\u230A",leftharpoondown:"\u21BD",leftharpoonup:"\u21BC",leftleftarrows:"\u21C7",leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21D4",leftrightarrows:"\u21C6",leftrightharpoons:"\u21CB",leftrightsquigarrow:"\u21AD",LeftRightVector:"\u294E",LeftTeeArrow:"\u21A4",LeftTee:"\u22A3",LeftTeeVector:"\u295A",leftthreetimes:"\u22CB",LeftTriangleBar:"\u29CF",LeftTriangle:"\u22B2",LeftTriangleEqual:"\u22B4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21BF",LeftVectorBar:"\u2952",LeftVector:"\u21BC",lEg:"\u2A8B",leg:"\u22DA",leq:"\u2264",leqq:"\u2266",leqslant:"\u2A7D",lescc:"\u2AA8",les:"\u2A7D",lesdot:"\u2A7F",lesdoto:"\u2A81",lesdotor:"\u2A83",lesg:"\u22DA\uFE00",lesges:"\u2A93",lessapprox:"\u2A85",lessdot:"\u22D6",lesseqgtr:"\u22DA",lesseqqgtr:"\u2A8B",LessEqualGreater:"\u22DA",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2AA1",lesssim:"\u2272",LessSlantEqual:"\u2A7D",LessTilde:"\u2272",lfisht:"\u297C",lfloor:"\u230A",Lfr:"\u{1D50F}",lfr:"\u{1D529}",lg:"\u2276",lgE:"\u2A91",lHar:"\u2962",lhard:"\u21BD",lharu:"\u21BC",lharul:"\u296A",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21C7",ll:"\u226A",Ll:"\u22D8",llcorner:"\u231E",Lleftarrow:"\u21DA",llhard:"\u296B",lltri:"\u25FA",Lmidot:"\u013F",lmidot:"\u0140",lmoustache:"\u23B0",lmoust:"\u23B0",lnap:"\u2A89",lnapprox:"\u2A89",lne:"\u2A87",lnE:"\u2268",lneq:"\u2A87",lneqq:"\u2268",lnsim:"\u22E6",loang:"\u27EC",loarr:"\u21FD",lobrk:"\u27E6",longleftarrow:"\u27F5",LongLeftArrow:"\u27F5",Longleftarrow:"\u27F8",longleftrightarrow:"\u27F7",LongLeftRightArrow:"\u27F7",Longleftrightarrow:"\u27FA",longmapsto:"\u27FC",longrightarrow:"\u27F6",LongRightArrow:"\u27F6",Longrightarrow:"\u27F9",looparrowleft:"\u21AB",looparrowright:"\u21AC",lopar:"\u2985",Lopf:"\u{1D543}",lopf:"\u{1D55D}",loplus:"\u2A2D",lotimes:"\u2A34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25CA",lozenge:"\u25CA",lozf:"\u29EB",lpar:"(",lparlt:"\u2993",lrarr:"\u21C6",lrcorner:"\u231F",lrhar:"\u21CB",lrhard:"\u296D",lrm:"\u200E",lrtri:"\u22BF",lsaquo:"\u2039",lscr:"\u{1D4C1}",Lscr:"\u2112",lsh:"\u21B0",Lsh:"\u21B0",lsim:"\u2272",lsime:"\u2A8D",lsimg:"\u2A8F",lsqb:"[",lsquo:"\u2018",lsquor:"\u201A",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2AA6",ltcir:"\u2A79",lt:"<",LT:"<",Lt:"\u226A",ltdot:"\u22D6",lthree:"\u22CB",ltimes:"\u22C9",ltlarr:"\u2976",ltquest:"\u2A7B",ltri:"\u25C3",ltrie:"\u22B4",ltrif:"\u25C2",ltrPar:"\u2996",lurdshar:"\u294A",luruhar:"\u2966",lvertneqq:"\u2268\uFE00",lvnE:"\u2268\uFE00",macr:"\xAF",male:"\u2642",malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21A6",mapsto:"\u21A6",mapstodown:"\u21A7",mapstoleft:"\u21A4",mapstoup:"\u21A5",marker:"\u25AE",mcomma:"\u2A29",Mcy:"\u041C",mcy:"\u043C",mdash:"\u2014",mDDot:"\u223A",measuredangle:"\u2221",MediumSpace:"\u205F",Mellintrf:"\u2133",Mfr:"\u{1D510}",mfr:"\u{1D52A}",mho:"\u2127",micro:"\xB5",midast:"*",midcir:"\u2AF0",mid:"\u2223",middot:"\xB7",minusb:"\u229F",minus:"\u2212",minusd:"\u2238",minusdu:"\u2A2A",MinusPlus:"\u2213",mlcp:"\u2ADB",mldr:"\u2026",mnplus:"\u2213",models:"\u22A7",Mopf:"\u{1D544}",mopf:"\u{1D55E}",mp:"\u2213",mscr:"\u{1D4C2}",Mscr:"\u2133",mstpos:"\u223E",Mu:"\u039C",mu:"\u03BC",multimap:"\u22B8",mumap:"\u22B8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20D2",nap:"\u2249",napE:"\u2A70\u0338",napid:"\u224B\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266E",naturals:"\u2115",natur:"\u266E",nbsp:"\xA0",nbump:"\u224E\u0338",nbumpe:"\u224F\u0338",ncap:"\u2A43",Ncaron:"\u0147",ncaron:"\u0148",Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2A6D\u0338",ncup:"\u2A42",Ncy:"\u041D",ncy:"\u043D",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21D7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200B",NegativeThickSpace:"\u200B",NegativeThinSpace:"\u200B",NegativeVeryThinSpace:"\u200B",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226B",NestedLessLess:"\u226A",NewLine:`
`,nexist:"\u2204",nexists:"\u2204",Nfr:"\u{1D511}",nfr:"\u{1D52B}",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2A7E\u0338",nges:"\u2A7E\u0338",nGg:"\u22D9\u0338",ngsim:"\u2275",nGt:"\u226B\u20D2",ngt:"\u226F",ngtr:"\u226F",nGtv:"\u226B\u0338",nharr:"\u21AE",nhArr:"\u21CE",nhpar:"\u2AF2",ni:"\u220B",nis:"\u22FC",nisd:"\u22FA",niv:"\u220B",NJcy:"\u040A",njcy:"\u045A",nlarr:"\u219A",nlArr:"\u21CD",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219A",nLeftarrow:"\u21CD",nleftrightarrow:"\u21AE",nLeftrightarrow:"\u21CE",nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2A7D\u0338",nles:"\u2A7D\u0338",nless:"\u226E",nLl:"\u22D8\u0338",nlsim:"\u2274",nLt:"\u226A\u20D2",nlt:"\u226E",nltri:"\u22EA",nltrie:"\u22EC",nLtv:"\u226A\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\xA0",nopf:"\u{1D55F}",Nopf:"\u2115",Not:"\u2AEC",not:"\xAC",NotCongruent:"\u2262",NotCupCap:"\u226D",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226F",NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226B\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2A7E\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224E\u0338",NotHumpEqual:"\u224F\u0338",notin:"\u2209",notindot:"\u22F5\u0338",notinE:"\u22F9\u0338",notinva:"\u2209",notinvb:"\u22F7",notinvc:"\u22F6",NotLeftTriangleBar:"\u29CF\u0338",NotLeftTriangle:"\u22EA",NotLeftTriangleEqual:"\u22EC",NotLess:"\u226E",NotLessEqual:"\u2270",NotLessGreater:"\u2278",NotLessLess:"\u226A\u0338",NotLessSlantEqual:"\u2A7D\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2AA2\u0338",NotNestedLessLess:"\u2AA1\u0338",notni:"\u220C",notniva:"\u220C",notnivb:"\u22FE",notnivc:"\u22FD",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2AAF\u0338",NotPrecedesSlantEqual:"\u22E0",NotReverseElement:"\u220C",NotRightTriangleBar:"\u29D0\u0338",NotRightTriangle:"\u22EB",NotRightTriangleEqual:"\u22ED",NotSquareSubset:"\u228F\u0338",NotSquareSubsetEqual:"\u22E2",NotSquareSuperset:"\u2290\u0338",NotSquareSupersetEqual:"\u22E3",NotSubset:"\u2282\u20D2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2AB0\u0338",NotSucceedsSlantEqual:"\u22E1",NotSucceedsTilde:"\u227F\u0338",NotSuperset:"\u2283\u20D2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2AFD\u20E5",npart:"\u2202\u0338",npolint:"\u2A14",npr:"\u2280",nprcue:"\u22E0",nprec:"\u2280",npreceq:"\u2AAF\u0338",npre:"\u2AAF\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219B",nrArr:"\u21CF",nrarrw:"\u219D\u0338",nrightarrow:"\u219B",nRightarrow:"\u21CF",nrtri:"\u22EB",nrtrie:"\u22ED",nsc:"\u2281",nsccue:"\u22E1",nsce:"\u2AB0\u0338",Nscr:"\u{1D4A9}",nscr:"\u{1D4C3}",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22E2",nsqsupe:"\u22E3",nsub:"\u2284",nsubE:"\u2AC5\u0338",nsube:"\u2288",nsubset:"\u2282\u20D2",nsubseteq:"\u2288",nsubseteqq:"\u2AC5\u0338",nsucc:"\u2281",nsucceq:"\u2AB0\u0338",nsup:"\u2285",nsupE:"\u2AC6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20D2",nsupseteq:"\u2289",nsupseteqq:"\u2AC6\u0338",ntgl:"\u2279",Ntilde:"\xD1",ntilde:"\xF1",ntlg:"\u2278",ntriangleleft:"\u22EA",ntrianglelefteq:"\u22EC",ntriangleright:"\u22EB",ntrianglerighteq:"\u22ED",Nu:"\u039D",nu:"\u03BD",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224D\u20D2",nvdash:"\u22AC",nvDash:"\u22AD",nVdash:"\u22AE",nVDash:"\u22AF",nvge:"\u2265\u20D2",nvgt:">\u20D2",nvHarr:"\u2904",nvinfin:"\u29DE",nvlArr:"\u2902",nvle:"\u2264\u20D2",nvlt:"<\u20D2",nvltrie:"\u22B4\u20D2",nvrArr:"\u2903",nvrtrie:"\u22B5\u20D2",nvsim:"\u223C\u20D2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21D6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\xD3",oacute:"\xF3",oast:"\u229B",Ocirc:"\xD4",ocirc:"\xF4",ocir:"\u229A",Ocy:"\u041E",ocy:"\u043E",odash:"\u229D",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2A38",odot:"\u2299",odsold:"\u29BC",OElig:"\u0152",oelig:"\u0153",ofcir:"\u29BF",Ofr:"\u{1D512}",ofr:"\u{1D52C}",ogon:"\u02DB",Ograve:"\xD2",ograve:"\xF2",ogt:"\u29C1",ohbar:"\u29B5",ohm:"\u03A9",oint:"\u222E",olarr:"\u21BA",olcir:"\u29BE",olcross:"\u29BB",oline:"\u203E",olt:"\u29C0",Omacr:"\u014C",omacr:"\u014D",Omega:"\u03A9",omega:"\u03C9",Omicron:"\u039F",omicron:"\u03BF",omid:"\u29B6",ominus:"\u2296",Oopf:"\u{1D546}",oopf:"\u{1D560}",opar:"\u29B7",OpenCurlyDoubleQuote:"\u201C",OpenCurlyQuote:"\u2018",operp:"\u29B9",oplus:"\u2295",orarr:"\u21BB",Or:"\u2A54",or:"\u2228",ord:"\u2A5D",order:"\u2134",orderof:"\u2134",ordf:"\xAA",ordm:"\xBA",origof:"\u22B6",oror:"\u2A56",orslope:"\u2A57",orv:"\u2A5B",oS:"\u24C8",Oscr:"\u{1D4AA}",oscr:"\u2134",Oslash:"\xD8",oslash:"\xF8",osol:"\u2298",Otilde:"\xD5",otilde:"\xF5",otimesas:"\u2A36",Otimes:"\u2A37",otimes:"\u2297",Ouml:"\xD6",ouml:"\xF6",ovbar:"\u233D",OverBar:"\u203E",OverBrace:"\u23DE",OverBracket:"\u23B4",OverParenthesis:"\u23DC",para:"\xB6",parallel:"\u2225",par:"\u2225",parsim:"\u2AF3",parsl:"\u2AFD",part:"\u2202",PartialD:"\u2202",Pcy:"\u041F",pcy:"\u043F",percnt:"%",period:".",permil:"\u2030",perp:"\u22A5",pertenk:"\u2031",Pfr:"\u{1D513}",pfr:"\u{1D52D}",Phi:"\u03A6",phi:"\u03C6",phiv:"\u03D5",phmmat:"\u2133",phone:"\u260E",Pi:"\u03A0",pi:"\u03C0",pitchfork:"\u22D4",piv:"\u03D6",planck:"\u210F",planckh:"\u210E",plankv:"\u210F",plusacir:"\u2A23",plusb:"\u229E",pluscir:"\u2A22",plus:"+",plusdo:"\u2214",plusdu:"\u2A25",pluse:"\u2A72",PlusMinus:"\xB1",plusmn:"\xB1",plussim:"\u2A26",plustwo:"\u2A27",pm:"\xB1",Poincareplane:"\u210C",pointint:"\u2A15",popf:"\u{1D561}",Popf:"\u2119",pound:"\xA3",prap:"\u2AB7",Pr:"\u2ABB",pr:"\u227A",prcue:"\u227C",precapprox:"\u2AB7",prec:"\u227A",preccurlyeq:"\u227C",Precedes:"\u227A",PrecedesEqual:"\u2AAF",PrecedesSlantEqual:"\u227C",PrecedesTilde:"\u227E",preceq:"\u2AAF",precnapprox:"\u2AB9",precneqq:"\u2AB5",precnsim:"\u22E8",pre:"\u2AAF",prE:"\u2AB3",precsim:"\u227E",prime:"\u2032",Prime:"\u2033",primes:"\u2119",prnap:"\u2AB9",prnE:"\u2AB5",prnsim:"\u22E8",prod:"\u220F",Product:"\u220F",profalar:"\u232E",profline:"\u2312",profsurf:"\u2313",prop:"\u221D",Proportional:"\u221D",Proportion:"\u2237",propto:"\u221D",prsim:"\u227E",prurel:"\u22B0",Pscr:"\u{1D4AB}",pscr:"\u{1D4C5}",Psi:"\u03A8",psi:"\u03C8",puncsp:"\u2008",Qfr:"\u{1D514}",qfr:"\u{1D52E}",qint:"\u2A0C",qopf:"\u{1D562}",Qopf:"\u211A",qprime:"\u2057",Qscr:"\u{1D4AC}",qscr:"\u{1D4C6}",quaternions:"\u210D",quatint:"\u2A16",quest:"?",questeq:"\u225F",quot:'"',QUOT:'"',rAarr:"\u21DB",race:"\u223D\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221A",raemptyv:"\u29B3",rang:"\u27E9",Rang:"\u27EB",rangd:"\u2992",range:"\u29A5",rangle:"\u27E9",raquo:"\xBB",rarrap:"\u2975",rarrb:"\u21E5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21A0",rArr:"\u21D2",rarrfs:"\u291E",rarrhk:"\u21AA",rarrlp:"\u21AC",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21A3",rarrw:"\u219D",ratail:"\u291A",rAtail:"\u291C",ratio:"\u2236",rationals:"\u211A",rbarr:"\u290D",rBarr:"\u290F",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298C",rbrksld:"\u298E",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201D",rdquor:"\u201D",rdsh:"\u21B3",real:"\u211C",realine:"\u211B",realpart:"\u211C",reals:"\u211D",Re:"\u211C",rect:"\u25AD",reg:"\xAE",REG:"\xAE",ReverseElement:"\u220B",ReverseEquilibrium:"\u21CB",ReverseUpEquilibrium:"\u296F",rfisht:"\u297D",rfloor:"\u230B",rfr:"\u{1D52F}",Rfr:"\u211C",rHar:"\u2964",rhard:"\u21C1",rharu:"\u21C0",rharul:"\u296C",Rho:"\u03A1",rho:"\u03C1",rhov:"\u03F1",RightAngleBracket:"\u27E9",RightArrowBar:"\u21E5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21D2",RightArrowLeftArrow:"\u21C4",rightarrowtail:"\u21A3",RightCeiling:"\u2309",RightDoubleBracket:"\u27E7",RightDownTeeVector:"\u295D",RightDownVectorBar:"\u2955",RightDownVector:"\u21C2",RightFloor:"\u230B",rightharpoondown:"\u21C1",rightharpoonup:"\u21C0",rightleftarrows:"\u21C4",rightleftharpoons:"\u21CC",rightrightarrows:"\u21C9",rightsquigarrow:"\u219D",RightTeeArrow:"\u21A6",RightTee:"\u22A2",RightTeeVector:"\u295B",rightthreetimes:"\u22CC",RightTriangleBar:"\u29D0",RightTriangle:"\u22B3",RightTriangleEqual:"\u22B5",RightUpDownVector:"\u294F",RightUpTeeVector:"\u295C",RightUpVectorBar:"\u2954",RightUpVector:"\u21BE",RightVectorBar:"\u2953",RightVector:"\u21C0",ring:"\u02DA",risingdotseq:"\u2253",rlarr:"\u21C4",rlhar:"\u21CC",rlm:"\u200F",rmoustache:"\u23B1",rmoust:"\u23B1",rnmid:"\u2AEE",roang:"\u27ED",roarr:"\u21FE",robrk:"\u27E7",ropar:"\u2986",ropf:"\u{1D563}",Ropf:"\u211D",roplus:"\u2A2E",rotimes:"\u2A35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2A12",rrarr:"\u21C9",Rrightarrow:"\u21DB",rsaquo:"\u203A",rscr:"\u{1D4C7}",Rscr:"\u211B",rsh:"\u21B1",Rsh:"\u21B1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22CC",rtimes:"\u22CA",rtri:"\u25B9",rtrie:"\u22B5",rtrif:"\u25B8",rtriltri:"\u29CE",RuleDelayed:"\u29F4",ruluhar:"\u2968",rx:"\u211E",Sacute:"\u015A",sacute:"\u015B",sbquo:"\u201A",scap:"\u2AB8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2ABC",sc:"\u227B",sccue:"\u227D",sce:"\u2AB0",scE:"\u2AB4",Scedil:"\u015E",scedil:"\u015F",Scirc:"\u015C",scirc:"\u015D",scnap:"\u2ABA",scnE:"\u2AB6",scnsim:"\u22E9",scpolint:"\u2A13",scsim:"\u227F",Scy:"\u0421",scy:"\u0441",sdotb:"\u22A1",sdot:"\u22C5",sdote:"\u2A66",searhk:"\u2925",searr:"\u2198",seArr:"\u21D8",searrow:"\u2198",sect:"\xA7",semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\u{1D516}",sfr:"\u{1D530}",sfrown:"\u2322",sharp:"\u266F",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\xAD",Sigma:"\u03A3",sigma:"\u03C3",sigmaf:"\u03C2",sigmav:"\u03C2",sim:"\u223C",simdot:"\u2A6A",sime:"\u2243",simeq:"\u2243",simg:"\u2A9E",simgE:"\u2AA0",siml:"\u2A9D",simlE:"\u2A9F",simne:"\u2246",simplus:"\u2A24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2A33",smeparsl:"\u29E4",smid:"\u2223",smile:"\u2323",smt:"\u2AAA",smte:"\u2AAC",smtes:"\u2AAC\uFE00",SOFTcy:"\u042C",softcy:"\u044C",solbar:"\u233F",solb:"\u29C4",sol:"/",Sopf:"\u{1D54A}",sopf:"\u{1D564}",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\uFE00",sqcup:"\u2294",sqcups:"\u2294\uFE00",Sqrt:"\u221A",sqsub:"\u228F",sqsube:"\u2291",sqsubset:"\u228F",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25A1",Square:"\u25A1",SquareIntersection:"\u2293",SquareSubset:"\u228F",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25AA",squ:"\u25A1",squf:"\u25AA",srarr:"\u2192",Sscr:"\u{1D4AE}",sscr:"\u{1D4C8}",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22C6",Star:"\u22C6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03F5",straightphi:"\u03D5",strns:"\xAF",sub:"\u2282",Sub:"\u22D0",subdot:"\u2ABD",subE:"\u2AC5",sube:"\u2286",subedot:"\u2AC3",submult:"\u2AC1",subnE:"\u2ACB",subne:"\u228A",subplus:"\u2ABF",subrarr:"\u2979",subset:"\u2282",Subset:"\u22D0",subseteq:"\u2286",subseteqq:"\u2AC5",SubsetEqual:"\u2286",subsetneq:"\u228A",subsetneqq:"\u2ACB",subsim:"\u2AC7",subsub:"\u2AD5",subsup:"\u2AD3",succapprox:"\u2AB8",succ:"\u227B",succcurlyeq:"\u227D",Succeeds:"\u227B",SucceedsEqual:"\u2AB0",SucceedsSlantEqual:"\u227D",SucceedsTilde:"\u227F",succeq:"\u2AB0",succnapprox:"\u2ABA",succneqq:"\u2AB6",succnsim:"\u22E9",succsim:"\u227F",SuchThat:"\u220B",sum:"\u2211",Sum:"\u2211",sung:"\u266A",sup1:"\xB9",sup2:"\xB2",sup3:"\xB3",sup:"\u2283",Sup:"\u22D1",supdot:"\u2ABE",supdsub:"\u2AD8",supE:"\u2AC6",supe:"\u2287",supedot:"\u2AC4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27C9",suphsub:"\u2AD7",suplarr:"\u297B",supmult:"\u2AC2",supnE:"\u2ACC",supne:"\u228B",supplus:"\u2AC0",supset:"\u2283",Supset:"\u22D1",supseteq:"\u2287",supseteqq:"\u2AC6",supsetneq:"\u228B",supsetneqq:"\u2ACC",supsim:"\u2AC8",supsub:"\u2AD4",supsup:"\u2AD6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21D9",swarrow:"\u2199",swnwar:"\u292A",szlig:"\xDF",Tab:"	",target:"\u2316",Tau:"\u03A4",tau:"\u03C4",tbrk:"\u23B4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20DB",telrec:"\u2315",Tfr:"\u{1D517}",tfr:"\u{1D531}",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",theta:"\u03B8",thetasym:"\u03D1",thetav:"\u03D1",thickapprox:"\u2248",thicksim:"\u223C",ThickSpace:"\u205F\u200A",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223C",THORN:"\xDE",thorn:"\xFE",tilde:"\u02DC",Tilde:"\u223C",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2A31",timesb:"\u22A0",times:"\xD7",timesd:"\u2A30",tint:"\u222D",toea:"\u2928",topbot:"\u2336",topcir:"\u2AF1",top:"\u22A4",Topf:"\u{1D54B}",topf:"\u{1D565}",topfork:"\u2ADA",tosa:"\u2929",tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25B5",triangledown:"\u25BF",triangleleft:"\u25C3",trianglelefteq:"\u22B4",triangleq:"\u225C",triangleright:"\u25B9",trianglerighteq:"\u22B5",tridot:"\u25EC",trie:"\u225C",triminus:"\u2A3A",TripleDot:"\u20DB",triplus:"\u2A39",trisb:"\u29CD",tritime:"\u2A3B",trpezium:"\u23E2",Tscr:"\u{1D4AF}",tscr:"\u{1D4C9}",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040B",tshcy:"\u045B",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226C",twoheadleftarrow:"\u219E",twoheadrightarrow:"\u21A0",Uacute:"\xDA",uacute:"\xFA",uarr:"\u2191",Uarr:"\u219F",uArr:"\u21D1",Uarrocir:"\u2949",Ubrcy:"\u040E",ubrcy:"\u045E",Ubreve:"\u016C",ubreve:"\u016D",Ucirc:"\xDB",ucirc:"\xFB",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21C5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296E",ufisht:"\u297E",Ufr:"\u{1D518}",ufr:"\u{1D532}",Ugrave:"\xD9",ugrave:"\xF9",uHar:"\u2963",uharl:"\u21BF",uharr:"\u21BE",uhblk:"\u2580",ulcorn:"\u231C",ulcorner:"\u231C",ulcrop:"\u230F",ultri:"\u25F8",Umacr:"\u016A",umacr:"\u016B",uml:"\xA8",UnderBar:"_",UnderBrace:"\u23DF",UnderBracket:"\u23B5",UnderParenthesis:"\u23DD",Union:"\u22C3",UnionPlus:"\u228E",Uogon:"\u0172",uogon:"\u0173",Uopf:"\u{1D54C}",uopf:"\u{1D566}",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21D1",UpArrowDownArrow:"\u21C5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21D5",UpEquilibrium:"\u296E",upharpoonleft:"\u21BF",upharpoonright:"\u21BE",uplus:"\u228E",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",upsi:"\u03C5",Upsi:"\u03D2",upsih:"\u03D2",Upsilon:"\u03A5",upsilon:"\u03C5",UpTeeArrow:"\u21A5",UpTee:"\u22A5",upuparrows:"\u21C8",urcorn:"\u231D",urcorner:"\u231D",urcrop:"\u230E",Uring:"\u016E",uring:"\u016F",urtri:"\u25F9",Uscr:"\u{1D4B0}",uscr:"\u{1D4CA}",utdot:"\u22F0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25B5",utrif:"\u25B4",uuarr:"\u21C8",Uuml:"\xDC",uuml:"\xFC",uwangle:"\u29A7",vangrt:"\u299C",varepsilon:"\u03F5",varkappa:"\u03F0",varnothing:"\u2205",varphi:"\u03D5",varpi:"\u03D6",varpropto:"\u221D",varr:"\u2195",vArr:"\u21D5",varrho:"\u03F1",varsigma:"\u03C2",varsubsetneq:"\u228A\uFE00",varsubsetneqq:"\u2ACB\uFE00",varsupsetneq:"\u228B\uFE00",varsupsetneqq:"\u2ACC\uFE00",vartheta:"\u03D1",vartriangleleft:"\u22B2",vartriangleright:"\u22B3",vBar:"\u2AE8",Vbar:"\u2AEB",vBarv:"\u2AE9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22A2",vDash:"\u22A8",Vdash:"\u22A9",VDash:"\u22AB",Vdashl:"\u2AE6",veebar:"\u22BB",vee:"\u2228",Vee:"\u22C1",veeeq:"\u225A",vellip:"\u22EE",verbar:"|",Verbar:"\u2016",vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200A",Vfr:"\u{1D519}",vfr:"\u{1D533}",vltri:"\u22B2",vnsub:"\u2282\u20D2",vnsup:"\u2283\u20D2",Vopf:"\u{1D54D}",vopf:"\u{1D567}",vprop:"\u221D",vrtri:"\u22B3",Vscr:"\u{1D4B1}",vscr:"\u{1D4CB}",vsubnE:"\u2ACB\uFE00",vsubne:"\u228A\uFE00",vsupnE:"\u2ACC\uFE00",vsupne:"\u228B\uFE00",Vvdash:"\u22AA",vzigzag:"\u299A",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2A5F",wedge:"\u2227",Wedge:"\u22C0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\u{1D51A}",wfr:"\u{1D534}",Wopf:"\u{1D54E}",wopf:"\u{1D568}",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\u{1D4B2}",wscr:"\u{1D4CC}",xcap:"\u22C2",xcirc:"\u25EF",xcup:"\u22C3",xdtri:"\u25BD",Xfr:"\u{1D51B}",xfr:"\u{1D535}",xharr:"\u27F7",xhArr:"\u27FA",Xi:"\u039E",xi:"\u03BE",xlarr:"\u27F5",xlArr:"\u27F8",xmap:"\u27FC",xnis:"\u22FB",xodot:"\u2A00",Xopf:"\u{1D54F}",xopf:"\u{1D569}",xoplus:"\u2A01",xotime:"\u2A02",xrarr:"\u27F6",xrArr:"\u27F9",Xscr:"\u{1D4B3}",xscr:"\u{1D4CD}",xsqcup:"\u2A06",xuplus:"\u2A04",xutri:"\u25B3",xvee:"\u22C1",xwedge:"\u22C0",Yacute:"\xDD",yacute:"\xFD",YAcy:"\u042F",yacy:"\u044F",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042B",ycy:"\u044B",yen:"\xA5",Yfr:"\u{1D51C}",yfr:"\u{1D536}",YIcy:"\u0407",yicy:"\u0457",Yopf:"\u{1D550}",yopf:"\u{1D56A}",Yscr:"\u{1D4B4}",yscr:"\u{1D4CE}",YUcy:"\u042E",yucy:"\u044E",yuml:"\xFF",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017A",Zcaron:"\u017D",zcaron:"\u017E",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017B",zdot:"\u017C",zeetrf:"\u2128",ZeroWidthSpace:"\u200B",Zeta:"\u0396",zeta:"\u03B6",zfr:"\u{1D537}",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21DD",zopf:"\u{1D56B}",Zopf:"\u2124",Zscr:"\u{1D4B5}",zscr:"\u{1D4CF}",zwj:"\u200D",zwnj:"\u200C"}});var pP=m((GDe,WW)=>{"use strict";WW.exports=GW()});var Iy=m((WDe,zW)=>{zW.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/});var XW=m((zDe,YW)=>{"use strict";var KW={};function Kme(t){var e,r,n=KW[t];if(n)return n;for(n=KW[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),/^[0-9a-z]$/i.test(r)?n.push(r):n.push("%"+("0"+e.toString(16).toUpperCase()).slice(-2));for(e=0;e<t.length;e++)n[t.charCodeAt(e)]=t[e];return n}function Ay(t,e,r){var n,i,o,s,a,c="";for(typeof e!="string"&&(r=e,e=Ay.defaultChars),typeof r=="undefined"&&(r=!0),a=Kme(e),n=0,i=t.length;n<i;n++){if(o=t.charCodeAt(n),r&&o===37&&n+2<i&&/^[0-9a-f]{2}$/i.test(t.slice(n+1,n+3))){c+=t.slice(n,n+3),n+=2;continue}if(o<128){c+=a[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&n+1<i&&(s=t.charCodeAt(n+1),s>=56320&&s<=57343)){c+=encodeURIComponent(t[n]+t[n+1]),n++;continue}c+="%EF%BF%BD";continue}c+=encodeURIComponent(t[n])}return c}Ay.defaultChars=";/?:@&=+$,-_.!~*'()#";Ay.componentChars="-_.!~*'()";YW.exports=Ay});var ZW=m((KDe,JW)=>{"use strict";var QW={};function Yme(t){var e,r,n=QW[t];if(n)return n;for(n=QW[t]=[],e=0;e<128;e++)r=String.fromCharCode(e),n.push(r);for(e=0;e<t.length;e++)r=t.charCodeAt(e),n[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2);return n}function Ry(t,e){var r;return typeof e!="string"&&(e=Ry.defaultChars),r=Yme(e),t.replace(/(%[a-f0-9]{2})+/gi,function(n){var i,o,s,a,c,u,l,f="";for(i=0,o=n.length;i<o;i+=3){if(s=parseInt(n.slice(i+1,i+3),16),s<128){f+=r[s];continue}if((s&224)==192&&i+3<o&&(a=parseInt(n.slice(i+4,i+6),16),(a&192)==128)){l=s<<6&1984|a&63,l<128?f+="\uFFFD\uFFFD":f+=String.fromCharCode(l),i+=3;continue}if((s&240)==224&&i+6<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),(a&192)==128&&(c&192)==128)){l=s<<12&61440|a<<6&4032|c&63,l<2048||l>=55296&&l<=57343?f+="\uFFFD\uFFFD\uFFFD":f+=String.fromCharCode(l),i+=6;continue}if((s&248)==240&&i+9<o&&(a=parseInt(n.slice(i+4,i+6),16),c=parseInt(n.slice(i+7,i+9),16),u=parseInt(n.slice(i+10,i+12),16),(a&192)==128&&(c&192)==128&&(u&192)==128)){l=s<<18&1835008|a<<12&258048|c<<6&4032|u&63,l<65536||l>1114111?f+="\uFFFD\uFFFD\uFFFD\uFFFD":(l-=65536,f+=String.fromCharCode(55296+(l>>10),56320+(l&1023))),i+=9;continue}f+="\uFFFD"}return f})}Ry.defaultChars=";/?:@&=+$,#";Ry.componentChars="";JW.exports=Ry});var tz=m((YDe,ez)=>{"use strict";ez.exports=function(e){var r="";return r+=e.protocol||"",r+=e.slashes?"//":"",r+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?r+="["+e.hostname+"]":r+=e.hostname||"",r+=e.port?":"+e.port:"",r+=e.pathname||"",r+=e.search||"",r+=e.hash||"",r}});var cz=m((XDe,az)=>{"use strict";function Ty(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var Xme=/^([a-z0-9.+-]+:)/i,Qme=/:[0-9]*$/,Jme=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Zme=["<",">",'"',"`"," ","\r",`
`,"	"],ege=["{","}","|","\\","^","`"].concat(Zme),tge=["'"].concat(ege),rz=["%","/","?",";","#"].concat(tge),nz=["/","?","#"],rge=255,iz=/^[+a-z0-9A-Z_-]{0,63}$/,nge=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,oz={javascript:!0,"javascript:":!0},sz={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ige(t,e){if(t&&t instanceof Ty)return t;var r=new Ty;return r.parse(t,e),r}Ty.prototype.parse=function(t,e){var r,n,i,o,s,a=t;if(a=a.trim(),!e&&t.split("#").length===1){var c=Jme.exec(a);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}var u=Xme.exec(a);if(u&&(u=u[0],i=u.toLowerCase(),this.protocol=u,a=a.substr(u.length)),(e||u||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=a.substr(0,2)==="//",s&&!(u&&oz[u])&&(a=a.substr(2),this.slashes=!0)),!oz[u]&&(s||u&&!sz[u])){var l=-1;for(r=0;r<nz.length;r++)o=a.indexOf(nz[r]),o!==-1&&(l===-1||o<l)&&(l=o);var f,d;for(l===-1?d=a.lastIndexOf("@"):d=a.lastIndexOf("@",l),d!==-1&&(f=a.slice(0,d),a=a.slice(d+1),this.auth=f),l=-1,r=0;r<rz.length;r++)o=a.indexOf(rz[r]),o!==-1&&(l===-1||o<l)&&(l=o);l===-1&&(l=a.length),a[l-1]===":"&&l--;var p=a.slice(0,l);a=a.slice(l),this.parseHost(p),this.hostname=this.hostname||"";var h=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!h){var g=this.hostname.split(/\./);for(r=0,n=g.length;r<n;r++){var v=g[r];if(!!v&&!v.match(iz)){for(var C="",y=0,E=v.length;y<E;y++)v.charCodeAt(y)>127?C+="x":C+=v[y];if(!C.match(iz)){var w=g.slice(0,r),x=g.slice(r+1),_=v.match(nge);_&&(w.push(_[1]),x.unshift(_[2])),x.length&&(a=x.join(".")+a),this.hostname=w.join(".");break}}}}this.hostname.length>rge&&(this.hostname=""),h&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var S=a.indexOf("#");S!==-1&&(this.hash=a.substr(S),a=a.slice(0,S));var I=a.indexOf("?");return I!==-1&&(this.search=a.substr(I),a=a.slice(0,I)),a&&(this.pathname=a),sz[i]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Ty.prototype.parseHost=function(t){var e=Qme.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};az.exports=ige});var hP=m((QDe,Ad)=>{"use strict";Ad.exports.encode=XW();Ad.exports.decode=ZW();Ad.exports.format=tz();Ad.exports.parse=cz()});var mP=m((JDe,uz)=>{uz.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/});var gP=m((ZDe,lz)=>{lz.exports=/[\0-\x1F\x7F-\x9F]/});var dz=m((eOe,fz)=>{fz.exports=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/});var vP=m((tOe,pz)=>{pz.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/});var hz=m(Mu=>{"use strict";Mu.Any=mP();Mu.Cc=gP();Mu.Cf=dz();Mu.P=Iy();Mu.Z=vP()});var Ie=m(Dt=>{"use strict";function oge(t){return Object.prototype.toString.call(t)}function sge(t){return oge(t)==="[object String]"}var age=Object.prototype.hasOwnProperty;function mz(t,e){return age.call(t,e)}function cge(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){if(!!r){if(typeof r!="object")throw new TypeError(r+"must be object");Object.keys(r).forEach(function(n){t[n]=r[n]})}}),t}function uge(t,e,r){return[].concat(t.slice(0,e),r,t.slice(e+1))}function gz(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)==65535||(t&65535)==65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function vz(t){if(t>65535){t-=65536;var e=55296+(t>>10),r=56320+(t&1023);return String.fromCharCode(e,r)}return String.fromCharCode(t)}var yz=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,lge=/&([a-z#][a-z0-9]{1,31});/gi,fge=new RegExp(yz.source+"|"+lge.source,"gi"),dge=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i,Cz=pP();function pge(t,e){var r=0;return mz(Cz,e)?Cz[e]:e.charCodeAt(0)===35&&dge.test(e)&&(r=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),gz(r))?vz(r):t}function hge(t){return t.indexOf("\\")<0?t:t.replace(yz,"$1")}function mge(t){return t.indexOf("\\")<0&&t.indexOf("&")<0?t:t.replace(fge,function(e,r,n){return r||pge(e,n)})}var gge=/[&<>"]/,vge=/[&<>"]/g,yge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Cge(t){return yge[t]}function wge(t){return gge.test(t)?t.replace(vge,Cge):t}var Ege=/[.?*+^$[\]\\(){}|-]/g;function _ge(t){return t.replace(Ege,"\\$&")}function xge(t){switch(t){case 9:case 32:return!0}return!1}function bge(t){if(t>=8192&&t<=8202)return!0;switch(t){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var Sge=Iy();function Pge(t){return Sge.test(t)}function Ige(t){switch(t){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Age(t){return t=t.trim().replace(/\s+/g," "),"\u1E9E".toLowerCase()==="\u1E7E"&&(t=t.replace(/ẞ/g,"\xDF")),t.toLowerCase().toUpperCase()}Dt.lib={};Dt.lib.mdurl=hP();Dt.lib.ucmicro=hz();Dt.assign=cge;Dt.isString=sge;Dt.has=mz;Dt.unescapeMd=hge;Dt.unescapeAll=mge;Dt.isValidEntityCode=gz;Dt.fromCodePoint=vz;Dt.escapeHtml=wge;Dt.arrayReplaceAt=uge;Dt.isSpace=xge;Dt.isWhiteSpace=bge;Dt.isMdAsciiPunct=Ige;Dt.isPunctChar=Pge;Dt.escapeRE=_ge;Dt.normalizeReference=Age});var Ez=m((iOe,wz)=>{"use strict";wz.exports=function(e,r,n){var i,o,s,a,c=-1,u=e.posMax,l=e.pos;for(e.pos=r+1,i=1;e.pos<u;){if(s=e.src.charCodeAt(e.pos),s===93&&(i--,i===0)){o=!0;break}if(a=e.pos,e.md.inline.skipToken(e),s===91){if(a===e.pos-1)i++;else if(n)return e.pos=l,-1}}return o&&(c=e.pos),e.pos=l,c}});var bz=m((oOe,xz)=>{"use strict";var _z=Ie().unescapeAll;xz.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(e.charCodeAt(r)===60){for(r++;r<n;){if(i=e.charCodeAt(r),i===10||i===60)return c;if(i===62)return c.pos=r+1,c.str=_z(e.slice(a+1,r)),c.ok=!0,c;if(i===92&&r+1<n){r+=2;continue}r++}return c}for(o=0;r<n&&(i=e.charCodeAt(r),!(i===32||i<32||i===127));){if(i===92&&r+1<n){if(e.charCodeAt(r+1)===32)break;r+=2;continue}if(i===40&&(o++,o>32))return c;if(i===41){if(o===0)break;o--}r++}return a===r||o!==0||(c.str=_z(e.slice(a,r)),c.lines=s,c.pos=r,c.ok=!0),c}});var Pz=m((sOe,Sz)=>{"use strict";var Rge=Ie().unescapeAll;Sz.exports=function(e,r,n){var i,o,s=0,a=r,c={ok:!1,pos:0,lines:0,str:""};if(r>=n||(o=e.charCodeAt(r),o!==34&&o!==39&&o!==40))return c;for(r++,o===40&&(o=41);r<n;){if(i=e.charCodeAt(r),i===o)return c.pos=r+1,c.lines=s,c.str=Rge(e.slice(a+1,r)),c.ok=!0,c;if(i===40&&o===41)return c;i===10?s++:i===92&&r+1<n&&(r++,e.charCodeAt(r)===10&&s++),r++}return c}});var Iz=m(ky=>{"use strict";ky.parseLinkLabel=Ez();ky.parseLinkDestination=bz();ky.parseLinkTitle=Pz()});var Rz=m((cOe,Az)=>{"use strict";var Tge=Ie().assign,kge=Ie().unescapeAll,va=Ie().escapeHtml,si={};si.code_inline=function(t,e,r,n,i){var o=t[e];return"<code"+i.renderAttrs(o)+">"+va(t[e].content)+"</code>"};si.code_block=function(t,e,r,n,i){var o=t[e];return"<pre"+i.renderAttrs(o)+"><code>"+va(t[e].content)+`</code></pre>
`};si.fence=function(t,e,r,n,i){var o=t[e],s=o.info?kge(o.info).trim():"",a="",c="",u,l,f,d,p;return s&&(f=s.split(/(\s+)/g),a=f[0],c=f.slice(2).join("")),r.highlight?u=r.highlight(o.content,a,c)||va(o.content):u=va(o.content),u.indexOf("<pre")===0?u+`
`:s?(l=o.attrIndex("class"),d=o.attrs?o.attrs.slice():[],l<0?d.push(["class",r.langPrefix+a]):(d[l]=d[l].slice(),d[l][1]+=" "+r.langPrefix+a),p={attrs:d},"<pre><code"+i.renderAttrs(p)+">"+u+`</code></pre>
`):"<pre><code"+i.renderAttrs(o)+">"+u+`</code></pre>
`};si.image=function(t,e,r,n,i){var o=t[e];return o.attrs[o.attrIndex("alt")][1]=i.renderInlineAsText(o.children,r,n),i.renderToken(t,e,r)};si.hardbreak=function(t,e,r){return r.xhtmlOut?`<br />
`:`<br>
`};si.softbreak=function(t,e,r){return r.breaks?r.xhtmlOut?`<br />
`:`<br>
`:`
`};si.text=function(t,e){return va(t[e].content)};si.html_block=function(t,e){return t[e].content};si.html_inline=function(t,e){return t[e].content};function $u(){this.rules=Tge({},si)}$u.prototype.renderAttrs=function(e){var r,n,i;if(!e.attrs)return"";for(i="",r=0,n=e.attrs.length;r<n;r++)i+=" "+va(e.attrs[r][0])+'="'+va(e.attrs[r][1])+'"';return i};$u.prototype.renderToken=function(e,r,n){var i,o="",s=!1,a=e[r];return a.hidden?"":(a.block&&a.nesting!==-1&&r&&e[r-1].hidden&&(o+=`
`),o+=(a.nesting===-1?"</":"<")+a.tag,o+=this.renderAttrs(a),a.nesting===0&&n.xhtmlOut&&(o+=" /"),a.block&&(s=!0,a.nesting===1&&r+1<e.length&&(i=e[r+1],(i.type==="inline"||i.hidden||i.nesting===-1&&i.tag===a.tag)&&(s=!1))),o+=s?`>
`:">",o)};$u.prototype.renderInline=function(t,e,r){for(var n,i="",o=this.rules,s=0,a=t.length;s<a;s++)n=t[s].type,typeof o[n]!="undefined"?i+=o[n](t,s,e,r,this):i+=this.renderToken(t,s,e);return i};$u.prototype.renderInlineAsText=function(t,e,r){for(var n="",i=0,o=t.length;i<o;i++)t[i].type==="text"?n+=t[i].content:t[i].type==="image"?n+=this.renderInlineAsText(t[i].children,e,r):t[i].type==="softbreak"&&(n+=`
`);return n};$u.prototype.render=function(t,e,r){var n,i,o,s="",a=this.rules;for(n=0,i=t.length;n<i;n++)o=t[n].type,o==="inline"?s+=this.renderInline(t[n].children,e,r):typeof a[o]!="undefined"?s+=a[t[n].type](t,n,e,r,this):s+=this.renderToken(t,n,e,r);return s};Az.exports=$u});var Dy=m((uOe,Tz)=>{"use strict";function Mn(){this.__rules__=[],this.__cache__=null}Mn.prototype.__find__=function(t){for(var e=0;e<this.__rules__.length;e++)if(this.__rules__[e].name===t)return e;return-1};Mn.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(r){!r.enabled||r.alt.forEach(function(n){e.indexOf(n)<0&&e.push(n)})}),t.__cache__={},e.forEach(function(r){t.__cache__[r]=[],t.__rules__.forEach(function(n){!n.enabled||r&&n.alt.indexOf(r)<0||t.__cache__[r].push(n.fn)})})};Mn.prototype.at=function(t,e,r){var n=this.__find__(t),i=r||{};if(n===-1)throw new Error("Parser rule not found: "+t);this.__rules__[n].fn=e,this.__rules__[n].alt=i.alt||[],this.__cache__=null};Mn.prototype.before=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Mn.prototype.after=function(t,e,r,n){var i=this.__find__(t),o=n||{};if(i===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(i+1,0,{name:e,enabled:!0,fn:r,alt:o.alt||[]}),this.__cache__=null};Mn.prototype.push=function(t,e,r){var n=r||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:n.alt||[]}),this.__cache__=null};Mn.prototype.enable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!0,r.push(n)},this),this.__cache__=null,r};Mn.prototype.enableOnly=function(t,e){Array.isArray(t)||(t=[t]),this.__rules__.forEach(function(r){r.enabled=!1}),this.enable(t,e)};Mn.prototype.disable=function(t,e){Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(n){var i=this.__find__(n);if(i<0){if(e)return;throw new Error("Rules manager: invalid rule name "+n)}this.__rules__[i].enabled=!1,r.push(n)},this),this.__cache__=null,r};Mn.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};Tz.exports=Mn});var Dz=m((lOe,kz)=>{"use strict";var Dge=/\r\n?|\n/g,Oge=/\0/g;kz.exports=function(e){var r;r=e.src.replace(Dge,`
`),r=r.replace(Oge,"\uFFFD"),e.src=r}});var Nz=m((fOe,Oz)=>{"use strict";Oz.exports=function(e){var r;e.inlineMode?(r=new e.Token("inline","",0),r.content=e.src,r.map=[0,1],r.children=[],e.tokens.push(r)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}});var Fz=m((dOe,Lz)=>{"use strict";Lz.exports=function(e){var r=e.tokens,n,i,o;for(i=0,o=r.length;i<o;i++)n=r[i],n.type==="inline"&&e.md.inline.parse(n.content,e.md,e.env,n.children)}});var Mz=m((pOe,qz)=>{"use strict";var Nge=Ie().arrayReplaceAt;function Lge(t){return/^<a[>\s]/i.test(t)}function Fge(t){return/^<\/a\s*>/i.test(t)}qz.exports=function(e){var r,n,i,o,s,a,c,u,l,f,d,p,h,g,v,C,y=e.tokens,E;if(!!e.md.options.linkify){for(n=0,i=y.length;n<i;n++)if(!(y[n].type!=="inline"||!e.md.linkify.pretest(y[n].content)))for(o=y[n].children,h=0,r=o.length-1;r>=0;r--){if(a=o[r],a.type==="link_close"){for(r--;o[r].level!==a.level&&o[r].type!=="link_open";)r--;continue}if(a.type==="html_inline"&&(Lge(a.content)&&h>0&&h--,Fge(a.content)&&h++),!(h>0)&&a.type==="text"&&e.md.linkify.test(a.content)){for(l=a.content,E=e.md.linkify.match(l),c=[],p=a.level,d=0,u=0;u<E.length;u++)g=E[u].url,v=e.md.normalizeLink(g),!!e.md.validateLink(v)&&(C=E[u].text,E[u].schema?E[u].schema==="mailto:"&&!/^mailto:/i.test(C)?C=e.md.normalizeLinkText("mailto:"+C).replace(/^mailto:/,""):C=e.md.normalizeLinkText(C):C=e.md.normalizeLinkText("http://"+C).replace(/^http:\/\//,""),f=E[u].index,f>d&&(s=new e.Token("text","",0),s.content=l.slice(d,f),s.level=p,c.push(s)),s=new e.Token("link_open","a",1),s.attrs=[["href",v]],s.level=p++,s.markup="linkify",s.info="auto",c.push(s),s=new e.Token("text","",0),s.content=C,s.level=p,c.push(s),s=new e.Token("link_close","a",-1),s.level=--p,s.markup="linkify",s.info="auto",c.push(s),d=E[u].lastIndex);d<l.length&&(s=new e.Token("text","",0),s.content=l.slice(d),s.level=p,c.push(s)),y[n].children=o=Nge(o,r,c)}}}}});var jz=m((hOe,Uz)=>{"use strict";var $z=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,qge=/\((c|tm|r|p)\)/i,Mge=/\((c|tm|r|p)\)/ig,$ge={c:"\xA9",r:"\xAE",p:"\xA7",tm:"\u2122"};function Uge(t,e){return $ge[e.toLowerCase()]}function jge(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&(r.content=r.content.replace(Mge,Uge)),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}function Hge(t){var e,r,n=0;for(e=t.length-1;e>=0;e--)r=t[e],r.type==="text"&&!n&&$z.test(r.content)&&(r.content=r.content.replace(/\+-/g,"\xB1").replace(/\.{2,}/g,"\u2026").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1\u2014").replace(/(^|\s)--(?=\s|$)/mg,"$1\u2013").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1\u2013")),r.type==="link_open"&&r.info==="auto"&&n--,r.type==="link_close"&&r.info==="auto"&&n++}Uz.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type==="inline"&&(qge.test(e.tokens[r].content)&&jge(e.tokens[r].children),$z.test(e.tokens[r].content)&&Hge(e.tokens[r].children))}});var Kz=m((mOe,zz)=>{"use strict";var Hz=Ie().isWhiteSpace,Bz=Ie().isPunctChar,Vz=Ie().isMdAsciiPunct,Bge=/['"]/,Gz=/['"]/g,Wz="\u2019";function Oy(t,e,r){return t.substr(0,e)+r+t.substr(e+1)}function Vge(t,e){var r,n,i,o,s,a,c,u,l,f,d,p,h,g,v,C,y,E,w,x,_;for(w=[],r=0;r<t.length;r++){for(n=t[r],c=t[r].level,y=w.length-1;y>=0&&!(w[y].level<=c);y--);if(w.length=y+1,n.type!=="text")continue;i=n.content,s=0,a=i.length;e:for(;s<a&&(Gz.lastIndex=s,o=Gz.exec(i),!!o);){if(v=C=!0,s=o.index+1,E=o[0]==="'",l=32,o.index-1>=0)l=i.charCodeAt(o.index-1);else for(y=r-1;y>=0&&!(t[y].type==="softbreak"||t[y].type==="hardbreak");y--)if(!!t[y].content){l=t[y].content.charCodeAt(t[y].content.length-1);break}if(f=32,s<a)f=i.charCodeAt(s);else for(y=r+1;y<t.length&&!(t[y].type==="softbreak"||t[y].type==="hardbreak");y++)if(!!t[y].content){f=t[y].content.charCodeAt(0);break}if(d=Vz(l)||Bz(String.fromCharCode(l)),p=Vz(f)||Bz(String.fromCharCode(f)),h=Hz(l),g=Hz(f),g?v=!1:p&&(h||d||(v=!1)),h?C=!1:d&&(g||p||(C=!1)),f===34&&o[0]==='"'&&l>=48&&l<=57&&(C=v=!1),v&&C&&(v=d,C=p),!v&&!C){E&&(n.content=Oy(n.content,o.index,Wz));continue}if(C){for(y=w.length-1;y>=0&&(u=w[y],!(w[y].level<c));y--)if(u.single===E&&w[y].level===c){u=w[y],E?(x=e.md.options.quotes[2],_=e.md.options.quotes[3]):(x=e.md.options.quotes[0],_=e.md.options.quotes[1]),n.content=Oy(n.content,o.index,_),t[u.token].content=Oy(t[u.token].content,u.pos,x),s+=_.length-1,u.token===r&&(s+=x.length-1),i=n.content,a=i.length,w.length=y;continue e}}v?w.push({token:r,pos:o.index,single:E,level:c}):C&&E&&(n.content=Oy(n.content,o.index,Wz))}}}zz.exports=function(e){var r;if(!!e.md.options.typographer)for(r=e.tokens.length-1;r>=0;r--)e.tokens[r].type!=="inline"||!Bge.test(e.tokens[r].content)||Vge(e.tokens[r].children,e)}});var Ny=m((gOe,Yz)=>{"use strict";function Uu(t,e,r){this.type=t,this.tag=e,this.attrs=null,this.map=null,this.nesting=r,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Uu.prototype.attrIndex=function(e){var r,n,i;if(!this.attrs)return-1;for(r=this.attrs,n=0,i=r.length;n<i;n++)if(r[n][0]===e)return n;return-1};Uu.prototype.attrPush=function(e){this.attrs?this.attrs.push(e):this.attrs=[e]};Uu.prototype.attrSet=function(e,r){var n=this.attrIndex(e),i=[e,r];n<0?this.attrPush(i):this.attrs[n]=i};Uu.prototype.attrGet=function(e){var r=this.attrIndex(e),n=null;return r>=0&&(n=this.attrs[r][1]),n};Uu.prototype.attrJoin=function(e,r){var n=this.attrIndex(e);n<0?this.attrPush([e,r]):this.attrs[n][1]=this.attrs[n][1]+" "+r};Yz.exports=Uu});var Jz=m((vOe,Qz)=>{"use strict";var Gge=Ny();function Xz(t,e,r){this.src=t,this.env=r,this.tokens=[],this.inlineMode=!1,this.md=e}Xz.prototype.Token=Gge;Qz.exports=Xz});var e4=m((yOe,Zz)=>{"use strict";var Wge=Dy(),yP=[["normalize",Dz()],["block",Nz()],["inline",Fz()],["linkify",Mz()],["replacements",jz()],["smartquotes",Kz()]];function CP(){this.ruler=new Wge;for(var t=0;t<yP.length;t++)this.ruler.push(yP[t][0],yP[t][1])}CP.prototype.process=function(t){var e,r,n;for(n=this.ruler.getRules(""),e=0,r=n.length;e<r;e++)n[e](t)};CP.prototype.State=Jz();Zz.exports=CP});var n4=m((COe,r4)=>{"use strict";var wP=Ie().isSpace;function EP(t,e){var r=t.bMarks[e]+t.tShift[e],n=t.eMarks[e];return t.src.substr(r,n-r)}function t4(t){var e=[],r=0,n=t.length,i,o=!1,s=0,a="";for(i=t.charCodeAt(r);r<n;)i===124&&(o?(a+=t.substring(s,r-1),s=r):(e.push(a+t.substring(s,r)),a="",s=r+1)),o=i===92,r++,i=t.charCodeAt(r);return e.push(a+t.substring(s)),e}r4.exports=function(e,r,n,i){var o,s,a,c,u,l,f,d,p,h,g,v,C,y,E,w,x,_;if(r+2>n||(l=r+1,e.sCount[l]<e.blkIndent)||e.sCount[l]-e.blkIndent>=4||(a=e.bMarks[l]+e.tShift[l],a>=e.eMarks[l])||(x=e.src.charCodeAt(a++),x!==124&&x!==45&&x!==58)||a>=e.eMarks[l]||(_=e.src.charCodeAt(a++),_!==124&&_!==45&&_!==58&&!wP(_))||x===45&&wP(_))return!1;for(;a<e.eMarks[l];){if(o=e.src.charCodeAt(a),o!==124&&o!==45&&o!==58&&!wP(o))return!1;a++}for(s=EP(e,r+1),f=s.split("|"),h=[],c=0;c<f.length;c++){if(g=f[c].trim(),!g){if(c===0||c===f.length-1)continue;return!1}if(!/^:?-+:?$/.test(g))return!1;g.charCodeAt(g.length-1)===58?h.push(g.charCodeAt(0)===58?"center":"right"):g.charCodeAt(0)===58?h.push("left"):h.push("")}if(s=EP(e,r).trim(),s.indexOf("|")===-1||e.sCount[r]-e.blkIndent>=4||(f=t4(s),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop(),d=f.length,d===0||d!==h.length))return!1;if(i)return!0;for(y=e.parentType,e.parentType="table",w=e.md.block.ruler.getRules("blockquote"),p=e.push("table_open","table",1),p.map=v=[r,0],p=e.push("thead_open","thead",1),p.map=[r,r+1],p=e.push("tr_open","tr",1),p.map=[r,r+1],c=0;c<f.length;c++)p=e.push("th_open","th",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=f[c].trim(),p.children=[],p=e.push("th_close","th",-1);for(p=e.push("tr_close","tr",-1),p=e.push("thead_close","thead",-1),l=r+2;l<n&&!(e.sCount[l]<e.blkIndent);l++){for(E=!1,c=0,u=w.length;c<u;c++)if(w[c](e,l,n,!0)){E=!0;break}if(E||(s=EP(e,l).trim(),!s)||e.sCount[l]-e.blkIndent>=4)break;for(f=t4(s),f.length&&f[0]===""&&f.shift(),f.length&&f[f.length-1]===""&&f.pop(),l===r+2&&(p=e.push("tbody_open","tbody",1),p.map=C=[r+2,0]),p=e.push("tr_open","tr",1),p.map=[l,l+1],c=0;c<d;c++)p=e.push("td_open","td",1),h[c]&&(p.attrs=[["style","text-align:"+h[c]]]),p=e.push("inline","",0),p.content=f[c]?f[c].trim():"",p.children=[],p=e.push("td_close","td",-1);p=e.push("tr_close","tr",-1)}return C&&(p=e.push("tbody_close","tbody",-1),C[1]=l),p=e.push("table_close","table",-1),v[1]=l,e.parentType=y,e.line=l,!0}});var o4=m((wOe,i4)=>{"use strict";i4.exports=function(e,r,n){var i,o,s;if(e.sCount[r]-e.blkIndent<4)return!1;for(o=i=r+1;i<n;){if(e.isEmpty(i)){i++;continue}if(e.sCount[i]-e.blkIndent>=4){i++,o=i;continue}break}return e.line=o,s=e.push("code_block","code",0),s.content=e.getLines(r,o,4+e.blkIndent,!0),s.map=[r,e.line],!0}});var a4=m((EOe,s4)=>{"use strict";s4.exports=function(e,r,n,i){var o,s,a,c,u,l,f,d=!1,p=e.bMarks[r]+e.tShift[r],h=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||p+3>h||(o=e.src.charCodeAt(p),o!==126&&o!==96)||(u=p,p=e.skipChars(p,o),s=p-u,s<3)||(f=e.src.slice(u,p),a=e.src.slice(p,h),o===96&&a.indexOf(String.fromCharCode(o))>=0))return!1;if(i)return!0;for(c=r;c++,!(c>=n||(p=u=e.bMarks[c]+e.tShift[c],h=e.eMarks[c],p<h&&e.sCount[c]<e.blkIndent));)if(e.src.charCodeAt(p)===o&&!(e.sCount[c]-e.blkIndent>=4)&&(p=e.skipChars(p,o),!(p-u<s)&&(p=e.skipSpaces(p),!(p<h)))){d=!0;break}return s=e.sCount[r],e.line=c+(d?1:0),l=e.push("fence","code",0),l.info=a,l.content=e.getLines(r+1,c,s,!0),l.markup=f,l.map=[r,e.line],!0}});var l4=m((_Oe,u4)=>{"use strict";var c4=Ie().isSpace;u4.exports=function(e,r,n,i){var o,s,a,c,u,l,f,d,p,h,g,v,C,y,E,w,x,_,S,I,R=e.lineMax,T=e.bMarks[r]+e.tShift[r],U=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(T++)!==62)return!1;if(i)return!0;for(c=p=e.sCount[r]+1,e.src.charCodeAt(T)===32?(T++,c++,p++,o=!1,w=!0):e.src.charCodeAt(T)===9?(w=!0,(e.bsCount[r]+p)%4==3?(T++,c++,p++,o=!1):o=!0):w=!1,h=[e.bMarks[r]],e.bMarks[r]=T;T<U&&(s=e.src.charCodeAt(T),c4(s));){s===9?p+=4-(p+e.bsCount[r]+(o?1:0))%4:p++;T++}for(g=[e.bsCount[r]],e.bsCount[r]=e.sCount[r]+1+(w?1:0),l=T>=U,y=[e.sCount[r]],e.sCount[r]=p-c,E=[e.tShift[r]],e.tShift[r]=T-e.bMarks[r],_=e.md.block.ruler.getRules("blockquote"),C=e.parentType,e.parentType="blockquote",d=r+1;d<n&&(I=e.sCount[d]<e.blkIndent,T=e.bMarks[d]+e.tShift[d],U=e.eMarks[d],!(T>=U));d++){if(e.src.charCodeAt(T++)===62&&!I){for(c=p=e.sCount[d]+1,e.src.charCodeAt(T)===32?(T++,c++,p++,o=!1,w=!0):e.src.charCodeAt(T)===9?(w=!0,(e.bsCount[d]+p)%4==3?(T++,c++,p++,o=!1):o=!0):w=!1,h.push(e.bMarks[d]),e.bMarks[d]=T;T<U&&(s=e.src.charCodeAt(T),c4(s));){s===9?p+=4-(p+e.bsCount[d]+(o?1:0))%4:p++;T++}l=T>=U,g.push(e.bsCount[d]),e.bsCount[d]=e.sCount[d]+1+(w?1:0),y.push(e.sCount[d]),e.sCount[d]=p-c,E.push(e.tShift[d]),e.tShift[d]=T-e.bMarks[d];continue}if(l)break;for(x=!1,a=0,u=_.length;a<u;a++)if(_[a](e,d,n,!0)){x=!0;break}if(x){e.lineMax=d,e.blkIndent!==0&&(h.push(e.bMarks[d]),g.push(e.bsCount[d]),E.push(e.tShift[d]),y.push(e.sCount[d]),e.sCount[d]-=e.blkIndent);break}h.push(e.bMarks[d]),g.push(e.bsCount[d]),E.push(e.tShift[d]),y.push(e.sCount[d]),e.sCount[d]=-1}for(v=e.blkIndent,e.blkIndent=0,S=e.push("blockquote_open","blockquote",1),S.markup=">",S.map=f=[r,0],e.md.block.tokenize(e,r,d),S=e.push("blockquote_close","blockquote",-1),S.markup=">",e.lineMax=R,e.parentType=C,f[1]=e.line,a=0;a<E.length;a++)e.bMarks[a+r]=h[a],e.tShift[a+r]=E[a],e.sCount[a+r]=y[a],e.bsCount[a+r]=g[a];return e.blkIndent=v,!0}});var d4=m((xOe,f4)=>{"use strict";var zge=Ie().isSpace;f4.exports=function(e,r,n,i){var o,s,a,c,u=e.bMarks[r]+e.tShift[r],l=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(u++),o!==42&&o!==45&&o!==95))return!1;for(s=1;u<l;){if(a=e.src.charCodeAt(u++),a!==o&&!zge(a))return!1;a===o&&s++}return s<3?!1:(i||(e.line=r+1,c=e.push("hr","hr",0),c.map=[r,e.line],c.markup=Array(s+1).join(String.fromCharCode(o))),!0)}});var v4=m((bOe,g4)=>{"use strict";var p4=Ie().isSpace;function h4(t,e){var r,n,i,o;return n=t.bMarks[e]+t.tShift[e],i=t.eMarks[e],r=t.src.charCodeAt(n++),r!==42&&r!==45&&r!==43||n<i&&(o=t.src.charCodeAt(n),!p4(o))?-1:n}function m4(t,e){var r,n=t.bMarks[e]+t.tShift[e],i=n,o=t.eMarks[e];if(i+1>=o||(r=t.src.charCodeAt(i++),r<48||r>57))return-1;for(;;){if(i>=o)return-1;if(r=t.src.charCodeAt(i++),r>=48&&r<=57){if(i-n>=10)return-1;continue}if(r===41||r===46)break;return-1}return i<o&&(r=t.src.charCodeAt(i),!p4(r))?-1:i}function Kge(t,e){var r,n,i=t.level+2;for(r=e+2,n=t.tokens.length-2;r<n;r++)t.tokens[r].level===i&&t.tokens[r].type==="paragraph_open"&&(t.tokens[r+2].hidden=!0,t.tokens[r].hidden=!0,r+=2)}g4.exports=function(e,r,n,i){var o,s,a,c,u,l,f,d,p,h,g,v,C,y,E,w,x,_,S,I,R,T,U,W,K,oe,X,D,P=!1,O=!0;if(e.sCount[r]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[r]-e.listIndent>=4&&e.sCount[r]<e.blkIndent)return!1;if(i&&e.parentType==="paragraph"&&e.tShift[r]>=e.blkIndent&&(P=!0),(U=m4(e,r))>=0){if(f=!0,K=e.bMarks[r]+e.tShift[r],C=Number(e.src.substr(K,U-K-1)),P&&C!==1)return!1}else if((U=h4(e,r))>=0)f=!1;else return!1;if(P&&e.skipSpaces(U)>=e.eMarks[r])return!1;if(v=e.src.charCodeAt(U-1),i)return!0;for(g=e.tokens.length,f?(D=e.push("ordered_list_open","ol",1),C!==1&&(D.attrs=[["start",C]])):D=e.push("bullet_list_open","ul",1),D.map=h=[r,0],D.markup=String.fromCharCode(v),E=r,W=!1,X=e.md.block.ruler.getRules("list"),_=e.parentType,e.parentType="list";E<n;){for(T=U,y=e.eMarks[E],l=w=e.sCount[E]+U-(e.bMarks[r]+e.tShift[r]);T<y;){if(o=e.src.charCodeAt(T),o===9)w+=4-(w+e.bsCount[E])%4;else if(o===32)w++;else break;T++}if(s=T,s>=y?u=1:u=w-l,u>4&&(u=1),c=l+u,D=e.push("list_item_open","li",1),D.markup=String.fromCharCode(v),D.map=d=[r,0],R=e.tight,I=e.tShift[r],S=e.sCount[r],x=e.listIndent,e.listIndent=e.blkIndent,e.blkIndent=c,e.tight=!0,e.tShift[r]=s-e.bMarks[r],e.sCount[r]=w,s>=y&&e.isEmpty(r+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,r,n,!0),(!e.tight||W)&&(O=!1),W=e.line-r>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=x,e.tShift[r]=I,e.sCount[r]=S,e.tight=R,D=e.push("list_item_close","li",-1),D.markup=String.fromCharCode(v),E=r=e.line,d[1]=E,s=e.bMarks[r],E>=n||e.sCount[E]<e.blkIndent||e.sCount[r]-e.blkIndent>=4)break;for(oe=!1,a=0,p=X.length;a<p;a++)if(X[a](e,E,n,!0)){oe=!0;break}if(oe)break;if(f){if(U=m4(e,E),U<0)break}else if(U=h4(e,E),U<0)break;if(v!==e.src.charCodeAt(U-1))break}return f?D=e.push("ordered_list_close","ol",-1):D=e.push("bullet_list_close","ul",-1),D.markup=String.fromCharCode(v),h[1]=E,e.line=E,e.parentType=_,O&&Kge(e,g),!0}});var C4=m((SOe,y4)=>{"use strict";var Yge=Ie().normalizeReference,Ly=Ie().isSpace;y4.exports=function(e,r,n,i){var o,s,a,c,u,l,f,d,p,h,g,v,C,y,E,w,x=0,_=e.bMarks[r]+e.tShift[r],S=e.eMarks[r],I=r+1;if(e.sCount[r]-e.blkIndent>=4||e.src.charCodeAt(_)!==91)return!1;for(;++_<S;)if(e.src.charCodeAt(_)===93&&e.src.charCodeAt(_-1)!==92){if(_+1===S||e.src.charCodeAt(_+1)!==58)return!1;break}for(c=e.lineMax,E=e.md.block.ruler.getRules("reference"),h=e.parentType,e.parentType="reference";I<c&&!e.isEmpty(I);I++)if(!(e.sCount[I]-e.blkIndent>3)&&!(e.sCount[I]<0)){for(y=!1,l=0,f=E.length;l<f;l++)if(E[l](e,I,c,!0)){y=!0;break}if(y)break}for(C=e.getLines(r,I,e.blkIndent,!1).trim(),S=C.length,_=1;_<S;_++){if(o=C.charCodeAt(_),o===91)return!1;if(o===93){p=_;break}else o===10?x++:o===92&&(_++,_<S&&C.charCodeAt(_)===10&&x++)}if(p<0||C.charCodeAt(p+1)!==58)return!1;for(_=p+2;_<S;_++)if(o=C.charCodeAt(_),o===10)x++;else if(!Ly(o))break;if(g=e.md.helpers.parseLinkDestination(C,_,S),!g.ok||(u=e.md.normalizeLink(g.str),!e.md.validateLink(u)))return!1;for(_=g.pos,x+=g.lines,s=_,a=x,v=_;_<S;_++)if(o=C.charCodeAt(_),o===10)x++;else if(!Ly(o))break;for(g=e.md.helpers.parseLinkTitle(C,_,S),_<S&&v!==_&&g.ok?(w=g.str,_=g.pos,x+=g.lines):(w="",_=s,x=a);_<S&&(o=C.charCodeAt(_),!!Ly(o));)_++;if(_<S&&C.charCodeAt(_)!==10&&w)for(w="",_=s,x=a;_<S&&(o=C.charCodeAt(_),!!Ly(o));)_++;return _<S&&C.charCodeAt(_)!==10||(d=Yge(C.slice(1,p)),!d)?!1:(i||(typeof e.env.references=="undefined"&&(e.env.references={}),typeof e.env.references[d]=="undefined"&&(e.env.references[d]={title:w,href:u}),e.parentType=h,e.line=r+x+1),!0)}});var E4=m((POe,w4)=>{"use strict";w4.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]});var xP=m((IOe,_P)=>{"use strict";var Xge="[a-zA-Z_:][a-zA-Z0-9:._-]*",Qge="[^\"'=<>`\\x00-\\x20]+",Jge="'[^']*'",Zge='"[^"]*"',eve="(?:"+Qge+"|"+Jge+"|"+Zge+")",tve="(?:\\s+"+Xge+"(?:\\s*=\\s*"+eve+")?)",_4="<[A-Za-z][A-Za-z0-9\\-]*"+tve+"*\\s*\\/?>",x4="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",rve="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",nve="<[?][\\s\\S]*?[?]>",ive="<![A-Z]+\\s+[^>]*>",ove="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",sve=new RegExp("^(?:"+_4+"|"+x4+"|"+rve+"|"+nve+"|"+ive+"|"+ove+")"),ave=new RegExp("^(?:"+_4+"|"+x4+")");_P.exports.HTML_TAG_RE=sve;_P.exports.HTML_OPEN_CLOSE_TAG_RE=ave});var S4=m((AOe,b4)=>{"use strict";var cve=E4(),uve=xP().HTML_OPEN_CLOSE_TAG_RE,ju=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+cve.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(uve.source+"\\s*$"),/^$/,!1]];b4.exports=function(e,r,n,i){var o,s,a,c,u=e.bMarks[r]+e.tShift[r],l=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(u)!==60)return!1;for(c=e.src.slice(u,l),o=0;o<ju.length&&!ju[o][0].test(c);o++);if(o===ju.length)return!1;if(i)return ju[o][2];if(s=r+1,!ju[o][1].test(c)){for(;s<n&&!(e.sCount[s]<e.blkIndent);s++)if(u=e.bMarks[s]+e.tShift[s],l=e.eMarks[s],c=e.src.slice(u,l),ju[o][1].test(c)){c.length!==0&&s++;break}}return e.line=s,a=e.push("html_block","",0),a.map=[r,s],a.content=e.getLines(r,s,e.blkIndent,!0),!0}});var A4=m((ROe,I4)=>{"use strict";var P4=Ie().isSpace;I4.exports=function(e,r,n,i){var o,s,a,c,u=e.bMarks[r]+e.tShift[r],l=e.eMarks[r];if(e.sCount[r]-e.blkIndent>=4||(o=e.src.charCodeAt(u),o!==35||u>=l))return!1;for(s=1,o=e.src.charCodeAt(++u);o===35&&u<l&&s<=6;)s++,o=e.src.charCodeAt(++u);return s>6||u<l&&!P4(o)?!1:(i||(l=e.skipSpacesBack(l,u),a=e.skipCharsBack(l,35,u),a>u&&P4(e.src.charCodeAt(a-1))&&(l=a),e.line=r+1,c=e.push("heading_open","h"+String(s),1),c.markup="########".slice(0,s),c.map=[r,e.line],c=e.push("inline","",0),c.content=e.src.slice(u,l).trim(),c.map=[r,e.line],c.children=[],c=e.push("heading_close","h"+String(s),-1),c.markup="########".slice(0,s)),!0)}});var T4=m((TOe,R4)=>{"use strict";R4.exports=function(e,r,n){var i,o,s,a,c,u,l,f,d,p=r+1,h,g=e.md.block.ruler.getRules("paragraph");if(e.sCount[r]-e.blkIndent>=4)return!1;for(h=e.parentType,e.parentType="paragraph";p<n&&!e.isEmpty(p);p++)if(!(e.sCount[p]-e.blkIndent>3)){if(e.sCount[p]>=e.blkIndent&&(u=e.bMarks[p]+e.tShift[p],l=e.eMarks[p],u<l&&(d=e.src.charCodeAt(u),(d===45||d===61)&&(u=e.skipChars(u,d),u=e.skipSpaces(u),u>=l)))){f=d===61?1:2;break}if(!(e.sCount[p]<0)){for(o=!1,s=0,a=g.length;s<a;s++)if(g[s](e,p,n,!0)){o=!0;break}if(o)break}}return f?(i=e.getLines(r,p,e.blkIndent,!1).trim(),e.line=p+1,c=e.push("heading_open","h"+String(f),1),c.markup=String.fromCharCode(d),c.map=[r,e.line],c=e.push("inline","",0),c.content=i,c.map=[r,e.line-1],c.children=[],c=e.push("heading_close","h"+String(f),-1),c.markup=String.fromCharCode(d),e.parentType=h,!0):!1}});var D4=m((kOe,k4)=>{"use strict";k4.exports=function(e,r){var n,i,o,s,a,c,u=r+1,l=e.md.block.ruler.getRules("paragraph"),f=e.lineMax;for(c=e.parentType,e.parentType="paragraph";u<f&&!e.isEmpty(u);u++)if(!(e.sCount[u]-e.blkIndent>3)&&!(e.sCount[u]<0)){for(i=!1,o=0,s=l.length;o<s;o++)if(l[o](e,u,f,!0)){i=!0;break}if(i)break}return n=e.getLines(r,u,e.blkIndent,!1).trim(),e.line=u,a=e.push("paragraph_open","p",1),a.map=[r,e.line],a=e.push("inline","",0),a.content=n,a.map=[r,e.line],a.children=[],a=e.push("paragraph_close","p",-1),e.parentType=c,!0}});var L4=m((DOe,N4)=>{"use strict";var O4=Ny(),Fy=Ie().isSpace;function ai(t,e,r,n){var i,o,s,a,c,u,l,f;for(this.src=t,this.md=e,this.env=r,this.tokens=n,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",o=this.src,f=!1,s=a=u=l=0,c=o.length;a<c;a++){if(i=o.charCodeAt(a),!f)if(Fy(i)){u++,i===9?l+=4-l%4:l++;continue}else f=!0;(i===10||a===c-1)&&(i!==10&&a++,this.bMarks.push(s),this.eMarks.push(a),this.tShift.push(u),this.sCount.push(l),this.bsCount.push(0),f=!1,u=0,l=0,s=a+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}ai.prototype.push=function(t,e,r){var n=new O4(t,e,r);return n.block=!0,r<0&&this.level--,n.level=this.level,r>0&&this.level++,this.tokens.push(n),n};ai.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};ai.prototype.skipEmptyLines=function(e){for(var r=this.lineMax;e<r&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};ai.prototype.skipSpaces=function(e){for(var r,n=this.src.length;e<n&&(r=this.src.charCodeAt(e),!!Fy(r));e++);return e};ai.prototype.skipSpacesBack=function(e,r){if(e<=r)return e;for(;e>r;)if(!Fy(this.src.charCodeAt(--e)))return e+1;return e};ai.prototype.skipChars=function(e,r){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===r;e++);return e};ai.prototype.skipCharsBack=function(e,r,n){if(e<=n)return e;for(;e>n;)if(r!==this.src.charCodeAt(--e))return e+1;return e};ai.prototype.getLines=function(e,r,n,i){var o,s,a,c,u,l,f,d=e;if(e>=r)return"";for(l=new Array(r-e),o=0;d<r;d++,o++){for(s=0,f=c=this.bMarks[d],d+1<r||i?u=this.eMarks[d]+1:u=this.eMarks[d];c<u&&s<n;){if(a=this.src.charCodeAt(c),Fy(a))a===9?s+=4-(s+this.bsCount[d])%4:s++;else if(c-f<this.tShift[d])s++;else break;c++}s>n?l[o]=new Array(s-n+1).join(" ")+this.src.slice(c,u):l[o]=this.src.slice(c,u)}return l.join("")};ai.prototype.Token=O4;N4.exports=ai});var q4=m((OOe,F4)=>{"use strict";var lve=Dy(),qy=[["table",n4(),["paragraph","reference"]],["code",o4()],["fence",a4(),["paragraph","reference","blockquote","list"]],["blockquote",l4(),["paragraph","reference","blockquote","list"]],["hr",d4(),["paragraph","reference","blockquote","list"]],["list",v4(),["paragraph","reference","blockquote"]],["reference",C4()],["html_block",S4(),["paragraph","reference","blockquote"]],["heading",A4(),["paragraph","reference","blockquote"]],["lheading",T4()],["paragraph",D4()]];function My(){this.ruler=new lve;for(var t=0;t<qy.length;t++)this.ruler.push(qy[t][0],qy[t][1],{alt:(qy[t][2]||[]).slice()})}My.prototype.tokenize=function(t,e,r){for(var n,i,o=this.ruler.getRules(""),s=o.length,a=e,c=!1,u=t.md.options.maxNesting;a<r&&(t.line=a=t.skipEmptyLines(a),!(a>=r||t.sCount[a]<t.blkIndent));){if(t.level>=u){t.line=r;break}for(i=0;i<s&&(n=o[i](t,a,r,!1),!n);i++);t.tight=!c,t.isEmpty(t.line-1)&&(c=!0),a=t.line,a<r&&t.isEmpty(a)&&(c=!0,a++,t.line=a)}};My.prototype.parse=function(t,e,r,n){var i;!t||(i=new this.State(t,e,r,n),this.tokenize(i,i.line,i.lineMax))};My.prototype.State=L4();F4.exports=My});var $4=m((NOe,M4)=>{"use strict";function fve(t){switch(t){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}M4.exports=function(e,r){for(var n=e.pos;n<e.posMax&&!fve(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(r||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}});var j4=m((LOe,U4)=>{"use strict";var dve=Ie().isSpace;U4.exports=function(e,r){var n,i,o=e.pos;if(e.src.charCodeAt(o)!==10)return!1;for(n=e.pending.length-1,i=e.posMax,r||(n>=0&&e.pending.charCodeAt(n)===32?n>=1&&e.pending.charCodeAt(n-1)===32?(e.pending=e.pending.replace(/ +$/,""),e.push("hardbreak","br",0)):(e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0)):e.push("softbreak","br",0)),o++;o<i&&dve(e.src.charCodeAt(o));)o++;return e.pos=o,!0}});var V4=m((FOe,B4)=>{"use strict";var pve=Ie().isSpace,bP=[];for(var H4=0;H4<256;H4++)bP.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){bP[t.charCodeAt(0)]=1});B4.exports=function(e,r){var n,i=e.pos,o=e.posMax;if(e.src.charCodeAt(i)!==92)return!1;if(i++,i<o){if(n=e.src.charCodeAt(i),n<256&&bP[n]!==0)return r||(e.pending+=e.src[i]),e.pos+=2,!0;if(n===10){for(r||e.push("hardbreak","br",0),i++;i<o&&(n=e.src.charCodeAt(i),!!pve(n));)i++;return e.pos=i,!0}}return r||(e.pending+="\\"),e.pos++,!0}});var W4=m((qOe,G4)=>{"use strict";G4.exports=function(e,r){var n,i,o,s,a,c,u,l,f=e.pos,d=e.src.charCodeAt(f);if(d!==96)return!1;for(n=f,f++,i=e.posMax;f<i&&e.src.charCodeAt(f)===96;)f++;if(o=e.src.slice(n,f),u=o.length,e.backticksScanned&&(e.backticks[u]||0)<=n)return r||(e.pending+=o),e.pos+=u,!0;for(a=c=f;(a=e.src.indexOf("`",c))!==-1;){for(c=a+1;c<i&&e.src.charCodeAt(c)===96;)c++;if(l=c-a,l===u)return r||(s=e.push("code_inline","code",0),s.markup=o,s.content=e.src.slice(f,a).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),e.pos=c,!0;e.backticks[l]=a}return e.backticksScanned=!0,r||(e.pending+=o),e.pos+=u,!0}});var PP=m((MOe,SP)=>{"use strict";SP.exports.tokenize=function(e,r){var n,i,o,s,a,c=e.pos,u=e.src.charCodeAt(c);if(r||u!==126||(i=e.scanDelims(e.pos,!0),s=i.length,a=String.fromCharCode(u),s<2))return!1;for(s%2&&(o=e.push("text","",0),o.content=a,s--),n=0;n<s;n+=2)o=e.push("text","",0),o.content=a+a,e.delimiters.push({marker:u,length:0,jump:n/2,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function z4(t,e){var r,n,i,o,s,a=[],c=e.length;for(r=0;r<c;r++)i=e[r],i.marker===126&&i.end!==-1&&(o=e[i.end],s=t.tokens[i.token],s.type="s_open",s.tag="s",s.nesting=1,s.markup="~~",s.content="",s=t.tokens[o.token],s.type="s_close",s.tag="s",s.nesting=-1,s.markup="~~",s.content="",t.tokens[o.token-1].type==="text"&&t.tokens[o.token-1].content==="~"&&a.push(o.token-1));for(;a.length;){for(r=a.pop(),n=r+1;n<t.tokens.length&&t.tokens[n].type==="s_close";)n++;n--,r!==n&&(s=t.tokens[n],t.tokens[n]=t.tokens[r],t.tokens[r]=s)}}SP.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(z4(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&z4(e,n[r].delimiters)}});var AP=m(($Oe,IP)=>{"use strict";IP.exports.tokenize=function(e,r){var n,i,o,s=e.pos,a=e.src.charCodeAt(s);if(r||a!==95&&a!==42)return!1;for(i=e.scanDelims(e.pos,a===42),n=0;n<i.length;n++)o=e.push("text","",0),o.content=String.fromCharCode(a),e.delimiters.push({marker:a,length:i.length,jump:n,token:e.tokens.length-1,end:-1,open:i.can_open,close:i.can_close});return e.pos+=i.length,!0};function K4(t,e){var r,n,i,o,s,a,c=e.length;for(r=c-1;r>=0;r--)n=e[r],!(n.marker!==95&&n.marker!==42)&&n.end!==-1&&(i=e[n.end],a=r>0&&e[r-1].end===n.end+1&&e[r-1].token===n.token-1&&e[n.end+1].token===i.token+1&&e[r-1].marker===n.marker,s=String.fromCharCode(n.marker),o=t.tokens[n.token],o.type=a?"strong_open":"em_open",o.tag=a?"strong":"em",o.nesting=1,o.markup=a?s+s:s,o.content="",o=t.tokens[i.token],o.type=a?"strong_close":"em_close",o.tag=a?"strong":"em",o.nesting=-1,o.markup=a?s+s:s,o.content="",a&&(t.tokens[e[r-1].token].content="",t.tokens[e[n.end+1].token].content="",r--))}IP.exports.postProcess=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(K4(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&K4(e,n[r].delimiters)}});var X4=m((UOe,Y4)=>{"use strict";var hve=Ie().normalizeReference,RP=Ie().isSpace;Y4.exports=function(e,r){var n,i,o,s,a,c,u,l,f,d="",p="",h=e.pos,g=e.posMax,v=e.pos,C=!0;if(e.src.charCodeAt(e.pos)!==91||(a=e.pos+1,s=e.md.helpers.parseLinkLabel(e,e.pos,!0),s<0))return!1;if(c=s+1,c<g&&e.src.charCodeAt(c)===40){for(C=!1,c++;c<g&&(i=e.src.charCodeAt(c),!(!RP(i)&&i!==10));c++);if(c>=g)return!1;if(v=c,u=e.md.helpers.parseLinkDestination(e.src,c,e.posMax),u.ok){for(d=e.md.normalizeLink(u.str),e.md.validateLink(d)?c=u.pos:d="",v=c;c<g&&(i=e.src.charCodeAt(c),!(!RP(i)&&i!==10));c++);if(u=e.md.helpers.parseLinkTitle(e.src,c,e.posMax),c<g&&v!==c&&u.ok)for(p=u.str,c=u.pos;c<g&&(i=e.src.charCodeAt(c),!(!RP(i)&&i!==10));c++);}(c>=g||e.src.charCodeAt(c)!==41)&&(C=!0),c++}if(C){if(typeof e.env.references=="undefined")return!1;if(c<g&&e.src.charCodeAt(c)===91?(v=c+1,c=e.md.helpers.parseLinkLabel(e,c),c>=0?o=e.src.slice(v,c++):c=s+1):c=s+1,o||(o=e.src.slice(a,s)),l=e.env.references[hve(o)],!l)return e.pos=h,!1;d=l.href,p=l.title}return r||(e.pos=a,e.posMax=s,f=e.push("link_open","a",1),f.attrs=n=[["href",d]],p&&n.push(["title",p]),e.md.inline.tokenize(e),f=e.push("link_close","a",-1)),e.pos=c,e.posMax=g,!0}});var J4=m((jOe,Q4)=>{"use strict";var mve=Ie().normalizeReference,TP=Ie().isSpace;Q4.exports=function(e,r){var n,i,o,s,a,c,u,l,f,d,p,h,g,v="",C=e.pos,y=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91||(c=e.pos+2,a=e.md.helpers.parseLinkLabel(e,e.pos+1,!1),a<0))return!1;if(u=a+1,u<y&&e.src.charCodeAt(u)===40){for(u++;u<y&&(i=e.src.charCodeAt(u),!(!TP(i)&&i!==10));u++);if(u>=y)return!1;for(g=u,f=e.md.helpers.parseLinkDestination(e.src,u,e.posMax),f.ok&&(v=e.md.normalizeLink(f.str),e.md.validateLink(v)?u=f.pos:v=""),g=u;u<y&&(i=e.src.charCodeAt(u),!(!TP(i)&&i!==10));u++);if(f=e.md.helpers.parseLinkTitle(e.src,u,e.posMax),u<y&&g!==u&&f.ok)for(d=f.str,u=f.pos;u<y&&(i=e.src.charCodeAt(u),!(!TP(i)&&i!==10));u++);else d="";if(u>=y||e.src.charCodeAt(u)!==41)return e.pos=C,!1;u++}else{if(typeof e.env.references=="undefined")return!1;if(u<y&&e.src.charCodeAt(u)===91?(g=u+1,u=e.md.helpers.parseLinkLabel(e,u),u>=0?s=e.src.slice(g,u++):u=a+1):u=a+1,s||(s=e.src.slice(c,a)),l=e.env.references[mve(s)],!l)return e.pos=C,!1;v=l.href,d=l.title}return r||(o=e.src.slice(c,a),e.md.inline.parse(o,e.md,e.env,h=[]),p=e.push("image","img",0),p.attrs=n=[["src",v],["alt",""]],p.children=h,p.content=o,d&&n.push(["title",d])),e.pos=u,e.posMax=y,!0}});var e6=m((HOe,Z4)=>{"use strict";var gve=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,vve=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;Z4.exports=function(e,r){var n,i,o,s,a,c,u=e.pos;if(e.src.charCodeAt(u)!==60)return!1;for(a=e.pos,c=e.posMax;;){if(++u>=c||(s=e.src.charCodeAt(u),s===60))return!1;if(s===62)break}return n=e.src.slice(a+1,u),vve.test(n)?(i=e.md.normalizeLink(n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):gve.test(n)?(i=e.md.normalizeLink("mailto:"+n),e.md.validateLink(i)?(r||(o=e.push("link_open","a",1),o.attrs=[["href",i]],o.markup="autolink",o.info="auto",o=e.push("text","",0),o.content=e.md.normalizeLinkText(n),o=e.push("link_close","a",-1),o.markup="autolink",o.info="auto"),e.pos+=n.length+2,!0):!1):!1}});var r6=m((BOe,t6)=>{"use strict";var yve=xP().HTML_TAG_RE;function Cve(t){var e=t|32;return e>=97&&e<=122}t6.exports=function(e,r){var n,i,o,s,a=e.pos;return!e.md.options.html||(o=e.posMax,e.src.charCodeAt(a)!==60||a+2>=o)||(n=e.src.charCodeAt(a+1),n!==33&&n!==63&&n!==47&&!Cve(n))||(i=e.src.slice(a).match(yve),!i)?!1:(r||(s=e.push("html_inline","",0),s.content=e.src.slice(a,a+i[0].length)),e.pos+=i[0].length,!0)}});var s6=m((VOe,o6)=>{"use strict";var n6=pP(),wve=Ie().has,Eve=Ie().isValidEntityCode,i6=Ie().fromCodePoint,_ve=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,xve=/^&([a-z][a-z0-9]{1,31});/i;o6.exports=function(e,r){var n,i,o,s=e.pos,a=e.posMax;if(e.src.charCodeAt(s)!==38)return!1;if(s+1<a){if(n=e.src.charCodeAt(s+1),n===35){if(o=e.src.slice(s).match(_ve),o)return r||(i=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),e.pending+=Eve(i)?i6(i):i6(65533)),e.pos+=o[0].length,!0}else if(o=e.src.slice(s).match(xve),o&&wve(n6,o[1]))return r||(e.pending+=n6[o[1]]),e.pos+=o[0].length,!0}return r||(e.pending+="&"),e.pos++,!0}});var u6=m((GOe,c6)=>{"use strict";function a6(t,e){var r,n,i,o,s,a,c,u,l={},f=e.length;for(r=0;r<f;r++)if(i=e[r],i.length=i.length||0,!!i.close){for(l.hasOwnProperty(i.marker)||(l[i.marker]=[-1,-1,-1]),s=l[i.marker][i.length%3],n=r-i.jump-1,n<-1&&(n=-1),a=n;n>s;n-=o.jump+1)if(o=e[n],o.marker===i.marker&&o.open&&o.end<0&&(c=!1,(o.close||i.open)&&(o.length+i.length)%3==0&&(o.length%3!=0||i.length%3!=0)&&(c=!0),!c)){u=n>0&&!e[n-1].open?e[n-1].jump+1:0,i.jump=r-n+u,i.open=!1,o.end=r,o.jump=u,o.close=!1,a=-1;break}a!==-1&&(l[i.marker][(i.length||0)%3]=a)}}c6.exports=function(e){var r,n=e.tokens_meta,i=e.tokens_meta.length;for(a6(e,e.delimiters),r=0;r<i;r++)n[r]&&n[r].delimiters&&a6(e,n[r].delimiters)}});var f6=m((WOe,l6)=>{"use strict";l6.exports=function(e){var r,n,i=0,o=e.tokens,s=e.tokens.length;for(r=n=0;r<s;r++)o[r].nesting<0&&i--,o[r].level=i,o[r].nesting>0&&i++,o[r].type==="text"&&r+1<s&&o[r+1].type==="text"?o[r+1].content=o[r].content+o[r+1].content:(r!==n&&(o[n]=o[r]),n++);r!==n&&(o.length=n)}});var g6=m((zOe,m6)=>{"use strict";var kP=Ny(),d6=Ie().isWhiteSpace,p6=Ie().isPunctChar,h6=Ie().isMdAsciiPunct;function Rd(t,e,r,n){this.src=t,this.env=r,this.md=e,this.tokens=n,this.tokens_meta=Array(n.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1}Rd.prototype.pushPending=function(){var t=new kP("text","",0);return t.content=this.pending,t.level=this.pendingLevel,this.tokens.push(t),this.pending="",t};Rd.prototype.push=function(t,e,r){this.pending&&this.pushPending();var n=new kP(t,e,r),i=null;return r<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),n.level=this.level,r>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],i={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(n),this.tokens_meta.push(i),n};Rd.prototype.scanDelims=function(t,e){var r=t,n,i,o,s,a,c,u,l,f,d=!0,p=!0,h=this.posMax,g=this.src.charCodeAt(t);for(n=t>0?this.src.charCodeAt(t-1):32;r<h&&this.src.charCodeAt(r)===g;)r++;return o=r-t,i=r<h?this.src.charCodeAt(r):32,u=h6(n)||p6(String.fromCharCode(n)),f=h6(i)||p6(String.fromCharCode(i)),c=d6(n),l=d6(i),l?d=!1:f&&(c||u||(d=!1)),c?p=!1:u&&(l||f||(p=!1)),e?(s=d,a=p):(s=d&&(!p||u),a=p&&(!d||f)),{can_open:s,can_close:a,length:o}};Rd.prototype.Token=kP;m6.exports=Rd});var C6=m((KOe,y6)=>{"use strict";var v6=Dy(),DP=[["text",$4()],["newline",j4()],["escape",V4()],["backticks",W4()],["strikethrough",PP().tokenize],["emphasis",AP().tokenize],["link",X4()],["image",J4()],["autolink",e6()],["html_inline",r6()],["entity",s6()]],OP=[["balance_pairs",u6()],["strikethrough",PP().postProcess],["emphasis",AP().postProcess],["text_collapse",f6()]];function Td(){var t;for(this.ruler=new v6,t=0;t<DP.length;t++)this.ruler.push(DP[t][0],DP[t][1]);for(this.ruler2=new v6,t=0;t<OP.length;t++)this.ruler2.push(OP[t][0],OP[t][1])}Td.prototype.skipToken=function(t){var e,r,n=t.pos,i=this.ruler.getRules(""),o=i.length,s=t.md.options.maxNesting,a=t.cache;if(typeof a[n]!="undefined"){t.pos=a[n];return}if(t.level<s)for(r=0;r<o&&(t.level++,e=i[r](t,!0),t.level--,!e);r++);else t.pos=t.posMax;e||t.pos++,a[n]=t.pos};Td.prototype.tokenize=function(t){for(var e,r,n=this.ruler.getRules(""),i=n.length,o=t.posMax,s=t.md.options.maxNesting;t.pos<o;){if(t.level<s)for(r=0;r<i&&(e=n[r](t,!1),!e);r++);if(e){if(t.pos>=o)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};Td.prototype.parse=function(t,e,r,n){var i,o,s,a=new this.State(t,e,r,n);for(this.tokenize(a),o=this.ruler2.getRules(""),s=o.length,i=0;i<s;i++)o[i](a)};Td.prototype.State=g6();y6.exports=Td});var E6=m((YOe,w6)=>{"use strict";w6.exports=function(t){var e={};e.src_Any=mP().source,e.src_Cc=gP().source,e.src_Z=vP().source,e.src_P=Iy().source,e.src_ZPCc=[e.src_Z,e.src_P,e.src_Cc].join("|"),e.src_ZCc=[e.src_Z,e.src_Cc].join("|");var r="[><\uFF5C]";return e.src_pseudo_letter="(?:(?!"+r+"|"+e.src_ZPCc+")"+e.src_Any+")",e.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",e.src_auth="(?:(?:(?!"+e.src_ZCc+"|[@/\\[\\]()]).)+@)?",e.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",e.src_host_terminator="(?=$|"+r+"|"+e.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+e.src_ZPCc+"))",e.src_path="(?:[/?#](?:(?!"+e.src_ZCc+"|"+r+`|[()[\\]{}.,"'?!\\-]).|\\[(?:(?!`+e.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+e.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+e.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+e.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+e.src_ZCc+"|[']).)+\\'|\\'(?="+e.src_pseudo_letter+"|[-]).|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+e.src_ZCc+"|[.]).|"+(t&&t["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+e.src_ZCc+").|\\!+(?!"+e.src_ZCc+"|[!]).|\\?(?!"+e.src_ZCc+"|[?]).)+|\\/)?",e.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',e.src_xn="xn--[a-z0-9\\-]{1,59}",e.src_domain_root="(?:"+e.src_xn+"|"+e.src_pseudo_letter+"{1,63})",e.src_domain="(?:"+e.src_xn+"|(?:"+e.src_pseudo_letter+")|(?:"+e.src_pseudo_letter+"(?:-|"+e.src_pseudo_letter+"){0,61}"+e.src_pseudo_letter+"))",e.src_host="(?:(?:(?:(?:"+e.src_domain+")\\.)*"+e.src_domain+"))",e.tpl_host_fuzzy="(?:"+e.src_ip4+"|(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%)))",e.tpl_host_no_ip_fuzzy="(?:(?:(?:"+e.src_domain+")\\.)+(?:%TLDS%))",e.src_host_strict=e.src_host+e.src_host_terminator,e.tpl_host_fuzzy_strict=e.tpl_host_fuzzy+e.src_host_terminator,e.src_host_port_strict=e.src_host+e.src_port+e.src_host_terminator,e.tpl_host_port_fuzzy_strict=e.tpl_host_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_port_no_ip_fuzzy_strict=e.tpl_host_no_ip_fuzzy+e.src_port+e.src_host_terminator,e.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+e.src_ZPCc+"|>|$))",e.tpl_email_fuzzy="(^|"+r+'|"|\\(|'+e.src_ZCc+")("+e.src_email_name+"@"+e.tpl_host_fuzzy_strict+")",e.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_fuzzy_strict+e.src_path+")",e.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|\uFF5C]|"+e.src_ZPCc+"))((?![$+<=>^`|\uFF5C])"+e.tpl_host_port_no_ip_fuzzy_strict+e.src_path+")",e}});var I6=m((XOe,P6)=>{"use strict";function NP(t){var e=Array.prototype.slice.call(arguments,1);return e.forEach(function(r){!r||Object.keys(r).forEach(function(n){t[n]=r[n]})}),t}function $y(t){return Object.prototype.toString.call(t)}function bve(t){return $y(t)==="[object String]"}function Sve(t){return $y(t)==="[object Object]"}function Pve(t){return $y(t)==="[object RegExp]"}function _6(t){return $y(t)==="[object Function]"}function Ive(t){return t.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var x6={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function Ave(t){return Object.keys(t||{}).reduce(function(e,r){return e||x6.hasOwnProperty(r)},!1)}var Rve={"http:":{validate:function(t,e,r){var n=t.slice(e);return r.re.http||(r.re.http=new RegExp("^\\/\\/"+r.re.src_auth+r.re.src_host_port_strict+r.re.src_path,"i")),r.re.http.test(n)?n.match(r.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(t,e,r){var n=t.slice(e);return r.re.no_http||(r.re.no_http=new RegExp("^"+r.re.src_auth+"(?:localhost|(?:(?:"+r.re.src_domain+")\\.)+"+r.re.src_domain_root+")"+r.re.src_port+r.re.src_host_terminator+r.re.src_path,"i")),r.re.no_http.test(n)?e>=3&&t[e-3]===":"||e>=3&&t[e-3]==="/"?0:n.match(r.re.no_http)[0].length:0}},"mailto:":{validate:function(t,e,r){var n=t.slice(e);return r.re.mailto||(r.re.mailto=new RegExp("^"+r.re.src_email_name+"@"+r.re.src_host_strict,"i")),r.re.mailto.test(n)?n.match(r.re.mailto)[0].length:0}}},Tve="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",kve="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|\u0440\u0444".split("|");function Dve(t){t.__index__=-1,t.__text_cache__=""}function Ove(t){return function(e,r){var n=e.slice(r);return t.test(n)?n.match(t)[0].length:0}}function b6(){return function(t,e){e.normalize(t)}}function Uy(t){var e=t.re=E6()(t.__opts__),r=t.__tlds__.slice();t.onCompile(),t.__tlds_replaced__||r.push(Tve),r.push(e.src_xn),e.src_tlds=r.join("|");function n(a){return a.replace("%TLDS%",e.src_tlds)}e.email_fuzzy=RegExp(n(e.tpl_email_fuzzy),"i"),e.link_fuzzy=RegExp(n(e.tpl_link_fuzzy),"i"),e.link_no_ip_fuzzy=RegExp(n(e.tpl_link_no_ip_fuzzy),"i"),e.host_fuzzy_test=RegExp(n(e.tpl_host_fuzzy_test),"i");var i=[];t.__compiled__={};function o(a,c){throw new Error('(LinkifyIt) Invalid schema "'+a+'": '+c)}Object.keys(t.__schemas__).forEach(function(a){var c=t.__schemas__[a];if(c!==null){var u={validate:null,link:null};if(t.__compiled__[a]=u,Sve(c)){Pve(c.validate)?u.validate=Ove(c.validate):_6(c.validate)?u.validate=c.validate:o(a,c),_6(c.normalize)?u.normalize=c.normalize:c.normalize?o(a,c):u.normalize=b6();return}if(bve(c)){i.push(a);return}o(a,c)}}),i.forEach(function(a){!t.__compiled__[t.__schemas__[a]]||(t.__compiled__[a].validate=t.__compiled__[t.__schemas__[a]].validate,t.__compiled__[a].normalize=t.__compiled__[t.__schemas__[a]].normalize)}),t.__compiled__[""]={validate:null,normalize:b6()};var s=Object.keys(t.__compiled__).filter(function(a){return a.length>0&&t.__compiled__[a]}).map(Ive).join("|");t.re.schema_test=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","i"),t.re.schema_search=RegExp("(^|(?!_)(?:[><\uFF5C]|"+e.src_ZPCc+"))("+s+")","ig"),t.re.pretest=RegExp("("+t.re.schema_test.source+")|("+t.re.host_fuzzy_test.source+")|@","i"),Dve(t)}function Nve(t,e){var r=t.__index__,n=t.__last_index__,i=t.__text_cache__.slice(r,n);this.schema=t.__schema__.toLowerCase(),this.index=r+e,this.lastIndex=n+e,this.raw=i,this.text=i,this.url=i}function S6(t,e){var r=new Nve(t,e);return t.__compiled__[r.schema].normalize(r,t),r}function yn(t,e){if(!(this instanceof yn))return new yn(t,e);e||Ave(t)&&(e=t,t={}),this.__opts__=NP({},x6,e),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=NP({},Rve,t),this.__compiled__={},this.__tlds__=kve,this.__tlds_replaced__=!1,this.re={},Uy(this)}yn.prototype.add=function(e,r){return this.__schemas__[e]=r,Uy(this),this};yn.prototype.set=function(e){return this.__opts__=NP(this.__opts__,e),this};yn.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var r,n,i,o,s,a,c,u,l;if(this.re.schema_test.test(e)){for(c=this.re.schema_search,c.lastIndex=0;(r=c.exec(e))!==null;)if(o=this.testSchemaAt(e,r[2],c.lastIndex),o){this.__schema__=r[2],this.__index__=r.index+r[1].length,this.__last_index__=r.index+r[0].length+o;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=e.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(n=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=n.index+n[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=n.index+n[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=e.indexOf("@"),l>=0&&(i=e.match(this.re.email_fuzzy))!==null&&(s=i.index+i[1].length,a=i.index+i[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&a>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=a))),this.__index__>=0};yn.prototype.pretest=function(e){return this.re.pretest.test(e)};yn.prototype.testSchemaAt=function(e,r,n){return this.__compiled__[r.toLowerCase()]?this.__compiled__[r.toLowerCase()].validate(e,n,this):0};yn.prototype.match=function(e){var r=0,n=[];this.__index__>=0&&this.__text_cache__===e&&(n.push(S6(this,r)),r=this.__last_index__);for(var i=r?e.slice(r):e;this.test(i);)n.push(S6(this,r)),i=i.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};yn.prototype.tlds=function(e,r){return e=Array.isArray(e)?e:[e],r?(this.__tlds__=this.__tlds__.concat(e).sort().filter(function(n,i,o){return n!==o[i-1]}).reverse(),Uy(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,Uy(this),this)};yn.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),e.schema==="mailto:"&&!/^mailto:/i.test(e.url)&&(e.url="mailto:"+e.url)};yn.prototype.onCompile=function(){};P6.exports=yn});var R6=m((QOe,A6)=>{"use strict";A6.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}});var k6=m((JOe,T6)=>{"use strict";T6.exports={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","text_collapse"]}}}});var O6=m((ZOe,D6)=>{"use strict";D6.exports={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"\u201C\u201D\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","text_collapse"]}}}});var q6=m((eNe,F6)=>{"use strict";var kd=Ie(),Lve=Iz(),Fve=Rz(),qve=e4(),Mve=q4(),$ve=C6(),Uve=I6(),ya=hP(),N6=require("punycode"),jve={default:R6(),zero:k6(),commonmark:O6()},Hve=/^(vbscript|javascript|file|data):/,Bve=/^data:image\/(gif|png|jpeg|webp);/;function Vve(t){var e=t.trim().toLowerCase();return Hve.test(e)?!!Bve.test(e):!0}var L6=["http:","https:","mailto:"];function Gve(t){var e=ya.parse(t,!0);if(e.hostname&&(!e.protocol||L6.indexOf(e.protocol)>=0))try{e.hostname=N6.toASCII(e.hostname)}catch(r){}return ya.encode(ya.format(e))}function Wve(t){var e=ya.parse(t,!0);if(e.hostname&&(!e.protocol||L6.indexOf(e.protocol)>=0))try{e.hostname=N6.toUnicode(e.hostname)}catch(r){}return ya.decode(ya.format(e),ya.decode.defaultChars+"%")}function Cn(t,e){if(!(this instanceof Cn))return new Cn(t,e);e||kd.isString(t)||(e=t||{},t="default"),this.inline=new $ve,this.block=new Mve,this.core=new qve,this.renderer=new Fve,this.linkify=new Uve,this.validateLink=Vve,this.normalizeLink=Gve,this.normalizeLinkText=Wve,this.utils=kd,this.helpers=kd.assign({},Lve),this.options={},this.configure(t),e&&this.set(e)}Cn.prototype.set=function(t){return kd.assign(this.options,t),this};Cn.prototype.configure=function(t){var e=this,r;if(kd.isString(t)&&(r=t,t=jve[r],!t))throw new Error('Wrong `markdown-it` preset "'+r+'", check name');if(!t)throw new Error("Wrong `markdown-it` preset, can't be empty");return t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enableOnly(t.components[n].rules),t.components[n].rules2&&e[n].ruler2.enableOnly(t.components[n].rules2)}),this};Cn.prototype.enable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.enable(t,!0))},this),r=r.concat(this.inline.ruler2.enable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+n);return this};Cn.prototype.disable=function(t,e){var r=[];Array.isArray(t)||(t=[t]),["core","block","inline"].forEach(function(i){r=r.concat(this[i].ruler.disable(t,!0))},this),r=r.concat(this.inline.ruler2.disable(t,!0));var n=t.filter(function(i){return r.indexOf(i)<0});if(n.length&&!e)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+n);return this};Cn.prototype.use=function(t){var e=[this].concat(Array.prototype.slice.call(arguments,1));return t.apply(t,e),this};Cn.prototype.parse=function(t,e){if(typeof t!="string")throw new Error("Input data should be a String");var r=new this.core.State(t,this,e);return this.core.process(r),r.tokens};Cn.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};Cn.prototype.parseInline=function(t,e){var r=new this.core.State(t,this,e);return r.inlineMode=!0,this.core.process(r),r.tokens};Cn.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};F6.exports=Cn});var $6=m((tNe,M6)=>{"use strict";M6.exports=q6()});var r8=m((r1e,Bye)=>{Bye.exports={name:"remote-containers",displayName:"Remote - Containers",description:"Open any folder or repository inside a Docker container and take advantage of Visual Studio Code's full feature set.",version:"0.191.0",preview:!0,publisher:"ms-vscode-remote",icon:"resources/remote-containers.png",repository:{type:"git",url:"https://github.com/Microsoft/vscode-remote-release.git"},bugs:{url:"https://github.com/Microsoft/vscode-remote-release/issues"},license:"SEE LICENSE IN LICENSE.txt",engines:{vscode:"^1.59.0"},extensionKind:["ui"],capabilities:{untrustedWorkspaces:{supported:"limited",description:"Opening a folder in a container requires workspace trust."},virtualWorkspaces:!0},categories:["Other"],keywords:["remote","docker","containers","remote development","dev container","development container"],aiKey:"AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217",activationEvents:["onStartupFinished","onCommand:remote-containers.reopenInContainer","onCommand:remote-containers.rebuildAndReopenInContainer","onCommand:remote-containers.rebuildNoCacheAndReopenInContainer","onCommand:remote-containers.reopenLocally","onCommand:remote-containers.openFolder","onCommand:remote-containers.openRepositoryInVolume","onCommand:remote-containers.openRepositoryInUniqueVolume","onCommand:remote-containers.openRepositoryFromRemoteHub","onCommand:remote-containers.openPullRequestInVolume","onCommand:remote-containers.inspectVolume","onCommand:remote-containers.inspectVolumeFromViewlet","onCommand:remote-containers.inspectInBasicDevContainer","onCommand:remote-containers.cloneInVolumeFromViewlet","onCommand:remote-containers.pruneVolumes","onCommand:remote-containers.openWorkspace","onCommand:remote-containers.attachToRunningContainer","onCommand:remote-containers.attachToRunningContainerFromViewlet","onCommand:remote-containers.attachToK8sContainerFromViewlet","onCommand:remote-containers.checkoutPRInVolume","onCommand:remote-containers.rebuildContainer","onCommand:remote-containers.rebuildContainerNoCache","onCommand:remote-containers.createDevContainerFile","onCommand:remote-containers.openDevContainerFile","onCommand:remote-containers.openAttachDevContainerFile","onCommand:remote-containers.settings","onCommand:remote-containers.getHelp","onCommand:remote-containers.getStarted","onCommand:remote-containers.trySample","onCommand:remote-containers.reportIssue","onCommand:remote-containers.provideFeedback","onCommand:remote-containers.revealLogTerminal","onCommand:remote-containers.openLogFile","onCommand:remote-containers.openLastLogFile","onCommand:remote-containers.addExtensionToConfig","onCommand:remote-containers.showReopenInContainerNotificationReset","onCommand:remote-containers.showRecoveryContainerNotificationReset","onCommand:remote-containers.labelPortAndUpdateConfig","onCommand:remote-containers.installDocker","onCommand:remote-containers.installUserCLI","onCommand:remote-containers.configureContainerFeatures","workspaceContains:.devcontainer/devcontainer.json","workspaceContains:.devcontainer.json","onResolveRemoteAuthority:dev-container","onResolveRemoteAuthority:attached-container","onResolveRemoteAuthority:k8s-container","onDebugResolve:extensionHost","onView:targetsContainers"],main:"./dist/extension/extension",enableProposedApi:!0,contributes:{virtualWorkspaces:{menus:{continueOn:[{command:"remote-containers.openRepositoryFromRemoteHub",group:"0_local@2",when:"!isWeb && remoteHub:hasVirtualFolders"}]}},configuration:{title:"Remote - Containers",properties:{"remote.containers.defaultExtensions":{scope:"application",type:"array",description:"Configures the list of extensions to always install while creating a container.",default:[],items:{type:"string",pattern:"([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*)",errorMessage:"Expected format '${publisher}.${name}'. Example: 'vscode.csharp'."}},"remote.containers.workspaceMountConsistency":{scope:"application",type:"string",enum:["consistent","cached","delegated"],enumDescriptions:["Perfect consistency.","The host\u2019s view is authoritative.","The container\u2019s view is authoritative."],description:"The consistency level used for the workspace mount (existing containers must be rebuilt to take effect).",default:"cached"},"remote.containers.cacheVolume":{scope:"application",type:"boolean",description:"Controls whether a Docker volume should be used to cache the VS Code server and extensions. Currently only applies to single container and not Docker Compose configurations.",default:!0},"remote.containers.copyGitConfig":{scope:"machine",type:"boolean",markdownDescription:"Controls whether the Git configuration (`~/.gitconfig`) should be copied into the container. This is done after installing any `#dotfiles.repository#` and will not overwrite an existing Git configuration file.",default:!0},"remote.containers.gitCredentialHelperConfigLocation":{scope:"machine",type:"string",enum:["system","global","none"],enumDescriptions:["Write to system config (`/etc/gitconfig`, requires root access).","Write to user config (`~/.gitconfig`).","Do not set a credential helper."],description:"Where to write the configuration for the Git credential helper.",default:"global"},"remote.containers.logLevel":{scope:"application",type:"string",description:"The log level for the extension.",default:"debug",enum:["info","debug","trace"]},"remote.containers.dockerPath":{scope:"application",type:"string",description:"Docker (or Podman) executable name or path.",default:"docker"},"remote.containers.dockerComposePath":{scope:"application",type:"string",description:"Docker Compose executable name or path.",default:"docker-compose"},"dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository."},"dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository. Defaults to run the first file of `install.sh`, `install`, `bootstrap.sh`, `bootstrap`, `setup.sh` and `setup` found in the dotfiles repository's root folder."},"dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to. Defaults to `~/dotfiles`.",default:"~/dotfiles"},"remote.containers.dotfiles.repository":{scope:"machine",type:"string",description:"URL of a dotfiles Git repository (e.g., https://github.com/owner/repository.git) or owner/repository of a GitHub repository for DevContainers. This overrides the common setting for the dotfiles repository."},"remote.containers.dotfiles.installCommand":{scope:"machine",type:"string",description:"The command to run after cloning the dotfiles repository for DevContainers. This overrides the common setting for the dotfiles install command."},"remote.containers.dotfiles.targetPath":{scope:"machine",type:"string",description:"The path to clone the dotfiles repository to for DevContainers. This overrides the common setting for the dotfiles target path."},"remote.containers.repositoryConfigurationPaths":{scope:"application",type:"array",markdownDescription:"List of additional paths to search for [repository configurations](https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers).",default:[],items:{type:"string"}}}},commands:[{command:"remote-containers.reopenInContainer",title:"Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildAndReopenInContainer",title:"Rebuild and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",title:"Rebuild Without Cache and Reopen in Container",category:"Remote-Containers"},{command:"remote-containers.reopenLocally",title:"Reopen Folder Locally",category:"Remote-Containers"},{command:"remote-containers.reopenInWSL",title:"Reopen Folder in WSL",category:"Remote-Containers"},{command:"remote-containers.openFolder",title:"Open Folder in Container...",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.startAndOpenFolder",title:"Open Folder in Container",category:"Remote-Containers",icon:{light:"resources/light/reopen-folder.svg",dark:"resources/dark/reopen-folder.svg"}},{command:"remote-containers.openRepositoryInVolume",title:"Clone Repository in Named Container Volume...",category:"Remote-Containers"},{command:"remote-containers.openRepositoryInUniqueVolume",title:"Clone Repository in Container Volume...",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openRepositoryFromRemoteHub",title:"Clone Repository in a Container Volume",icon:"$(repo-clone)",category:"Remote-Containers"},{command:"remote-containers.openPullRequestInVolume",title:"Clone GitHub Pull Request in Container Volume...",category:"Remote-Containers"},{command:"remote-containers.inspectVolume",title:"Explore a Volume in a Development Container...",category:"Remote-Containers"},{command:"remote-containers.openWorkspace",title:"Open Workspace in Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainer",title:"Attach to Running Container...",category:"Remote-Containers"},{command:"remote-containers.attachToRunningContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.inspectVolumeFromViewlet",title:"Explore in a Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolumeFromViewlet",title:"Clone into existing Volume",category:"Remote-Containers"},{command:"remote-containers.pruneVolumes",title:"Remove Unused Volumes...",category:"Remote-Containers",icon:"$(clear-all)"},{command:"remote-containers.explorerVolumesRefresh",title:"Refresh",category:"Remote-Containers",icon:"$(refresh)"},{command:"remote-containers.attachToK8sContainerFromViewlet",title:"Attach Visual Studio Code",category:"Remote-Containers"},{command:"remote-containers.rebuildContainer",title:"Rebuild Container",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.rebuildContainerNoCache",title:"Rebuild Container Without Cache",category:"Remote-Containers",icon:{light:"resources/light/tools.svg",dark:"resources/dark/tools.svg"}},{command:"remote-containers.createDevContainerFile",title:"Add Development Container Configuration Files...",category:"Remote-Containers"},{command:"remote-containers.settings",title:"Settings for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getHelp",title:"Help for Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.getStarted",title:"Getting Started with Remote-Containers",category:"Remote-Containers"},{command:"remote-containers.trySample",title:"Try a Development Container Sample...",category:"Remote-Containers"},{command:"remote-containers.reportIssue",title:"Report Issue with Remote-Containers...",category:"Remote-Containers"},{command:"remote-containers.provideFeedback",title:"Provide Feedback",category:"Remote-Containers"},{command:"remote-containers.openDevContainerFile",title:"Open Container Configuration File",category:"Remote-Containers",icon:{light:"resources/light/gear.svg",dark:"resources/dark/gear.svg"}},{command:"remote-containers.openAttachConfigByNameFile",title:"Open Named Container Configuration File",category:"Remote-Containers"},{command:"remote-containers.openAttachDevContainerFile",title:"Open Attached Container Configuration File...",category:"Remote-Containers"},{command:"remote-containers.revealLogTerminal",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.openLogFile",title:"Show All Logs...",category:"Remote-Containers Developer"},{command:"remote-containers.openLastLogFile",title:"Show Previous Log",category:"Remote-Containers"},{command:"remote-containers.attachToContainer",title:"Attach to Container",category:"Remote-Containers",icon:{light:"resources/light/empty-window.svg",dark:"resources/dark/empty-window.svg"}},{command:"remote-containers.attachToContainerNewWindow",title:"Attach in New Window",category:"Remote-Containers"},{command:"remote-containers.stopContainer",title:"Stop Container",category:"Remote-Containers"},{command:"remote-containers.startContainer",title:"Start Container",category:"Remote-Containers",icon:{light:"resources/light/vm-start.svg",dark:"resources/dark/vm-start.svg"}},{command:"remote-containers.removeContainer",title:"Remove Container",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.removeRecentFolder",title:"Remove Recent Folder",category:"Remote-Containers",icon:{light:"resources/light/remove.svg",dark:"resources/dark/remove.svg"}},{command:"remote-containers.showDetails",title:"Show Details",category:"Remote-Containers"},{command:"remote-containers.explorerTargetsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.explorerDetailsRefresh",title:"Refresh",category:"Remote-Containers",icon:{light:"resources/light/refresh.svg",dark:"resources/dark/refresh.svg"}},{command:"remote-containers.inspectDockerResource",title:"Inspect",category:"Remote-Containers"},{command:"remote-containers.inspectInBasicDevContainer",title:"Explore in Development Container",category:"Remote-Containers"},{command:"remote-containers.cloneInVolume",title:"Clone Repository in Volume",category:"Remote-Containers"},{command:"remote-containers.removeVolume",title:"Remove",category:"Remote-Containers"},{command:"remote-containers.newContainer",title:"New Container",category:"Remote-Containers",icon:{light:"resources/light/plus.svg",dark:"resources/dark/plus.svg"}},{command:"remote-containers.showContainerLog",title:"Show Container Log",category:"Remote-Containers"},{command:"remote-containers.addExtensionToConfig",title:"Add to devcontainer.json",category:"Remote-Containers"},{command:"remote-containers.checkoutPRInVolume",title:"Checkout Pull Request in Dev Container",category:"Remote-Containers"},{command:"remote-containers.showReopenInContainerNotificationReset",title:"Reset Don't Show Reopen Notification",category:"Remote-Containers"},{command:"remote-containers.showRecoveryContainerNotificationReset",title:"Reset Don't Show Recovery Container Notification",category:"Remote-Containers"},{command:"remote-containers.labelPortAndUpdateConfig",title:"Set Label and Update devcontainer.json",category:"Remote-Containers",icon:"$(tag)"},{command:"remote-containers.installDocker",title:"Install Docker",category:"Remote-Containers"},{command:"remote-containers.installUserCLI",title:"Install devcontainer CLI",category:"Remote-Containers"},{command:"remote-containers.configureContainerFeatures",title:"Configure Container Features",category:"Remote-Containers"}],menus:{commandPalette:[{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.reopenInContainer",when:"workspaceFolderCount != 0 && remoteName == dev-container && isRecoveryContainer"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.rebuildNoCacheAndReopenInContainer",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.reopenLocally",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL"},{command:"remote-containers.openFolder",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)?$/"},{command:"remote-containers.openFolder",when:"remoteName == wsl"},{command:"remote-containers.openRepositoryInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)?$/"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)?$/"},{command:"remote-containers.openPullRequestInVolume",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)?$/"},{command:"remote-containers.openWorkspace",when:"remoteName == wsl"},{command:"remote-containers.attachToRunningContainer",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container|wsl|ssh-remote)?$/"},{command:"remote-containers.attachToRunningContainerFromViewlet",when:"false"},{command:"remote-containers.inspectVolumeFromViewlet",when:"false"},{command:"remote-containers.openRepositoryFromRemoteHub",when:"false"},{command:"remote-containers.cloneInVolumeFromViewlet",when:"false"},{command:"remote-containers.inspectInBasicDevContainer",when:"false"},{command:"remote-containers.cloneInVolume",when:"false"},{command:"remote-containers.removeVolume",when:"false"},{command:"remote-containers.attachToK8sContainerFromViewlet",when:"false"},{command:"remote-containers.checkoutPRInVolume",when:"false"},{command:"remote-containers.rebuildContainer",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainerNoCache",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.createDevContainerFile",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",when:"remoteName == wsl"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.openDevContainerFile",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.openDevContainerFile",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.openAttachConfigByNameFile",when:"remoteName == attached-container"},{command:"remote-containers.openAttachDevContainerFile",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)?$/"},{command:"remote-containers.getStarted",when:"false"},{command:"remote-containers.trySample",when:"!remoteName"},{command:"remote-containers.provideFeedback",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.attachToContainer",when:"false"},{command:"remote-containers.attachToContainerNewWindow",when:"false"},{command:"remote-containers.stopContainer",when:"false"},{command:"remote-containers.removeContainer",when:"false"},{command:"remote-containers.startContainer",when:"false"},{command:"remote-containers.removeRecentFolder",when:"false"},{command:"remote-containers.showDetails",when:"false"},{command:"remote-containers.explorerTargetsRefresh",when:"false"},{command:"remote-containers.explorerVolumesRefresh",when:"false"},{command:"remote-containers.explorerDetailsRefresh",when:"false"},{command:"remote-containers.inspectDockerResource",when:"false"},{command:"remote-containers.startAndOpenFolder",when:"false"},{command:"remote-containers.newContainer",when:"false"},{command:"remote-containers.showContainerLog",when:"false"},{command:"remote-containers.labelPortAndUpdateConfig",when:"false"},{command:"remote-containers.addExtensionToConfig",when:"false"},{command:"remote-containers.configureContainerFeatures",when:"experimentalContainerFeatures"}],"statusBar/remoteIndicator":[{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && !remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInContainer",group:"remote_30_dev-container_2_actions@1",when:"workspaceFolderCount != 0 && remoteName == wsl"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_2_actions@2",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_2_actions@4",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_2_actions@5",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.createDevContainerFile",group:"remote_30_dev-container_2_actions@6",when:"remoteName == wsl"},{command:"remote-containers.trySample",group:"remote_30_dev-container_2_actions@7",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.getStarted",group:"remote_30_dev-container_2_actions@8",when:"!remoteName && !virtualWorkspace"},{command:"remote-containers.reopenInWSL",group:"remote_30_dev-container_1_actions@1",when:"canReopenInWSL"},{command:"remote-containers.reopenLocally",group:"remote_30_dev-container_1_actions@2",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.rebuildContainer",group:"remote_30_dev-container_1_actions@3",when:"remoteName =~ /^dev-container$/"},{command:"remote-containers.openDevContainerFile",group:"remote_30_dev-container_1_actions@4",when:"remoteName =~ /^(dev|attached)-container$/"},{command:"remote-containers.revealLogTerminal",group:"remote_30_dev-container_1_actions@5",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.openFolder",group:"remote_30_dev-container_1_actions@6",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.openRepositoryInUniqueVolume",group:"remote_30_dev-container_1_actions@8",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/ && remoteConnectionState == connected"},{command:"remote-containers.attachToRunningContainer",group:"remote_30_dev-container_1_actions@9",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.settings",group:"remote_30_dev-container_9_help@1",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.reportIssue",group:"remote_30_dev-container_9_help@2",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"},{command:"remote-containers.getHelp",group:"remote_30_dev-container_9_help@4",when:"remoteName =~ /^(dev-container|attached-container|exec|k8s-container)$/"}],"view/title":[{command:"remote-containers.explorerTargetsRefresh",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.newContainer",when:"view == targetsContainers && !remote-containers:needsDockerStartOrInstall && !remote-containers:noContainersWithFolder && !remote-containers:noContainersWithoutFolder",group:"navigation"},{command:"remote-containers.explorerDetailsRefresh",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.attachToContainer",when:"view == detailsContainers",group:"navigation"},{command:"remote-containers.rebuildContainer",when:"view == detailsContainers && remoteName == dev-container",group:"navigation"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && remoteName =~ /^(dev|attached)-container$/",group:"navigation"},{command:"remote-containers.pruneVolumes",when:"view == devVolumes",group:"navigation@2"},{command:"remote-containers.explorerVolumesRefresh",when:"view == devVolumes",group:"navigation@3"},{command:"remote-containers.openRepositoryInUniqueVolume",when:"view == devVolumes",group:"navigation@1"}],"view/item/context":[{command:"remote-containers.attachToRunningContainerFromViewlet",when:"view == dockerContainers && viewItem =~ /^runningContainer$/i && vscode-docker:aciContext != true",group:"containers_1_general@2"},{command:"remote-containers.inspectVolumeFromViewlet",when:"view == dockerVolumes && viewItem == volume && vscode-docker:aciContext != true",group:"volumes_1_general@2"},{command:"remote-containers.checkoutPRInVolume",when:"view =~ /pr:/ && viewItem =~ /pullrequest(:local)?:nonactive|description/"},{command:"remote-containers.attachToK8sContainerFromViewlet",group:"2@4",when:"view == extension.vsKubernetesExplorer && viewItem =~ /vsKubernetes\\.resource\\.pod/i"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"1_folder@1"},{command:"remote-containers.startAndOpenFolder",when:"view == targetsContainers && viewItem =~ /^(dev|attached|exited|running).*Folder$/",group:"inline@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"2_folder@1"},{command:"remote-containers.removeRecentFolder",when:"view == targetsContainers && viewItem == attachedFolder",group:"inline@2"},{command:"workbench.action.closeFolder",when:"view == targetsContainers && viewItem =~ /active.*Folder/",group:"1_folder@1"},{command:"remote-containers.reopenLocally",when:"view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.reopenInWSL",when:"canReopenInWSL && view == targetsContainers && viewItem =~ /active(d|D)ev/",group:"1_folder@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@1"},{command:"remote-containers.attachToContainer",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"inline@1"},{command:"remote-containers.attachToContainerNewWindow",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)Container/",group:"1_container@2"},{command:"remote-containers.stopContainer",when:"view == targetsContainers && viewItem =~ /^(active|running)(Dev|)Container/",group:"2_container@2"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"2_container@3"},{command:"remote-containers.rebuildContainer",when:"view == targetsContainers && viewItem =~ /activeDevContainer/",group:"2_container@1"},{command:"remote-containers.removeContainer",when:"view == targetsContainers && viewItem =~ /^(running|exited)(Dev|)Container/",group:"inline@2"},{command:"remote-containers.startContainer",when:"view == targetsContainers && viewItem =~ /^exited(Dev|)Container/",group:"1_container@3"},{command:"remote-containers.showDetails",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@4"},{command:"remote-containers.inspectDockerResource",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@5"},{command:"remote-containers.showContainerLog",when:"view == targetsContainers && viewItem =~ /^(active|running|exited)(Dev|)Container/",group:"1_container@6"},{command:"remote-containers.openDevContainerFile",when:"view == detailsContainers && viewItem == devContainer"},{command:"remote-containers.inspectDockerResource",when:"view == detailsContainers && viewItem =~ /^(image|volume)$/"},{command:"remote-containers.cloneInVolume",when:"view == devVolumes && viewItem =~ /^(devVolume)$/",group:"1_volumes@1"},{command:"remote-containers.inspectInBasicDevContainer",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@1"},{command:"remote-containers.inspectDockerResource",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"2_volumes@2"},{command:"remote-containers.removeVolume",when:"view == devVolumes && viewItem =~ /^(devVolume|uniqueDevVolume)$/",group:"3_volumes-destructive@1"}],"ports/item/port/inline":[{command:"remote-containers.labelPortAndUpdateConfig",group:"0_manage@4",when:"remoteName =~ /^(dev|attached)-container$/ && tunnelType == Forwarded"}],"extension/context":[{command:"remote-containers.addExtensionToConfig",group:"2_configure",when:"!isBuiltinExtension && remoteName =~ /^(dev-container|attached-container|wsl)?$/"}]},resourceLabelFormatters:[{scheme:"vscode-remote",authority:"dev-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Dev Container"}},{scheme:"vscode-remote",authority:"attached-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Container"}},{scheme:"vscode-remote",authority:"exec+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Exec"}},{scheme:"vscode-remote",authority:"k8s-container+*",formatting:{label:"${path}",separator:"/",tildify:!0,workspaceSuffix:"Kubernetes"}}],views:{remote:[{id:"targetsContainers",name:"Containers",group:"targets@2",remoteName:["dev-container","attached-container","exec","k8s-container"]},{id:"detailsContainers",name:"Details (Containers)",when:"remote-containers:showDetails",group:"details@1",remoteName:["dev-container","attached-container"]},{id:"devVolumes",name:"DevVolumes",group:"details@2",remoteName:["dev-container","attached-container"]}]},viewsWelcome:[{view:"targetsContainers",when:"remote-containers:needsDockerStartOrInstall",contents:"Get started with containers by [installing Docker](command:remote-containers.installDocker) or by visiting the [help view](command:~remote.helpPanel.focus). [Refresh](command:remote-containers.explorerTargetsRefresh) after installation and startup."},{view:"targetsContainers",when:"remote-containers:needsSSHCredentials",contents:"[Refresh](command:remote-containers.explorerTargetsRefresh) to provide SSH credentials."},{view:"targetsContainers",when:"remote-containers:noContainersWithFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can [reopen the current folder in a container](command:remote-containers.reopenInContainer), or open another folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"targetsContainers",when:"remote-containers:noContainersWithoutFolder",contents:`Get started with containers by running one of the [Remote-Containers](command:remote-containers.newContainer) commands.
You can open an existing folder in a container.
[Open Folder in Container](command:remote-containers.openFolder)
If you're new to containers and want to [try a sample](command:remote-containers.trySample), there are several to choose from.`},{view:"devVolumes",when:"remote-containers:noDevVolumes",contents:`If there's a repository you want to work with you can clone that directly in a container volume.
[Clone Repository in Container Volume](command:remote-containers.openRepositoryInUniqueVolume)
`}],remoteHelp:{getStarted:"https://aka.ms/vscode-remote/containers/tutorial-sandbox",feedback:"https://aka.ms/vscode-remote/containers/provide-feedback",documentation:"https://aka.ms/vscode-remote/containers",issues:"https://aka.ms/vscode-remote/containers/issues",remoteName:["dev-container","attached-container","exec","k8s-container"]}},scripts:{"vscode:prepublish":"npm-run-all clean definitions compile-prod dev-containers-user-cli-prepare",compile:"npm-run-all clean definitions compile-dev",watch:"npm-run-all clean definitions compile-watch",precommit:"node build/gulpfile.hygiene.js",package:"vsce package --yarn",definitions:"npm-run-all definitions-clean definitions-copy",lint:"eslint -c .eslintrc.js --rulesdir ./build/eslint --ext .ts ./src ./test","compile-prod":"node esbuild.js --production","compile-dev":"node esbuild.js","compile-watch":"node esbuild.js --watch","type-check":"npm-run-all clean-built tsc-b","tsc-b":"tsc -b","type-check-watch":"npm-run-all clean-built tsc-b-w","tsc-b-w":"tsc -b -w","definitions-clean":"rimraf dist/node_modules/vscode-dev-containers","definitions-copy":'copyfiles --all "node_modules/vscode-dev-containers/**/*" dist',"dev-containers-cli-publish":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-publish","dev-containers-cli-package":"npm-run-all dev-containers-cli-prepare dev-containers-cli-npm-pack","dev-containers-cli-prepare":"npm-run-all clean dev-containers-cli-compile dev-containers-cli-copy-module dev-containers-cli-copy-definitions","dev-containers-cli-compile":"npm-run-all compile-prod","dev-containers-cli-copy-module":'copyfiles dist/node/devContainersCLI.* "scripts/**/*" dev-containers-cli',"dev-containers-cli-copy-definitions":'copyfiles --all "node_modules/vscode-dev-containers/repository-containers/**/*" dev-containers-cli/dist',"dev-containers-cli-npm-publish":"cd dev-containers-cli && npm publish","dev-containers-cli-npm-pack":"cd dev-containers-cli && npm pack","dev-containers-user-cli-prepare":"npm-run-all dev-containers-user-cli-copy-module","dev-containers-user-cli-clean-prepare":"npm-run-all clean dev-containers-user-prepare","dev-containers-user-cli-copy-module":"copyfiles dist/node/devContainersUserCLI.* dev-containers-user-cli",clean:"rimraf dist built dev-containers-cli/dist dev-containers-cli/scripts dev-containers-user-cli/dist dev-containers-user-cli/scripts","clean-built":"rimraf built",test:"env TS_NODE_PROJECT=test/core/tsconfig.json mocha -r ts-node/register --exit test/core/**/*.test.ts","test-no-env":"mocha -r ts-node/register --exit test/core/**/*.test.ts","test-dev-containers":"env TS_NODE_PROJECT=test/dev-containers/tsconfig.json mocha -r ts-node/register --exit test/dev-containers/**/*.test.ts",copytestconfigsforalpine:"/bin/bash -c 'cd test/configs && for f in *; do if [[ -d $f ]] && [[ $f != *alpine* ]]; then cp -r -T $f $f-alpine ; fi ; done'"},devDependencies:{"@types/chai":"^4.2.18","@types/follow-redirects":"^1.13.0","@types/js-yaml":"^4.0.1","@types/markdown-it":"^12.0.2","@types/minimist":"^1.2.1","@types/mocha":"^8.2.2","@types/node":"^15.12.2","@types/pull-stream":"^3.6.2","@types/semver":"^7.3.6","@types/stats-lite":"^2.2.0","@types/tar":"^4.0.4","@types/vscode":"^1.57.0","@types/yargs":"^17.0.0","@typescript-eslint/eslint-plugin":"^4.26.1","@typescript-eslint/parser":"^4.26.1",ajv:"^8.6.0",chai:"4.3.4",copyfiles:"^2.4.1",eslint:"^7.28.0","event-stream":"^4.0.1",gulp:"^4.0.2","gulp-eslint":"^6.0.0","gulp-filter":"^7.0.0",husky:"^6.0.0",jsonc:"^2.0.0",mocha:"^9.0.0","mocha-junit-reporter":"^2.0.0","npm-run-all":"^4.1.5","p-all":"^3.0.0",rimraf:"^3.0.2","ts-node":"^10.0.0",typescript:"^4.3.2","typescript-formatter":"^7.2.2",vinyl:"^2.2.1","vinyl-fs":"^3.0.3",vsce:"^1.95.0"},dependencies:{applicationinsights:"2.1.1",esbuild:"^0.12.8","find-process":"^1.4.4","follow-redirects":"^1.14.1","js-yaml":"^4.1.0","jsonc-parser":"^3.0.0","markdown-it":"^12.0.6",minimist:"^1.2.5",muxrpc:"^6.5.3","node-pty":"^0.10.1","pull-stream":"^3.6.14","pull-stream-to-stream":"^2.0.0",semver:"^7.3.5","stats-lite":"^2.2.0","stream-to-pull-stream":"^1.7.3",tar:"^6.1.0","vscode-dev-containers":"https://github.com/microsoft/vscode-dev-containers/releases/download/v0.191.0/vscode-dev-containers-0.191.0.tgz","vscode-extension-telemetry":"^0.1.7","vscode-tas-client":"^0.1.22","vscode-uri":"^3.0.2",yargs:"^17.0.1"}}});S8(exports,{activate:()=>Vye,attachToContainer:()=>Jy,deactivate:()=>Kye});var b=k(require("vscode")),n8=k(require("os")),tC=k(require("fs")),Ot=k(require("path")),i8=k(require("querystring"));var At=k(require("fs")),zi=k(require("util"));function vt(t){return new Promise(e=>At.stat(t,(r,n)=>e(!r&&n.isFile())))}function Ku(t){return new Promise(e=>At.stat(t,(r,n)=>e(!r&&n.isDirectory())))}var Ce=(0,zi.promisify)(At.readFile),Gd=(0,zi.promisify)(At.writeFile),mCe=(0,zi.promisify)(At.appendFile),xa=(0,zi.promisify)(At.rename),Gr=(0,zi.promisify)(At.readdir),hI=(0,zi.promisify)(At.unlink),wn=t=>new Promise((e,r)=>At.mkdir(t,{recursive:!0},n=>n?r(n):e())),sC=(0,zi.promisify)(At.rmdir);var je=k(require("vscode")),XP=k(require("path"));var Po=k(require("path")),qq=k(require("crypto"));var gI=k(require("os")),Yu=k(require("fs")),vI=k(require("path"));async function mI(t,e){return{sendTelemetryEvent:async()=>{},isCachedFlightEnabled:async()=>!1,product:await e,package:await t}}var ne;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(ne||(ne={}));var aC={info:3,debug:2,trace:1},I8=Object.keys(aC).reduce((t,e)=>(t[aC[e]]=e,t),[]);function yI(t){return aC[t]||3}function CI(t){return I8[t]||3}var Ye={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Ki=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function wI(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function EI(t,e){let r=T8(t);return{event(n){let i=R8(n,e());i&&r.write(i)},join:r.join}}function _I(t,e,r){return{event(n){let i=A8(n,e(),r.getTime());i&&t(i)}}}function yt(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function A8(t,e,r){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Xu(SI,`${t.timestamp-r} ms`)}] ${Wd(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Xu(N8,`[${t.timestamp-r} ms] Start`)}: ${Wd(t.text)}`:`[${Xu(SI,`${t.timestamp-r} ms`)}] Start: ${Wd(t.text)}`;case"stop":return 1>=e?`${Xu(O8,`[${t.timestamp-r} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${Wd(t.text)}`:void 0;default:throw xI(t)}}function Wd(t){return F8(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function R8(t,e){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":case"raw":return`[${new Date(t.timestamp).toISOString()}] ${cC(t.text)}`;case"start":return`[${new Date(t.timestamp).toISOString()}] Start: ${cC(t.text)}`;case"stop":return 2>=e?`[${new Date(t.timestamp).toISOString()}] Stop (${t.timestamp-t.startTimestamp} ms): ${cC(t.text)}`:void 0;default:throw xI(t)}}function cC(t){return t.replace(Ki,"").replace(/(\r?\n)?$/,gI.EOL)}function xI(t){return new Error(`Unknown log event type: ${t.type}`)}function T8(t){let e=[],r=!1,n,i;function o(){r=!1,i&&!e.length&&(n=void 0,i(),i=void 0)}function s(a,c=!1){if(a&&e.push(a),!c&&!r&&e.length){r=!0;let u=e.join("");e.length=0,Yu.appendFile(t,u,l=>{l&&(l.code==="ENOENT"?Yu.mkdir(vI.dirname(t),{recursive:!0},f=>{f?(o(),console.error(f)):Yu.appendFile(t,u,d=>{o(),d&&console.error(d),s()})}):(o(),console.error(l))),o(),s()})}}return{write:s,join:()=>n||(r?n=new Promise(a=>i=a):Promise.resolve())}}var k8="38;2;143;99;79",bI="38;2;99;143;79",D8="38;2;86;156;214",O8=k8,N8=bI,SI=bI,L8=D8;function Xu(t,e){return e.split(`
`).map(r=>`[1m[${t}m${r}[39m[22m`).join(`
`)}function F8(t){let e,r=0,n=[];for(Ki.lastIndex=0;e=Ki.exec(t);)n.push(PI(t.substring(r,e.index))),n.push(e[0]),r=Ki.lastIndex;return n.push(PI(t.substr(r))),n.join("")}function PI(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,i=[];for(;r=e.exec(t);)i.push(t.substring(n,r.index)),i.push(Xu(L8,r[0])),n=e.lastIndex;return i.push(t.substr(n)),i.join("")}function we(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}function uC(t){return t.split(/\r?\n/).map(e=>`[1m[33m${e}[39m[22m`).join(`\r
`)+`\r
`}var H=class extends Error{constructor(e){super(e.originalError&&e.originalError.message||e.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,e),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var sf=k(require("path"));var Y=k(require("path")),Ih=k(require("fs")),VN=k(yC()),vE=k(require("string_decoder")),Ah=k(Vp());"use strict";function pl(t,e){e===void 0&&(e=!1);var r=t.length,n=0,i="",o=0,s=16,a=0,c=0,u=0,l=0,f=0;function d(E,w){for(var x=0,_=0;x<E||!w;){var S=t.charCodeAt(n);if(S>=48&&S<=57)_=_*16+S-48;else if(S>=65&&S<=70)_=_*16+S-65+10;else if(S>=97&&S<=102)_=_*16+S-97+10;else break;n++,x++}return x<E&&(_=-1),_}function p(E){n=E,i="",o=0,s=16,f=0}function h(){var E=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&Ya(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&Ya(t.charCodeAt(n)))for(n++;n<t.length&&Ya(t.charCodeAt(n));)n++;else return f=3,t.substring(E,n);var w=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&Ya(t.charCodeAt(n))){for(n++;n<t.length&&Ya(t.charCodeAt(n));)n++;w=n}else f=3;return t.substring(E,w)}function g(){for(var E="",w=n;;){if(n>=r){E+=t.substring(w,n),f=2;break}var x=t.charCodeAt(n);if(x===34){E+=t.substring(w,n),n++;break}if(x===92){if(E+=t.substring(w,n),n++,n>=r){f=2;break}var _=t.charCodeAt(n++);switch(_){case 34:E+='"';break;case 92:E+="\\";break;case 47:E+="/";break;case 98:E+="\b";break;case 102:E+="\f";break;case 110:E+=`
`;break;case 114:E+="\r";break;case 116:E+="	";break;case 117:var S=d(4,!0);S>=0?E+=String.fromCharCode(S):f=4;break;default:f=5}w=n;continue}if(x>=0&&x<=31)if(hl(x)){E+=t.substring(w,n),f=2;break}else f=6;n++}return E}function v(){if(i="",f=0,o=n,c=a,l=u,n>=r)return o=r,s=17;var E=t.charCodeAt(n);if(Tw(E)){do n++,i+=String.fromCharCode(E),E=t.charCodeAt(n);while(Tw(E));return s=15}if(hl(E))return n++,i+=String.fromCharCode(E),E===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,u=n,s=14;switch(E){case 123:return n++,s=1;case 125:return n++,s=2;case 91:return n++,s=3;case 93:return n++,s=4;case 58:return n++,s=6;case 44:return n++,s=5;case 34:return n++,i=g(),s=10;case 47:var w=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!hl(t.charCodeAt(n));)n++;return i=t.substring(w,n),s=12}if(t.charCodeAt(n+1)===42){n+=2;for(var x=r-1,_=!1;n<x;){var S=t.charCodeAt(n);if(S===42&&t.charCodeAt(n+1)===47){n+=2,_=!0;break}n++,hl(S)&&(S===13&&t.charCodeAt(n)===10&&n++,a++,u=n)}return _||(n++,f=1),i=t.substring(w,n),s=13}return i+=String.fromCharCode(E),n++,s=16;case 45:if(i+=String.fromCharCode(E),n++,n===r||!Ya(t.charCodeAt(n)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=h(),s=11;default:for(;n<r&&C(E);)n++,E=t.charCodeAt(n);if(o!==n){switch(i=t.substring(o,n),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(E),n++,s=16}}function C(E){if(Tw(E)||hl(E))return!1;switch(E){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function y(){var E;do E=v();while(E>=12&&E<=15);return E}return{setPosition:p,getPosition:function(){return n},scan:e?y:v,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return n-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-l},getTokenError:function(){return f}}}function Tw(t){return t===32||t===9||t===11||t===12||t===160||t===5760||t>=8192&&t<=8203||t===8239||t===8287||t===12288||t===65279}function hl(t){return t===10||t===13||t===8232||t===8233}function Ya(t){return t>=48&&t<=57}"use strict";function kw(t,e,r){var n,i,o,s,a;if(e){for(s=e.offset,a=s+e.length,o=s;o>0&&!ml(t,o-1);)o--;for(var c=a;c<t.length&&!ml(t,c);)c++;i=t.substring(o,c),n=P7(i,r)}else i=t,n=0,o=0,s=0,a=t.length;var u=I7(r,t),l=!1,f=0,d;r.insertSpaces?d=Dw(" ",r.tabSize||4):d="	";var p=pl(i,!1),h=!1;function g(){return u+Dw(d,n+f)}function v(){var W=p.scan();for(l=!1;W===15||W===14;)l=l||W===14,W=p.scan();return h=W===16||p.getTokenError()!==0,W}var C=[];function y(W,K,oe){!h&&(!e||K<a&&oe>s)&&t.substring(K,oe)!==W&&C.push({offset:K,length:oe-K,content:W})}var E=v();if(E!==17){var w=p.getTokenOffset()+o,x=Dw(d,n);y(x,o,w)}for(;E!==17;){for(var _=p.getTokenOffset()+p.getTokenLength()+o,S=v(),I="",R=!1;!l&&(S===12||S===13);){var T=p.getTokenOffset()+o;y(" ",_,T),_=p.getTokenOffset()+p.getTokenLength()+o,R=S===12,I=R?g():"",S=v()}if(S===2)E!==1&&(f--,I=g());else if(S===4)E!==3&&(f--,I=g());else{switch(E){case 3:case 1:f++,I=g();break;case 5:case 12:I=g();break;case 13:l?I=g():R||(I=" ");break;case 6:R||(I=" ");break;case 10:if(S===6){R||(I="");break}case 7:case 8:case 9:case 11:case 2:case 4:S===12||S===13?R||(I=" "):S!==5&&S!==17&&(h=!0);break;case 16:h=!0;break}l&&(S===12||S===13)&&(I=g())}S===17&&(I=r.insertFinalNewline?u:"");var U=p.getTokenOffset()+o;y(I,_,U),E=S}return C}function Dw(t,e){for(var r="",n=0;n<e;n++)r+=t;return r}function P7(t,e){for(var r=0,n=0,i=e.tabSize||4;r<t.length;){var o=t.charAt(r);if(o===" ")n++;else if(o==="	")n+=i;else break;r++}return Math.floor(n/i)}function I7(t,e){for(var r=0;r<e.length;r++){var n=e.charAt(r);if(n==="\r")return r+1<e.length&&e.charAt(r+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return t&&t.eol||`
`}function ml(t,e){return`\r
`.indexOf(t.charAt(e))!==-1}"use strict";var gl;(function(t){t.DEFAULT={allowTrailingComma:!1}})(gl||(gl={}));function LT(t,e){var r=[],n=new Object,i=void 0,o={value:{},offset:0,length:0,type:"object",parent:void 0},s=!1;function a(c,u,l,f){o.value=c,o.offset=u,o.length=l,o.type=f,o.colonOffset=void 0,i=o}try{zp(t,{onObjectBegin:function(c,u){if(e<=c)throw n;i=void 0,s=e>c,r.push("")},onObjectProperty:function(c,u,l){if(e<u||(a(c,u,l,"property"),r[r.length-1]=c,e<=u+l))throw n},onObjectEnd:function(c,u){if(e<=c)throw n;i=void 0,r.pop()},onArrayBegin:function(c,u){if(e<=c)throw n;i=void 0,r.push(0)},onArrayEnd:function(c,u){if(e<=c)throw n;i=void 0,r.pop()},onLiteralValue:function(c,u,l){if(e<u||(a(c,u,l,qT(c)),e<=u+l))throw n},onSeparator:function(c,u,l){if(e<=u)throw n;if(c===":"&&i&&i.type==="property")i.colonOffset=u,s=!1,i=void 0;else if(c===","){var f=r[r.length-1];typeof f=="number"?r[r.length-1]=f+1:(s=!0,r[r.length-1]=""),i=void 0}}})}catch(c){if(c!==n)throw c}return{path:r,previousNode:i,isAtPropertyKey:s,matches:function(c){for(var u=0,l=0;u<c.length&&l<r.length;l++)if(c[u]===r[l]||c[u]==="*")u++;else if(c[u]!=="**")return!1;return u===c.length}}}function FT(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=gl.DEFAULT);var n=null,i=[],o=[];function s(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}var a={onObjectBegin:function(){var c={};s(c),o.push(i),i=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var c=[];s(c),o.push(i),i=c,n=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(c,u,l){e.push({error:c,offset:u,length:l})}};return zp(t,a,r),i[0]}function Gp(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=gl.DEFAULT);var n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(c){n.type==="property"&&(n.length=c-n.offset,n=n.parent)}function o(c){return n.children.push(c),c}var s={onObjectBegin:function(c){n=o({type:"object",offset:c,length:-1,parent:n,children:[]})},onObjectProperty:function(c,u,l){n=o({type:"property",offset:u,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:c,offset:u,length:l,parent:n})},onObjectEnd:function(c,u){i(c+u),n.length=c+u-n.offset,n=n.parent,i(c+u)},onArrayBegin:function(c,u){n=o({type:"array",offset:c,length:-1,parent:n,children:[]})},onArrayEnd:function(c,u){n.length=c+u-n.offset,n=n.parent,i(c+u)},onLiteralValue:function(c,u,l){o({type:qT(c),offset:u,length:l,parent:n,value:c}),i(u+l)},onSeparator:function(c,u,l){n.type==="property"&&(c===":"?n.colonOffset=u:c===","&&i(u))},onError:function(c,u,l){e.push({error:c,offset:u,length:l})}};zp(t,s,r);var a=n.children[0];return a&&delete a.parent,a}function vl(t,e){if(!!t){for(var r=t,n=0,i=e;n<i.length;n++){var o=i[n];if(typeof o=="string"){if(r.type!=="object"||!Array.isArray(r.children))return;for(var s=!1,a=0,c=r.children;a<c.length;a++){var u=c[a];if(Array.isArray(u.children)&&u.children[0].value===o){r=u.children[1],s=!0;break}}if(!s)return}else{var l=o;if(r.type!=="array"||l<0||!Array.isArray(r.children)||l>=r.children.length)return;r=r.children[l]}}return r}}function Wp(t){switch(t.type){case"array":return t.children.map(Wp);case"object":for(var e=Object.create(null),r=0,n=t.children;r<n.length;r++){var i=n[r],o=i.children[1];o&&(e[i.children[0].value]=Wp(o))}return e;case"null":case"string":case"number":case"boolean":return t.value;default:return}}function zp(t,e,r){r===void 0&&(r=gl.DEFAULT);var n=pl(t,!1);function i(R){return R?function(){return R(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function o(R){return R?function(T){return R(T,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var s=i(e.onObjectBegin),a=o(e.onObjectProperty),c=i(e.onObjectEnd),u=i(e.onArrayBegin),l=i(e.onArrayEnd),f=o(e.onLiteralValue),d=o(e.onSeparator),p=i(e.onComment),h=o(e.onError),g=r&&r.disallowComments,v=r&&r.allowTrailingComma;function C(){for(;;){var R=n.scan();switch(n.getTokenError()){case 4:y(14);break;case 5:y(15);break;case 3:y(13);break;case 1:g||y(11);break;case 2:y(12);break;case 6:y(16);break}switch(R){case 12:case 13:g?y(10):p();break;case 16:y(1);break;case 15:case 14:break;default:return R}}}function y(R,T,U){if(T===void 0&&(T=[]),U===void 0&&(U=[]),h(R),T.length+U.length>0)for(var W=n.getToken();W!==17;){if(T.indexOf(W)!==-1){C();break}else if(U.indexOf(W)!==-1)break;W=C()}}function E(R){var T=n.getTokenValue();return R?f(T):a(T),C(),!0}function w(){switch(n.getToken()){case 11:var R=n.getTokenValue(),T=Number(R);isNaN(T)&&(y(2),T=0),f(T);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return C(),!0}function x(){return n.getToken()!==10?(y(3,[],[2,5]),!1):(E(!1),n.getToken()===6?(d(":"),C(),I()||y(4,[],[2,5])):y(5,[],[2,5]),!0)}function _(){s(),C();for(var R=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(R||y(4,[],[]),d(","),C(),n.getToken()===2&&v)break}else R&&y(6,[],[]);x()||y(4,[],[2,5]),R=!0}return c(),n.getToken()!==2?y(7,[2],[]):C(),!0}function S(){u(),C();for(var R=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(R||y(4,[],[]),d(","),C(),n.getToken()===4&&v)break}else R&&y(6,[],[]);I()||y(4,[],[4,5]),R=!0}return l(),n.getToken()!==4?y(8,[4],[]):C(),!0}function I(){switch(n.getToken()){case 3:return S();case 1:return _();case 10:return E(!0);default:return w()}}return C(),n.getToken()===17?r.allowEmptyContent?!0:(y(4,[],[]),!1):I()?(n.getToken()!==17&&y(9,[],[]),!0):(y(4,[],[]),!1)}function qT(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(t){if(Array.isArray(t))return"array"}else return"null";return"object"}default:return"null"}}"use strict";function MT(t,e,r,n){for(var i,o=e.slice(),s=[],a=Gp(t,s),c=void 0,u=void 0;o.length>0&&(u=o.pop(),c=vl(a,o),c===void 0&&r!==void 0);)typeof u=="string"?r=(i={},i[u]=r,i):r=[r];if(c)if(c.type==="object"&&typeof u=="string"&&Array.isArray(c.children)){var l=vl(c,[u]);if(l!==void 0)if(r===void 0){if(!l.parent)throw new Error("Malformed AST");var f=c.children.indexOf(l.parent),d=void 0,p=l.parent.offset+l.parent.length;if(f>0){var h=c.children[f-1];d=h.offset+h.length}else if(d=c.offset+1,c.children.length>1){var g=c.children[1];p=g.offset}return ps(t,{offset:d,length:p-d,content:""},n)}else return ps(t,{offset:l.offset,length:l.length,content:JSON.stringify(r)},n);else{if(r===void 0)return[];var v=JSON.stringify(u)+": "+JSON.stringify(r),C=n.getInsertionIndex?n.getInsertionIndex(c.children.map(function(R){return R.children[0].value})):c.children.length,y=void 0;if(C>0){var h=c.children[C-1];y={offset:h.offset+h.length,length:0,content:","+v}}else c.children.length===0?y={offset:c.offset+1,length:0,content:v}:y={offset:c.offset+1,length:0,content:v+","};return ps(t,y,n)}}else if(c.type==="array"&&typeof u=="number"&&Array.isArray(c.children)){var E=u;if(E===-1){var v=""+JSON.stringify(r),y=void 0;if(c.children.length===0)y={offset:c.offset+1,length:0,content:v};else{var h=c.children[c.children.length-1];y={offset:h.offset+h.length,length:0,content:","+v}}return ps(t,y,n)}else if(r===void 0&&c.children.length>=0){var w=u,x=c.children[w],y=void 0;if(c.children.length===1)y={offset:c.offset+1,length:c.length-2,content:""};else if(c.children.length-1===w){var h=c.children[w-1],_=h.offset+h.length,S=c.offset+c.length;y={offset:_,length:S-2-_,content:""}}else y={offset:x.offset,length:c.children[w+1].offset-x.offset,content:""};return ps(t,y,n)}else if(r!==void 0){var y=void 0,v=""+JSON.stringify(r);if(!n.isArrayInsertion&&c.children.length>u){var I=c.children[u];y={offset:I.offset,length:I.length,content:v}}else if(c.children.length===0||u===0)y={offset:c.offset+1,length:0,content:c.children.length===0?v:v+","};else{var C=u>c.children.length?c.children.length:u,h=c.children[C-1];y={offset:h.offset+h.length,length:0,content:","+v}}return ps(t,y,n)}else throw new Error("Can not "+(r===void 0?"remove":n.isArrayInsertion?"insert":"modify")+" Array index "+E+" as length is not sufficient")}else throw new Error("Can not add "+(typeof u!="number"?"index":"property")+" to parent of type "+c.type);else{if(r===void 0)throw new Error("Can not delete in empty document");return ps(t,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(r)},n)}}function ps(t,e,r){if(!r.formattingOptions)return[e];var n=Kp(t,e),i=e.offset,o=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;i>0&&!ml(n,i-1);)i--;for(;o<n.length&&!ml(n,o);)o++}for(var s=kw(n,{offset:i,length:o-i},r.formattingOptions),a=s.length-1;a>=0;a--){var c=s[a];n=Kp(n,c),i=Math.min(i,c.offset),o=Math.max(o,c.offset+c.length),o+=c.content.length-c.length}var u=t.length-(n.length-o)-i;return[{offset:i,length:u,content:n.substring(i,o)}]}function Kp(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}"use strict";var $T=LT,Be=FT,UT=Gp,Yp=vl;var jT=Wp;function Lt(t,e,r,n){return MT(t,e,r,n)}function Yt(t,e){for(var r=e.length-1;r>=0;r--)t=Kp(t,e[r]);return t}var GN=k(require("crypto")),WN=k(require("util"));var HT=k(require("string_decoder")),yl="\u2404";async function hs(t,e,r,n){let i=await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:n||"/bin/sh",args:[],output:e}),o=A7(i),s;async function a(u,l){let f=s=(async()=>{try{await s}catch(d){}return c(u,l)})();try{return await Promise.race([f,o.unexpectedExit])}finally{o.disposeStdioListeners(),s===f&&(s=void 0)}}async function c(u,l){let f=`Run in container: ${u.replace(/\n.*/g,"")}`,d;if((l==null?void 0:l.logOutput)!=="silent"&&(d=e.start(f,l==null?void 0:l.logLevel)),i.stdin.destroyed){e.write("Stdin closed!");let{code:w,signal:x}=await i.exit;return Promise.reject({message:`Shell server terminated (code: ${w}, signal: ${x})`,code:w,signal:x})}i.stdin.write(`echo -n ${yl}; ( ${u} ); echo -n ${yl}$?${yl}; echo -n ${yl} >&2
`);let[p,h]=BT(i.stdout,[1,2],(l==null?void 0:l.logOutput)==="continuous"?(w,x,_)=>{x===1&&_===0&&e.write(w,l==null?void 0:l.logLevel)}:()=>{}),g=BT(i.stderr,[1],(l==null?void 0:l.logOutput)==="continuous"?(w,x,_)=>{x===0&&_===0&&e.write(w,l==null?void 0:l.logLevel)}:()=>{})[0];(l==null?void 0:l.stdin)&&(await p,i.stdin.write(l==null?void 0:l.stdin));let[v,C]=await h,[y]=await g,E=parseInt(C,10)||0;return((l==null?void 0:l.logOutput)===void 0||(l==null?void 0:l.logOutput)===!0)&&(e.write(v,l==null?void 0:l.logLevel),e.write(y,l==null?void 0:l.logLevel),E&&e.write(`Exit code ${E}`,l==null?void 0:l.logLevel)),(l==null?void 0:l.logOutput)==="continuous"&&E&&e.write(`Exit code ${E}`,l==null?void 0:l.logLevel),(l==null?void 0:l.logOutput)!=="silent"&&e.stop(f,d,l==null?void 0:l.logLevel),E?Promise.reject({message:`Command in container failed: ${u}`,code:E,stdout:v,stderr:y}):{stdout:v,stderr:y}}return{exec:a}}function BT(t,e,r){let n=e.map(()=>{let l,f=new Promise((d,p)=>l={resolve:d,reject:p});return A({promise:f},l)}),i=new HT.StringDecoder("utf8"),o=[],s=0,a=[];function c(l){let f=i.write(l);u(f)}function u(l){let f=l.indexOf(yl);if(f!==-1){let d=l.substr(0,f);o.push(d),r(d,s,a.length),a.push(o.join("")),o.length=0,a.length===e[s]&&(n[s].resolve(a),s++,a=[],s===e.length&&t.off("data",c)),f+1<l.length&&u(l.substr(f+1))}else o.push(l),r(l,s,a.length)}return t.on("data",c),n.map(l=>l.promise)}function A7(t){let e,r=new Promise((c,u)=>e=u),n=[],i=[],o=c=>n.push(c),s=c=>i.push(c);return t.stdout.on("data",o),t.stderr.on("data",s),t.exit.then(({code:c,signal:u})=>{e(`Shell server terminated (code: ${c}, signal: ${u})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",o),t.stderr.off("data",s),n.length=0,i.length=0}}}var VT=k(require("path"));var R7=["install.sh","install","bootstrap.sh","bootstrap","script/bootstrap","setup.sh","setup","script/setup"];async function GT(t,e,r,n,i){let{repository:o,installCommand:s,targetPath:a}=t.dotfilesConfiguration;if(o=i["remote.containers.dotfiles.repository"]||i["dotfiles.repository"]||o,s=i["remote.containers.dotfiles.installCommand"]||i["dotfiles.installCommand"]||s,a=i["remote.containers.dotfiles.targetPath"]||i["dotfiles.targetPath"]||a,!o)return;await n;let c=await r;o.indexOf(":")===-1&&!/^\.{0,2}\//.test(o)&&(o=`https://github.com/${o}.git`);let u=e.shellServer,l=T7(e),f=Object.keys(c).reduce((d,p)=>`${d}${p}='${c[p]}' `,"");try{t.output.event({type:"progress",name:"Installing Dotfiles",status:"running"}),s?await u.exec(`# Clone & install dotfiles
${Xp(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${o} ${a} || exit $?
if [ -x ${s} ]
then
	echo Executing script ${s}
	cd ${a} && ${f}${s}
else
	echo Error: ${s} not executable
	exit 126
fi
`,{logOutput:"continuous",logLevel:ne.Info}):await u.exec(`# Clone & install dotfiles
${Xp(l)} || (echo dotfiles marker found && exit 1) || exit 0
command -v git >/dev/null 2>&1 || (echo git not found && exit 1) || exit 0
[ -e ${a} ] || ${f}git clone ${o} ${a} || exit $?
cd ${a}
for f in ${R7.join(" ")}
do
	if [ -e $f ]
	then
		installCommand=$f
		break
	fi
done
if [ -z "$installCommand" ]
then
	dotfiles=$(ls -d ${a}/.* 2>/dev/null | grep -v -E '/(.|..|.git)$')
	if [ ! -z "$dotfiles" ]
	then
		echo Linking dotfiles: $dotfiles
		ln -sf $dotfiles ~ 2>/dev/null
	else
		echo No dotfiles found.
	fi
else
	if [ -x "$installCommand" ]
	then
		echo Executing script '${a}'/"$installCommand"
		${f}./"$installCommand"
	else
		echo Error: '${a}'/"$installCommand" not executable
		exit 126
	fi
fi
`,{logOutput:"continuous",logLevel:ne.Info}),t.output.event({type:"progress",name:"Installing Dotfiles",status:"succeeded"})}catch(d){t.output.event({type:"progress",name:"Installing Dotfiles",status:"failed"})}}function T7(t){return VT.posix.join(ms(t),".dotfilesMarker")}var co=k(require("path")),Eh=k(require("net")),vN=k(require("crypto")),yN=k(eh()),CN=k(require("util")),wN=k(require("string_decoder"));var lr=k(require("path")),rh=k(require("os")),Xk=k(require("fs")),Ja=k(require("child_process")),Mw=k(require("string_decoder"));var Kk;Kk=(()=>{"use strict";var t={470:n=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function o(a,c){for(var u,l="",f=0,d=-1,p=0,h=0;h<=a.length;++h){if(h<a.length)u=a.charCodeAt(h);else{if(u===47)break;u=47}if(u===47){if(!(d===h-1||p===1))if(d!==h-1&&p===2){if(l.length<2||f!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var g=l.lastIndexOf("/");if(g!==l.length-1){g===-1?(l="",f=0):f=(l=l.slice(0,g)).length-1-l.lastIndexOf("/"),d=h,p=0;continue}}else if(l.length===2||l.length===1){l="",f=0,d=h,p=0;continue}}c&&(l.length>0?l+="/..":l="..",f=2)}else l.length>0?l+="/"+a.slice(d+1,h):l=a.slice(d+1,h),f=h-d-1;d=h,p=0}else u===46&&p!==-1?++p:p=-1}return l}var s={resolve:function(){for(var a,c="",u=!1,l=arguments.length-1;l>=-1&&!u;l--){var f;l>=0?f=arguments[l]:(a===void 0&&(a=process.cwd()),f=a),i(f),f.length!==0&&(c=f+"/"+c,u=f.charCodeAt(0)===47)}return c=o(c,!u),u?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,u=a.charCodeAt(a.length-1)===47;return(a=o(a,!c)).length!==0||c||(a="."),a.length>0&&u&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var u=arguments[c];i(u),u.length>0&&(a===void 0?a=u:a+="/"+u)}return a===void 0?".":s.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c||(a=s.resolve(a))===(c=s.resolve(c)))return"";for(var u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var l=a.length,f=l-u,d=1;d<c.length&&c.charCodeAt(d)===47;++d);for(var p=c.length-d,h=f<p?f:p,g=-1,v=0;v<=h;++v){if(v===h){if(p>h){if(c.charCodeAt(d+v)===47)return c.slice(d+v+1);if(v===0)return c.slice(d+v)}else f>h&&(a.charCodeAt(u+v)===47?g=v:v===0&&(g=0));break}var C=a.charCodeAt(u+v);if(C!==c.charCodeAt(d+v))break;C===47&&(g=v)}var y="";for(v=u+g+1;v<=l;++v)v!==l&&a.charCodeAt(v)!==47||(y.length===0?y+="..":y+="/..");return y.length>0?y+c.slice(d+g):(d+=g,c.charCodeAt(d)===47&&++d,c.slice(d))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),u=c===47,l=-1,f=!0,d=a.length-1;d>=1;--d)if((c=a.charCodeAt(d))===47){if(!f){l=d;break}}else f=!1;return l===-1?u?"/":".":u&&l===1?"//":a.slice(0,l)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var u,l=0,f=-1,d=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var p=c.length-1,h=-1;for(u=a.length-1;u>=0;--u){var g=a.charCodeAt(u);if(g===47){if(!d){l=u+1;break}}else h===-1&&(d=!1,h=u+1),p>=0&&(g===c.charCodeAt(p)?--p==-1&&(f=u):(p=-1,f=h))}return l===f?f=h:f===-1&&(f=a.length),a.slice(l,f)}for(u=a.length-1;u>=0;--u)if(a.charCodeAt(u)===47){if(!d){l=u+1;break}}else f===-1&&(d=!1,f=u+1);return f===-1?"":a.slice(l,f)},extname:function(a){i(a);for(var c=-1,u=0,l=-1,f=!0,d=0,p=a.length-1;p>=0;--p){var h=a.charCodeAt(p);if(h!==47)l===-1&&(f=!1,l=p+1),h===46?c===-1?c=p:d!==1&&(d=1):c!==-1&&(d=-1);else if(!f){u=p+1;break}}return c===-1||l===-1||d===0||d===1&&c===l-1&&c===u+1?"":a.slice(c,l)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,u){var l=u.dir||u.root,f=u.base||(u.name||"")+(u.ext||"");return l?l===u.root?l+f:l+"/"+f:f}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var u,l=a.charCodeAt(0),f=l===47;f?(c.root="/",u=1):u=0;for(var d=-1,p=0,h=-1,g=!0,v=a.length-1,C=0;v>=u;--v)if((l=a.charCodeAt(v))!==47)h===-1&&(g=!1,h=v+1),l===46?d===-1?d=v:C!==1&&(C=1):d!==-1&&(C=-1);else if(!g){p=v+1;break}return d===-1||h===-1||C===0||C===1&&d===h-1&&d===p+1?h!==-1&&(c.base=c.name=p===0&&f?a.slice(1,h):a.slice(p,h)):(p===0&&f?(c.name=a.slice(1,d),c.base=a.slice(1,h)):(c.name=a.slice(p,d),c.base=a.slice(p,h)),c.ext=a.slice(d,h)),p>0?c.dir=a.slice(0,p-1):f&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,n.exports=s},447:(n,i,o)=>{var s;if(o.r(i),o.d(i,{URI:()=>C,Utils:()=>W}),typeof process=="object")s=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;s=a.indexOf("Windows")>=0}var c,u,l=(c=function(D,P){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,$){O.__proto__=$}||function(O,$){for(var Q in $)Object.prototype.hasOwnProperty.call($,Q)&&(O[Q]=$[Q])})(D,P)},function(D,P){function O(){this.constructor=D}c(D,P),D.prototype=P===null?Object.create(P):(O.prototype=P.prototype,new O)}),f=/^\w[\w\d+.-]*$/,d=/^\//,p=/^\/\//,h="",g="/",v=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,C=function(){function D(P,O,$,Q,se,de){de===void 0&&(de=!1),typeof P=="object"?(this.scheme=P.scheme||h,this.authority=P.authority||h,this.path=P.path||h,this.query=P.query||h,this.fragment=P.fragment||h):(this.scheme=function(xe,Er){return xe||Er?xe:"file"}(P,de),this.authority=O||h,this.path=function(xe,Er){switch(xe){case"https":case"http":case"file":Er?Er[0]!==g&&(Er=g+Er):Er=g}return Er}(this.scheme,$||h),this.query=Q||h,this.fragment=se||h,function(xe,Er){if(!xe.scheme&&Er)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+xe.authority+'", path: "'+xe.path+'", query: "'+xe.query+'", fragment: "'+xe.fragment+'"}');if(xe.scheme&&!f.test(xe.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(xe.path){if(xe.authority){if(!d.test(xe.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(xe.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}(this,de))}return D.isUri=function(P){return P instanceof D||!!P&&typeof P.authority=="string"&&typeof P.fragment=="string"&&typeof P.path=="string"&&typeof P.query=="string"&&typeof P.scheme=="string"&&typeof P.fsPath=="function"&&typeof P.with=="function"&&typeof P.toString=="function"},Object.defineProperty(D.prototype,"fsPath",{get:function(){return S(this,!1)},enumerable:!1,configurable:!0}),D.prototype.with=function(P){if(!P)return this;var O=P.scheme,$=P.authority,Q=P.path,se=P.query,de=P.fragment;return O===void 0?O=this.scheme:O===null&&(O=h),$===void 0?$=this.authority:$===null&&($=h),Q===void 0?Q=this.path:Q===null&&(Q=h),se===void 0?se=this.query:se===null&&(se=h),de===void 0?de=this.fragment:de===null&&(de=h),O===this.scheme&&$===this.authority&&Q===this.path&&se===this.query&&de===this.fragment?this:new E(O,$,Q,se,de)},D.parse=function(P,O){O===void 0&&(O=!1);var $=v.exec(P);return $?new E($[2]||h,U($[4]||h),U($[5]||h),U($[7]||h),U($[9]||h),O):new E(h,h,h,h,h)},D.file=function(P){var O=h;if(s&&(P=P.replace(/\\/g,g)),P[0]===g&&P[1]===g){var $=P.indexOf(g,2);$===-1?(O=P.substring(2),P=g):(O=P.substring(2,$),P=P.substring($)||g)}return new E("file",O,P,h,h)},D.from=function(P){return new E(P.scheme,P.authority,P.path,P.query,P.fragment)},D.prototype.toString=function(P){return P===void 0&&(P=!1),I(this,P)},D.prototype.toJSON=function(){return this},D.revive=function(P){if(P){if(P instanceof D)return P;var O=new E(P);return O._formatted=P.external,O._fsPath=P._sep===y?P.fsPath:null,O}return P},D}(),y=s?1:void 0,E=function(D){function P(){var O=D!==null&&D.apply(this,arguments)||this;return O._formatted=null,O._fsPath=null,O}return l(P,D),Object.defineProperty(P.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=S(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),P.prototype.toString=function(O){return O===void 0&&(O=!1),O?I(this,!0):(this._formatted||(this._formatted=I(this,!1)),this._formatted)},P.prototype.toJSON=function(){var O={$mid:1};return this._fsPath&&(O.fsPath=this._fsPath,O._sep=y),this._formatted&&(O.external=this._formatted),this.path&&(O.path=this.path),this.scheme&&(O.scheme=this.scheme),this.authority&&(O.authority=this.authority),this.query&&(O.query=this.query),this.fragment&&(O.fragment=this.fragment),O},P}(C),w=((u={})[58]="%3A",u[47]="%2F",u[63]="%3F",u[35]="%23",u[91]="%5B",u[93]="%5D",u[64]="%40",u[33]="%21",u[36]="%24",u[38]="%26",u[39]="%27",u[40]="%28",u[41]="%29",u[42]="%2A",u[43]="%2B",u[44]="%2C",u[59]="%3B",u[61]="%3D",u[32]="%20",u);function x(D,P){for(var O=void 0,$=-1,Q=0;Q<D.length;Q++){var se=D.charCodeAt(Q);if(se>=97&&se<=122||se>=65&&se<=90||se>=48&&se<=57||se===45||se===46||se===95||se===126||P&&se===47)$!==-1&&(O+=encodeURIComponent(D.substring($,Q)),$=-1),O!==void 0&&(O+=D.charAt(Q));else{O===void 0&&(O=D.substr(0,Q));var de=w[se];de!==void 0?($!==-1&&(O+=encodeURIComponent(D.substring($,Q)),$=-1),O+=de):$===-1&&($=Q)}}return $!==-1&&(O+=encodeURIComponent(D.substring($))),O!==void 0?O:D}function _(D){for(var P=void 0,O=0;O<D.length;O++){var $=D.charCodeAt(O);$===35||$===63?(P===void 0&&(P=D.substr(0,O)),P+=w[$]):P!==void 0&&(P+=D[O])}return P!==void 0?P:D}function S(D,P){var O;return O=D.authority&&D.path.length>1&&D.scheme==="file"?"//"+D.authority+D.path:D.path.charCodeAt(0)===47&&(D.path.charCodeAt(1)>=65&&D.path.charCodeAt(1)<=90||D.path.charCodeAt(1)>=97&&D.path.charCodeAt(1)<=122)&&D.path.charCodeAt(2)===58?P?D.path.substr(1):D.path[1].toLowerCase()+D.path.substr(2):D.path,s&&(O=O.replace(/\//g,"\\")),O}function I(D,P){var O=P?_:x,$="",Q=D.scheme,se=D.authority,de=D.path,xe=D.query,Er=D.fragment;if(Q&&($+=Q,$+=":"),(se||Q==="file")&&($+=g,$+=g),se){var ci=se.indexOf("@");if(ci!==-1){var Vd=se.substr(0,ci);se=se.substr(ci+1),(ci=Vd.indexOf(":"))===-1?$+=O(Vd,!1):($+=O(Vd.substr(0,ci),!1),$+=":",$+=O(Vd.substr(ci+1),!1)),$+="@"}(ci=(se=se.toLowerCase()).indexOf(":"))===-1?$+=O(se,!1):($+=O(se.substr(0,ci),!1),$+=se.substr(ci))}if(de){if(de.length>=3&&de.charCodeAt(0)===47&&de.charCodeAt(2)===58)(_a=de.charCodeAt(1))>=65&&_a<=90&&(de="/"+String.fromCharCode(_a+32)+":"+de.substr(3));else if(de.length>=2&&de.charCodeAt(1)===58){var _a;(_a=de.charCodeAt(0))>=65&&_a<=90&&(de=String.fromCharCode(_a+32)+":"+de.substr(2))}$+=O(de,!0)}return xe&&($+="?",$+=O(xe,!1)),Er&&($+="#",$+=P?Er:x(Er,!1)),$}function R(D){try{return decodeURIComponent(D)}catch(P){return D.length>3?D.substr(0,3)+R(D.substr(3)):D}}var T=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function U(D){return D.match(T)?D.replace(T,function(P){return R(P)}):D}var W,K=o(470),oe=function(){for(var D=0,P=0,O=arguments.length;P<O;P++)D+=arguments[P].length;var $=Array(D),Q=0;for(P=0;P<O;P++)for(var se=arguments[P],de=0,xe=se.length;de<xe;de++,Q++)$[Q]=se[de];return $},X=K.posix||K;(function(D){D.joinPath=function(P){for(var O=[],$=1;$<arguments.length;$++)O[$-1]=arguments[$];return P.with({path:X.join.apply(X,oe([P.path],O))})},D.resolvePath=function(P){for(var O=[],$=1;$<arguments.length;$++)O[$-1]=arguments[$];var Q=P.path||"/";return P.with({path:X.resolve.apply(X,oe([Q],O))})},D.dirname=function(P){var O=X.dirname(P.path);return O.length===1&&O.charCodeAt(0)===46?P:P.with({path:O})},D.basename=function(P){return X.basename(P.path)},D.extname=function(P){return X.extname(P.path)}})(W||(W={}))}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var o in i)r.o(i,o)&&!r.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:i[o]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:pe,Utils:_n}=Kk;var Yk=k(require("path"));function be(t,e){if(Cl(e)){let r=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Cl(t){return Yk.extname(t)===".code-workspace"}async function th(t,e){if(!!e.isWorkspaceFile)try{let r=e.rootFolderPath,n=(await t.readFile(e.workspaceOrFolderPath)).toString(),o=Be(n).folders;if(o&&o.length>0){for(let s of o){let a=s.path,c;if(a){if(t.path.isAbsolute(a))return`Workspace contains an absolute folder path '${a}'.`;c=t.path.resolve(r,a)}else{let u=s.uri;return u?pe.parse(u).scheme!=="file"?`Workspace contains folder '${u}' not on the local file system.`:`Workspace contains an absolute folder path '${u}'.`:"Workspace contains a folder that defines neither a path nor a URI."}if(!tY(t,c,r))return`Folder '${c}' is not a subfolder of shared root folder '${r}'.`}return}return"Workspace does not define any folders"}catch(r){return`Problems loading workspace file ${e.workspaceOrFolderPath}: ${r.message||r.toString()}`}}function tY(t,e,r){return e===r?!0:!e||!r||r.length>e.length||e.length>r.length&&e.charAt(r.length)!==t.path.sep?!1:rY(t.platform,r,e.substr(0,r.length))}function rY(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var vs;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(vs||(vs={}));function Qk(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var nY=lr.join(__dirname,"..","..","node_modules",".bin","ts-node"),$w=lr.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function J(t){let{exec:e,cmd:r,args:n,cwd:i,env:o,stdin:s,output:a,print:c}=t,u=await e({cmd:r,args:n,cwd:i,env:o,output:a});return new Promise((l,f)=>{let d=[],p=[],h=c==="continuous"?new Mw.StringDecoder:void 0;u.stdout.on("data",v=>{d.push(v),c==="continuous"&&a.write(h.write(v))}),u.stdout.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v});let g=c==="continuous"?new Mw.StringDecoder:void 0;u.stderr.on("data",v=>{p.push(v),c==="continuous"&&a.write(we(g.write(v)))}),u.stderr.on("error",v=>{if((v==null?void 0:v.code)!=="ENOTCONN")throw v}),u.exit.then(({code:v})=>{try{let C=Buffer.concat(d),y=Buffer.concat(p);(c===!0||v&&c==="onerror")&&(a.write(C.toString().replace(/\r?\n/g,`\r
`)),a.write(we(y.toString()))),c&&v&&a.write(`Exit code ${v}`),v?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:C,stderr:y,code:v}):l({stdout:C,stderr:y})}catch(C){f(C)}},f),s instanceof Buffer?(u.stdin.write(s,v=>{v&&f(v)}),u.stdin.end()):s instanceof Xk.ReadStream&&s.pipe(u.stdin)})}async function gi(t){var u,l;let{ptyExec:e,cmd:r,args:n,cwd:i,env:o,output:s,resolveOn:a}=t,c=await e({cmd:r,args:n,cwd:i,env:o,cols:(u=s.dimensions)==null?void 0:u.columns,rows:(l=s.dimensions)==null?void 0:l.rows,output:s});return new Promise((f,d)=>{let p="",h=s.onDidChangeDimensions&&s.onDidChangeDimensions(g=>{c.resize(g.columns,g.rows)});c.onData(g=>{p+=g,s.raw(g),a&&a.exec(p)&&f({cmdOutput:p})}),c.exit.then(({code:g})=>{try{h&&h.dispose(),g?d({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:p,code:g}):f({cmdOutput:p})}catch(v){d(v)}},d)})}function wl(t){return async function(e){let{cmd:r,args:n,output:i}=e,o=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,s=i.start(o),a=e.cwd||t,c=e.env?A(A({},process.env),e.env):process.env,u=await nh(r,a,c,i),l=Ja.spawn(u,n,{cwd:a,env:c,windowsHide:!0});return{stdin:l.stdin,stdout:l.stdout,stderr:l.stderr,exit:new Promise((f,d)=>{l.once("error",p=>{i.stop(o,s),d(p)}),l.once("close",(p,h)=>{i.stop(o,s),f({code:p,signal:h})})}),async terminate(){l.kill("SIGKILL")}}}}async function iY(t,e){let r=await e("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){let{cmd:i,args:o,cols:s,rows:a,output:c}=n,u=`Run: ${i} ${(o||[]).join(" ").replace(/\n.*/g,"")}`,l=c.start(u),f=!1,d=n.cwd||t,p=n.env?A(A({},process.env),n.env):process.env,h=await nh(i,d,p,c),g=r.spawn(h,o||[],{cwd:d,env:p,cols:s,rows:a,useConpty:f});return{onData:g.onData.bind(g),write:g.write.bind(g),resize:g.resize.bind(g),exit:new Promise(v=>{g.onExit(({exitCode:C,signal:y})=>{if(c.stop(u,l),v({code:C,signal:y}),process.platform==="win32")try{g.kill()}catch{}})}),async terminate(){g.kill("SIGKILL")}}}}function Uw(t,e,r){return async function(n){let{env:i,cmd:o,args:s,output:a}=n,c=n.cwd||r,u=c?`cd '${c}' && `:"",l=Object.keys(i||{}).map(y=>`${y}='${i[y]}' `).join(""),f=(s||[]).map(y=>` '${y.replace(/'/g,`'"'"'`)}'`).join(""),d=`${u}${l}${o}${f}`,p=[...e,"/bin/sh","-c",d],h=`Run: ${t} ${p.join(" ").replace(/\n.*/g,"")}`,g=a.start(h),v=await nh(t,process.cwd(),process.env,a),C=Ja.spawn(v,p,{windowsHide:!0});return{stdin:C.stdin,stdout:C.stdout,stderr:C.stderr,exit:new Promise((y,E)=>{C.once("error",w=>{a.stop(h,g),E(w)}),C.once("close",(w,x)=>{a.stop(h,g),y({code:w,signal:x})})}),async terminate(){C.kill("SIGKILL")}}}}async function jw(t,e,r,n){let i=await n("node-pty");if(!i)throw new Error("Missing node-pty");return async function(o){let{env:s,cmd:a,args:c,cols:u,rows:l,output:f}=o,d=o.cwd||r,p=d?`cd '${d}' && `:"",h=Object.keys(s||{}).map(S=>`${S}='${s[S]}' `).join(""),g=(c||[]).map(S=>` '${S.replace(/'/g,`'"'"'`)}'`).join(""),v=`${p}${h}${a}${g}`,C=[...e,"/bin/sh","-c",v],y=`Run: ${t} ${C.join(" ").replace(/\n.*/g,"")}`,E=f.start(y),w=!1,x=await nh(t,process.cwd(),process.env,f),_=i.spawn(x,C,{cols:u,rows:l,useConpty:w});return{onData:_.onData.bind(_),write:_.write.bind(_),resize:_.resize.bind(_),exit:new Promise(S=>{_.onExit(({exitCode:I,signal:R})=>{if(f.stop(y,E),S({code:I,signal:R}),process.platform==="win32")try{_.kill()}catch{}})}),async terminate(){_.kill("SIGKILL")}}}}async function nh(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(lr.isAbsolute(t))return await El(t)||t;if(/[/\\]/.test(t)){let a=lr.join(e,t);return await El(a)||a}let i,o;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,o=c.split(lr.delimiter).filter(Boolean),o.push(lr.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(o===void 0||o.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=lr.join(e,t);return await El(a)||a}for(let a of o){let c;lr.isAbsolute(a)?c=lr.join(a,t):c=lr.join(e,a,t);let u=await El(c);if(u)return u}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let s=lr.join(e,t);return await El(s)||s}var Jk=process.env.PATHEXT,Zk=Jk?Jk.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function El(t){if(Zk.indexOf(lr.extname(t))!==-1)return await vt(t)?t:void 0;for(let e of Zk){let r=t+e;if(await vt(r))return r}}async function Jr(t,e,r,n=!0){if(typeof t!="string"||n&&Mr(t)){let i=typeof t=="string"?ih(t):t.wslDistro,o=typeof t=="string"?await oh(i,t,r):t.wslPath,s=Uw("wsl",["-d",i,"-e"],o),a=await jw("wsl",["-d",i,"-e"],o,e),c=_l("wsl",o,s,a,r);return c.env=await sY(c,i,r),c.toCommonURI=async u=>{try{return pe.file((await J({exec:s,cmd:"wslpath",args:["-w",u],output:r})).stdout.toString().trim())}catch(l){return}},c}return await oY(t,e)}async function oY(t,e){return{type:"local",platform:process.platform,exec:wl(t),ptyExec:await iY(t,e),cwd:t,env:process.env,path:lr,homedir:async()=>rh.homedir(),tmpdir:async()=>rh.tmpdir(),isFile:vt,isFolder:Ku,readFile:Ce,writeFile:Gd,rename:xa,mkdirp:async r=>{await wn(r)},readDir:Gr,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async r=>pe.file(r)}}function _l(t,e,r,n,i){let o;return{type:t,platform:"linux",exec:r,ptyExec:n,cwd:e,env:{},path:lr.posix,async homedir(){var s;return typeof o=="undefined"&&(o=this.env.HOME||((s=sh((await this.readFile("/etc/passwd")).toString(),(await this.getuid()).toString()))==null?void 0:s.home)||"/"),o},async tmpdir(){return this.env.TMPDIR||"/tmp"},isFile:async s=>{try{return await J({exec:r,cmd:"test",args:["-f",s],output:Ye}),!0}catch(a){if((a==null?void 0:a.code)!==1)throw a;return!1}},isFolder:async s=>{try{return await J({exec:r,cmd:"test",args:["-d",s],output:Ye}),!0}catch(a){if((a==null?void 0:a.code)!==1)throw a;return!1}},readFile:async s=>{try{return(await J({exec:r,cmd:"cat",args:[s],output:Ye})).stdout}catch(a){let c=new Error(`Could not read file: ${s}`);throw c.originalError=a,c.code="ENOENT",c}},writeFile:async(s,a)=>{await J({exec:r,cmd:"/bin/sh",args:["-c",`cat >'${s}'`],stdin:a,output:Ye})},rename:async(s,a)=>{await J({exec:r,cmd:"mv",args:[s,a],output:Ye})},mkdirp:async s=>{await J({exec:r,cmd:"mkdir",args:["-p",s],output:Ye})},readDir:async s=>(await J({exec:r,cmd:"ls",args:["-a",s],output:Ye})).stdout.toString().trim().split(`
`).filter(a=>a!=="."&&a!==".."),readDirWithTypes:async s=>{let a={f:1,"*":1,"/":2,"@":64};return(await J({exec:r,cmd:"ls",args:["-aF",s],output:Ye})).stdout.toString().trim().split(`
`).map(c=>"/*@=%|>".indexOf(c[c.length-1])!==-1?[c.substr(0,c.length-1),c[c.length-1]]:[c,"f"]).filter(([c])=>c!=="."&&c!=="..").map(([c,u])=>[c,a[u]||0])},getuid:async()=>{let s=await J({exec:r,cmd:"id",args:["-u"],output:Ye});return parseInt(s.stdout.toString().trim(),10)},getgid:async()=>{let s=await J({exec:r,cmd:"id",args:["-g"],output:Ye});return parseInt(s.stdout.toString().trim(),10)},toCommonURI:()=>Promise.resolve(void 0)}}var eD=/^\\\\wsl(\.localhost|\$)?\\/;function Mr(t){return eD.test(t.toLowerCase())}function ih(t){let e=t.toLowerCase(),r=eD.exec(e);if(!r)return"";let n=e.indexOf("\\",r[0].length);return t.substring(r[0].length,n)}async function sY(t,e,r){let n;try{let{stdout:o}=await J({exec:wl(void 0),cmd:"wsl",args:["-d",e],stdin:Buffer.from(`printenv ; exit
`),output:r,print:"onerror"});n=o.toString()}catch{let{stdout:o}=await J({exec:t.exec,cmd:"printenv",output:r,print:"onerror"});n=o.toString()}let i=aY(n);return delete i.WSL_INTEROP,delete i.PWD,i}function aY(t){let e={};return t.trim().split(`
`).forEach(r=>{let n=r.indexOf("=");n!==-1&&(e[r.substr(0,n)]=r.substr(n+1))}),e}async function oh(t,e,r){let{stdout:n}=await J({exec:wl(void 0),cmd:"wsl",args:["-d",t,"-e","wslpath","-u",e],output:r});return n.toString().trim()}async function xl(t,e){let r=ih(t),n=await oh(r,t,e);return pe.parse(`vscode-remote://wsl+${r}${n}`)}function bl(t){if(t.scheme==="vscode-remote"){let e=/wsl\+(.*)/.exec(t.authority);if(e){let r=t.path;return Cl(r)&&(r=lr.posix.dirname(r)),{wslDistro:e[1],wslPath:r}}}}function Za(t){let e=/^'?(\d+(\.\d+)*)/.exec(t);if(!!e)return e[1].split(".").map(r=>parseInt(r,10))}function ec(t,e){for(let r=0,n=Math.max(t.length,e.length);r<n;r++){let i=t[r]||0,o=e[r]||0;if(i!==o)return i<o}return!1}var tD=$w?(t,e,r)=>Ja.spawn(nY,[t,...e||[]],j(A({},r),{windowsHide:!0})):Ja.fork;async function rD(t,e){if(!e){try{return require(t)}catch(r){}return}try{return require(`${e}/node_modules.asar/${t}`)}catch(r){}try{return require(`${e}/node_modules/${t}`)}catch(r){}}function Sl(t){let{output:e}=t,r=[];return{output:yt(j(A({},e),{event:i=>r?r.push(i):e.event(i)})),flush:()=>{r&&(r.forEach(i=>e.event(i)),r=void 0)}}}function nD(t,e){return yt(j(A({},t),{event:n=>{t.event(n),e.event(n)}}))}var ah=k(require("path"));async function iD(t,e){let r=await oD(t.cliHost,"agent-extra-socket",t.output);if(!r)return;let n=await Hw(e,"agent-socket");if(!n)return;let i=await Hw(e,"homedir");try{let{stdout:s}=await e.exec(`ls '${i}/private-keys-v1.d' 2>/dev/null`);if(s.trim())return}catch{}let o=(async()=>{await e.exec(`mkdir -p -m 700 '${ah.posix.dirname(n)}'`);let s=await oD(t.cliHost,"homedir",t.output),a=await Hw(e,"homedir");s&&a&&(await Pl(t,{shellServer:e},t.cliHost.path.join(s,"pubring.kbx"),ah.posix.join(a,"pubring.kbx"),"gpg"),await Pl(t,{shellServer:e},t.cliHost.path.join(s,"trustdb.gpg"),ah.posix.join(a,"trustdb.gpg"),"gpg")),await cY(t.cliHost,t.output)})();return{remoteGpgSocket:n,localGpgSocket:r,ready:o}}async function oD(t,e,r){try{let{stdout:n}=await J({exec:t.exec,cmd:"gpgconf",args:["--list-dir",e],output:r,print:!0}),i=n.toString().trim();if(i.indexOf(`
`)!==-1){let o=new RegExp(`^${e}:(.*)$`,"m").exec(i);o&&(i=o[1])}return t.platform==="win32"&&/^\/.\//.test(i)&&(i=`${i.charAt(1)}:${i.substr(2).replace(/\//g,"\\")}`),i}catch(n){return}}async function Hw(t,e){try{let{stdout:r}=await t.exec(`gpgconf --list-dir ${e}`),n=r.trim();if(n.indexOf(`
`)!==-1){let i=new RegExp(`^${e}:(.*)$`,"m").exec(n);if(i)return i[1]}return n}catch(r){return}}async function cY(t,e){try{await J({exec:t.exec,cmd:"gpg-connect-agent",args:["updatestartuptty","/bye"],output:e})}catch(r){}}async function ch(t,e,r){try{let{stdout:n}=await J({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:r}),i=n.toString().trim();return t.path.resolve(e,i)}catch{return}}async function Bw(t,e,r){try{return await J({exec:t.exec,cmd:"git",args:["ls-remote",e],cwd:".",output:r}),!0}catch(n){return!1}}async function sD({exec:t},e,r){try{let{stdout:n,stderr:i}=await J({exec:t,cmd:"git",args:["credential",e],env:{GIT_TERMINAL_PROMPT:"0"},stdin:Buffer.from(r),output:Ye});return{stdout:n.toString(),stderr:i.toString(),code:0}}catch(n){if(!(n&&n.stdout&&n.stderr))throw n;let{stdout:i,stderr:o,code:s}=n,a=o.toString();return a.indexOf("terminal prompts disabled")!==-1&&(a=""),{stdout:i.toString(),stderr:a,code:s||0}}}async function aD(t,e,r){let n=await Vw(t,e,r);if(!n)return;n.startsWith("refs/")&&(n=n.substr(5)),n.startsWith("remotes/")&&(n=n.substr(8));let i=n.indexOf("/");if(i===-1)return;let o=n.substr(0,i),s=n.substr(i+1);try{let{stdout:a}=await J({exec:t.exec,cmd:"git",args:["remote","get-url",o],cwd:e.rootFolderPath,output:r}),c=a.toString().trim();if(c.endsWith(".git")&&(c=c.substr(0,c.length-4)),c.startsWith("https://github.com/")){let u=await dY(t,e,o,r);if(u&&s!==u)return`${c}/tree/${s}`}return c}catch{return}}async function cD(t,e,r){let n;try{let{stdout:i}=await J({exec:t.exec,cmd:"git",args:["remote","-v"],cwd:e.rootFolderPath,output:r});n=i.toString()}catch{return}return Array.from(new Set(uY(/^[^\s]+\s+([^\s]+)/gm,n,1)))}function uY(t,e,r){return{[Symbol.iterator]:function*(){let n;for(;n=t.exec(e);)yield n[r],t.lastIndex===n.index&&t.lastIndex++}}}async function uD(t,e,r){return await lY(t,e,r)||fY(t,e,r)}async function lY(t,e,r){try{let{stdout:n}=await J({exec:t.exec,cmd:"git",args:["status","--porcelain"],cwd:e.rootFolderPath,output:r});return!!n.toString().trim()}catch{return}}async function fY(t,e,r){let n=await Vw(t,e,r);if(!!n)try{let{stdout:i}=await J({exec:t.exec,cmd:"git",args:["log",`${n}..HEAD`],cwd:e.rootFolderPath,output:r});return!!i.toString().trim()}catch{return}}async function lD(t,e,r,n){let i=await Vw(t,e,n);if(!i)return!1;try{let o=t.platform==="win32"?r.replace(/\\/g,"/"):r;return await J({exec:t.exec,cmd:"git",args:["cat-file","-e",`${i}:${o}`],cwd:e.rootFolderPath,output:n}),!0}catch{return!1}}async function Vw(t,e,r){try{let{stdout:n}=await J({exec:t.exec,cmd:"git",args:["rev-parse","--abbrev-ref","--symbolic-full-name","@{u}"],cwd:e.rootFolderPath,output:r});return n.toString().trim()}catch{return}}async function dY(t,e,r,n){try{let{stdout:i}=await J({exec:t.exec,cmd:"git",args:["remote","show",r],cwd:e.rootFolderPath,output:n});return(i.toString().match(/^\s*HEAD branch:\s*(.*)$/m)||[])[1]}catch{return}}async function uh(t,e,r,n,i,o){let{extensionPath:s}=t;if(await e.isFolder(e.path.join(r,".git")))return{gitClone:void 0,gitUnshallow:void 0};await e.mkdirp(r);let a=n.tokenEnvVar?j(A({},n.env),{GIT_ASKPASS:e.path.join(s,"scripts","gitAskPass.sh"),GIT_TOKEN:e.env[n.tokenEnvVar]}):n.env,c=[];n.fullClone||c.push("--depth","1"),n.branch&&c.push("--branch",n.branch),n.recurseSubmodules&&c.push("--recurse-submodules");let u=gi({ptyExec:e.ptyExec,cmd:"git",args:["clone",...c,n.url,"."],cwd:r,env:a,output:yt(i,ne.Info)}),l=n.fullClone?u:(async()=>(await u,await gi({ptyExec:e.ptyExec,cmd:"git",args:["config","remote.origin.fetch","+refs/heads/*:refs/remotes/origin/*"],cwd:r,env:a,output:o}),gi({ptyExec:e.ptyExec,cmd:"git",args:["fetch","--unshallow","--tags"],cwd:r,env:a,output:o})))();return{gitClone:u,gitUnshallow:l}}var uo=k(require("stream"));async function fD(t,e){let{stdout:r}=await t.exec(`cat /proc/${e}/environ`,{logOutput:!1});return r.split("\0").map(n=>{let i=n.indexOf("=");return i!==-1?[n.slice(0,i),n.slice(i+1)]:[]}).reduce((n,[i,o])=>(i&&(n[i]=o),n),{})}async function Gw(t){let e='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),o=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,u,l,f,d])=>{let p=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(l)||[];return{pid:a,ppid:p[1],pgrp:p[2],cwd:c,mntNS:u,cmd:d,env:f.split(" ").reduce((h,g)=>{let v=g.indexOf("=");return v!==-1&&(h[g.substr(0,v)]=g.substr(v+1)),h},{})}}),mntNS:o}}function dD(t){let e={};return t.forEach(r=>e[r.pid]={process:r,childProcesses:[]}),t.filter(r=>r.ppid).forEach(r=>{var n;return(n=e[r.ppid])==null?void 0:n.childProcesses.push(e[r.pid])}),e}function Ww(t,e="  ",r="  "){return`${r}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(n=>Ww(n,e,r+e))}`}var CX=lN(),ic=hN(),sE=gN();async function _h(t,e){var y,E,w,x;let{output:r}=t,n="Launching Remote-Containers helper.",i=r.start(n);if($w)return r.stop(n,i),{remoteEnv:{},ready:Promise.resolve()};let s=(await(0,CN.promisify)(vN.randomBytes)(20)).toString("hex"),a={},c=SX(t.cliHost),u=c?co.posix.join(((y=e.env)==null?void 0:y.TMPDIR)||"/tmp",`vscode-ssh-auth-${s}.sock`):void 0;c?a[u]=c:r.write("SSH_AUTH_SOCK not set on host.");let l=await iD(t,e.shellServer);l&&(a[l.remoteGpgSocket]=l.localGpgSocket);let f=co.posix.join(((E=e.env)==null?void 0:E.TMPDIR)||"/tmp",`vscode-remote-containers-ipc-${s}.sock`),d=co.posix.join(((w=e.env)==null?void 0:w.TMPDIR)||"/tmp",`vscode-remote-containers-server-${s}.js`),p=co.posix.join(((x=e.env)==null?void 0:x.TMPDIR)||"/tmp",`vscode-remote-containers-${s}.js`),h=wX(t,e,d,p,a,f),g=h.then(_=>_.ready),v=h.then(_=>_.mrpcExec),C=h.then(_=>_.mrpcExecToEnd);return g.catch(console.error),t.onAdoptProcess(_=>PX(e.shellServer,f,u,_).catch(console.error)),r.stop(n,i),{remoteContainersCLI:p,remoteEnv:u?{SSH_AUTH_SOCK:u,REMOTE_CONTAINERS_IPC:f}:{REMOTE_CONTAINERS_IPC:f},mrpcExec:v,mrpcExecToEnd:C,ready:g}}async function wX(t,{remoteExec:e,nodeExecutable:r,shellServer:n},i,o,s,a){let{cliHost:c,output:u}=t,l=Object.keys(s),f=j(A({},l.reduce((I,R)=>(I[R]="duplex",I),{})),{rpc:"async",ready:"async"}),d={exec:"async",stdin:"sink",stdout:"source",stderr:"source",exit:"async",terminate:"async",dispose:"async",execToEnd:"async"},p={REMOTE_CONTAINERS_SOCKETS:JSON.stringify(l),REMOTE_CONTAINERS_IPC:a},h=Ce(co.join(t.extensionPath,"dist","common","remoteContainersCLI.js"),{encoding:"utf8"}),g=Ce(co.join(t.extensionPath,"dist","common","remoteContainersServer.js"),{encoding:"utf8"}),v=`EOF-${o}`;await n.exec(`cat <<'${v}' >${o}
${await h}
${v}
`);let C=[],y=`EOF-${i}`;await n.exec(`cat <<'${y}' >${i}
${await g}
${y}
`),C.push(i);let E=await e({env:p,cmd:r,args:C,output:u}),w=new wN.StringDecoder;E.stderr.on("data",I=>{let R=w.write(I).replace(/^.*DeprecationWarning: Buffer\(\) is deprecated.*$\r?\n?/mg,"").trim();R&&u.write(we(`Remote-Containers server: ${R}`))}),E.exit.then(({code:I,signal:R})=>{u.write(`Remote-Containers server terminated (code: ${I}, signal: ${R}).`)},I=>{u.write(we(`Remote-Containers did not launch: ${I&&(I.stack||I.message)||String(I)}`))});let x,_=new Promise(I=>x=I),S=CX(d,f)(j(A({},l.reduce((I,R)=>{let T=s[R];return I[R]=()=>xX(t,T),I},{})),{rpc:async(I,R)=>{try{let T=JSON.parse(I),U=await sD(c,T.command,T.stdin);R(void 0,JSON.stringify(U))}catch(T){console.error(T),R(T)}},ready:I=>{x(),I()}}));return(0,yN.default)(ic.source(E.stdout),S.createStream(),ic.sink(E.stdin)),{ready:_,mrpcExec:EX(S),mrpcExecToEnd:_X(S)}}function EX(t){return async e=>{let{cmd:r,args:n,cwd:i,env:o,output:s}=e,a=`Run in container: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a),u=await new Promise((l,f)=>{t.exec({cmd:r,args:n,cwd:i,env:o},(d,p)=>{d?f(d):l(p)})});return{stdin:sE.sink(t.stdin(u,l=>{l&&l.message!=="unexpected end of parent stream"&&console.error(l)})),stdout:sE.source(t.stdout(u)),stderr:sE.source(t.stderr(u)),exit:new Promise((l,f)=>{t.exit(u,(d,p)=>{s.stop(a,c),d?f(d):l(p)})}),terminate:async()=>new Promise((l,f)=>{t.terminate(u,d=>{d?f(d):l()})})}}}function _X(t){return async e=>{let{cmd:r,args:n,cwd:i,env:o,output:s}=e,a=`Run in container: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,c=s.start(a);return new Promise((u,l)=>{t.execToEnd({cmd:r,args:n,cwd:i,env:o},(f,d)=>{if(s.stop(a,c),f||!d)l({stdin:new uo.Writable,stdout:uo.Readable.from([]),stderr:uo.Readable.from([]),exit:Promise.reject(f),terminate:async()=>{}});else{let p=uo.Readable.from([Buffer.from(d.stdout.data)]),h=new Promise(C=>p.on("end",C)),g=uo.Readable.from([Buffer.from(d.stderr.data)]),v=new Promise(C=>g.on("end",C));u({stdin:new uo.Writable,stdout:p,stderr:g,exit:Promise.all([h,v]).then(()=>({code:d.code,signal:d.signal})),terminate:async()=>{}})}})})}}function xX(t,e){let{cliHost:r}=t;if(r.type!=="local")return bX(t,e);if(r.platform!=="win32"||e.startsWith("\\\\.\\pipe\\"))return ic.duplex(Eh.connect(e));let n=new Eh.Socket;return(async()=>{let i=await r.readFile(e),o=i.indexOf(10),s=parseInt(i.slice(0,o).toString(),10),a=i.slice(o+1);n.connect(s,"127.0.0.1",()=>{n.write(a,c=>{c&&(console.error(c),n.destroy())})})})().catch(i=>{console.error(i),n.destroy()}),ic.duplex(n)}function bX({cliHost:t,fireEvent:e,output:r},n){let i=t.exec({cmd:"socat",args:["-",`UNIX-CONNECT:${n}`],output:r});i.then(u=>u.exit.then(({code:l,signal:f})=>{(l||f)&&(r.write(we(`socat terminated (code: ${l}, signal: ${f}).`)),l===127&&e({type:"socatNotFound"}))})).catch(u=>{r.write(we(`socat did not launch: ${u&&(u.stack||u.message)||String(u)}`))});let o=i.then(u=>ic.sink(u.stdin)),s=i.then(u=>ic.source(u.stdout));return{sink:u=>{o.then(l=>l(u))},source:(u,l)=>{s.then(f=>f(u,l))}}}var aE="\\\\.\\pipe\\openssh-ssh-agent";function SX(t){if(t.env.SSH_AUTH_SOCK)return t.env.SSH_AUTH_SOCK;if(t.platform==="win32")return aE}var xh=new Set;async function PX(t,e,r,n){let i=await n.processId;if(i&&i>0){let o=await fD(t,i),s=o.REMOTE_CONTAINERS_IPC;s&&s!==e&&!xh.has(s)&&s.indexOf("vscode-remote-containers-ipc")!==-1&&(xh.add(s),await t.exec(`rm '${s}' && ln -s '${e}' '${s}'`));let a=o.SSH_AUTH_SOCK;a&&r&&a!==r&&!xh.has(a)&&a.indexOf("vscode-ssh-auth")!==-1&&(xh.add(a),await t.exec(`rm '${a}' && ln -s '${r}' '${a}'`))}}var LN=k(require("net")),FN=k(NN());async function qN({forwardedPorts:t,output:e,getLogLevel:r},n,i,o){e.write(`Port forwarding for container port ${i} starts listening on local port.`,ne.Debug);let s=o?{VSCODE_REMOTE_CONTAINERS_SESSION:o}:void 0;return new Promise((a,c)=>{let u=new Set,l=LN.createServer({pauseOnConnect:!0},f=>{let d=f.remotePort,p=l.address().port;e.write(`Port forwarding connection from ${d} > ${p} > ${i} in the container.`),r()===ne.Trace&&(async()=>{let h=await(0,FN.default)("port",d);e.write(`Port forwarding process for ${d} > ${p} > ${i} in the container:
${JSON.stringify(h,void 0,"  ")}`)})().catch(console.error),NX(e,n,[n.nodeExecutable,"-e",`
				const net = require('net');
				process.stdin.pause();
				const client = net.createConnection({ port: ${i} }, () => {
					client.pipe(process.stdout);
					process.stdin.pipe(client);
				});
				client.on('close', function (hadError) {
					console.error(hadError ? 'Remote close with error' : 'Remote close');
					process.exit(hadError ? 1 : 0);
				});
				client.on('error', function (err) {
					process.stderr.write(err && (err.stack || err.message) || String(err));
				});
			`],s).then(h=>{let g=!1;h.exit.then(({code:v,signal:C})=>{g||(u.delete(f),f.end()),e.write(`Port forwarding ${d} > ${p} > ${i} terminated${g?" by extension":""} with code ${v} and signal ${C}.`)}),h.stderr.on("data",v=>{e.write(`Port forwarding ${d} > ${p} > ${i} stderr: ${v.toString("utf8")}`,ne.Debug)}),f.on("close",v=>{e.write(`Port forwarding ${d} > ${p} > ${i}: Local close${v?" with error":""}`,ne.Debug),g=!0,u.delete(f),h.terminate().catch(console.error)}),h.stdout.pipe(f),f.pipe(h.stdin),u.add(f)}).catch(console.error)});l.on("listening",()=>{let f={targetPort:i,server:l,connections:u};l.on("close",()=>{t.delete(f)}),t.add(f),e.write(`Port forwarding local port ${l.address().port} to container port ${i}`),a(l)}),l.on("error",f=>{if(f&&(f.code==="EADDRINUSE"||f.code==="EACCES")){l.listen(0,"127.0.0.1");return}c(f)}),l.on("close",()=>{c(new Error("Closed"))}),l.listen(i,"127.0.0.1")})}async function NX(t,e,r,n){return e.remoteExec({env:n,cmd:r[0],args:r.slice(1),output:t})}var MN=k(require("events"));var pE=class{constructor(){this.nodeEmitter=new MN.EventEmitter;this.event=e=>{let r=n=>n.results.push(e(n.data));return this.nodeEmitter.on("event",r),{dispose:()=>{this.nodeEmitter.off("event",r)}}}}fire(e){let r=[];return this.nodeEmitter.emit("event",{data:e,results:r}),r}dispose(){this.nodeEmitter.removeAllListeners()}};var oc=k(require("path"));function sc(t,e){let r,n=t.platform==="win32",i=j(A({},t),{get env(){return r||(r=UN(n,t.env))}}),o=qX.bind(void 0,n,i);return t.containerWorkspaceFolder&&(i.containerWorkspaceFolder=jN(o,t.containerWorkspaceFolder)),Ph(o,e)}function $N(t,e,r,n){let i=t==="win32";return Ph(MX.bind(void 0,i,e,UN(i,r)),n)}function Ph(t,e){if(typeof e=="string")return jN(t,e);if(Array.isArray(e))return e.map(r=>Ph(t,r));if(e&&typeof e=="object"){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n]=Ph(t,e[n])}),r}return e}var LX=/\$\{(.*?)\}/g;function UN(t,e){if(t){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n.toLowerCase()]=e[n]}),r}return e}function jN(t,e){return e.replace(LX,FX.bind(void 0,t))}function FX(t,e,r){let n,i=r.split(":");return i.length>1&&(r=i[0],n=i[1]),t(e,r,n)}function qX(t,e,r,n,i){switch(n){case"env":case"localEnv":return HN(t,e.env,i,r,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?oc.win32:oc.posix).basename(e.localWorkspaceFolder):r;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?oc.posix.basename(e.containerWorkspaceFolder):r;default:return r}}function MX(t,e,r,n,i,o){switch(i){case"containerEnv":return HN(t,r,o,n,e);default:return n}}function HN(t,e,r,n,i){if(r){t&&(r=r.toLowerCase());let o=e[r];return typeof o=="string"?o:""}throw new H({description:`'${n}'${i?` in ${oc.posix.basename(i.path)}`:""} can not be resolved because no environment variable name is given.`})}async function Cs(t){return new Promise(e=>setTimeout(e,t))}var hE=k(require("path"));var $X=k(require("http")),UX=k(require("https"));function BN(t){return new Promise((e,r)=>{(t.startsWith("https:")?UX:$X).get(t,o=>{if(o.statusCode<200||o.statusCode>299)r(new Error(`HTTP ${o.statusCode}: ${o.statusMessage}`));else{o.on("error",r);let s=[];o.on("data",a=>s.push(a)),o.on("end",()=>e(Buffer.concat(s)))}}).on("error",r)})}async function mE(t){let e=await Ce(hE.join(t,"package.json"),"utf8");return JSON.parse(e)}async function gE(t){let e=await Ce(hE.join(t,"product.json"),"utf8"),r=JSON.parse(e);return r.commit||(r.commit=await jX(r.quality)),r.serverDataFolderName||(r.serverDataFolderName=".vscode-server-oss"),r}async function jX(t="insider"){let e=`https://update.code.visualstudio.com/api/update/server-linux-x64/${t}/latest`,r=await BN(e);return JSON.parse(r.toString()).version}var fo=0,zN=/Extension host agent listening on (\d+)/,KN="d9c064ed-ec74-42ab-b759-c9578d277ba2",ft;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(ft||(ft={}));var YN="updateContentCommand";async function Rh(t){let{params:e,startedAt:r,sharedDataFolder:n,sharedDataFolderIsLocalCacheFolder:i,remoteWorkspaceFolder:o,containerUser:s,containerEnv:a,remoteExec:c,remotePtyExec:u,remoteExecAsRoot:l,rootShellServer:f}=t,d;f&&s==="root"?d=f:d=await hs(c,e.output,e.sessionId),s||(s=await HX(d)),!l&&s==="root"&&(l=c);let p=await dQ(d),h=await VX(d,s);h||e.output.write(uC(`User ${s} not found in /etc/passwd.`));let g=await BX(a,h),v=await XN(a,h),C=await zX(v,e.product),{commit:y,quality:E}=e.product,w=y&&await GX(C,y,E||"insider",e.web),x=fQ(p,E==="stable"),_=y&&n&&await QN(Y.posix,n,x,y,E||"insider",e.web),S=w&&await KX(w),I;f?I=Promise.resolve(f):s==="root"&&(I=Promise.resolve(d));let R={startedAt:r,osRelease:p,arch:x,user:s,gid:h&&h.gid,env:a,shell:g,homeFolder:v,userDataFolder:C,sharedDataFolderIsLocalCacheFolder:i,sharedDataFolder:n,installFolder:w,sharedInstallFolder:_,remoteWorkspaceFolder:o,nodeExecutable:S,remoteExec:c,remotePtyExec:u,remoteExecAsRoot:l,shellServer:d};return(I||l)&&(R.launchRootShellServer=()=>I||(I=hs(l,e.output))),R}async function HX(t){return(await t.exec("id -un")).stdout.trim()}async function XN(t,e){return t.HOME||e&&e.home||"/root"}async function BX(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function VX(t,e){let{stdout:r}=await t.exec("cat /etc/passwd",{logOutput:!1});return sh(r,e)}function sh(t,e){return t.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===e||n.uid===e)}async function GX(t,e,r,n){return Y.posix.join(t,"bin",`${e}${r==="stable"?"":`-${r}`}${n?"-web":""}`)}async function QN(t,e,r,n,i,o){return t.join(e,"bin",r.id,`${n}${i==="stable"?"":`-${i}`}${o?"-web":""}`)}function JN(t){return Y.posix.join(t.userDataFolder,"extensions")}function ms(t){return Y.posix.join(t.userDataFolder,"data/Machine")}function Th(t){return Y.posix.join(t.userDataFolder,"data/Machine/settings.json")}function WX(t){return Y.posix.join(t,".vscode-remote")}async function zX(t,e){return Y.posix.join(t,e.serverDataFolderName)}function ZN(t){return Y.posix.join("/var",/^\.*(.*)$/.exec(t.serverDataFolderName)[1])}async function KX(t){return Y.posix.join(t,"node")}async function po(t,e,r,n,i,o=fo){var C;await YX(t,e),await EQ(t,e),await _Q(t,e);let s=await XX(t,e,r,n),{serverDownloaded:a}=await tQ(t,e),c,u,l=Promise.resolve(),f;if(!t.cliMode&&e.nodeExecutable){let y=await _h(t,e);c=y.remoteContainersCLI,u=y.remoteEnv,l=y.ready,f=y.mrpcExec}let p=t.computeExtensionHostEnv||e.installFolder&&t.cliMode||t.postCreate.enabled?xQ(t,e,r,f).then(y=>A(A(A(A({},y),u),t.cliMode?{}:{REMOTE_CONTAINERS:"true"}),r.remoteEnv?$N(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{})):Promise.resolve({}),h=(C=s["remote.containers.gitCredentialHelperConfigLocation"])!=null?C:t.credentialHelperConfigLocation;!t.cliMode&&e.nodeExecutable&&(await Dh(t,e,[".ssh","known_hosts"],"ssh"),h!=="none"&&await kh(e,c,t.output,"system"));let g,v;if(e.installFolder){let y=Array.from(new Set([...r.extensions||[],...(n==null?void 0:n.features.filter(x=>x.included&&x.value).reduce((x,_)=>x.concat(_.extensions||[]),[]))||[]])),E=await nQ(t,e,y),w=await vQ(t,e,o,f,E,p);g=w,t.forwardServerPort&&e.nodeExecutable&&(v=await qN(t,e,w,t.sessionId),g=v.address().port,await CQ(t,e,r))}if(t.postCreate.enabled){let y,E=!1,w=new Promise(_=>y=()=>{E=!0,_()}),x=(async()=>{var _;if((r.waitFor||YN)==="initializeCommand"&&y(),!(t.postCreate.skipNonBlocking&&E)&&(await _E(t,e,r,"onCreateCommand",p,l,i,!1,y),!(t.postCreate.skipNonBlocking&&E)&&(await _E(t,e,r,"updateContentCommand",p,l,i,!!t.prebuild,y),!(t.postCreate.skipNonBlocking&&E)))){if(!t.prebuild){if(await _E(t,e,r,"postCreateCommand",p,l,i,!1,y),t.postCreate.skipNonBlocking&&E||(await GT(t,e,p,l,s),!t.cliMode&&e.nodeExecutable&&(((_=s["remote.containers.copyGitConfig"])!=null?_:t.isCopyGitConfigEnabled)&&(await Dh(t,e,[".gitconfig"],"git"),await ZX(t,e,p)),await kh(e,c,t.output,h)),await pQ(t,e,r,p,l,i,y),t.postCreate.skipNonBlocking&&E))return;await mQ(t,e,r,p,l,i,y)}t.postCreate.done()}})();t.backgroundTasks.push(x),await Promise.race([w,x])}return{hostOrContainerPort:g,hostPortServer:v,remoteEnv:t.computeExtensionHostEnv?await p:{},serverDownloaded:a}}async function YX(t,e){let r=WX(e.homeFolder);!await Nh(e.shellServer,e.userDataFolder)&&await Nh(e.shellServer,r)&&await yi(t,e,["/bin/sh","-c",`cp -r '${r}' '${e.userDataFolder}'`])}async function XX(t,e,r,n){let i=ms(e),o=Y.posix.join(i,".writeMachineSettingsMarker"),s=Th(e);if(await Dl(e.shellServer,o)){let a=Object.assign({},...(n==null?void 0:n.features.filter(c=>c.included&&c.value&&c.settings).map(c=>c.settings))||[],r.settings);if(QX(a,r.portsAttributes),JX(a,r.otherPortsAttributes),Object.keys(a).length)return await e.shellServer.exec(`mkdir -p '${Y.posix.dirname(s)}' && cat >'${s}' <<'settingsJSON'
${JSON.stringify(a,null,"	")}
settingsJSON
`),a}try{let{stdout:a}=await e.shellServer.exec(`cat ${s}`);return Be(a)||{}}catch{return{}}}function QX(t,e){if(!t||!e)return;let r="remote.portsAttributes";if(!t[r]){t[r]=e;return}for(let n in e)t[r][n]||(t[r][n]=e[n])}function JX(t,e){if(!t||!e)return;let r="remote.otherPortsAttributes";t[r]||(t[r]=e)}async function yE(t,e,r,n){let i=typeof t.gid=="string"?`${t.user}:${t.gid}`:t.user,o=await e();(await o.exec(`stat -c %u ${r}`)).stdout.trim()==="0"?(await o.exec(`chown ${i} ${Y.posix.dirname(r)}`),await o.exec(`chown -R ${i} ${r}`)):n&&(await o.exec(`stat -c %u ${n}`)).stdout.trim()==="0"&&await o.exec(`chown -R ${i} ${Y.posix.dirname(n)}`)}async function kh(t,e,r,n){if(e&&n!=="none"){let i=n==="system"?t.launchRootShellServer&&await t.launchRootShellServer():t.shellServer;i?await i.exec(`command -v git >/dev/null 2>&1 && git config --${n} credential.helper '!f() { ${t.nodeExecutable} ${e} $*; }; f' || true`):r.write("Cannot configure system wide Git credential helper without root access.")}}async function Dh(t,e,r,n){let{cliHost:i}=t,o=i.path.join(await i.homedir(),...r),s=Y.posix.join(e.homeFolder,...r);await Pl(t,e,o,s,n)}async function ZX(t,e,r){let{cliHost:n}=t,{env:i}=n,o=["git","config"],s=i.XDG_CONFIG_HOME?[i.XDG_CONFIG_HOME]:[await n.homedir(),".config"],a=n.path.join(...s,...o),c=(async()=>{let u=A(A({},e.env),await r),l=u.XDG_CONFIG_HOME?[u.XDG_CONFIG_HOME]:[e.homeFolder,".config"];return Y.posix.join(...l,...o)})();await Pl(t,e,a,c,"git")}async function Pl(t,e,r,n,i){let o=await eQ(t.cliHost,r);if(o)try{let s=await n;await e.shellServer.exec(`# Test for ${s} and ${i}
[ -e ${s} ] && echo ${s} exists && exit 1
command -v ${i} >/dev/null 2>&1 || (echo ${i} not found && exit 1) || exit 1
mkdir -p ${Y.posix.dirname(s)}`),await e.shellServer.exec(`# Copy ${r} to ${s}
${Ol(o.byteLength)} >${s}`,{stdin:o})}catch(s){if(s&&s.code!==1)throw s}}async function eQ(t,e){try{return await t.readFile(e)}catch(r){if(r&&(r.code==="ENOENT"||r.code==="EISDIR"))return;throw r}}async function tQ(t,e){let{commit:r}=t.product,{installFolder:n,shellServer:i,launchRootShellServer:o,arch:s}=e;if(!(r&&n))return{serverDownloaded:void 0};rQ(e.osRelease,s),s.preview&&t.output.write(`\r
[1mSupport for ${s.label} is in preview.[22m\r
\r
`);let a=await Nh(i,n),c;a||s.id==="alpine"&&(o?c=(await o()).exec("apk info | grep -e '^libstdc++$' || (apk update && apk add libstdc++)"):c=i.exec(`apk info | grep -e '^libstdc++$' || (echo "ERROR: libstdc++ not found. Please install." >&2 && exit 1)`));let u=e.sharedInstallFolder;if(u&&await Nh(i,u))return a||await i.exec(`mkdir -p '${Y.posix.dirname(n)}' && ln -s '${u}' '${n}'`),o&&(async()=>{await(await o()).exec(`touch '${u}'`)})().catch(console.error),await c,{serverDownloaded:!1};if(a)return{serverDownloaded:!1};t.progress(4),t.output.write(`Installing VS Code Server for commit ${r}\r
`);let l=!!(u&&o),f=l?u:n,d=l?await o():i,p={localCacheFolder:t.localCacheFolder,arch:s,commit:r,quality:t.product.quality||"insider",web:t.web,output:t.output},h=CE(p),g=await vt(h);g||await eL(p);try{e.sharedDataFolderIsLocalCacheFolder?await rL(p):await tL(t,d,h,f)}catch(v){if(v&&v.stderr&&/unexpected end of file|not in gzip format/i.test(v.stderr.toString()))await eL(p),e.sharedDataFolderIsLocalCacheFolder?await rL(p):await tL(t,d,h,f);else throw v}return l&&(await i.exec(`mkdir -p '${Y.posix.dirname(n)}' && ln -s '${u}' '${n}'`),(async()=>{await d.exec(`cd '${Y.posix.dirname(u)}' && ls -t | tail -n +10 | xargs rm -rf`)})().catch(console.error)),await c,{serverDownloaded:!g}}function rQ(t,e){let r=t.version;if(e.minVersion&&r){let n=Za(r.trim());if(n&&ec(n,e.minVersion)){let i=`${e.label} ${e.minVersion.join(".")} or later required.`;throw new H({description:i,data:{reload:!1}})}}}async function eL(t){let{arch:e,commit:r,quality:n,web:i,output:o}=t,s="Downloading VS Code Server",a=o.start(s);o.write(`${r} ${e.id} ${n} ${i?"web":""}`);let c=CE(t);await wn(Y.dirname(c));try{let u=`${c}_${Date.now()}`;await new Promise((l,f)=>{let d=Ih.createWriteStream(u),p=`https://update.code.visualstudio.com/commit:${r}/server-linux-${e.id}${i?"-web":""}/${n}`;VN.https.get(p,g=>{if(g.statusCode<200||g.statusCode>299){f(new H({description:"Downloading the VS Code Server failed. Please try again later.",originalError:`Failed to download VS Code Server (${p}): HTTP ${g.statusCode} - ${g.statusMessage}`}));return}g.on("error",f),g.pipe(d),g.on("end",l)}).on("error",f)}),await xa(u,c)}catch(u){throw u||new Error("Failed to download VS Code Server")}finally{o.stop(s,a)}}async function tL(t,e,r,n){let i="Installing VS Code Server",o=t.output.start(i);try{let s=`${n}_${Date.now()}`;await e.exec(`mkdir -p ${s}`);let a=await Ce(r);await e.exec(`${Ol(a.byteLength)} | tar --no-same-owner -xz --strip-components 1 -C ${s}`,{stdin:a}),await e.exec(`mv -n ${Y.posix.join(s,".")} ${n}`)}finally{t.output.stop(i,o)}}async function rL(t){let{localCacheFolder:e,arch:r,commit:n,quality:i,web:o,output:s}=t,a="Unpacking VS Code Server",c=s.start(a);s.write(`${n} ${r.id} ${i} ${o?"web":""}`);try{let u=await QN(Y,e,r,n,i,o),l=`${u}_${Date.now()}`;await wn(l);let f=CE(t);await(await wl(void 0)({cmd:"tar",args:["--no-same-owner","-xzf",f,"--strip-components","1","-C",l],cwd:process.cwd(),output:s})).exit,await sC(u,{recursive:!0}),await xa(l,u)}finally{s.stop(a,c)}}function CE(t){let{localCacheFolder:e,arch:r,commit:n,quality:i,web:o}=t,s=Y.join(e,"serverCache",n),a=`vscode-server-linux-${r.id}${i==="stable"?"":`-${i}`}${o?"-web":""}.tar.gz`;return Y.join(s,a)}async function nL(t,e){let r={VSCODE_AGENT_FOLDER:e.userDataFolder},{stdout:n}=await yi(t,e,[Y.posix.join(e.installFolder,"server.sh"),...oL(t.telemetry),"--list-extensions"],e.installFolder,{remoteEnv:r});return n.toString().split(`
`).filter(i=>!!i)}async function nQ(t,e,r){let n="Preparing Extensions",i=t.output.start(n),{sharedDataFolder:o}=e,s=o?uQ(o):void 0,a=iL(e),c=await iQ(t,e,r);if(e.sharedDataFolderIsLocalCacheFolder)e.shellServer.exec(`mkdir -p '${s}' && ln -s -T '${s}' '${a}' || true`),e.launchRootShellServer&&(await e.launchRootShellServer()).exec(`chown -R ${e.user} ${s}`);else{let u=cQ(t.localCacheFolder),l=await oQ(t,e,u,s,a,[...c.builtinExtensions,...c.extensions]);sQ(t,e,u,s,a,l).catch(console.error)}return t.output.stop(n,i),c}async function iQ(t,e,r){let n=ms(e),i=Y.posix.join(n,".installExtensionsMarker"),o=!await Dl(e.shellServer,i),s=o?[]:t.installBuiltinExtensions||[],a=await t.getExtensionsToInstall(o,r),c=[].concat(...s.map(u=>["--install-builtin-extension",u]),...a.map(u=>["--install-extension",u]));return t.cliMode&&c.length&&c.push("--do-not-sync"),{builtinExtensions:s,extensions:a,args:c}}async function oQ(t,e,r,n,i,o){t.output.write(`Extensions cache, install extensions: ${o.join(", ")||"None"}`);let{shellServer:s}=e,a=(await s.exec(`test -d ${i} && ls ${i} || true`)).stdout.trim().split(`
`).filter(c=>!!c);if(n){let c=(await s.exec(`test -d ${n} && ls ${n} || true`)).stdout.trim().split(`
`).filter(l=>!!l),u=c.filter(l=>o.some(f=>l.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(l)===-1);if(t.output.write(`Extensions cache, link in container: ${u.join(", ")||"None"}`),u.length){await s.exec(`mkdir -p '${i}' && ln -s '${n}'/* '${i}' || true`);let{launchRootShellServer:l}=e;l&&(async()=>{await(await l()).exec(`cd ${n} && touch ${u.map(d=>`'${d}'`).join(" ")}`)})().catch(console.error)}return{remoteExtensions:[...new Set([...a,...c])],cachedExtensions:c}}else{await wn(r);let c=await Gr(r),u=c.filter(l=>o.some(f=>l.toLowerCase().startsWith(f.toLowerCase()))&&a.indexOf(l)===-1);if(t.output.write(`Extensions cache, copy to remote: ${u.join(", ")||"None"}`),u.length){let l=Y.basename(r),f=Ah.c({cwd:Y.dirname(r)},u.map(h=>Y.join(l,h))),d=Y.posix.join(i,`tmp-${Date.now()}`),p=await new Promise(h=>{let g=[];f.on("data",v=>g.push(v)),f.on("end",()=>h(Buffer.concat(g)))});await s.exec(`# Copy extensions to remote
mkdir -p ${d}
${Ol(p.byteLength)} | tar --no-same-owner -x --strip-components 1 -C ${d}
mv ${d}/* ${i} && rmdir ${d}`,{stdin:p})}return{remoteExtensions:a.concat(u),cachedExtensions:c}}}async function sQ(t,e,r,n,i,o){if(n&&!e.launchRootShellServer)return;let s=1e4,a=6e4;for(await Cs(s);;)o=await aQ(t,e,r,n,i,o),await Cs(a)}async function aQ(t,e,r,n,i,{remoteExtensions:o,cachedExtensions:s}){let{shellServer:a,launchRootShellServer:c,remoteExec:u}=e,l=(await a.exec(`ls ${i} || true`,{logOutput:"silent"})).stdout.trim().split(`
`).filter(d=>!!d);if(!n){let d=o.filter(p=>l.indexOf(p)===-1);t.output.write(`Extensions cache, remote removals: ${d.join(", ")||"None"}`);for(let p of d)try{await hI(Y.join(r,p))}catch(h){if(!(h&&h.code==="ENOENT"))throw h}}let f=l.filter(d=>o.indexOf(d)===-1&&s.indexOf(d)===-1);if(t.output.write(`Extensions cache, copy to ${n?"shared cache":"local"}: ${f.join(", ")||"None"}`,ne.Trace),f.length)if(n){let d=await c();await d.exec(`mkdir -p '${n}' && cd '${i}' && cp ${f.map(p=>`'${p}'`).join(" ")} '${n}'`),await d.exec(`cd '${n}' && ls -t | tail -n +50 | xargs rm -f`)}else{let d=Y.posix.basename(i),p=await u({cmd:"tar",cwd:Y.posix.dirname(i),args:["c",...f.map(C=>Y.posix.join(d,C))],output:t.output}),h=Y.join(Y.dirname(r),`${Y.basename(r)}-${Date.now()}`);await wn(h);let g=Ah.x({cwd:h,strip:1}),v=new Promise((C,y)=>{g.on("error",y),g.on("finish",C)});p.stdout.pipe(g),await v;for(let C of await Gr(h))await xa(Y.join(h,C),Y.join(r,C));await sC(h)}return{remoteExtensions:l,cachedExtensions:s}}var wE="extensionsCache";function cQ(t){return Y.join(t,wE)}function uQ(t){return Y.posix.join(t,wE)}function iL(t){return Y.posix.join(t.userDataFolder,wE)}var EE={x64:{label:"x86-64",id:"x64",stable:!0,preview:!1},alpine:{label:"Alpine Linux",id:"alpine",stable:!0,preview:!0,minVersion:[3,9]},armhf:{label:"ARM",id:"armhf",stable:!0,preview:!0},arm64:{label:"ARM64",id:"arm64",stable:!0,preview:!0}},lQ={x86_64:"x64",armv7l:"armhf",arm64:"arm64",aarch64:"arm64"};function fQ(t,e){if(t.id==="alpine"){if(t.hardware!=="x86_64")throw new H({description:`${EE.alpine.label} is not supported on the hardware architecture '${t.hardware}' of the container.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return EE.alpine}let r=EE[lQ[t.hardware]];if(!r||e&&!r.stable)throw new H({description:`The hardware architecture '${t.hardware}' of the container is not supported.`,data:{learnMoreUrl:"https://aka.ms/vscode-remote/linux",reload:!1}});return r}async function dQ(t){let e="unknown",r="unknown",n="unknown";try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:e,id:r,version:n}}async function _E(t,e,r,n,i,o,s,a,c){let u=Y.posix.join(ms(e),`.${n}Marker`),l=await Dl(e.shellServer,u)||a;await xE(t,e,r,n,i,o,s,l,c)}async function pQ(t,e,r,n,i,o,s){let a=Y.posix.join(ms(e),".postStartCommandMarker"),c=!!e.startedAt&&await hQ(e.shellServer,a,e.startedAt);await xE(t,e,r,"postStartCommand",n,i,o,c,s)}async function hQ(t,e,r){try{return await t.exec(`mkdir -p '${Y.posix.dirname(e)}' && [ "$(cat '${e}' 2>/dev/null)" != '${r}' ] && echo '${r}' > '${e}'`),!0}catch(n){return!1}}async function mQ(t,e,r,n,i,o,s){await xE(t,e,r,"postAttachCommand",n,i,o,!0,s)}async function xE({postCreate:t},e,r,n,i,o,s,a,c){let u=r[n];if(a&&u&&(typeof u=="string"?u.trim():u.length)){await o,s&&await s();let l=`Running ${n}...`,f=typeof u=="string"?u:u.join(" "),d=yt({event(p){t.output.event(p),p.type==="raw"&&p.text.includes("::endstep::")&&t.output.event({type:"progress",name:l,status:"running",stepDetail:""}),p.type==="raw"&&p.text.includes("::step::")&&t.output.event({type:"progress",name:l,status:"running",stepDetail:`${p.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return t.output.dimensions},onDidChangeDimensions:t.output.onDidChangeDimensions},ne.Info);try{d.event({type:"progress",name:l,status:"running",stepDetail:f});let p=e.remoteWorkspaceFolder||e.homeFolder;d.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await wQ(j(A({},t),{output:d}),e,typeof u=="string"?["/bin/sh","-c",u]:u,p,{remoteEnv:await i,print:"continuous"}),d.raw(`\r
`),d.event({type:"progress",name:l,status:"succeeded"})}catch(p){if(d.event({type:"progress",name:l,status:"failed"}),p&&(p.code===130||p.signal===2))d.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw new H({description:`The ${n} in the devcontainer.json failed.`,originalError:p})}}n===(r.waitFor||YN)&&c()}async function Oh(t,e){try{return await t.exec(`test -f ${e}`),!0}catch(r){return!1}}async function Dl(t,e){try{return await t.exec(Xp(e)),!0}catch(r){return!1}}function Xp(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${Y.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function Nh(t,e){try{return await gQ(t,e),!0}catch(r){return!1}}async function gQ(t,e){return t.exec(`test -d ${e}`)}async function vQ(t,e,r,n,i,o){let{userDataFolder:s,installFolder:a,sharedInstallFolder:c,shellServer:u}=e,{processes:l,mntNS:f}=await Gw(u),d=new RegExp(`${Y.posix.join(Y.posix.dirname(a).replace(".","\\."),"[^/]*","server.sh")}`),p=l.filter(R=>R.mntNS===f&&d.test(R.cmd)),{current:h,others:g}=p.reduce((R,T)=>(R[(T.cwd===a||T.cwd===c)&&d.test(T.cmd)?"current":"others"].push(T),R),{current:[],others:[]});if(!t.cliMode&&g.length){t.output.write(`Terminating old extension host agent.\r
`);try{await u.exec(`kill -9 ${g.map(R=>R.pgrp?`-${R.pgrp}`:R.pid).join(" ")}`)}catch(R){}}let{commit:v,quality:C}=t.product,y=Y.posix.join(ms(e),`.devport-${v}${C==="stable"?"":`-${C}`}${t.web?"-web":""}`);if(h.length){t.output.write(`Extension host agent is already running.\r
`);try{let{stdout:R}=await u.exec(`cat '${y}' 2>/dev/null`),T=R.toString().trim();return parseInt(T,10)}catch(R){console.error(R),t.output.write(`Agent port not found. Terminating old extension host agent.\r
`);try{await u.exec(`kill -9 ${h.map(T=>T.pgrp?`-${T.pgrp}`:T.pid).join(" ")}`)}catch(T){}}}t.progress(5);let E="Starting VS Code Server",w=t.output.start(E),x=[Y.posix.join(a,"server.sh"),"--log",CI(t.getLogLevel()),"--force-disable-user-env",...yQ(t),...oL(t.telemetry),"--port",String(r),...t.connectionToken?["--connectionToken",t.connectionToken]:[],"--extensions-download-dir",iL(e),...i.args,"--start-server",...t.isLocalContainer?["--disable-websocket-compression"]:[""],...t.cliMode?["--enable-remote-auto-shutdown"]:[]],S=(await yi(t,{remoteExec:await n||e.remoteExec},x,a,{remoteEnv:A({SHELL:e.shell,VSCODE_AGENT_FOLDER:s},t.cliMode?await o:{}),resolveOn:zN,print:"continuous"})).cmdOutput;t.output.stop(E,w);let I=(zN.exec(S)||[])[1];if(!I)throw new Error("Port not found");return await u.exec(`echo ${I} >'${y}'`),parseInt(I,10)}function yQ(t){return t.isLocalContainer?["--use-host-proxy"]:[]}function oL(t){return t?[]:["--disable-telemetry"]}async function CQ(t,e,r){let n=await t.getTunnels();await Promise.all((r.forwardPorts||[]).filter(i=>!n.find(o=>o.remoteAddress.port===i)).map(i=>t.openTunnel(e,i)))}async function wQ(t,{remotePtyExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?Ye:t.output}),a="",c,u=new Promise(d=>{c=d});s.onData(d=>{a+=d,o==="continuous"&&t.output.raw(d),i.resolveOn&&i.resolveOn.exec(a)&&c()});let l=t.onDidInput&&t.onDidInput(d=>s.write(d)),f=await Promise.race([s.exit,u]);return l&&l.dispose(),o==="end"&&t.output.raw(a),f&&(f.code||f.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:f.code,signal:f.signal}):{cmdOutput:a}}async function yi(t,{remoteExec:e},r,n,i={}){let o=i.print||(i.silent?"off":"end"),s=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?Ye:t.output}),a=[],c=[],u=new vE.StringDecoder,l=new vE.StringDecoder,f="",d="",p,h,g=new Promise((w,x)=>{p=w,h=x});s.stdout.on("data",w=>{a.push(w);let x=u.write(w);o==="continuous"&&t.output.write(x.replace(/\r?\n/g,`\r
`)),f+=x,i.resolveOn&&i.resolveOn.exec(f)&&p()}),s.stderr.on("data",w=>{c.push(w),d+=l.write(w)}),i.stdin instanceof Buffer?(s.stdin.write(i.stdin,w=>{w&&h(w)}),s.stdin.end()):i.stdin instanceof Ih.ReadStream&&i.stdin.pipe(s.stdin);let v=await Promise.race([s.exit,g]),C=Buffer.concat(a),y=Buffer.concat(c);o==="end"&&(t.output.write(f.replace(/\r?\n/g,`\r
`)),t.output.write(we(d)));let E=`${f}
${d}`;return v&&(v.code||v.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:E,stdout:C,stderr:y,code:v.code,signal:v.signal}):{cmdOutput:E,stdout:C,stderr:y}}function Ol(t){let e=8*1024,r=t%e,n=(t-r)/e;return`(dd iflag=fullblock bs=${e} count=${n} 2>/dev/null; dd iflag=fullblock bs=${r} count=1 2>/dev/null)`}async function EQ(t,e){let r=Y.posix.join(ZN(t.product),".patchEtcEnvironmentMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await Oh(e.shellServer,r)){let n=await e.launchRootShellServer();await Dl(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(e.env).map(i=>`
${i}=${e.env[i]}`).join("")}
etcEnvrionmentEOF
`)}}async function _Q(t,e){let r=Y.posix.join(ZN(t.product),".patchEtcProfileMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await Oh(e.shellServer,r)){let n=await e.launchRootShellServer();await Dl(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function xQ(t,e,{userEnvProbe:r},n){if(t.output.write(`userEnvProbe: ${r||t.defaultUserEnvProbe}${r?"":" (default)"}`),r||(r=t.defaultUserEnvProbe),r==="none")return{};try{let o=(await(0,WN.promisify)(GN.randomBytes)(16)).toString("hex"),s=new RegExp(o+"(.*)"+o),a=e.shell;t.output.write(`userEnvProbe shell: ${a}`);let c=e.nodeExecutable,u=Y.posix.basename(a),l,f;/^pwsh(-preview)?$/.test(u)?(l=`& '${c}' -p '''${o}'' + JSON.stringify(process.env) + ''${o}'''`,f=r==="loginInteractiveShell"||r==="loginShell"?["-Login","-Command"]:["-Command"]):(l=`'${c}' -p '"${o}" + JSON.stringify(process.env) + "${o}"'`,f=[r==="loginInteractiveShell"?"-lic":r==="loginShell"?"-lc":r==="interactiveShell"?"-ic":"-c"]);let d=yt(t.output,ne.Trace),p=yi({output:d},{remoteExec:await n||e.remoteExec},[a,...f,l],e.installFolder);Promise.race([p,Cs(2e3)]).then(async _=>{if(!_){let{processes:S}=await Gw(e.shellServer),I=S.find(R=>R.cmd.startsWith(a)&&R.cmd.indexOf(o)!==-1);if(I){let T=dD(S)[I.pid];t.output.write(`userEnvProbe taking longer than 2 seconds. Process tree:
${Ww(T)}`)}else t.output.write("userEnvProbe taking longer than 2 seconds. Process not found.")}},()=>{}).catch(_=>t.output.write(we(_&&(_.stack||_.message)||"Error reading process tree.")));let h=await Promise.race([p,Cs(1e4)]);if(!h)return t.output.write(we("userEnvProbe taking longer than 10 seconds. Avoid waiting for user input in you shell's startup scripts. Continuing.")),{};let g=h.stdout.toString(),v=s.exec(g),C=v?v[1]:"{}",y=JSON.parse(C);t.output.write(`userEnvProbe parsed: ${JSON.stringify(y,void 0,"  ")}`,ne.Trace);let E=y.PATH,w=e.env.PATH,x=!(t.allowSystemConfigChange&&e.launchRootShellServer)&&E&&w;if(x){let _=e.user;y.PATH=bQ(E,w,_==="root"||_==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof E=="string"?`'${E}'`:"None"}
Container: ${typeof w=="string"?`'${w}'`:"None"}${x?`
Merged:    ${typeof y.PATH=="string"?`'${y.PATH}'`:"None"}`:""}`),y}catch(i){return t.output.write(we(i&&(i.stack||i.message)||"Error reading shell environment.")),{}}}function bQ(t,e,r){let n=t.split(":"),i=0;for(let o of e.split(":")){let s=n.indexOf(o);s===-1?(r||!/\/sbin(\/|$)/.test(o))&&n.splice(i++,0,o):i=s+1}return n.join(":")}async function sL(t){for(let e of t)await(typeof e=="function"?e():e)}var QL=k(require("crypto")),$l=k(require("path"));function aL(t){return typeof t=="undefined"||t===null}function SQ(t){return typeof t=="object"&&t!==null}function PQ(t){return Array.isArray(t)?t:aL(t)?[]:[t]}function IQ(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function AQ(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function RQ(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var TQ=aL,kQ=SQ,DQ=PQ,OQ=AQ,NQ=RQ,LQ=IQ,Tt={isNothing:TQ,isObject:kQ,toArray:DQ,repeat:OQ,isNegativeZero:NQ,extend:LQ};function cL(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Nl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=cL(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Nl.prototype=Object.create(Error.prototype);Nl.prototype.constructor=Nl;Nl.prototype.toString=function(e){return this.name+": "+cL(this,e)};var Sr=Nl;function bE(t,e,r,n,i){var o="",s="",a=Math.floor(i/2)-1;return n-e>a&&(o=" ... ",e=n-a+o.length),r-n>a&&(s=" ...",r=n+a-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function SE(t,e){return Tt.repeat(" ",e-t.length)+t}function FQ(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var a="",c,u,l=Math.min(t.line+e.linesAfter,i.length).toString().length,f=e.maxLength-(e.indent+l+3);for(c=1;c<=e.linesBefore&&!(s-c<0);c++)u=bE(t.buffer,n[s-c],i[s-c],t.position-(n[s]-n[s-c]),f),a=Tt.repeat(" ",e.indent)+SE((t.line-c+1).toString(),l)+" | "+u.str+`
`+a;for(u=bE(t.buffer,n[s],i[s],t.position,f),a+=Tt.repeat(" ",e.indent)+SE((t.line+1).toString(),l)+" | "+u.str+`
`,a+=Tt.repeat("-",e.indent+l+3+u.pos)+`^
`,c=1;c<=e.linesAfter&&!(s+c>=i.length);c++)u=bE(t.buffer,n[s+c],i[s+c],t.position-(n[s]-n[s+c]),f),a+=Tt.repeat(" ",e.indent)+SE((t.line+c+1).toString(),l)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var qQ=FQ,MQ=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],$Q=["scalar","sequence","mapping"];function UQ(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function jQ(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(MQ.indexOf(r)===-1)throw new Sr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=UQ(e.styleAliases||null),$Q.indexOf(this.kind)===-1)throw new Sr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Xt=jQ;function uL(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function HQ(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function PE(t){return this.extend(t)}PE.prototype.extend=function(e){var r=[],n=[];if(e instanceof Xt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Sr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Xt))throw new Sr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Sr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Sr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Xt))throw new Sr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(PE.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=uL(i,"implicit"),i.compiledExplicit=uL(i,"explicit"),i.compiledTypeMap=HQ(i.compiledImplicit,i.compiledExplicit),i};var BQ=PE,VQ=new Xt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),GQ=new Xt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),WQ=new Xt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),zQ=new BQ({explicit:[VQ,GQ,WQ]});function KQ(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function YQ(){return null}function XQ(t){return t===null}var QQ=new Xt("tag:yaml.org,2002:null",{kind:"scalar",resolve:KQ,construct:YQ,predicate:XQ,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function JQ(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function ZQ(t){return t==="true"||t==="True"||t==="TRUE"}function eJ(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var tJ=new Xt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:JQ,construct:ZQ,predicate:eJ,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function rJ(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function nJ(t){return 48<=t&&t<=55}function iJ(t){return 48<=t&&t<=57}function oJ(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!rJ(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!nJ(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!iJ(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function sJ(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function aJ(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!Tt.isNegativeZero(t)}var cJ=new Xt("tag:yaml.org,2002:int",{kind:"scalar",resolve:oJ,construct:sJ,predicate:aJ,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),uJ=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function lJ(t){return!(t===null||!uJ.test(t)||t[t.length-1]==="_")}function fJ(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var dJ=/^[-+]?[0-9]+e/;function pJ(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Tt.isNegativeZero(t))return"-0.0";return r=t.toString(10),dJ.test(r)?r.replace("e",".e"):r}function hJ(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||Tt.isNegativeZero(t))}var mJ=new Xt("tag:yaml.org,2002:float",{kind:"scalar",resolve:lJ,construct:fJ,predicate:hJ,represent:pJ,defaultStyle:"lowercase"}),gJ=zQ.extend({implicit:[QQ,tJ,cJ,mJ]}),vJ=gJ,lL=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),fL=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function yJ(t){return t===null?!1:lL.exec(t)!==null||fL.exec(t)!==null}function CJ(t){var e,r,n,i,o,s,a,c=0,u=null,l,f,d;if(e=lL.exec(t),e===null&&(e=fL.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(l=+e[10],f=+(e[11]||0),u=(l*60+f)*6e4,e[9]==="-"&&(u=-u)),d=new Date(Date.UTC(r,n,i,o,s,a,c)),u&&d.setTime(d.getTime()-u),d}function wJ(t){return t.toISOString()}var EJ=new Xt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:yJ,construct:CJ,instanceOf:Date,represent:wJ});function _J(t){return t==="<<"||t===null}var xJ=new Xt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:_J}),IE=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function bJ(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=IE;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8==0}function SJ(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=IE,s=0,a=[];for(e=0;e<i;e++)e%4==0&&e&&(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(s>>16&255),a.push(s>>8&255),a.push(s&255)):r===18?(a.push(s>>10&255),a.push(s>>2&255)):r===12&&a.push(s>>4&255),new Uint8Array(a)}function PJ(t){var e="",r=0,n,i,o=t.length,s=IE;for(n=0;n<o;n++)n%3==0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function IJ(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var AJ=new Xt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:bJ,construct:SJ,predicate:IJ,represent:PJ}),RJ=Object.prototype.hasOwnProperty,TJ=Object.prototype.toString;function kJ(t){if(t===null)return!0;var e=[],r,n,i,o,s,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],s=!1,TJ.call(i)!=="[object Object]")return!1;for(o in i)if(RJ.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function DJ(t){return t!==null?t:[]}var OJ=new Xt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:kJ,construct:DJ}),NJ=Object.prototype.toString;function LJ(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],NJ.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function FJ(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var qJ=new Xt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:LJ,construct:FJ}),MJ=Object.prototype.hasOwnProperty;function $J(t){if(t===null)return!0;var e,r=t;for(e in r)if(MJ.call(r,e)&&r[e]!==null)return!1;return!0}function UJ(t){return t!==null?t:{}}var jJ=new Xt("tag:yaml.org,2002:set",{kind:"mapping",resolve:$J,construct:UJ}),dL=vJ.extend({implicit:[EJ,xJ],explicit:[AJ,OJ,qJ,jJ]}),ho=Object.prototype.hasOwnProperty,Lh=1,pL=2,hL=3,Fh=4,AE=1,HJ=2,mL=3,BJ=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,VJ=/[\x85\u2028\u2029]/,GJ=/[,\[\]\{\}]/,gL=/^(?:!|!!|![a-z\-]+!)$/i,vL=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function yL(t){return Object.prototype.toString.call(t)}function Wn(t){return t===10||t===13}function ws(t){return t===9||t===32}function Pr(t){return t===9||t===32||t===10||t===13}function ac(t){return t===44||t===91||t===93||t===123||t===125}function WJ(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function zJ(t){return t===120?2:t===117?4:t===85?8:0}function KJ(t){return 48<=t&&t<=57?t-48:-1}function CL(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function YJ(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var wL=new Array(256),EL=new Array(256);for(var cc=0;cc<256;cc++)wL[cc]=CL(cc)?1:0,EL[cc]=CL(cc);function XJ(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||dL,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function _L(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=qQ(r),new Sr(e,r)}function z(t,e){throw _L(t,e)}function qh(t,e){t.onWarning&&t.onWarning.call(null,_L(t,e))}var xL={YAML:function(e,r,n){var i,o,s;e.version!==null&&z(e,"duplication of %YAML directive"),n.length!==1&&z(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&z(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&z(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&qh(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&z(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],gL.test(i)||z(e,"ill-formed tag handle (first argument) of the TAG directive"),ho.call(e.tagMap,i)&&z(e,'there is a previously declared suffix for "'+i+'" tag handle'),vL.test(o)||z(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch(s){z(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function mo(t,e,r,n){var i,o,s,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,o=a.length;i<o;i+=1)s=a.charCodeAt(i),s===9||32<=s&&s<=1114111||z(t,"expected valid JSON character");else BJ.test(a)&&z(t,"the stream contains non-printable characters");t.result+=a}}function bL(t,e,r,n){var i,o,s,a;for(Tt.isObject(r)||z(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,a=i.length;s<a;s+=1)o=i[s],ho.call(e,o)||(e[o]=r[o],n[o]=!0)}function uc(t,e,r,n,i,o,s,a,c){var u,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,l=i.length;u<l;u+=1)Array.isArray(i[u])&&z(t,"nested arrays are not supported inside keys"),typeof i=="object"&&yL(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&yL(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,l=o.length;u<l;u+=1)bL(t,e,o[u],r);else bL(t,e,o,r);else!t.json&&!ho.call(r,i)&&ho.call(e,i)&&(t.line=s||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,z(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function RE(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):z(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ct(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;ws(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Wn(i))for(RE(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&qh(t,"deficient indentation"),n}function Mh(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Pr(r)))}function TE(t,e){e===1?t.result+=" ":e>1&&(t.result+=Tt.repeat(`
`,e-1))}function QJ(t,e,r){var n,i,o,s,a,c,u,l,f=t.kind,d=t.result,p;if(p=t.input.charCodeAt(t.position),Pr(p)||ac(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=t.input.charCodeAt(t.position+1),Pr(i)||r&&ac(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,a=!1;p!==0;){if(p===58){if(i=t.input.charCodeAt(t.position+1),Pr(i)||r&&ac(i))break}else if(p===35){if(n=t.input.charCodeAt(t.position-1),Pr(n))break}else{if(t.position===t.lineStart&&Mh(t)||r&&ac(p))break;if(Wn(p))if(c=t.line,u=t.lineStart,l=t.lineIndent,Ct(t,!1,-1),t.lineIndent>=e){a=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=c,t.lineStart=u,t.lineIndent=l;break}}a&&(mo(t,o,s,!1),TE(t,t.line-c),o=s=t.position,a=!1),ws(p)||(s=t.position+1),p=t.input.charCodeAt(++t.position)}return mo(t,o,s,!1),t.result?!0:(t.kind=f,t.result=d,!1)}function JJ(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(mo(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Wn(r)?(mo(t,n,i,!0),TE(t,Ct(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Mh(t)?z(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);z(t,"unexpected end of the stream within a single quoted scalar")}function ZJ(t,e){var r,n,i,o,s,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return mo(t,r,t.position,!0),t.position++,!0;if(a===92){if(mo(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),Wn(a))Ct(t,!1,e);else if(a<256&&wL[a])t.result+=EL[a],t.position++;else if((s=zJ(a))>0){for(i=s,o=0;i>0;i--)a=t.input.charCodeAt(++t.position),(s=WJ(a))>=0?o=(o<<4)+s:z(t,"expected hexadecimal character");t.result+=YJ(o),t.position++}else z(t,"unknown escape sequence");r=n=t.position}else Wn(a)?(mo(t,r,n,!0),TE(t,Ct(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Mh(t)?z(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}z(t,"unexpected end of the stream within a double quoted scalar")}function eZ(t,e){var r=!0,n,i,o,s=t.tag,a,c=t.anchor,u,l,f,d,p,h=Object.create(null),g,v,C,y;if(y=t.input.charCodeAt(t.position),y===91)l=93,p=!1,a=[];else if(y===123)l=125,p=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),y=t.input.charCodeAt(++t.position);y!==0;){if(Ct(t,!0,e),y=t.input.charCodeAt(t.position),y===l)return t.position++,t.tag=s,t.anchor=c,t.kind=p?"mapping":"sequence",t.result=a,!0;r?y===44&&z(t,"expected the node content, but found ','"):z(t,"missed comma between flow collection entries"),v=g=C=null,f=d=!1,y===63&&(u=t.input.charCodeAt(t.position+1),Pr(u)&&(f=d=!0,t.position++,Ct(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,lc(t,e,Lh,!1,!0),v=t.tag,g=t.result,Ct(t,!0,e),y=t.input.charCodeAt(t.position),(d||t.line===n)&&y===58&&(f=!0,y=t.input.charCodeAt(++t.position),Ct(t,!0,e),lc(t,e,Lh,!1,!0),C=t.result),p?uc(t,a,h,v,g,C,n,i,o):f?a.push(uc(t,null,h,v,g,C,n,i,o)):a.push(g),Ct(t,!0,e),y=t.input.charCodeAt(t.position),y===44?(r=!0,y=t.input.charCodeAt(++t.position)):r=!1}z(t,"unexpected end of the stream within a flow collection")}function tZ(t,e){var r,n,i=AE,o=!1,s=!1,a=e,c=0,u=!1,l,f;if(f=t.input.charCodeAt(t.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)AE===i?i=f===43?mL:HJ:z(t,"repeat of a chomping mode identifier");else if((l=KJ(f))>=0)l===0?z(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?z(t,"repeat of an indentation width identifier"):(a=e+l-1,s=!0);else break;if(ws(f)){do f=t.input.charCodeAt(++t.position);while(ws(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Wn(f)&&f!==0)}for(;f!==0;){for(RE(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!s||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>a&&(a=t.lineIndent),Wn(f)){c++;continue}if(t.lineIndent<a){i===mL?t.result+=Tt.repeat(`
`,o?1+c:c):i===AE&&o&&(t.result+=`
`);break}for(n?ws(f)?(u=!0,t.result+=Tt.repeat(`
`,o?1+c:c)):u?(u=!1,t.result+=Tt.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=Tt.repeat(`
`,c):t.result+=Tt.repeat(`
`,o?1+c:c),o=!0,s=!0,c=0,r=t.position;!Wn(f)&&f!==0;)f=t.input.charCodeAt(++t.position);mo(t,r,t.position,!1)}return!0}function SL(t,e){var r,n=t.tag,i=t.anchor,o=[],s,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,z(t,"tab characters must not be used in indentation")),!(c!==45||(s=t.input.charCodeAt(t.position+1),!Pr(s))));){if(a=!0,t.position++,Ct(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,lc(t,e,hL,!1,!0),o.push(t.result),Ct(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)z(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function rZ(t,e,r){var n,i,o,s,a,c,u=t.tag,l=t.anchor,f={},d=Object.create(null),p=null,h=null,g=null,v=!1,C=!1,y;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),y=t.input.charCodeAt(t.position);y!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,z(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(y===63||y===58)&&Pr(n))y===63?(v&&(uc(t,f,d,p,h,null,s,a,c),p=h=g=null),C=!0,v=!0,i=!0):v?(v=!1,i=!0):z(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,y=n;else{if(s=t.line,a=t.lineStart,c=t.position,!lc(t,r,pL,!1,!0))break;if(t.line===o){for(y=t.input.charCodeAt(t.position);ws(y);)y=t.input.charCodeAt(++t.position);if(y===58)y=t.input.charCodeAt(++t.position),Pr(y)||z(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(uc(t,f,d,p,h,null,s,a,c),p=h=g=null),C=!0,v=!1,i=!1,p=t.tag,h=t.result;else if(C)z(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=l,!0}else if(C)z(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=l,!0}if((t.line===o||t.lineIndent>e)&&(v&&(s=t.line,a=t.lineStart,c=t.position),lc(t,e,Fh,!0,i)&&(v?h=t.result:g=t.result),v||(uc(t,f,d,p,h,g,s,a,c),p=h=g=null),Ct(t,!0,-1),y=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&y!==0)z(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&uc(t,f,d,p,h,null,s,a,c),C&&(t.tag=u,t.anchor=l,t.kind="mapping",t.result=f),C}function nZ(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&z(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):z(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Pr(s);)s===33&&(n?z(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),gL.test(i)||z(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),GJ.test(o)&&z(t,"tag suffix cannot contain flow indicator characters")}o&&!vL.test(o)&&z(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch(a){z(t,"tag name is malformed: "+o)}return r?t.tag=o:ho.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:z(t,'undeclared tag handle "'+i+'"'),!0}function iZ(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&z(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Pr(r)&&!ac(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&z(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function oZ(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Pr(n)&&!ac(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&z(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),ho.call(t.anchorMap,r)||z(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Ct(t,!0,-1),!0}function lc(t,e,r,n,i){var o,s,a,c=1,u=!1,l=!1,f,d,p,h,g,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=a=Fh===r||hL===r,n&&Ct(t,!0,-1)&&(u=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;nZ(t)||iZ(t);)Ct(t,!0,-1)?(u=!0,a=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=u||i),(c===1||Fh===r)&&(Lh===r||pL===r?g=e:g=e+1,v=t.position-t.lineStart,c===1?a&&(SL(t,v)||rZ(t,v,g))||eZ(t,g)?l=!0:(s&&tZ(t,g)||JJ(t,g)||ZJ(t,g)?l=!0:oZ(t)?(l=!0,(t.tag!==null||t.anchor!==null)&&z(t,"alias node should not have any properties")):QJ(t,g,Lh===r)&&(l=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(l=a&&SL(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&z(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,d=t.implicitTypes.length;f<d;f+=1)if(h=t.implicitTypes[f],h.resolve(t.result)){t.result=h.construct(t.result),t.tag=h.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ho.call(t.typeMap[t.kind||"fallback"],t.tag))h=t.typeMap[t.kind||"fallback"][t.tag];else for(h=null,p=t.typeMap.multi[t.kind||"fallback"],f=0,d=p.length;f<d;f+=1)if(t.tag.slice(0,p[f].tag.length)===p[f].tag){h=p[f];break}h||z(t,"unknown tag !<"+t.tag+">"),t.result!==null&&h.kind!==t.kind&&z(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+h.kind+'", not "'+t.kind+'"'),h.resolve(t.result,t.tag)?(t.result=h.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):z(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||l}function sZ(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Ct(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Pr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&z(t,"directive name must not be less than one character in length");s!==0;){for(;ws(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Wn(s));break}if(Wn(s))break;for(r=t.position;s!==0&&!Pr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&RE(t),ho.call(xL,n)?xL[n](t,n,i):qh(t,'unknown document directive "'+n+'"')}if(Ct(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ct(t,!0,-1)):o&&z(t,"directives end mark is expected"),lc(t,t.lineIndent-1,Fh,!1,!0),Ct(t,!0,-1),t.checkLineBreaks&&VJ.test(t.input.slice(e,t.position))&&qh(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Mh(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ct(t,!0,-1));return}if(t.position<t.length-1)z(t,"end of the stream or a document separator is expected");else return}function PL(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new XJ(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,z(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)sZ(r);return r.documents}function aZ(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=PL(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function cZ(t,e){var r=PL(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Sr("expected a single document in the stream, but found more")}}var uZ=aZ,lZ=cZ,IL={loadAll:uZ,load:lZ},AL=Object.prototype.toString,RL=Object.prototype.hasOwnProperty,kE=65279,fZ=9,Ll=10,dZ=13,pZ=32,hZ=33,mZ=34,DE=35,gZ=37,vZ=38,yZ=39,CZ=42,TL=44,wZ=45,$h=58,EZ=61,_Z=62,xZ=63,bZ=64,kL=91,DL=93,SZ=96,OL=123,PZ=124,NL=125,Qt={};Qt[0]="\\0";Qt[7]="\\a";Qt[8]="\\b";Qt[9]="\\t";Qt[10]="\\n";Qt[11]="\\v";Qt[12]="\\f";Qt[13]="\\r";Qt[27]="\\e";Qt[34]='\\"';Qt[92]="\\\\";Qt[133]="\\N";Qt[160]="\\_";Qt[8232]="\\L";Qt[8233]="\\P";var IZ=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],AZ=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function RZ(t,e){var r,n,i,o,s,a,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],a=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),c=t.compiledTypeMap.fallback[s],c&&RL.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[s]=a;return r}function TZ(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Sr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Tt.repeat("0",n-e.length)+e}var kZ=1,Fl=2;function DZ(t){this.schema=t.schema||dL,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Tt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=RZ(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Fl:kZ,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function LL(t,e){for(var r=Tt.repeat(" ",e),n=0,i=-1,o="",s,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=a):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function OE(t,e){return`
`+Tt.repeat(" ",t.indent*e)}function OZ(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Uh(t){return t===pZ||t===fZ}function ql(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==kE||65536<=t&&t<=1114111}function FL(t){return ql(t)&&t!==kE&&t!==dZ&&t!==Ll}function qL(t,e,r){var n=FL(t),i=n&&!Uh(t);return(r?n:n&&t!==TL&&t!==kL&&t!==DL&&t!==OL&&t!==NL)&&t!==DE&&!(e===$h&&!i)||FL(e)&&!Uh(e)&&t===DE||e===$h&&i}function NZ(t){return ql(t)&&t!==kE&&!Uh(t)&&t!==wZ&&t!==xZ&&t!==$h&&t!==TL&&t!==kL&&t!==DL&&t!==OL&&t!==NL&&t!==DE&&t!==vZ&&t!==CZ&&t!==hZ&&t!==PZ&&t!==EZ&&t!==_Z&&t!==yZ&&t!==mZ&&t!==gZ&&t!==bZ&&t!==SZ}function LZ(t){return!Uh(t)&&t!==$h}function Ml(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function ML(t){var e=/^\n* /;return e.test(t)}var $L=1,NE=2,UL=3,jL=4,fc=5;function FZ(t,e,r,n,i,o,s,a){var c,u=0,l=null,f=!1,d=!1,p=n!==-1,h=-1,g=NZ(Ml(t,0))&&LZ(Ml(t,t.length-1));if(e||s)for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=Ml(t,c),!ql(u))return fc;g=g&&qL(u,l,a),l=u}else{for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=Ml(t,c),u===Ll)f=!0,p&&(d=d||c-h-1>n&&t[h+1]!==" ",h=c);else if(!ql(u))return fc;g=g&&qL(u,l,a),l=u}d=d||p&&c-h-1>n&&t[h+1]!==" "}return!f&&!d?g&&!s&&!i(t)?$L:o===Fl?fc:NE:r>9&&ML(t)?fc:s?o===Fl?fc:NE:d?jL:UL}function qZ(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Fl?'""':"''";if(!t.noCompatMode&&(IZ.indexOf(e)!==-1||AZ.test(e)))return t.quotingType===Fl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),a=n||t.flowLevel>-1&&r>=t.flowLevel;function c(u){return OZ(t,u)}switch(FZ(e,a,t.indent,s,c,t.quotingType,t.forceQuotes&&!n,i)){case $L:return e;case NE:return"'"+e.replace(/'/g,"''")+"'";case UL:return"|"+HL(e,t.indent)+BL(LL(e,o));case jL:return">"+HL(e,t.indent)+BL(LL(MZ(e,s),o));case fc:return'"'+$Z(e)+'"';default:throw new Sr("impossible error: invalid scalar style")}}()}function HL(t,e){var r=ML(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function BL(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function MZ(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,VL(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var a=s[1],c=s[2];o=c[0]===" ",n+=a+(!i&&!o&&c!==""?`
`:"")+VL(c,e),i=o}return n}function VL(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,a=0,c="";n=r.exec(t);)a=n.index,a-i>e&&(o=s>i?s:a,c+=`
`+t.slice(i,o),i=o+1),s=a;return c+=`
`,t.length-i>e&&s>i?c+=t.slice(i,s)+`
`+t.slice(s+1):c+=t.slice(i),c.slice(1)}function $Z(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Ml(t,i),n=Qt[r],!n&&ql(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||TZ(r);return e}function UZ(t,e,r){var n="",i=t.tag,o,s,a;for(o=0,s=r.length;o<s;o+=1)a=r[o],t.replacer&&(a=t.replacer.call(r,String(o),a)),(Ci(t,e,a,!1,!1)||typeof a=="undefined"&&Ci(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function GL(t,e,r,n){var i="",o=t.tag,s,a,c;for(s=0,a=r.length;s<a;s+=1)c=r[s],t.replacer&&(c=t.replacer.call(r,String(s),c)),(Ci(t,e+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&Ci(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=OE(t,e)),t.dump&&Ll===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function jZ(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,a,c,u,l;for(s=0,a=o.length;s<a;s+=1)l="",n!==""&&(l+=", "),t.condenseFlow&&(l+='"'),c=o[s],u=r[c],t.replacer&&(u=t.replacer.call(r,c,u)),!!Ci(t,e,c,!1,!1)&&(t.dump.length>1024&&(l+="? "),l+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!Ci(t,e,u,!1,!1)&&(l+=t.dump,n+=l));t.tag=i,t.dump="{"+n+"}"}function HZ(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),a,c,u,l,f,d;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Sr("sortKeys must be a boolean or a function");for(a=0,c=s.length;a<c;a+=1)d="",(!n||i!=="")&&(d+=OE(t,e)),u=s[a],l=r[u],t.replacer&&(l=t.replacer.call(r,u,l)),!!Ci(t,e+1,u,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&Ll===t.dump.charCodeAt(0)?d+="?":d+="? "),d+=t.dump,f&&(d+=OE(t,e)),!!Ci(t,e+1,l,!0,f)&&(t.dump&&Ll===t.dump.charCodeAt(0)?d+=":":d+=": ",d+=t.dump,i+=d));t.tag=o,t.dump=i||"{}"}function WL(t,e,r){var n,i,o,s,a,c;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(a=i[o],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,AL.call(a.represent)==="[object Function]")n=a.represent(e,c);else if(RL.call(a.represent,c))n=a.represent[c](e,c);else throw new Sr("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}function Ci(t,e,r,n,i,o,s){t.tag=null,t.dump=r,WL(t,r,!1)||WL(t,r,!0);var a=AL.call(t.dump),c=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var l=a==="[object Object]"||a==="[object Array]",f,d;if(l&&(f=t.duplicates.indexOf(r),d=f!==-1),(t.tag!==null&&t.tag!=="?"||d||t.indent!==2&&e>0)&&(i=!1),d&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(l&&d&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(HZ(t,e,t.dump,i),d&&(t.dump="&ref_"+f+t.dump)):(jZ(t,e,t.dump),d&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?GL(t,e-1,t.dump,i):GL(t,e,t.dump,i),d&&(t.dump="&ref_"+f+t.dump)):(UZ(t,e,t.dump),d&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&qZ(t,t.dump,e,o,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Sr("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function BZ(t,e){var r=[],n=[],i,o;for(LE(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function LE(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)LE(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)LE(t[n[i]],e,r)}function VZ(t,e){e=e||{};var r=new DZ(e);r.noRefs||BZ(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ci(r,0,n,!0,!0)?r.dump+`
`:""}var GZ=VZ,WZ={dump:GZ};function FE(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var bn=IL.load,qxe=IL.loadAll,Mxe=WZ.dump;var $xe=FE("safeLoad","load"),Uxe=FE("safeLoadAll","loadAll"),jxe=FE("safeDump","dump");var Gh=k(require("path"));var $E=k(require("path")),XL=k(require("os"));var zL=k(require("crypto"));var KL=k(require("util"));var Sn={async readDocument(t){switch(t.scheme){case"file":try{return(await Ce(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,r){switch(t.scheme){case"file":let n=Yt(r,e);await Gd(t.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},jh=class{constructor(e){this.fileHost=e}async readDocument(e){switch(e.scheme){case jh.scheme:try{return(await this.fileHost.readFile(ce(e,this.fileHost.platform))).toString()}catch(r){return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case jh.scheme:let i=Yt(n,r);await this.fileHost.writeFile(ce(e,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},fr=jh;fr.scheme="vscode-fileHost";var _s=class{constructor(e){this.shellServer=e}async readDocument(e){switch(e.scheme){case _s.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${e.path}`);return r}catch(r){return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case _s.scheme:try{if(!_s.nonce){let s=await(0,KL.promisify)(zL.randomBytes)(20);_s.nonce=s.toString("hex")}let i=Yt(n,r),o=`EOF-${_s.nonce}`;await this.shellServer.exec(`cat <<'${o}' >${e.path}
${i}
${o}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},Es=_s;Es.scheme="vscode-remote";var YL=class{constructor(e){this.documents=e}async readDocument(e){let r=this.documents[e.scheme];if(!r)throw new Error(`Unsupported scheme: ${e.toString()}`);return r.readDocument(e)}async applyEdits(e,r,n){let i=this.documents[e.scheme];if(!i)throw new Error(`Unsupported scheme: ${e.toString()}`);return i.applyEdits(e,r,n)}};function wt(t,e){let r={file:Sn,[fr.scheme]:new fr(t)};return e&&(r[Es.scheme]=new Es(e)),new YL(r)}var qE=new Map;async function ME(t,e){let r=t.toString(),n=qE.get(r);if(n||qE.set(r,n=[]),n.push(e),n.length===1){for(;n.length;)await n[0](),n.shift();qE.delete(r)}}var Hh;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(Hh||(Hh={}));var go;(function(s){s[s.Slash=47]="Slash",s[s.Colon=58]="Colon",s[s.A=65]="A",s[s.Z=90]="Z",s[s.a=97]="a",s[s.z=122]="z"})(go||(go={}));function ce(t,e){let r;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===fr.scheme)?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,e==="win32"&&(r=r.replace(/\//g,"\\")),r}function dc(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function UE(t,e){return pe.file(t.path.join(e,".devcontainer","devcontainer.json")).with({scheme:fr.scheme})}async function Bh(t,e){let r=dc(t.path,e);for(let n of r)if(await t.isFile(n))return pe.file(n).with({scheme:fr.scheme})}async function Vh(t){let e=dc($E,t);for(let r of e)if(await vt(r))return r}var wi=`{${XL.EOL}}`;async function tn(t,e,r,n){e.scheme==="file"&&await wn($E.dirname(e.fsPath)),await t.applyEdits(e,r,n)}function xs(t){let e=$E.posix.dirname(t.path);return t.with({path:e})}function vo(t,e,r){return pc(t,e.configFilePath,r)}function pc(t,e,r){let n=xs(e);return e.with({path:Gh.posix.resolve(n.path,t.platform==="win32"&&e.scheme!==Es.scheme?(Gh.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function Xe(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function hc(t){return t&&(Xe(t)||"image"in t||"dockerComposeFile"in t)}function kt(t,e){return vo(t,e,zZ(e))}function zZ(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function $r(t,e,r,n){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(i=>ce(vo(t,e,i),t.platform))}else if(typeof e.dockerComposeFile=="string")return[ce(vo(t,e,e.dockerComposeFile),t.platform)];if(n){let i=r==null?void 0:r.COMPOSE_FILE;if(i)return i.split(t.path.delimiter).map(a=>t.path.resolve(n,a));try{let a=t.path.join(n,".env"),c=await t.readFile(a),u=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),l=u&&u[1].trim();if(l)return l.split(t.path.delimiter).map(f=>t.path.resolve(n,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let o=[t.path.resolve(n,"docker-compose.yml")],s=t.path.resolve(n,"docker-compose.override.yml");return await t.isFile(s)&&o.push(s),o}return[]}function KZ(){return{contentHashes:{}}}async function JL(t,e,r){let n=t.configurationTracking,i=n.getConfigurationState();if(i){let o=i.contentHashes,s=Object.keys(o),c=(await jE(t,e,r)).contentHashes,u=Object.keys(c),l=new Set(u);s.forEach(p=>l.delete(p));let f=new Set(s);u.forEach(p=>f.delete(p));let d=[];for(let p of s)p in c&&c[p]!==o[p]&&d.push(p);if(l.size||f.size||d.length){let p=await jE(t,e,r);(async()=>{await n.containerOutdated([...l,...f,...d].sort())==="ignore"&&await t.configurationTracking.updateConfigurationState(p)})().catch(console.error)}}else await ZL(t,e,r)}async function Wh(t,e,r){let n="Updating configuration state",i=t.common.output.start(n);await ZL(t,e,r),t.common.output.stop(n,i)}async function ZL(t,e,r){let n=await jE(t,e,r);await t.configurationTracking.updateConfigurationState(n)}async function jE(t,e,r){let n=KZ();zh(n,$l.posix.basename(r.configFilePath.path),JSON.stringify(j(A({},r),{forwardPorts:void 0,configFilePath:void 0,postStartCommand:void 0,postAttachCommand:void 0})));let i=xs(r.configFilePath).path;if(Xe(r)){let o=kt(t.common.cliHost,r),s=await e.readDocument(o);s!==void 0&&zh(n,$l.posix.relative(i,o.path),s)}if("dockerComposeFile"in r){let o=await $r(t.common.cliHost,r,t.common.cliHost.env,t.common.cliHost.cwd),s=await Promise.all(o.map(async a=>{let c=pe.file(a).with({scheme:fr.scheme});return{uri:c,content:await e.readDocument(c)}}));for(let{uri:a,content:c}of s)c!==void 0&&zh(n,$l.posix.relative(i,a.path),c);for(let a=s.length-1;a>=0;a--){let{uri:c,content:u}=s[a];if(u){let l=bn(u),f=l&&l.services,d=f&&f[r.service],p=d&&d.build,h=p&&(typeof p=="string"?p:p.context);if(h){let g=pc(t.common.cliHost,c,h),v=eF(g,p.dockerfile||"Dockerfile"),C=await e.readDocument(v);C!==void 0&&zh(n,$l.posix.relative(i,v.path),C)}if(d&&(d.image||d.build))break}}}return n}function zh(t,e,r){let n=QL.createHash("sha256").update(r).digest("hex");t.contentHashes[e]=n}var pt=k(require("path")),_q=k(require("crypto"));var xq=k(Vp());var Ii=k(require("path"));var d_=k(require("path"));var sF=k(require("net")),WE=k(require("path"));var HE=k(require("path")),BE=k(require("http")),tF=k(require("os")),rF=k(require("crypto"));async function nF(t,e){let r=await VE(t),n=new iF(r,e);return n.listen(),n}var iF=class{constructor(e,r){this.ipcHandlePath=e;this.server=BE.createServer((n,i)=>{Promise.resolve(r(n,i)).catch(o=>console.error(o&&o.message||o))}),this.server.on("error",n=>console.error(n))}listen(){this.server.listen(this.ipcHandlePath)}dispose(){this.server.close()}};async function oF(t){return new Promise((e,r)=>{let n=[];t.setEncoding("utf8"),t.on("data",i=>n.push(i)),t.on("error",i=>r(i)),t.on("end",()=>{let i=JSON.parse(n.join(""));e(i)})})}async function YZ(t){return new Promise((e,r)=>{rF.randomBytes(t,(n,i)=>{n?r(n):e(i)})})}async function VE(t){let r=(await YZ(20)).toString("hex"),n=`${t}-${r}`;return process.platform==="win32"?`\\\\.\\pipe\\${n}-sock`:process.env.XDG_RUNTIME_DIR?HE.join(process.env.XDG_RUNTIME_DIR,`${n}.sock`):HE.join(tF.tmpdir(),`${n}.sock`)}var GE=class{constructor(){this.messages=[]}push(e){this.messages.push(e),this.dequeueRequest&&(this.dequeueRequest.resolve(this.messages),this.dequeueRequest=void 0,this.messages=[])}async dequeue(e){if(this.messages.length){let r=this.messages;return this.messages=[],r}return this.dequeueRequest&&this.dequeueRequest.resolve([]),new Promise((r,n)=>{this.dequeueRequest={resolve:r,reject:n},typeof e=="number"&&setTimeout(n,e)})}};async function zn(t,e){let r=await VE("ssh-askpass");return await new Promise((n,i)=>{sF.createServer(o=>{o.setEncoding("utf8");let s="";o.on("data",async a=>{if(s+=a,s.endsWith(`
`))try{let c=await e(JSON.parse(s));o.write(c,u=>{u&&console.error(u)}),o.end()}catch(c){console.error(c)}}),o.on("error",a=>console.error(a))}).on("error",o=>{i(o)}).listen(r,()=>{n()})}),{DISPLAY:process.env.DISPLAY||"1",ELECTRON_RUN_AS_NODE:"1",SSH_ASKPASS:WE.join(t,"scripts",`ssh-askpass.${process.platform==="win32"?"bat":"sh"}`),VSCODE_SSH_ASKPASS_NODE:process.execPath,VSCODE_SSH_ASKPASS_MAIN:WE.join(t,"dist","common","sshAskpass.js"),VSCODE_SSH_ASKPASS_HANDLE:r}}var XZ=0;function bs(t){return t.VSCODE_SSH_ASKPASS_HANDLE?{VSCODE_SSH_ASKPASS_COUNTER:String(++XZ)}:{}}async function Ft(t,e){return(await yo(t,[e]))[0]}async function yo(t,e){let r=await Yh(t,"container",e);for(let n of r){n.Ports=[];let i=n.NetworkSettings.Ports;for(let o in i){let[s,a]=o.split("/");for(let c of i[o]||[]){let{HostIp:u,HostPort:l}=c;n.Ports.push({IP:u,PrivatePort:parseInt(s),PublicPort:parseInt(l),Type:a})}}}return r}async function Ss(t,e){return(await Yh(t,"image",[e]))[0]}async function Kh(t,e){return(await Yh(t,"volume",[e]))[0]}async function Ul(t,e){return Yh(t,"volume",e)}async function Yh(t,e,r){if(!r.length)return[];let n=await J(j(A({},xi(t)),{args:["inspect","--type",e,...r]}));try{return JSON.parse(n.stdout.toString())}catch(i){throw console.error({stdout:n.stdout.toString(),stderr:n.stderr.toString()}),i}}async function Ei(t,e=!1,r=[]){let n=[];e&&n.push("-a");for(let o of r)n.push("--filter",`label=${o}`);return(await Ee(t,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(o=>!!o)}async function Co(t,e=[]){let r=[];for(let i of e)r.push("--filter",`label=${i}`);return(await Ee(t,"volume","ls","-q",...r)).stdout.toString().split(/\r?\n/).filter(i=>!!i)}async function zE(t){return(await Ee(t,"volume","ls","-q","-f","dangling=true")).stdout.toString().split(/\r?\n/).filter(r=>!!r)}async function aF(t){return(await Ee(t,"volume","prune","-f")).stdout.toString()}async function cF(t,e,r){let n=[];for(let i of r)n.push("--label",i);await Ee(t,"volume","create",...n,e)}async function jl(t,e){let{exec:r,cmd:n,env:i,output:o}=xi(t),s=[];for(let f in e)for(let d of e[f])s.push("--filter",`${f}=${d}`);let a=await YE(t)?"json":"{{json .}}",c=["events","--format",a,...s],u=await r({cmd:n,args:c,env:i,output:o}),l=[];return u.stderr.on("data",f=>l.push(f)),u.exit.then(({code:f,signal:d})=>{l.length&&o.write(we(Buffer.concat(l).toString())),(f||d&&d!=="SIGKILL")&&o.write(we(`Docker events terminated (code: ${f}, signal: ${d}).`))},f=>{o.write(we(f&&(f.stack||f.message)))}),u}async function Ee(t,...e){return J(j(A({},xi(t)),{args:e}))}async function KE(t){var e;try{let{stdout:r}=await Ee(t,"context","ls","--format","{{json .}}"),n=`[${r.toString().trim().split(/\r?\n/).join(",")}]`;return(e=JSON.parse(n).find(s=>s.Current))==null?void 0:e.Name}catch{return}}async function YE(t){if(("cliHost"in t?t.cliHost:t.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await Ee(t,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch(r){return!1}}async function Ir(t,...e){return gi(j(A({},wo(t)),{args:e}))}async function mc(t,...e){return J(j(A({},xi(t,!0)),{args:e}))}async function Xh(t,...e){return gi(j(A({},wo(t,!0)),{args:e}))}function _i(t,e,r){return async function(n){let{exec:i,cmd:o,env:s}=xi(t),{argsPrefix:a,args:c}=lF(e,r,n,!1);return i({cmd:o,args:c,env:s,output:uF(n.output,o,a)})}}async function gc(t,e,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(o){let{ptyExec:s,cmd:a,env:c}=wo(t),{argsPrefix:u,args:l}=lF(e,r,o,!0);return s({cmd:a,args:l,env:c,output:uF(o.output,a,u)})}}function uF(t,e,r){return QZ(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function QZ(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return yt(j(A({},t),{event:o=>t.event("text"in o?j(A({},o),{text:o.text.replace(n,r)}):o)}))}function lF(t,e,r,n){let{env:i,cwd:o,cmd:s,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(l=>c.push("-e",`${l}=${i[l]}`)),o&&c.push("-w",o),c.push(t);let u=c.slice();return c.push(s),a&&c.push(...a),{argsPrefix:u,args:c}}function xi(t,e=!1){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?t.dockerComposeCLI:t.dockerCLI,env:A(A({},t.dockerEnv),bs(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?t.dockerComposeCLI:t.dockerCLI,env:A(A({},t.env),bs(t.env)),output:t.output}:j(A({},t),{env:A(A({},t.env),bs(t.env))})}function wo(t,e=!1){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?t.dockerComposeCLI:t.dockerCLI,env:A(A({},t.dockerEnv),bs(t.dockerEnv)),output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?t.dockerComposeCLI:t.dockerCLI,env:A(A({},t.env),bs(t.env)),output:t.output}:j(A({},t),{env:A(A({},t.env),bs(t.env))})}function Qh(t){return t.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(e,r)=>r.substr(0,r.length-1))}var l_=k(require("path")),f_=k(require("string_decoder")),sq=k(Vp());var c_=k(require("path")),iq=k(nq());function u_(t){return c_.join(t,"scripts","container-features")}async function _o(t,e,r){let n=e.features;if(!n||!Object.keys(n).length)return;let i=await fm(t,e,r);if(!i.features.every(o=>o.value===o.default))return i}async function fm(t,e,r){let n=e.features||{},i=u_(t.extensionPath),o=Be((await Ce(c_.join(i,"features.json"))).toString()),s=await r(),a=s["com.visualstudio.code.devcontainers.id"],c=s.version,u={};for(let l of o.features)a&&(l.exclude||[]).some(f=>oq(f,a,c))?l.included=!1:(l.include||[]).length?l.included=!!a&&(l.include||[]).some(f=>oq(f,a,c)):l.included=!0,u[l.id]=u[l.id]||l.included,l.value=l.included&&n[l.id]||l.default,(l.type==="option"&&typeof l.value!="boolean"||l.type==="choice"&&(l.values||[]).indexOf(l.value)===-1)&&(l.value=l.default);return t.output.write(`Feature configuration:
`+JSON.stringify(j(A({},o),{imageDetails:void 0}),void 0,"  "),ne.Trace),o.features=o.features.filter(l=>l.id in u&&l.included===u[l.id]?(delete u[l.id],!0):!1),o}function oq(t,e,r){let n=t.indexOf("@"),[i,o]=n!==-1?[t.slice(0,n),t.slice(n+1)]:[t,void 0];return e===i&&(!o||!r||iq.satisfies(r,o))}async function ef(t,e,r,n){let{common:i}=t,{cliHost:o,output:s}=i;if(!e)return r;let a=(await n()).Config.User||"root",c=tf(i),u=`${r.startsWith(c)?r:c}-features`,l=u_(i.extensionPath),f=i.package.version,d=o.path.join(await o.tmpdir(),"vsch","container-features",`${f}-${Date.now()}`);await o.mkdirp(d);let p=sq.c({cwd:l,filter:w=>w!=="./Dockerfile"},["."]),h=new Promise((w,x)=>{p.on("error",x),p.on("finish",w)}),g=await o.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:d,output:s}),v=new f_.StringDecoder;g.stdout.on("data",w=>{s.write(v.write(w))});let C=new f_.StringDecoder;g.stderr.on("data",w=>{s.write(we(C.write(w)))}),p.pipe(g.stdin);let y=(await Ce(l_.join(l,"Dockerfile"))).toString();await o.writeFile(o.path.join(d,"Dockerfile"),Buffer.from(y.replace("#{containerEnv}",e.features.filter(w=>w.included&&w.value).reduce((w,x)=>w.concat(Object.keys(x.containerEnv||{}).map(_=>`ENV ${_}=${x.containerEnv[_]}`)),[]).join(`
`)))),await o.writeFile(o.path.join(d,"features.env"),Buffer.from(e.features.filter(w=>w.included&&w.value).map(w=>`${w.buildArg}=${w.value}`).join(`
`))),await g.exit,await h;let E=["build","-t",u,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`IMAGE_USER=${a}`,d];return await Ir(t,...E),u}async function dm(t,e,r,n,i){let{common:o}=t,{cliHost:s}=o;if(o.cliMode||e.updateRemoteUserUID===!1||s.platform!=="linux")return r;let a=(await n()).Config.User||"root",c=e.remoteUser||i||a;if(c==="root"||/^\d+$/.test(c))return r;let u=tf(o),l=`${r.startsWith(u)?r:u}-uid`,f="updateUID.Dockerfile",d=l_.join(o.extensionPath,"scripts",f),p=o.package.version,h=s.path.join(await s.tmpdir(),"vsch",`${f}-${p}`),g=`${h}-${Date.now()}`;await s.mkdirp(s.path.dirname(g)),await s.writeFile(g,await Ce(d)),await s.rename(g,h);let v=["build","-f",h,"-t",l,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`REMOTE_USER=${c}`,"--build-arg",`NEW_UID=${await s.getuid()}`,"--build-arg",`NEW_GID=${await s.getgid()}`,"--build-arg",`IMAGE_USER=${a}`,s.path.dirname(h)];return await Ir(t,...v),l}var pm="com.docker.compose.project",p_="com.docker.compose.service";async function aq(t,e,r,n){return uq(t,t,e,r,n,h_(r))}async function cq(t,{repositoryPath:e,folder:r},n,i,o,s){let{labels:a}=wc(n,e,r,i),c=be(d_.posix,r?n.workspaceFolder(r):n.fullRepositoryName),u=`services:
  '${s.service}':
    labels:
${a.map(y=>`      - ${y}`).join(`
`)}
    volumes:
      - ${i}:${d_.posix.dirname(c.rootFolderPath)}

volumes:
  ${i}:
    external: true
`,{loadNativeModule:l,output:f,cliHost:d}=t.common,p=_i(t,o,"root"),h=await gc(t,o,"root",l),v={cliHost:_l("container",c.rootFolderPath,p,h,f),dockerCLI:"docker",dockerComposeCLI:"docker-compose",env:{},output:f},C=y_(n,i,r);return uq(t,v,c,s,d.cwd,c.rootFolderPath,u,o,C)}async function uq(t,e,r,n,i,o,s,a,c){let{common:u}=t,{cliHost:l}="cliHost"in e?e:e.common,f,d;try{let p=await $r(l,n,l.env,l.cwd),h=l.path.join(l.cwd,".env"),g=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await l.isFile(h)?h:void 0,v="/tmp/docker-compose.repositoryContainer.yml";if(s){let oe=(await l.readFile(p[0])).toString(),X=(/^version:.*$/m.exec(oe)||[])[0];X&&(s=`${X}

${s}`),await l.writeFile(v,Buffer.from(s)),p.push(v)}let C=await rf(e,r,p),y=await hm(t,C,n.service);if(t.expectExistingContainer&&!y)throw new H({description:"The expected container does not exist."});if(f=y?await Ft(t,y):void 0,f&&(t.removeOnStartup===!0||t.removeOnStartup===f.Id)){let oe="Removing existing container.",X=u.output.start(oe);await Ee(t,"rm","-f",f.Id),u.output.stop(oe,X),f=void 0}let E=!!f,w;if(!f||f.State.Status!=="running"){let oe=await ire(t,e,n,C,p,g,!f);f=await Ft(t,oe.containerId),w=oe.featuresConfig}else{let oe=f.Config.Labels||{};w=await _o(t.common,n,async()=>oe)}d=await Kn(t,f.Id,o,n.remoteUser);let x=wt(l,d.shellServer);E||await Wh(t,x,n);let _={cwd:i,dockerCLI:t.dockerCLI,dockerComposeCLI:t.dockerComposeCLI,env:u.env,containerId:f.Id,user:d.user,sessionId:u.sessionId,shutdownAction:n.shutdownAction,projectName:C,composeFiles:p,envFile:g,composeOverrideFile:s&&v,composeOverrideContent:s,buildContainerRunArgs:c,service:n.service,runServices:n.runServices,logLevel:u.getLogLevel(),delay:1e4},{shutdownArgs:S,doneWithDocuments:I}=await vm(t,x,"dockerCompose",_,E?n:void 0);a&&I.then(()=>{Ee(t,"rm","-f",a)});let R=n.devPort||fo,{hostOrContainerPort:T,hostPortServer:U,remoteEnv:W,serverDownloaded:K}=await po(u,d,n,w,void 0,R);return S.hostPortServer=U,Ec(u,d,T,f,r),{params:u,properties:d,config:n,resolvedAuthority:{host:xo,port:T,extensionHostEnv:W},tunnelInformation:u.isLocalContainer?_c(f):{},dockerParams:t,dockerContainerId:f.Id,serverDownloaded:K}}catch(p){let h=p instanceof H?p:new H({description:"An error occurred setting up the container.",originalError:p});throw f&&(h.manageContainer=!0,h.params=t.common,h.containerId=f.Id,h.dockerParams=t),d&&(h.containerProperties=d),h.config=n,h}}function h_(t){return t.workspaceFolder||"/"}async function nre(t,e,r,n,i,o,s,a,c){let u=["--project-name",e,...o];if(c){let l=r.path.join(await r.tmpdir(),`docker-compose.devcontainer.build-${Date.now()}.yml`),f=`services:
  ${t.service}:
    image: ${c}
`;await r.writeFile(l,Buffer.from(f)),u.push("-f",l)}u.push("build"),a&&u.push("--no-cache","--pull"),s.length&&(u.push(...s),s.indexOf(t.service)===-1&&u.push(t.service));try{await Xh(n,...u)}catch(l){throw l instanceof H?l:new H({description:"An error occurred building the Docker Compose images.",originalError:l,data:{fileWithError:i[0]}})}}async function ire(t,e,r,n,i,o,s){var K,oe;let{common:a}=t,{cliHost:c}="cliHost"in e?e:e.common;a.progress(ft.StartingContainer);let u=await m_(c.cwd,i,a.output),l=[].concat(...u.map(X=>["-f",X]));o&&l.push("--env-file",o);let f=A({ptyExec:c.ptyExec,cwd:c.cwd},xi(e,!0));"dockerEnv"in t&&(f.env=t.common.env);let d=yt(f.output,ne.Info),p=await g_(j(A({},f),{print:!0,output:d}),u,o,c.platform);if(Object.keys(p.services||{}).indexOf(r.service)===-1)throw new H({description:`Service '${r.service}' configured in devcontainer.json not found in Docker Compose configuration.`,data:{fileWithError:i[0]}});let g,v=new Promise((X,D)=>g=D),{started:C}=await gm(t,{[pm]:n,[p_]:r.service},v,a.output,a.getLogLevel()===ne.Trace);s&&await nre(r,n,c,j(A({},f),{output:d}),u,l,(K=r.runServices)!=null?K:[],(oe=t.buildNoCache)!=null?oe:!1,void 0);let y=p.services[r.service],E=y.image||`${n}_${r.service}`,w,x=()=>w||(w=nf(t,E,!y.build)),_=await _o(t.common,r,async()=>(await x()).Config.Labels||{}),S=await ef(t,_,E,x),I=await dm(t,r,S,x,y.user),R=I!==E,T=[].concat(...((_==null?void 0:_.features)||[]).map(X=>X.value&&X.mounts).filter(Boolean)),U=T.filter(X=>X.type==="volume");if(r.overrideCommand||R||T.length){let X=((_==null?void 0:_.features)||[]).map(Q=>Q.value&&Q.entrypoint).filter(Boolean),D=`services:
  '${r.service}':${R?`
    image: ${I}`:""}${r.overrideCommand?`
    entrypoint: /bin/sh
    command: ["-c", "echo Container started\\n
trap \\"exit 0\\" 15\\n
${X.join(`\\n
`)}\\n
while sleep 1 & wait $$!; do :; done"]`:""}${((_==null?void 0:_.features)||[]).some(Q=>Q.value&&Q.privileged)?`
    privileged: true`:""}${T.length?`
    volumes:${T.map(Q=>`
      - type: ${Q.type}
        source: ${Q.source}
        target: ${Q.target}`).join("")}`:""}${U.length?`
volumes:${U.map(Q=>`
  ${Q.source}:`).join("")}`:""}
`,P=(await c.readFile(i[0])).toString(),O=(/^version:.*$/m.exec(P)||[])[0];O&&(D=`${O}

${D}`);let $=`${await c.tmpdir()}/docker-compose.devcontainer.containerFeatures-${Date.now()}.yml`;await c.writeFile($,Buffer.from(D)),l.push("-f",$)}let W=["--project-name",n,...l];W.push("up","-d"),r.runServices&&r.runServices.length&&(W.push(...r.runServices),r.runServices.indexOf(r.service)===-1&&W.push(r.service));try{let X=j(A({},f),{output:d});await Xh(X,...W)}catch(X){throw g(),new H({description:"An error occurred starting Docker Compose up.",originalError:X,data:{fileWithError:u[0]}})}return await C,{containerId:await hm(t,n,r.service),featuresConfig:_}}async function m_(t,e,r){if(Mr(t)){let n=ih(t),i=[];for(let o=0;o<e.length;o++){let s=await oh(n,e[o],r);i.push(s)}return i}return e}async function g_(t,e,r,n){try{let i=[].concat(...e.map(o=>["-f",o]));r&&i.push("--env-file",r);try{let{stdout:o}=await mc(t,...i,"config");return bn(o.toString())||{}}catch(o){if(!Buffer.isBuffer(o==null?void 0:o.stderr)||(o==null?void 0:o.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw o;if(n==="win32"){let{cmdOutput:a}=await Xh(j(A({},t),{output:yt({event:t.output.event,dimensions:{columns:999999,rows:1}},ne.Info)}),...i,"config");return bn(a.replace(Ki,""))||{}}let{stdout:s}=await mc(j(A({},t),{env:j(A({},t.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...i,"config");return bn(s.toString())||{}}}catch(i){throw i instanceof H?i:new H({description:"An error occurred retrieving the Docker Compose configuration.",originalError:i,data:{fileWithError:e[0]}})}}async function hm(t,e,r){let n=await Ei(t,!0,[`${pm}=${e}`,`${p_}=${r}`]);return n&&n[0]}async function lq(t,e,r){var n;return(n=t.find(i=>{let o=i.Config.Labels||{};return o[pm]===e&&o[p_]===r}))==null?void 0:n.Id}async function rf(t,e,r){let{cliHost:n}="cliHost"in t?t:t.common,i=await ore(t),o=mm(n.env.COMPOSE_PROJECT_NAME||"",i);if(o)return o;try{let c=n.path.join(n.cwd,".env"),u=await n.readFile(c),l=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(u.toString()),f=l&&l[1].trim(),d=mm(f||"",i);if(d)return d}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let s=e.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return Qk(n.platform,a,n.path.join(s,".devcontainer"))?mm(`${n.path.basename(s)}_devcontainer`,i):mm(n.path.basename(a),i)}function v_(t){let e=(t.Config.Labels||{})[pm];return e||void 0}function mm(t,e){return e?t.toLowerCase().replace(/[^-_a-z0-9]/g,""):t.toLowerCase().replace(/[^a-z0-9]/g,"")}async function ore(t){try{let{stdout:e}=await mc(t,"version","--short"),r=Za(e.toString().trim());return r?!ec(r,[1,21,0]):!0}catch(e){return!0}}var Yn=k(require("url")),fq=k(require("https"));var C_;(function(e){e[e.CannotAccessRepository=2]="CannotAccessRepository"})(C_||(C_={}));function Xn(t){return t.toLowerCase().indexOf("github.com")>=0?lre(t):t.toLowerCase().indexOf("visualstudio.com")>=0?cre(t):t.toLowerCase().indexOf("dev.azure.com")>=0?are(t):t.toLowerCase().indexOf("gitlab.com")>=0?ure(t):sre(t)}function Pi(t){let e="owner",r="repository";return{repository:"unknown",repositoryUrl:t,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function sre(t){var s;let e="unknown-owner",r,n=t,i;i=(s=Yn.parse(t))==null?void 0:s.path;let o=i==null?void 0:i.split("/");return!o||o.length<1?Pi(t):(r=o[o.length-1],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"unknown",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`})}function are(t){var o,s;let e,r,n=t,i;if(ym(t)){let a=`http://${t}`;i=(o=Yn.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return Pi(t);e=c[3],r=c[4]}else{i=(s=Yn.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return Pi(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"ado",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function cre(t){var o,s;let e,r,n=t,i;if(ym(t)){let a=`http://${t}`;i=(o=Yn.parse(a))==null?void 0:o.path;let c=i==null?void 0:i.split("/");if(!c||c.length<5)return Pi(t);e=c[3],r=c[4]}else{i=(s=Yn.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<5)return Pi(t);e=a[2],r=a[4],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf(".")))}return{repository:"vso",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function ure(t){var o,s;let e,r,n=t,i;if(ym(t)){let a=`http://${t}`;i=(o=Yn.parse(a))==null?void 0:o.path,i&&(i=i.replace("/:","/"));let c=i==null?void 0:i.split("/");if(!c||c.length<3)return Pi(t);e=c[1],r=c[2]}else{i=(s=Yn.parse(t))==null?void 0:s.path;let a=i==null?void 0:i.split("/");if(!a||a.length<2)return Pi(t);e=a[1],r=a[2]}return r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),{repository:"gitlab",repositoryUrl:n,ref:void 0,commit:!1,repositoryOwner:e,repositoryName:r,pullRequestId:void 0,fullRepositoryName:`${e}/${r}`}}function lre(t){var c,u;let e,r,n=t,i,o,s;if(ym(t)){let l=`http://${t}`;s=(c=Yn.parse(l))==null?void 0:c.path,s&&(s=s.replace("/:","/"))}else s=(u=Yn.parse(t))==null?void 0:u.path;let a=s==null?void 0:s.split("/");if(!a||a.length<=2)return Pi(t);if(e=a[1],r=a[2],r.endsWith(".git")&&(r=r.substring(0,r.lastIndexOf("."))),a.length>=3){if(a[3]==="commit"||a[3]==="tree"){let l=t.match(/\/tree\/|\/commit\//);l&&l.index&&(n=t.substring(0,l.index),i=t.substring(l.index+l[0].length))}if(a[3]==="pull"){o=a[4];let l=t.match(/\/pull\//);l&&l.index&&(n=t.substring(0,l.index))}}return{repository:"github",repositoryUrl:n,ref:i,commit:a[3]==="commit",repositoryOwner:e,repositoryName:r,pullRequestId:o,fullRepositoryName:`${e}/${r}`}}function ym(t){return t=t.toLowerCase(),t.indexOf("://")<0?t.indexOf("@")<t.indexOf(":"):!1}var Cm=class extends Error{constructor(e,r){super();this.code=e,this.description=r}},wm=class{constructor(e){this.inputUrl=e,this.gitUrlInfo=Xn(this.inputUrl)}repositoryName(){return this.gitUrlInfo.repositoryName}repositoryOwner(){return this.gitUrlInfo.repositoryOwner}async postClone(e,r,n,i){}installExtension(){return null}},dq=class extends wm{constructor(e){super(e)}async parseUrl(e){var o,s,a;let r=(o=this.gitUrlInfo)==null?void 0:o.repositoryOwner,n=(s=this.gitUrlInfo)==null?void 0:s.repositoryName,i=(a=this.gitUrlInfo)==null?void 0:a.pullRequestId;return this.getPullRequestInfo(e,r,n,i)}async getPullRequestInfo(e,r,n,i){var l,f,d,p,h,g,v,C,y,E,w;let o=await this.fetchPullRequestInfo(e,r,n,i),s=(f=(l=o.head)==null?void 0:l.repo)==null?void 0:f.clone_url,a=(p=(d=o.base)==null?void 0:d.repo)==null?void 0:p.clone_url;if(!a)throw new Cm(2,"Cannot access the head repository of the Pull Request.");let c=(h=o.head)==null?void 0:h.ref,u=((C=(v=(g=o.head)==null?void 0:g.repo)==null?void 0:v.owner)==null?void 0:C.login)===r?null:(w=(E=(y=o.head)==null?void 0:y.repo)==null?void 0:E.owner)==null?void 0:w.login;return{urlToClone:a,prRepositoryUrl:s,ref:c,sourceOwner:u}}async fetchPullRequestInfo(e,r,n,i){let o=`/repos/${r}/${n}/pulls/${i}`,s={"user-agent":"vscode-remote-containers"};e&&(s.authorization=`token ${e}`);let a={hostname:"api.github.com",port:443,path:o,method:"GET",headers:s};return new Promise((c,u)=>{let l="",f=fq.request(a,d=>{if(d.statusCode<200||d.statusCode>=300)return u(new Error(`Status Code: ${d.statusCode}`));d.on("data",p=>{l+=p}),d.on("end",()=>{let p=JSON.parse(l.toString());c(p)})});f.on("error",u),f.end()})}cloneOptions(e){return{url:e.urlToClone,fullClone:!0}}async postClone(e,r,n,i){if(e.sourceOwner){let u=e.prRepositoryUrl.replace(/\.[^/.]+$/,"");await J({exec:r.exec,cmd:"git",args:["remote","add",e.sourceOwner,u],cwd:n,output:i}),await J({exec:r.exec,cmd:"git",args:["fetch",e.sourceOwner,e.ref],cwd:n,output:i});try{await J({exec:r.exec,cmd:"git",args:["checkout","-t",`${e.sourceOwner}/${e.ref}`],cwd:n,output:i})}catch(l){if(!(l.stderr&&l.stderr.startsWith(`fatal: A branch named '${e.ref}' already exists`)))throw l}await J({exec:r.exec,cmd:"git",args:["config","--local",`remote.${e.sourceOwner}.github-pr-remote`,"true"],cwd:n,output:i})}else await J({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i});let o=this.gitUrlInfo.repositoryOwner,s=this.gitUrlInfo.repositoryName,a=this.gitUrlInfo.pullRequestId,c=`${o}#${s}#${a}`;await J({exec:r.exec,cmd:"git",args:["config","--local",`branch.${e.ref}.github-pr-owner-number`,c],cwd:n,output:i})}installExtension(){return"GitHub.vscode-pull-request-github"}},pq=class extends wm{constructor(e){super(e)}async parseUrl(e){var r,n;return{urlToClone:(r=this.gitUrlInfo)==null?void 0:r.repositoryUrl,ref:(n=this.gitUrlInfo)==null?void 0:n.ref}}cloneOptions(e){let r=this.gitUrlInfo.commit;return{url:e.urlToClone,branch:!r&&e.ref||void 0,fullClone:r}}async postClone(e,r,n,i){this.gitUrlInfo.commit&&await J({exec:r.exec,cmd:"git",args:["checkout",e.ref],cwd:n,output:i})}},w_=class extends wm{constructor(e,r){super(e);this.branch=r}async parseUrl(e){return{urlToClone:this.inputUrl,ref:this.branch}}cloneOptions(e){return{url:e.urlToClone,branch:e.ref||void 0}}};function xc(t,e){if(e)return new w_(t,e);let r=Xn(t);if(r.repository==="github"){if(r.pullRequestId)return new dq(t);if(r.ref)return new pq(t)}return new w_(t)}var Em=Ii.join(__dirname,"..","node_modules","vscode-dev-containers","repository-containers");async function hq(t,e,r){let n=t.parsedAuthority;if(!n||er(n))return fre(t,n,e,r);if(sn(n))return n.inspectVolume?__(t,n):dre(t,n);if(bc(n))return __(t,n);throw new Error(`Unexpected authority: ${JSON.stringify(n)}`)}async function fre(t,e,r,n){let{common:i,userRepositoryConfigurationPaths:o,workspaceMountConsistencyDefault:s}=t,{cliHost:a,output:c}=i,u=a.cwd,l=e&&be(a.path,Cl(e.hostPath)?a.path.join(u,Ii.basename(e.hostPath)):u),f;l&&(f=await hre(t,l),f&&i.backgroundTasks.push(f==null?void 0:f.gitUnshallow),f&&!r&&await f.gitClone());let d=l?await In(a,l,o)||(r?UE(a,l.configFolderPath):void 0):r,p=d&&await bo(a,l,d,c,s,t.configUpdater,r,i.cliMode)||void 0;if(!p)throw d||l?new H({description:`Dev container config (${ce(d||UE(a,l.configFolderPath),a.platform)}) not found.`}):new H({description:"No dev container config and no workspace found."});let h=p.config,g=e==null?void 0:e.settings,v=So(g),C=h.name?`Dev Container: ${h.name}${v}`:`Dev Container${v}`;i.setWorkspaceName(C),f&&"initializeCommand"in h&&await f.gitClone(),await Eq(t,h.initializeCommand);let y;if(Xe(h)||"image"in h)y=await Cq(t,l,h,p.workspaceConfig,t.originalCwd||u,f==null?void 0:f.gitClone,n);else if("dockerComposeFile"in h){if(f&&await f.gitClone(),!l)throw new H({description:"A Dev Container using Docker Compose requires a workspace folder."});y=await aq(t,l,h,t.originalCwd||u)}else throw new H({description:`Dev container config (${h.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return f&&await f.gitClone(),y}async function dre(t,e){let{repositoryPath:r,volumeName:n,folder:i}=e,o=Ur(r);n=await yq(t,o,n);let{labels:s}=wc(o,r,i,n),a=[...s,`${of}=${t.common.product.quality}`],c=await xm(t,a);if(c)return E_(t,e,o,n,c);let{containerId:u,shellServer:l,config:f}=await o.cloneAndInitializeRepository(t,e,o,n);if(Xe(f)||"image"in f)return E_(t,e,o,n,f,u,l);if("dockerComposeFile"in f)return cq(t,e,o,n,u,f);throw new H({description:`Dev container config (${f.configFilePath}) not valid.`})}async function bo(t,e,r,n,i,o,s,a=!1){let u=await wt(t).readDocument(s!=null?s:r);if(!u)return;let l=Be(u),f=l;if(l&&o&&(l.configFilePath=r,f=o(l),delete f.configFilePath),!f||typeof f!="object"||Array.isArray(f))throw new H({description:`Dev container config (${ce(r,t.platform)}) must contain a JSON object literal.`});let d=await wq(t,e,f,n,i,a),p=sc({platform:t.platform,localWorkspaceFolder:e==null?void 0:e.rootFolderPath,containerWorkspaceFolder:d.workspaceFolder,configFile:r,env:t.env},f);return typeof p.workspaceFolder=="string"&&(d.workspaceFolder=p.workspaceFolder),"workspaceMount"in p&&(d.workspaceMount=p.workspaceMount),p.configFilePath=r,{config:p,workspaceConfig:d}}async function In(t,e,r){return await mq(t,e,r)||await Bh(t,e.configFolderPath)||await mq(t,e,[Em])}async function mq(t,e,r){let n=await cD(t,e,Ye);return n&&_m(n,r)}async function _m(t,e){let r=new Set(t.map(pre).filter(n=>!!n));for(let n of r)for(let i of e){let o=Ii.join(i,n),s=await Vh(o);if(s)return pe.file(s)}}function gq(t,e,r){let n=t.path.relative(e.rootFolderPath,ce(r,t.platform));return n&&!n.startsWith("..")&&!t.path.isAbsolute(n)}function vq(t){if(t.scheme!=="file")return;let e=Ii.relative(Em,t.fsPath);if(e&&!e.startsWith("..")&&!Ii.isAbsolute(e))return e}function pre(t){let e;if(t.startsWith("https://"))e=t.substr(8);else{let r=/[^@:]+@([^:]+):(.+)/.exec(t);if(r)e=`${r[1]}/${r[2]}`;else return}return e.endsWith(".git")&&(e=e.substr(0,e.length-4)),e.toLowerCase().startsWith("github.com")&&(e=(/^[^/]+\/[^/]+\/[^/]+/.exec(e)||[])[0]),e}async function hre(t,e){var p;let{common:r,gitClone:n}=t,{cliHost:i}=r;if(!n)return;let o=Sl(r),s=Sl(r),a=xc(n.url,n.branch),c=await a.parseUrl(n.tokenEnvVar?i.env[n.tokenEnvVar]:void 0),u=a.cloneOptions(c),l=j(A(A({},n),u),{env:A(A({},n.env),u.env)}),f=await uh(r,r.cliHost,e.rootFolderPath,l,o.output,s.output),d=(p=f.gitClone)==null?void 0:p.then(()=>a.postClone(c,i,e.rootFolderPath,o.output));return{gitClone:async()=>{o.flush(),await d},gitUnshallow:async()=>{o.flush(),s.flush(),await f.gitUnshallow}}}function Ur(t){return{repositoryPath:t,fullRepositoryName:bm(t),repositoryName:mre(t),workspaceFolder:bq,volumeDestination:x_(),oldVolumeName:gre(t),alreadyCloned:!1,imageName:vre(t),uniqueVolumeName:yre(t),getWorkspaceConfiguration:(e,r)=>Cre(e,r),getOldWorkspacePath:Iq,cloneAndInitializeRepository:wre,buildSingleContainer:Ere,getConfigurationFromImage:Pq,gitUrlHandler:xc(t),gitUrlInfo:Xn(t)}}function bm(t){let e=Xn(t);return e==null?void 0:e.fullRepositoryName}function mre(t){let e=Xn(t);return e==null?void 0:e.repositoryName}function x_(){return"/workspaces"}function gre(t){let e=bm(t);return`vsc-${pt.posix.basename(e)}-${b_(t)}`}function vre(t){let e=bm(t),r=b_(t),n=pt.posix.basename(e);return Qh(`vsc-${n}-${r}`)}function yre(t){let e=Xn(t),r="";e&&e.repositoryName&&(r=e.repositoryName,e.ref?r=`${r}-${e.ref.replace(/\//g,"-")}`:e.pullRequestId&&(r=`${r}-pull-${e.pullRequestId}`));let n=b_(t);return`${r}-${n}`}function b_(t){return _q.createHash("md5").update(t).digest("hex")}function Cre(t,e){let r=bq(t),n=`type=volume,src=${e},dst=${x_()}`;return{workspaceFolder:r,workspaceMount:n}}function bq(t){return pt.posix.join(`${x_()}`,`${t}`)}async function wre(t,{folder:e,cloneInfo:r},n,i){var l;await bre(t);let{containerId:o,shellServer:s}=await _re(t,n,i,e,t.configProvider,r),{config:a,workspaceFolder:c}=await Pq(t,n,e,s),u=(l=n.gitUrlHandler)==null?void 0:l.installExtension();return u&&(a.extensions||(a.extensions=[]),a.extensions.includes(u)||a.extensions.push(u)),await Am(t,o,"root",c,a.initializeCommand),{repository:n,volumeName:i,containerId:o,shellServer:s,config:a}}async function Ere(t,e,r,n,i){try{return{imageName:await Sre(t,e,r,n,i)}}finally{Ee(t,"rm","-f",n)}}async function _re(t,e,r,n,i,o){let{common:s}=t,{output:a,loadNativeModule:c}=s,u=e.fullRepositoryName,l,f,d,p;t.common.progress(ft.CloningRepository);let h=y_(e,r,n,t.buildContainerRunArgs);n?(a.write(`Cloning Github repository: ${u} into ${e.workspaceFolder(n)}
\r`),l=`fatal: destination path '${e.workspaceFolder(n)}' already exists`,p=e.workspaceFolder(n),d=`Repository '${u}' was already cloned into '${e.workspaceFolder(n)}'.
\r`):(a.write(`Cloning Github repository: ${u} into volume ${r}
\r`),l=`fatal: destination path '${u}' already exists`,p=`${u}`,d=`Repository '${u}' was already cloned into volume.`);let g=e.gitUrlHandler;if(!g)throw new H({description:"Could not analyze the URL."});o?f=g.cloneOptions(o):f={url:e.repositoryPath};let{stdout:v}=await Ee(t,...h),C=v.toString().trim(),y=_i(t,C,"root"),E=await hs(y,a),w,x,_=Promise.resolve(),S;if(!s.cliMode){let U=await _h(s,{remoteExec:y,user:"root",nodeExecutable:"node",shellServer:E});w=U.remoteContainersCLI,x=U.remoteEnv,_=U.ready,S=U.mrpcExec}let I=await gc(t,C,"root",c),R=_l("container",p,await S||y,I,a);try{s.cliMode||(await kh({shellServer:E,nodeExecutable:"node"},w,a,"global"),await Dh(t.common,{homeFolder:"/root",shellServer:E},[".ssh","known_hosts"],"ssh"),await _);let U=Sl(s),W=await uh(s,R,p,j(A({},f),{env:A(A({},x),f.env)}),a,U.output);if(await W.gitClone,W.gitUnshallow&&W.gitUnshallow.then(U.flush,U.flush),W.gitClone&&o)try{await g.postClone(o,R,p,a)}catch(K){return S_(t,C,`Failed to checkout the repository ${o.urlToClone}.`)}}catch(U){let W=U&&(U.cmdOutput||U.stack||U.message)||String(U);if(W=W.replace(Ki,""),W.replace(/[\r\n]+/gm,"").includes(l))a.write(d),e.alreadyCloned=!0;else return S_(t,C,`Git clone failed. ${W}`)}let{configRaw:T}=await Sq(t,e,n,E);if(!hc(T)&&i){a.write(`Repository ${u} has no development container files.
\r`);let U=!0;for(;U;){let W=await i.createConfiguration(p,R);if(W)U=!1;else if(W=await i.showError("You must select a container configuration since the repository does not contain a dev container configuration. Without a dev container configuration the container cannot be started.","Select Configuration"),W!=="Select Configuration")return S_(t,C,"Cancelled container configuration selection.")}}return{containerId:C,shellServer:E}}function y_(t,e,r,n=[]){return r?["run","-d","--mount",`type=volume,src=${e},dst=${t.volumeDestination}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${P_}`,"sleep","infinity"]:["run","-d","--mount",`type=volume,src=${e},dst=${t.fullRepositoryName}`,"-v","/var/run/docker.sock:/var/run/docker.sock",...n,`${P_}`,"sleep","infinity"]}function S_(t,e,r){throw e&&Ee(t,"rm","-f",e),new H({description:r})}async function Sq(t,e,r,n){let i,o,s;if(r?s=e.workspaceFolder(r):s=`${Iq(e.repositoryPath)}`,o=await _m([e.repositoryPath],t.userRepositoryConfigurationPaths),o&&(i=(await Ce(o.fsPath)).toString()),!o)for(let a of dc(pt.posix,s))try{i=(await n.exec(`cat ${a} 2>/dev/null`,{logOutput:!1})).stdout,o=pe.from({scheme:"vscode-remote",path:a});break}catch(c){}return o||(o=await _m([e.repositoryPath],[Em]),o&&(i=(await Ce(o.fsPath)).toString())),{configRaw:i&&Be(i),configFile:o,workspaceFolder:s}}async function Pq(t,e,r,n){let{configRaw:i,configFile:o,workspaceFolder:s}=await Sq(t,e,r,n);if(!o||!i)throw new H({description:"The repository does not have a 'devcontainer.json' configuration file."});let{common:a,configUpdater:c}=t,{cliHost:u,output:l}=a,f=A({},i),d=f;c&&(f.configFilePath=o,d=c(f),delete d.configFilePath);let p=sc({platform:u.platform,configFile:o,env:u.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:s},d);return p.configFilePath=o,("workspaceMount"in p||"workspaceFolder"in p)&&l.write("The options 'workspaceMount' or 'workspaceFolder' are ignored when cloning a repository into a volume."),xre(t,p),{workspaceFolder:s,config:p}}function xre({common:t},e){let r=Qn(t.env),n=So(r),i=e.name?`Dev Container: ${e.name}${n}`:`Dev Container${n}`;t.setWorkspaceName(i)}function Iq(t){return`/workspaces/${pt.posix.basename(bm(t))}`}var P_="vsc-volume-bootstrap",Sm="vsc-volume-inspect";async function bre(t){let e=pt.join(t.common.extensionPath,"scripts","volumeBootstrap.Dockerfile"),r=["build","-f",e,"-t",P_,pt.dirname(e)];await Ir(t,...r)}async function Aq(t){let e=pt.join(t.common.extensionPath,"scripts","volumeInspect.Dockerfile"),r=["build","-f",e,"-t",Sm,pt.dirname(e)];await Ir(t,...r)}async function Sre(t,e,r,n,i){let o=e.imageName,s="image"in r?r.image:o;if(Xe(r))try{await Pre(t,r,n,i,s)}catch(a){throw a instanceof H?a:new H({description:"An error occurred building the image.",originalError:a})}return s}async function Pre(t,e,r,n,i){var g,v;t.common.progress(ft.BuildingImage);let o=e.configFilePath,s=o.scheme==="file",a={platform:s?process.platform:"linux"},c=kt(a,e),u=s?c.fsPath:c.path,l=Im(a,e),f=s?l.fsPath:l.path;if(s){let C=pt.dirname(o.fsPath),y=pt.basename(C)===".devcontainer"?pt.dirname(C):C,E=xq.c({cwd:y},["."]),w=await new Promise(I=>{let R=[];E.on("data",T=>R.push(T)),E.on("end",()=>I(Buffer.concat(R)))}),x=`/tmp/devcontainer-${Date.now()}`;await n.exec(`# Copy local config folder to remote
mkdir -p ${x}
${Ol(w.byteLength)} | tar --no-same-owner -x -C ${x}`,{stdin:w});let _=pt.relative(y,u);u=pt.posix.join(x,process.platform==="win32"?_.replace(/\\/g,"/"):_);let S=pt.relative(y,f);f=pt.posix.join(x,process.platform==="win32"?S.replace(/\\/g,"/"):S)}if(!await Oh(n,u))throw new H({description:`Dockerfile (${u}) not found.`});let d=["exec","-t",r,"docker","build","-f",u,"-t",i],p=(g=e.build)==null?void 0:g.target;if(p&&d.push("--target",p),t.buildNoCache)d.push("--no-cache","--pull");else if(e.build&&e.build.cacheFrom)if(typeof e.build.cacheFrom=="string")d.push("--cache-from",e.build.cacheFrom);else for(let C=0;C<e.build.cacheFrom.length;C++){let y=e.build.cacheFrom[C];d.push("--cache-from",y)}let h=(v=e.build)==null?void 0:v.args;if(h)for(let C in h)d.push("--build-arg",`${C}=${h[C]}`);d.push(f);try{let C=j(A({},wo(t)),{output:yt(t.common.output,ne.Info)});await Ir(C,...d)}catch(C){throw new H({description:"An error occurred building the image.",originalError:C,data:{fileWithError:u}})}}async function yq(t,e,r){let n=[`vsch.local.repository=${e.repositoryPath}`];return r?r===an?(r=e.uniqueVolumeName,n.push("vsch.local.repository.unique=true")):n.push("vsch.local.repository.unique=false"):(r=e.oldVolumeName,n.push("vsch.local.repository.unique=false")),e.gitUrlInfo.ref&&n.push(`vsch.local.repository.branch=${e.gitUrlInfo.ref}`),e.gitUrlInfo.pullRequestId&&n.push(`vsch.local.repository.pullRequestId=${e.gitUrlInfo.pullRequestId}`),(await Co(t)).indexOf(r)===-1&&await cF(t,r,n),r}var Pm="vsch.local.repository",I_="vsch.local.repository.volume",A_="vsch.local.repository.folder";function wc(t,e,r,n){return r?{labels:[`${Pm}=${e}`,`${I_}=${n}`,`${A_}=${r}`],remoteWorkspaceFolder:t.workspaceFolder(r)}:{labels:[`${Pm}=${e}`],remoteWorkspaceFolder:t.getOldWorkspacePath(e)}}var of="vsch.quality",Rq="vsch.local.folder",Tq="vsch.local.volume",R_="/volume";async function Cq(t,e,r,n,i,o,s){let{common:a}=t,c,u,l=s||[`${Rq}=${i}`,`${of}=${a.product.quality}`];try{let f;c=await xm(t,l);let d=!!c;if(c){let p=c.Config.Labels||{};f=await _o(t.common,r,async()=>p),await D_(t,l,c)}else{if(o&&e)if("image"in r){let{stdout:y}=await Ee(t,"images","-q",r.image);y.toString().trim().length===0&&await Ir(t,"pull",r.image);let E=Dre(t,e,r);E.length&&(a.output.write(`Waiting for git clone to finish. (Unsupported: ${E.map(w=>`'${w}'`).join(", ")})`),await o())}else await o();let p=await Ire(t,r),h,g=()=>h||(h=nf(t,p,"image"in r));f=await _o(t.common,r,async()=>(await g()).Config.Labels||{});let v=await ef(t,f,p,g),C=await dm(t,r,v,g,Are(r.runArgs)||r.containerUser);try{await O_(t,r,f,C,l,n.workspaceMount)}finally{c=await af(t,l)}if(!c)return Tm(a.output,"Dev container not found.")}return u=await Kn(t,c.Id,n.workspaceFolder,r.remoteUser),await k_(c,t,u,r,f,e,d,i,o)}catch(f){throw T_(f,c,t,u,r)}}async function E_(t,{repositoryPath:e,folder:r},n,i,o,s,a){let{common:c}=t,u,l,f,{labels:d,remoteWorkspaceFolder:p}=wc(n,e,r,i),h=[...d,`${of}=${c.product.quality}`];try{let g,v="Id"in o;if("Id"in o){l=o,await D_(t,h,l);let C=_i(t,l.Id,"root"),y=await hs(C,c.output,c.sessionId);u=(await n.getConfigurationFromImage(t,n,r,y)).config;let E=l.Config.Labels||{};g=await _o(t.common,u,async()=>E),f=await Kn(t,l.Id,p,u.remoteUser),await Am(t,l.Id,f.user,p,u.initializeCommand)}else{u=o;let C=await n.buildSingleContainer(t,n,u,s,a),y,E=()=>y||(y=nf(t,C.imageName,"image"in u));g=await _o(t.common,u,async()=>(await E()).Config.Labels||{});let w=await ef(t,g,C.imageName,E);try{let x=await n.getWorkspaceConfiguration(n.repositoryPath,i);await O_(t,u,g,w,h,x.workspaceMount)}finally{l=await af(t,h)}if(!l)return Tm(c.output,"Dev container not found.");f=await Kn(t,l.Id,p,u.remoteUser),f.user!=="root"&&(f.launchRootShellServer?await yE(f,f.launchRootShellServer,p,u.configFilePath.path):c.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."))}return await k_(l,t,f,u,g,be(sf.posix,p),v,c.cwd,void 0)}catch(g){throw T_(g,l,t,f,u)}}async function __(t,e){let{common:r}=t,{volumeName:n}=e,i,o,s,a,c;bc(e)?(a=R_,c="Inspect Volume"):(a=Ur(e.repositoryPath).volumeDestination,c="Recovery Container");let u=sf.join(t.common.extensionPath,"scripts","devContainerInspect.json"),l={image:Sm,name:c,configFilePath:pe.parse(u),settings:{"extensions.ignoreRecommendations":!0}};s=[`${Tq}=${n}`,`${of}=${r.product.quality}`],r.setWorkspaceName(c);try{if(i=await xm(t,s),i)await D_(t,s,i),o=await Kn(t,i.Id,a,l.remoteUser);else{await Aq(t);try{let f=`src=${n},dst=${a},type=volume,volume-driver=local`;await O_(t,l,void 0,Sm,s,f)}finally{i=await af(t,s)}if(!i)return Tm(r.output,"Dev container not found.");o=await Kn(t,i.Id,a,l.remoteUser),o.user!=="root"&&(o.launchRootShellServer?await yE(o,o.launchRootShellServer,a):r.output.write("NOTE: Cannot run as root. Therefore cannot chown repository files."))}return await k_(i,t,o,l,void 0,be(sf.posix,a),!0,r.cwd,void 0)}catch(f){throw T_(f,i,t,o,void 0)}}function T_(t,e,r,n,i){let o=t instanceof H?t:new H({description:"An error occurred setting up the container.",originalError:t});return e&&(o.manageContainer=!0,o.params=r.common,o.containerId=e.Id,o.dockerParams=r),n&&(o.containerProperties=n),i&&(o.config=i),o}async function k_(t,e,r,n,i,o,s,a,c){let{common:u}=e,l=wt(u.cliHost,r.shellServer);s||await Wh(e,l,n);let f={cwd:a,dockerCLI:e.dockerCLI,env:u.env,containerId:t.Id,user:r.user,sessionId:u.sessionId,shutdownAction:n.shutdownAction,logLevel:u.getLogLevel(),delay:1e4},{shutdownArgs:d}=await vm(e,l,"singleContainer",f,s?n:void 0),{hostOrContainerPort:p,hostPortServer:h,remoteEnv:g,serverDownloaded:v}=await po(u,r,n,i,c,n.devPort||fo);return d.hostPortServer=h,Ec(u,r,p,t,o),{params:u,properties:r,config:n,resolvedAuthority:{host:xo,port:p,extensionHostEnv:g},tunnelInformation:u.isLocalContainer?_c(t):{},dockerParams:e,dockerContainerId:t.Id,serverDownloaded:v}}async function Ire(t,e){var n;let r="image"in e?e.image:tf(t.common);return Xe(e)&&(t.common.progress(ft.BuildingImage),await Rre(t,e,r,(n=t.buildNoCache)!=null?n:!1)),r}function Are(t=[]){for(let e=t.length-1;e>=0;e--){let r=t[e];if((r==="-u"||r==="--user")&&e+1<t.length)return t[e+1];if(r.startsWith("-u=")||r.startsWith("--user="))return r.substr(r.indexOf("=")+1)}}async function xm(t,e){let{common:r}=t,n=await af(t,e);if(t.expectExistingContainer&&!n)throw new H({description:"The expected container does not exist."});if(n&&(t.removeOnStartup===!0||t.removeOnStartup===n.Id)){let i="Removing Existing Container",o=r.output.start(i);await Ee(t,"rm","-f",n.Id),r.output.stop(i,o),n=void 0}return n}async function D_(t,e,r){let{common:n}=t,i=r.State.Status!=="running";if(i){let o="Starting container",s=n.output.start(o);await Ee(t,"start",r.Id),n.output.stop(o,s),await af(t,e)||Tm(n.output,"Dev container not found.")}return i}async function af(t,e){let r=await Ei(t,!0,e);return(await yo(t,r)).filter(i=>i.State.Status!=="removing")[0]}async function Rre(t,e,r,n){var p,h;let{cliHost:i,output:o}="cliHost"in t?t:t.common,s=wt(i),a=kt(i,e);if(!await s.readDocument(a)){let g=ce(a,i.platform);throw new H({description:`Dockerfile (${g}) not found.`})}let u=await N_(a,i),l=["build","-f",u,"-t",r],f=(p=e.build)==null?void 0:p.target;if(f&&l.push("--target",f),n)l.push("--no-cache","--pull");else if(e.build&&e.build.cacheFrom)if(typeof e.build.cacheFrom=="string")l.push("--cache-from",e.build.cacheFrom);else for(let g=0;g<e.build.cacheFrom.length;g++){let v=e.build.cacheFrom[g];l.push("--cache-from",v)}let d=(h=e.build)==null?void 0:h.args;if(d)for(let g in d)l.push("--build-arg",`${g}=${d[g]}`);l.push(await N_(Im(i,e),i));try{let g=j(A({},wo(t)),{output:yt(o,ne.Info)});await Ir(g,...l)}catch(g){throw new H({description:"An error occurred building the image.",originalError:g,data:{fileWithError:u}})}}async function O_(t,e,r,n,i,o){let{common:s}=t;s.progress(ft.StartingContainer);let a=e.appPort,c=typeof a=="number"||typeof a=="string"?[a]:a||[],u=[].concat(...c.map(K=>["-p",typeof K=="number"?`127.0.0.1:${K}:${K}`:K])),l=o?["--mount",o]:[],f=e.mounts?[].concat(...e.mounts.map(K=>["--mount",K])):[];if(t.cacheMount==="volume")f.push("--mount","type=volume,src=vscode,dst=/vscode");else if(t.cacheMount==="bind"){await wn(s.localCacheFolder);let K=s.localCacheFolder.indexOf(",")!==-1?'"':"";f.push("--mount",`type=bind,${K}src=${s.localCacheFolder}${K},dst=/vscode`)}let d=e.containerEnv,p=d?Object.keys(d).reduce((K,oe)=>(K.push("-e",`${oe}=${d[oe]}`),K),[]):[],h=e.containerUser?["-u",e.containerUser]:[],g=[];((r==null?void 0:r.features)||[]).some(K=>K.value&&K.privileged)&&g.push("--privileged");let v=[].concat(...[].concat(...((r==null?void 0:r.features)||[]).map(K=>K.value&&K.mounts).filter(Boolean)).map(K=>["--mount",`type=${K.type},src=${K.source},dst=${K.target}`])),C=((r==null?void 0:r.features)||[]).map(K=>K.value&&K.entrypoint).filter(Boolean),y=e.overrideCommand!==!1,E=y?["--entrypoint","/bin/sh"]:[],w=y?["-c",`echo Container started
trap "exit 0" 15
${C.join(`
`)}
while sleep 1 & wait $!; do :; done`]:[],x=["run","--sig-proxy=false","-a","STDOUT","-a","STDERR",...u,...l,...f,...v,...Tre(i),"-l",`vsch.remote.devPort=${e.devPort||fo}`,...p,...h,...e.runArgs||[],...g,...E,n,...w],_,S=new Promise((K,oe)=>_=oe),{started:I}=await gm(t,kre(i),S,s.output,s.getLogLevel()===ne.Trace),R="Starting container",T=s.output.start(R),U=j(A({},wo(t)),{output:yt(t.common.output,ne.Info)});Ir(U,...x).then(_,_),await I,s.output.stop(R,T)}function Sc(t){let e=(t.Config.Labels||{})[Rq];return e||void 0}function Ts(t){let e=(t.Config.Labels||{})[Pm];return e||void 0}function Rm(t){let e=(t.Config.Labels||{})[I_];return e||void 0}function kq(t){let e=(t.Config.Labels||{})[Tq];return e||void 0}function Dq(t){let e=(t.Config.Labels||{})[A_];return e||void 0}function Tre(t){let e=[];return t.forEach(r=>e.push("-l",r)),e}function kre(t){let e={};return t.forEach(r=>{let n=r.split("=");e[n[0]]=n[1]}),e}function Tm(t,e){throw t.write(we(e)),new Error(e)}function Dre(t,e,r){let n=[];for(let i in r){let o=Ore[i],s=typeof o=="function"?o(t,e,r):o;s===!0?n.push(i):typeof s=="string"?n.push(s):Array.isArray(s)&&n.push(...s)}return n}var Ore={configFilePath:!1,image:!1,name:!1,forwardPorts:!1,appPort:!1,devPort:!1,portsAttributes:!1,otherPortsAttributes:!1,extensions:!1,runArgs:(t,e,r)=>{let n={"add-host":!0,"cap-add":!0,gpus:!0,hostname:!0,l:!0,label:!0,"security-opt":!0},i=[];for(let s of r.runArgs){let a=s.indexOf("="),c=a===-1?s.substr(2):s.substr(2,a);if(s.startsWith("--"))i.push(c);else if(s.startsWith("-"))for(let u of s.substr(1))i.push(u)}let o=[];for(let s of i)n[s]||o.push(s);return o},shutdownAction:!1,overrideCommand:!0,initializeCommand:!0,onCreateCommand:!1,updateContentCommand:!1,postCreateCommand:!1,postStartCommand:!1,postAttachCommand:!1,waitFor:!1,workspaceFolder:!1,workspaceMount:(t,e,r)=>Oq(t,e,r.workspaceMount)?r.workspaceMount:!1,mounts:(t,e,r)=>r.mounts.filter(Oq.bind(void 0,t,e)),settings:!1,containerEnv:!1,remoteEnv:!1,containerUser:!1,remoteUser:!1,updateRemoteUserUID:!1,userEnvProbe:!1,features:!1,hostRequirements:!1};function Oq(t,e,r){let n=!!r&&Nre(r);return n&&n.type==="bind"&&!!n.source&&Lre(t.common.cliHost,e.rootFolderPath,n.source)}function Nre(t){let e={src:"source",destination:"target",dst:"target"};return t.split(",").map(r=>r.split("=")).map(([r,n])=>[e[r]||r,n]).reduce((r,[n,i])=>(r[n]=i,r),{type:"bind"})}function Lre(t,e,r){let{path:n}=t,i=n.relative(e,r);return!!i&&!i.startsWith("..")&&!n.isAbsolute(i)}var Nq=k(require("path"));async function Lq(t,e,r,n,i,o){let s,a=new Promise(h=>s=h),c=new GE,u=[],l=await nF("vscode-remote-containers",async(h,g)=>{let v=await oF(h),C=[];if(v.type==="poll")try{C=await c.dequeue(6e4)}catch(y){}else if(v.type==="reply"){let y=u[v.sequence];y&&(y(v.reply),delete u[v.sequence])}else v.type==="done"&&s?s():v.type==="log"&&n.event(v.event);g.write(JSON.stringify(C)),g.end()});l.server.unref();let f=Nq.join(r,"dist","shutdown","shutdownMonitorProcess"),d=[l.ipcHandlePath,t,ne[e],i||"",o.getTime().toString()];n.write(`Forking shutdown monitor: ${f} ${d.join(" ")}\r
`);let p=tD(f,d,{stdio:["ignore","ignore","ignore","ipc"],detached:!0,execArgv:[]});return p.on("error",h=>{console.error(h)}),p.unref(),{queue:c,sequence:0,replies:u,done:a}}async function km(t,e,r){let n=t.sequence++,i=new Promise(s=>t.replies[n]=s);return t.queue.push({type:"configure",sequence:n,options:e}),await i}async function Fq({queue:t,done:e}){t.push({type:"cleanup"}),await e}var Mq=k(require("util"));var $q=k(require("string_decoder")),an="__UNIQUE__",xo="127.0.0.1";async function N_(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:r}=await J({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:Ye});return r.toString().trim()}return ce(t,e.platform)}function Pc(t,e){let r=t.platform==="win32"&&!t.env.SSH_AUTH_SOCK?aE:t.type==="wsl"?t.env.SSH_AUTH_SOCK:void 0,n={DOCKER_CONTEXT:"default"};return e&&("context"in e?n.DOCKER_CONTEXT=e.context:(e.host&&(n.DOCKER_HOST=e.host),e.certPath&&(n.DOCKER_CERT_PATH=e.certPath),e.tlsVerify&&(n.DOCKER_TLS_VERIFY=e.tlsVerify))),r&&(n.SSH_AUTH_SOCK=r),n}function Qn(t){let e;return t.DOCKER_CONTEXT&&t.DOCKER_CONTEXT!=="default"?e={context:t.DOCKER_CONTEXT}:(e={},t.DOCKER_HOST&&(e.host=t.DOCKER_HOST),t.DOCKER_CERT_PATH&&(e.certPath=t.DOCKER_CERT_PATH),t.DOCKER_TLS_VERIFY&&(e.tlsVerify=t.DOCKER_TLS_VERIFY),Object.keys(e).length||(e=void 0)),e}function Dm(t,e){e&&("context"in e&&e.context&&t.write(`Context: ${e.context}\r
`),"host"in e&&e.host&&t.write(`Host: ${e.host}\r
`),"certPath"in e&&e.certPath&&t.write(`CertPath: ${e.certPath}\r
`),"tlsVerify"in e&&e.tlsVerify&&t.write(`TLSVerify: ${e.tlsVerify}\r
`))}function Om(t){return!t.DOCKER_HOST&&(!t.DOCKER_CONTEXT||t.DOCKER_CONTEXT==="default")}function So(t){return t&&("context"in t||t.host)?` @ ${"context"in t?t.context:t.host}`:""}async function Jn(t,e){try{return await Ft(t,e)}catch(r){return}}async function gm(t,e,r,n,i){let o=await jl(t,{event:["start"]});return{started:new Promise((s,a)=>{r.catch(l=>{o.terminate(),a(l)});let c=new $q.StringDecoder("utf8"),u="";o.stdout.on("data",async l=>{if(l){let f=c.write(l);i&&n.write(`Log: startEventSeen#data ${f.trim().replace(/\r?\n/g,`\r
`)}\r
`);let d=(u+f).split(`
`);u=d.pop();for(let p of d)if(p.trim())try{let h=JSON.parse(p);(h.status||h.Status)==="start"&&await Fre(t,h,e)&&(o.terminate(),s())}catch(h){console.error(h),console.error(p)}}})})}}async function Fre(t,e,r){var i;let n=((i=e.Actor)==null?void 0:i.Attributes)||(await Ft(t,e.id||e.ID)).Config.Labels||{};return Object.keys(r).every(o=>n[o]===r[o])}function Ec(t,e,r,n,i){let o=n.Ports.filter(l=>!!l.PublicPort),s="";if(t.authority&&i){let l=i.isWorkspaceFile?"workspace":"folder",f=e.remoteWorkspaceFolder||"/",d=i.isWorkspaceFile?Po.posix.join(f,t.cliHost.path.basename(i.workspaceOrFolderPath)):f;s=`&${l}=${encodeURIComponent(`vscode-remote://${t.authority}${d}`)}`}let a=[...o.length?["Published Ports:"]:[],...o.map(l=>`${l.PrivatePort}/${l.Type} -> ${l.IP}:${l.PublicPort}`),...o.length?[""]:[],...t.web?[`VS Code Web: http://localhost:${r}?tkn=${t.connectionToken}${s}`,""]:[]],c=a.reduce((l,f)=>Math.max(f.length,l),0),u="-".repeat(c);c>0&&t.output.write(`\r
\r
${u}\r
${a.join(`\r
`)}${u}\r
\r
`)}async function Nm(t){let{common:e}=t,{output:r}=e,n="Check Docker is running",i=r.start(n);try{let{stdout:o}=await Ee(t,"version","--format","{{.Server.APIVersion}}"),s=o.toString();if(s.toLowerCase().indexOf("cannot connect")!==-1)throw new Error(s);r.write(`Server API version: ${s.trim()}`)}catch(o){console.error(o);let s=o&&(o.stderr?o.stderr.toString():o.message)||"";s&&r.write(we(s));let a="Docker returned an error. Make sure the Docker daemon is running and select an option how to proceed.",c=o&&(o.stderr?o.stderr.toString().toLowerCase():o.message)||"";throw c.indexOf("permission denied")!==-1?c.indexOf("ssh")!==-1?a="Cannot connect to Docker daemon using 'ssh'. Make sure public/private keys are set up for connecting without keyboard interaction.":a="Current user does not have permission to run 'docker'. Try adding the user to the 'docker' group.":c.indexOf("ENOENT")!==-1&&(a="The 'docker' command was not found. Make sure Docker is installed."),new H({description:a,originalError:`Docker returned an error code ${o.code}, message: ${o.message}`})}finally{r.stop(n,i)}}async function nf(t,e,r){try{return await Ss(t,e)}catch(n){if(!r)throw n;try{await Ir(t,"pull",e)}catch(i){throw n.stdout&&t.common.output.write(n.stdout.toString()),n.stderr&&t.common.output.write(we(n.stderr.toString())),n}return Ss(t,e)}}function er(t){return t.hostPath!==void 0}function sn(t){return t.repositoryPath!==void 0}function bc(t){return!sn(t)&&t.volumeName!==void 0}function An(t){let e=jq("dev-container",t);if(!!e)return typeof e=="string"?{hostPath:e}:"repositoryPath"in e?e.dockerHost?{repositoryPath:e.repositoryPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`,cloneInfo:e.cloneInfo}}:e:"hostPath"in e&&e.dockerHost?{hostPath:e.hostPath,settings:{host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`}}:e}function cf(t,e,r){let n=r?JSON.stringify({hostPath:t,settings:r}):t;return`vscode-remote://dev-container+${Buffer.from(n,"utf8").toString("hex")}${e}`}function ks(t,e,r,n,i,o){if(t){let a=Ur(t);if(!e){let u=JSON.stringify({repositoryPath:t,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(u,"utf8").toString("hex")}${a.getOldWorkspacePath(t)}`}let c=JSON.stringify({repositoryPath:t,volumeName:e,folder:r,settings:i,cloneInfo:o,inspectVolume:n});return`vscode-remote://dev-container+${Buffer.from(c,"utf8").toString("hex")}${a.workspaceFolder(r)}`}let s=JSON.stringify({volumeName:e,settings:i});return`vscode-remote://dev-container+${Buffer.from(s,"utf8").toString("hex")}${R_}`}function Lm(t){let e=jq("attached-container",t);if(!!e)return typeof e=="string"?{containerId:e}:(e.dockerHost&&(e.settings={host:`tcp://${e.dockerHost.host}:${e.dockerHost.port}`},delete e.dockerHost),e)}function Uq(t,e,r){let n=JSON.stringify({containerName:t,settings:e,cwd:r});return`attached-container+${Buffer.from(n,"utf8").toString("hex")}`}function jq(t,e){try{let[r,n]=e.split("+"),i=r===t&&n?Buffer.from(n,"hex").toString("utf8"):void 0;return i?i.startsWith("{")?JSON.parse(i):i:void 0}catch(r){console.warn(r);return}}async function L_(t,e,r,n=!1){return!n&&await ch(t,e,r)||e}function Hq(t,e,r){let n=t.path.relative(t.path.dirname(e),r);return`/workspaces/${t.platform==="win32"?n.replace(/\\/g,"/"):n}`}async function wq(t,e,r,n,i,o=!1){if("dockerComposeFile"in r)return{workspaceFolder:h_(r),workspaceMount:void 0};let{workspaceFolder:s,workspaceMount:a}=r;if(e&&(!s||!("workspaceMount"in r))){let c=await L_(t,e.rootFolderPath,n,o);if(!s){let u=t.path.relative(t.path.dirname(c),e.rootFolderPath);s=`/workspaces/${t.platform==="win32"?u.replace(/\\/g,"/"):u}`}if(!("workspaceMount"in r)){let u=`/workspaces/${t.path.basename(c)}`,l=t.platform!=="linux"?`,consistency=${i||"consistent"}`:"",f=c.indexOf(",")!==-1?'"':"",d=u.indexOf(",")!==-1?'"':"";a=`type=bind,${f}source=${c}${f},${d}target=${u}${d}${l}`}}return{workspaceFolder:s,workspaceMount:a}}function Bq(t,e,r){if(t==="win32")return e;let n=`${qre(r,"/")}/`;return(t==="linux"?e.startsWith(n):e.toLowerCase().startsWith(n.toLowerCase()))&&(e=`~/${e.substr(n.length)}`),e}function qre(t,e){if(e.length===0)return t;for(;t.endsWith(e);)t=t.substr(0,t.length-e.length);return t}function eF(t,e){return t.with({path:Po.posix.resolve(t.path,e)})}async function Mre(t,e,r,n,i,o){let s=$re(e,r,n,i,o);return Ir(t,...s)}function $re(t,e,r,n,i){let o=["exec","-it"];if(r&&o.push("-w",r),o.push("-u",e),n)for(let s in n)o.push("-e",`${s}=${n[s]}`);return o.push(t,...i),o}async function vm(t,e,r,n,i){let{common:o,onRemoveOnShutdownChanged:s}=t;if(o.cliMode)return{shutdownArgs:{},doneWithDocuments:Promise.resolve()};let a=o.output.start("Setup shutdown monitor"),c=await Lq(r,o.getLogLevel(),o.extensionPath,o.output,o.logFilePath?Po.dirname(o.logFilePath):void 0,o.sessionStart);km(c,n,o.output).catch(d=>console.error(d)),s&&s(async d=>{n.rebuild=!!d,n.delay=0,await km(c,n,o.output)}),o.onDidChangeLogLevel(async d=>{n.logLevel=d,await km(c,n,o.output)});let u={},l=async()=>{let d=Fq(c);u.hostPortServer&&await(0,Mq.promisify)(u.hostPortServer.close.bind(u.hostPortServer))(),await d};o.shutdowns.push(l);let f=i?JL(t,e,i).catch(console.error):Promise.resolve();return o.output.stop("Setup shutdown monitor",a),{monitor:c,shutdownArgs:u,doneWithDocuments:f}}function _c(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}function Im(t,e){let r="dockerFile"in e?e.context:e.build.context;return r?vo(t,e,r):xs(kt(t,e))}async function Kn(t,e,r,n,i){let{common:o}=t,s="Inspecting container",a=o.output.start(s),c=await Ft(t,e);o.output.stop(s,a);let u=n||c.Config.User||"root",l=u.indexOf(":");l!==-1&&(u=u.substr(0,l)),u==="0"&&(u="root");let f=Ure(c.Config.Env),d=_i(t,e,u),p=await gc(t,e,u,o.loadNativeModule),h=_i(t,e,"root"),g=c.Mounts.find(y=>y.Type==="volume"&&y.Name==="vscode"),v=c.Mounts.find(y=>y.Type==="bind"&&y.Source===o.localCacheFolder),C=g&&Po.posix.join(g.Destination,/^\.*(.*)$/.exec(o.product.serverDataFolderName)[1])||(v==null?void 0:v.Destination);return Rh({params:o,startedAt:c.State.StartedAt,sharedDataFolder:C,sharedDataFolderIsLocalCacheFolder:!g&&!!v,remoteWorkspaceFolder:r,containerUser:u,containerEnv:f,remoteExec:d,remotePtyExec:p,remoteExecAsRoot:h,rootShellServer:i})}function Ure(t){return(t||[]).reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=r.substr(n+1)),e},{})}async function Eq(t,e){if(!e)return;let{common:r,dockerEnv:n}=t,{cliHost:i,output:o}=r,s=i.platform==="win32",a=s?[i.env.ComSpec||"cmd.exe","/c"]:["/bin/sh","-c"],c=s&&Array.isArray(e)&&e.length?[(e[0]||"").replace(/\//g,"\\"),...e.slice(1)]:e,u=typeof c=="string"?[...a,c]:c;!u.length||await gi({ptyExec:i.ptyExec,cmd:u[0],args:u.slice(1),env:n,output:o})}async function Am(t,e,r,n,i){if(!i)return;let o=typeof i=="string"?["/bin/sh","-c",i]:i;!o.length||await Mre(t,e,r,n,void 0,o)}function tf(t){let{cwd:e}="cwd"in t?t:t.cliHost,r=jre(e),n=Po.basename(e);return Qh(`vsc-${n}-${r}`)}function jre(t){return qq.createHash("md5").update(t).digest("hex")}var Qe=k(require("vscode"));var Ds={id:"openDocumentation",title:"Open Documentation",isLastAction:!1,applicable:(t,e)=>!e,execute:async t=>{await Qe.env.openExternal(Qe.Uri.parse("https://aka.ms/vscode-remote/container/resolve-failed"))}},Os={id:"reloadWindow",title:"Reload Window",isLastAction:!0,applicable:(t,e)=>!e&&t.data.reload!==!1,execute:async t=>{t.manageContainer&&t.dockerParams&&t.containerId&&await Ee(t.dockerParams,"stop","-t","0",t.containerId),await Qe.commands.executeCommand("workbench.action.reloadWindow")}},Vq={id:"rebuildContainer",title:"Rebuild Container",isLastAction:!0,applicable:(t,e)=>t.manageContainer&&!!t.dockerParams&&!!t.containerId&&!e,execute:async t=>{await Ee(t.dockerParams,"rm","-f",t.containerId),await Qe.commands.executeCommand("workbench.action.reloadWindow")}},Ic={id:"openRecent",title:"Open Recent...",isLastAction:!0,applicable:(t,e)=>!e,execute:async t=>{await Qe.commands.executeCommand("workbench.action.openRecent")}},Gq={id:"startContainer",title:"Start Container",isLastAction:!0,applicable:t=>!!t.dockerParams&&!!t.containerId&&t.data.start===!0,execute:async t=>{await Ee(t.dockerParams,"start",t.containerId),await Qe.commands.executeCommand("workbench.action.reloadWindow")}},Wq={id:"chooseContainer",title:"Choose Container",isLastAction:!0,applicable:t=>t.data.attach===!0,execute:async()=>{await Qe.commands.executeCommand("remote-containers.attachToRunningContainer")}},Io={id:"closeRemote",title:"Close Remote",isLastAction:!0,applicable:(t,e)=>{if(!e)return!1;let r=Qe.workspace.workspaceFile;return!(r&&r.scheme==="untitled"||Qe.workspace.textDocuments.some(i=>i.isDirty))},execute:async t=>{await Qe.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null})}},Ac=[{id:"retry",title:"Retry",isLastAction:!0,applicable:(t,e)=>e&&t.data.reload!==!1,execute:Os.execute},{id:"moreActions",title:"More Actions...",isCloseAffordance:!0,isLastAction:!1,applicable:(t,e)=>e,execute:async t=>{}},{id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(t,e)=>e&&!!t.data.learnMoreUrl,async execute(t){await Qe.env.openExternal(Qe.Uri.parse(t.data.learnMoreUrl))}}];async function Ao(t,e,r,n=!1,i){let o=t instanceof H?t:new H({description:"An error occurred setting up the container.",originalError:t});if(i){i.show();let d=o.originalError&&(o.originalError.stack||o.originalError.message)||o.originalError;if(d!==void 0){let p=String(d),h=we(p);i.log.write(h)}}if(t.message.indexOf("Cancelled container configuration selection")!==-1)throw await Qe.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),Qe.RemoteAuthorityResolverError.NotAvailable(void 0,!1);let s=o.actions;s.length||(s=[Ds]);let a=await s.reduce(async(d,p)=>await p.applicable(o,!0)?[...await d,p]:d,Promise.resolve([])),c=await Qe.window.showErrorMessage(o.description,{modal:!0},...a);if(c&&(zq(r,e,c.id),await c.execute(o)),c&&c.isLastAction){if(n)throw Qe.RemoteAuthorityResolverError.NotAvailable(void 0,!0);return}let u=await s.reduce(async(d,p)=>await p.applicable(o,!1)?[...await d,p]:d,Promise.resolve([])),l=u.map(d=>({label:d.title,action:d}));async function f(){let p=await(u.length?Qe.window.showQuickPick(l,{ignoreFocusOut:!0,placeHolder:"Pick an action to help resolve the problem."}):Promise.resolve(void 0));p&&(zq(r,e,p.action.id),p.action.execute(o).catch(console.error),p.action.isLastAction||await f())}if(f().catch(console.error),n)throw Qe.RemoteAuthorityResolverError.NotAvailable(void 0,!0)}function zq(t,e,r){t.sendTelemetryEvent("errorAction",{resolver:e,action:r})}var M=k(require("vscode")),wd=k(require("path")),_W=k(require("os"));var xW=k(F3()),Vo=k(EW());var Sme="remote.containers.defaultExtensions",Nu="remote-containers.revealLogTerminal",rP="remote-containers.revealPostCreateTerminal",Ed="remote-containers.openDevContainerFile",bW="remote-containers.openRepositoryInVolume",Cy="remote-containers.openRepositoryInUniqueVolume",SW="remote-containers.openRepositoryFromRemoteHub",PW="remote-containers.openPullRequestInVolume",_d=M.Uri.parse("https://aka.ms/vscode-remote/containers/folder-setup"),xd=M.Uri.parse("https://aka.ms/vscode-dev-containers"),IW=new pE,Dr={onRemoveOnShutdownChangedEmitter:IW,onRemoveOnShutdownChanged:IW.event,results:new Map},vn=t=>rD(t,M.env.appRoot);function wy(t,e,r,n){return async(i,o)=>{if(M.commands.executeCommand("setContext","forwardedPortsViewEnabled",!0),o.resolveAttempt>1){let s=r.get(i);if(!s)throw new Error("Reconnect attempt without old result.");if(s.dockerContainerId){let a=await Jn(s.dockerParams,s.dockerContainerId);if(!a)throw M.RemoteAuthorityResolverError.NotAvailable("Container no longer exists.");if(a.State.Status==="paused")throw M.RemoteAuthorityResolverError.TemporarilyNotAvailable("Container is paused.");if(a.State.Status!=="running")throw M.RemoteAuthorityResolverError.NotAvailable("Container is no longer running.")}return j(A({connectionToken:void 0},s.resolvedAuthority),{isTrusted:s.isTrusted})}else{let s="Resolving Remote",a=t.log.start(s),c=await n(i,t,e);return Pme(c.params,c.properties).catch(u=>{}),r.set(i,c),t.log.stop(s,a),M.window.withProgress({location:M.ProgressLocation.Window,title:Bme,cancellable:!1},async u=>{await sL(c.params.backgroundTasks)}).then(void 0,u=>{t.show(),t.log.write(we(String(u&&(u.stack||u.message)||u)))}),j(A(A({connectionToken:void 0},c.resolvedAuthority),c.tunnelInformation),{isTrusted:c.isTrusted})}}}async function Pme(t,e){if(!e.nodeExecutable)return;let r=await Ce(wd.join(t.extensionPath,"dist","node","remoteCloudGuesser.js"),{encoding:"utf8"}),{stdout:n}=await yi(t,e,[e.nodeExecutable,"-e",r],void 0,{silent:!0}),i=n.toString().trim();t.sendTelemetryEvent("extraInfo",{remoteCloud:i})}var nP;async function Ime(){return nP||(nP=zn(wd.join(__dirname,"..",".."),Vi)),nP}var bd={};async function Vi(t,e=!0){var r;if(t.counter&&((r=bd[t.prompt])==null?void 0:r.from)===t.counter&&delete bd[t.prompt],!bd[t.prompt]){if(!e)return"";bd[t.prompt]={result:Promise.resolve(M.window.showInputBox({prompt:t.prompt||"Enter password",password:!0,ignoreFocusOut:!0}).then(n=>n||"")),from:t.counter}}return bd[t.prompt].result}async function Oe(t,e,r=!0,n=Ime()){e&&typeof e!="string"&&"scheme"in e&&(e.scheme==="file"?e=e.fsPath:e=bl(e));let i;if(!e){let c=(M.workspace.workspaceFolders||[])[0];if(c){if(M.env.remoteName==="wsl")e=bl(c.uri);else if(M.env.remoteName==="ssh-remote"){let u=Ame(c.uri.authority);if(u){let{user:l,hostName:f,port:d}=u;i={host:`ssh://${l?`${l}@`:""}${f}${d?`:${d}`:""}`}}}}e||(e=process.cwd())}let o=await Jr(e,vn,t,r),s=Go(),a=Lu();if(!i){let c=M.workspace.getConfiguration("docker"),u=c.get("context")||o.env.DOCKER_CONTEXT;u||(u=await KE({cliHost:o,dockerCLI:s,dockerComposeCLI:a,env:{},output:Ye})||"default"),u&&u!=="default"?i={context:u}:(i=Qn(o.env)||{},"context"in i||(iP(i,c,"host"),iP(i,c,"certPath"),iP(i,c,"tlsVerify"),Object.keys(i).length||(i=void 0)))}return{cliHost:o,dockerCLI:s,dockerComposeCLI:a,env:A(A({},await n),Pc(o,i)),output:t}}function Ame(t){let e=/^ssh-remote\+(.*)$/.exec(t);if(!e)return;let r=e[1];try{let n=JSON.parse(Buffer.from(r,"hex").toString("utf8"));if(n&&n.hostName)return n}catch(n){}return{hostName:r}}function iP(t,e,r){let n=e.get(r);n&&(t[r]=n)}var Rme=["remote.containers.dockerPath","docker.context","docker.host","docker.certPath","docker.tlsVerify"];function AW(){let t=new M.EventEmitter,e=M.workspace.onDidChangeConfiguration(async a=>{Rme.some(c=>a.affectsConfiguration(c))&&t.fire()}),r,n,i,o=()=>{(async()=>{n||(n=await Jr(process.cwd(),vn,Ye));let a={cliHost:n,dockerCLI:Go(),dockerComposeCLI:Lu(),env:{},output:Ye},c=await KE(a);c===void 0?i=setTimeout(o,2*60*1e3):(c!==r&&(r!==void 0&&t.fire(),r=c),i=setTimeout(o,2*1e3))})().catch(console.error)};o();let s=t.dispose;return t.dispose=()=>{e.dispose(),i&&clearTimeout(i),s.call(t)},t}async function ga(){let t=M.workspace.workspaceFolders;if((t==null?void 0:t.length)===1){let e=t[0].uri;return oP(e)}return null}async function oP(t){if(t&&t.scheme==="vscode-remote"&&/dev-container\+(.*)/.exec(t.authority)){let r=An(t.authority);if(er(r))return null;if(sn(r)&&r.inspectVolume&&r.inspectVolume===!0)return r}return null}function Ey(t){return{getConfigurationState:()=>t.get("configurationState"),updateConfigurationState:async e=>t.update("configurationState",e),containerOutdated:Tme}}async function Tme(t){let e="Rebuild",r="Ignore",n=await M.window.showInformationMessage(`Configuration file(s) changed: ${t.join(", ")}. The container might need to be rebuilt to apply the changes.`,e,r);if(n===e)return M.commands.executeCommand("remote-containers.rebuildContainer");if(n===r)return"ignore"}async function kme(t,e){return t?RW():Array.from(new Set([...e,...M.workspace.getConfiguration().get(Sme)||[],...RW()]))}function RW(){let t=M.env.language,e=t.indexOf("-"),r=TW(t)||(e!==-1?TW(t.substr(0,e)):void 0);return r?[r]:[]}function TW(t){let e=t.toLowerCase();return M.extensions.all.filter(r=>{var i;let n=r.packageJSON&&r.packageJSON.contributes;return((i=n==null?void 0:n.localizations)==null?void 0:i.length)?!!n.localizations.find(o=>{var s;return((s=o==null?void 0:o.languageId)==null?void 0:s.toLowerCase())===e}):!1}).map(r=>r.id)[0]}function Dme(){return!!M.workspace.getConfiguration().get("telemetry.enableTelemetry")}function kW(){return!!M.workspace.getConfiguration().get("workbench.enableExperiments")}function Ome(){return!!M.workspace.getConfiguration().get("remote.containers.enableWebAccess")}function _y(){return M.workspace.getConfiguration().get("remote.containers.workspaceMountConsistency")||"cached"}function xy(){var t;return(t=M.workspace.getConfiguration().get("remote.containers.cacheVolume"))!=null?t:!0}function Nme(){let t=M.workspace.getConfiguration().get("remote.containers.copyGitConfig");return typeof t=="boolean"?t:!0}function Lme(){return M.workspace.getConfiguration().get("remote.containers.gitCredentialHelperConfigLocation")||"global"}function Go(){return M.workspace.getConfiguration().get("remote.containers.dockerPath")||"docker"}function Lu(){return M.workspace.getConfiguration().get("remote.containers.dockerComposePath")||"docker-compose"}function sP(){let t=M.workspace.getConfiguration().get("remote.containers.logLevel")||"debug";return yI(t)}var Fme=t=>M.workspace.onDidChangeConfiguration(e=>{e.affectsConfiguration("remote.containers.logLevel")&&t(sP())});function qme(){let t=M.workspace.getConfiguration();return{repository:(t.get("remote.containers.dotfiles.repository","")||t.get("dotfiles.repository","")).trim()||void 0,installCommand:(t.get("remote.containers.dotfiles.installCommand","")||t.get("dotfiles.installCommand","")).trim()||void 0,targetPath:(t.get("remote.containers.dotfiles.targetPath","")||t.get("dotfiles.targetPath","")).trim()||"~/dotfiles"}}function Gi(t,e,r,n,i,o){let s={resolver:e,outcome:r};n&&(s.configProperties=JSON.stringify(Object.keys(n)),s.configExtensions=JSON.stringify(n.extensions||[])),i&&(s.hardwareId=i.osRelease.hardware,s.osReleaseId=i.osRelease.id,s.osReleaseVersion=i.osRelease.version);let a=o&&o.originalError,c=a&&(a.stack||a.message||String(a))||o&&o.description;c&&(s.errorMessage=c),t.sendTelemetryEvent("resolver",s)}var DW=class{constructor(e){this.onClose=e;this.writeEmitter=new M.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.inputEmitter=new M.EventEmitter;this.onDidInput=this.inputEmitter.event;this.queue=[];this.ready=!1}open(){this.ready=!0,this.queue.forEach(e=>this.writeEmitter.fire(e))}close(){this.ready=!1,this.onClose()}write(e){this.queue.push(e),this.ready&&this.writeEmitter.fire(e)}handleInput(e){this.inputEmitter.fire(e)}},by=class{constructor(e,r,n=void 0){this.sessionStart=r;this.outputTerminal=new DW(()=>this._terminal=void 0);this.onDidInput=this.outputTerminal.onDidInput;this._name="Dev Containers";this._revealOnNextOutput=!1;let i=o=>{this.outputTerminal.write(o),this.revealOnNextOutput&&(this.revealOnNextOutput=!1,this.show())};this.logFilePath=e?wd.join(e,`remoteContainers-${r.toISOString().replace(/:/g,"-")}.log`):void 0,this.log=Mme(i,sP,this.logFilePath,r,n),Object.defineProperty(this.log,"dimensions",{get:()=>{var o;return(o=this._terminal)==null?void 0:o.dimensions}}),this.log.onDidChangeDimensions=o=>M.window.onDidChangeTerminalDimensions(s=>{s.terminal===this._terminal&&o(s.dimensions)})}get name(){return this._name}set name(e){this._name=e}get revealOnNextOutput(){return this._revealOnNextOutput}set revealOnNextOutput(e){this._revealOnNextOutput=e}show(){this._terminal||(this._terminal=M.window.createTerminal({name:this.name,pty:this.outputTerminal})),this._terminal.show()}dispose(){this._terminal&&this._terminal.dispose()}get shown(){return!!this._terminal}};function Mme(t,e,r,n,i=void 0){let o=[];return r&&o.push(EI(r,()=>Math.min(ne.Debug,e()))),o.push(_I(t,e,n)),yt(wI(o,i))}async function aP(t,e){let r=await Jn(t,e.Id);if(r&&r.State.Status==="running")try{await Ee(t,"stop",r.Id)}catch(n){M.window.showErrorMessage(`Error stopping container: ${n.message}`)}}async function Sy(t,e){let r=await Jn(t,e.Id);if(r&&r.State.Status!=="running")try{await Ee(t,"start",r.Id)}catch(n){M.window.showErrorMessage(`Error starting container: ${n.message}`)}}async function OW(t,e){try{await Ee(t,"rm",e)}catch(r){M.window.showErrorMessage(`Error removing container: ${r.message}`)}}async function cP(t,e){try{await Ee(t,"volume","rm","--force",e)}catch(r){M.window.showErrorMessage(`Error removing volume: ${r.message}`)}}function $me(){return M.env.sessionId!=="someValue.sessionId"?M.env.sessionId:`${M.env.sessionId}_${Date.now()}`}function Ume(t,e){let r=M.workspace.registerResourceLabelFormatter({scheme:"vscode-remote",authority:t.authority,formatting:{label:"${path}",separator:"/",workspaceSuffix:e,tildify:!0}});t.shutdowns.push(r.dispose.bind(r))}async function NW(t,e){return t.globalState.get("removeOnStartup")===e?(await t.globalState.update("removeOnStartup",null),!0):t.workspaceState.get("removeOnStartup",!1)}async function LW(t,e){await t.workspaceState.update("removeOnStartup",e)}async function uP(t,e){await t.globalState.update("removeOnStartup",e)}async function FW(t,e){return t.globalState.get("buildNoCache")===e?(await t.globalState.update("buildNoCache",null),!0):!1}async function Sd(t,e){await t.globalState.update("buildNoCache",e)}async function Py(t,e,r,n,i){await t.globalState.update("openEditorsOnStartup",{workspaceFolder:e,fileWithError:r==null?void 0:r.toString(),logFile:n,openLog:i})}async function qW(t){var r;let e=t.globalState.get("openEditorsOnStartup");if(e){await t.globalState.update("openEditorsOnStartup",void 0);let n=(r=M.workspace.workspaceFolders)==null?void 0:r.some(o=>o.uri.fsPath===e.workspaceFolder||o.uri.path===e.workspaceFolder),i=await ga();if(n||i&&i.repositoryPath===e.workspaceFolder&&(n=!0),n){let o=e.fileWithError?pe.parse(e.fileWithError):void 0;if(e.openLog==="onTheSide"&&await $W(o),e.openLog&&e.logFile){let s={viewColumn:e.openLog==="onTheSide"?M.ViewColumn.Beside:M.ViewColumn.One,preserveFocus:!0},a=await M.window.showTextDocument(M.Uri.file(e.logFile),s),c=new M.Position(a.document.lineCount-1,0);a.selection=new M.Selection(c,c),a.revealRange(a.selection)}return e.openLog!=="onTheSide"&&await $W(o),!0}}return!1}function MW(t){return[`vscode-remote:/workspaces/${t}/.devcontainer/devcontainer.json`,`vscode-remote:/workspaces/${t}/.devcontainer.json`]}async function $W(t){return t?M.commands.executeCommand("vscode.open",M.Uri.parse(t.toString()),{viewColumn:M.ViewColumn.One}):M.commands.executeCommand("remote-containers.openDevContainerFile",void 0,{viewColumn:M.ViewColumn.One})}async function lP(t){if(Dr.results.size)return[...Dr.results.values()].filter(o=>o.config).map(o=>o.config.configFilePath);let e=oi(),r=M.workspace.workspaceFolders||[],n=await Promise.all(r.map(async o=>{let s=be(t.path,ce(o.uri,t.platform));return await In(t,s,e)})),i=M.workspace.workspaceFile;if(i&&i.scheme!=="untitled"){let o=be(t.path,ce(i,t.platform)),s=await In(t,o,e);s&&n.indexOf(s)===-1&&n.unshift(s)}return n.filter(o=>!!o)}function oi(){return M.workspace.getConfiguration().get("remote.containers.repositoryConfigurationPaths")||[]}async function jme(t,e){await M.workspace.openTunnel({remoteAddress:{host:"localhost",port:e}})}var UW=!1;function Hme(t,e){if(t.type==="socatNotFound"){let r="socatNotFound_doNotShow";!UW&&!e.globalState.get(r)&&(UW=!0,(async()=>{let n="Don't Show Again";await M.window.showWarningMessage("Cannot connect to WSL socket: 'socat' not installed in WSL distro.",n,"OK")===n&&await e.globalState.update(r,!0)})().catch(console.error))}}function jW(t,e){let r=new by(void 0,e);r.name="Configuring...",r.revealOnNextOutput=!0;let n=!1;r.onDidInput(()=>{n&&(n=!1,r.dispose())});let i={enabled:!0,skipNonBlocking:!1,output:nD(r.log,t),onDidInput:r.onDidInput,done:()=>{r.shown&&(r.log.raw("[1mDone. Press any key to close the terminal.[0m"),n=!0)}};return{channel:r,postCreate:i}}async function Fu(t){let{authority:e,extensionContext:r,sessionStart:n,progress:i,cliHost:o,env:s,cwd:a,isLocalContainer:c,telemetry:u,output:l,logFilePath:f,allowSystemConfigChange:d,postCreate:p}=t,h=Ome(),g=j(A({computeExtensionHostEnv:!0},u),{appRoot:M.env.appRoot,localCacheFolder:wd.join(_W.tmpdir(),"vsch"),extensionPath:r.extensionPath,connectionToken:h?KN:void 0,sessionId:$me(),sessionStart:n,authority:e,cliHost:o,env:s,cwd:a,isLocalContainer:c,getExtensionsToInstall:kme,isCopyGitConfigEnabled:Nme(),credentialHelperConfigLocation:Lme(),dotfilesConfiguration:qme(),progress:Gme(i),output:l,logFilePath:f,allowSystemConfigChange:d,defaultUserEnvProbe:"loginInteractiveShell",postCreate:p,telemetry:Dme(),forwardServerPort:!0,web:h,getLogLevel:sP,onDidChangeLogLevel:Fme,loadNativeModule:vn,shutdowns:[],forwardedPorts:new Set,backgroundTasks:[],setWorkspaceName:v=>Ume(g,v),openTunnel:jme,getTunnels:()=>Promise.resolve(M.workspace.tunnels),fireEvent:v=>Hme(v,r),onAdoptProcess:M.window.onDidOpenTerminal});return g}var qu=`[Starting Dev Container (show log)](command:${Nu} "Show details in terminal")`,Bme=`[Configuring Dev Container](command:${rP} "Show details in terminal")`,Vme={[ft.Begin]:"",[ft.CloningRepository]:"Cloning Repository",[ft.BuildingImage]:"Building image",[ft.StartingContainer]:"Starting container",[ft.InstallingServer]:"Installing server",[ft.StartingServer]:"Starting server",[ft.End]:""};function Gme(t){let e=0;return r=>{let n=ft.End-r,i=(100-e)/(n+1);t.report({message:Vme[r],increment:i}),e+=i}}async function HW(t,e,r){let{name:n,publisher:i,version:o,aiKey:s}=e;if(!s)return mI(e,r);let a=i?`${i}.${n}`:n,c=new xW.default(a,o,s);t.subscriptions.push(c);let u=new BW(c),l=Wme(r),f=kW()?(0,Vo.getExperimentationService)(a,o,l,u,t.globalState):void 0;return{sendTelemetryEvent:u.sendTelemetryEvent.bind(u),isCachedFlightEnabled:async d=>f&&kW()?f.isCachedFlightEnabled(d):!1,product:r,package:e}}var BW=class{constructor(e){this.baseReporter=e;this.sharedProperties={}}sendTelemetryEvent(e,r,n){this.baseReporter.sendTelemetryEvent(e,A(A({},this.sharedProperties),r),n)}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){let n={};for(let[i,o]of r)n[i]=o;this.sendTelemetryEvent(e,n)}};function Wme(t){switch(t.quality){case"stable":return Vo.TargetPopulation.Public;case"insider":return Vo.TargetPopulation.Insiders;case"exploration":return Vo.TargetPopulation.Internal;case void 0:return Vo.TargetPopulation.Team;default:return Vo.TargetPopulation.Public}}var Pd="Opening a folder in a Dev Container may execute arbitrary code both inside and outside the container.",fP="userConfirmedCloneRepositoryInDevContainerRequiresTrust";async function Id(t,e){if((e==null?void 0:e.toLowerCase().startsWith("https://github.com/microsoft/vscode-remote-try-"))||t.globalState.get(fP))return!0;let r="Got It",n="Learn More",i=await M.window.showWarningMessage("Cloning a repository in a Dev Container may execute arbitrary code. ",{modal:!0,detail:"Only clone a repository in a Dev Container if you trust its authors."},r,n);return i===r?(await t.globalState.update(fP,!0),!0):(i===n&&M.env.openExternal(M.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}var dP="userConfirmedAttachToContainerRequiresTrust";async function Wo(t){if(t.globalState.get(dP))return!0;let e="Got It",r="Learn More",n=await M.window.showWarningMessage("Attaching to a container may execute arbitrary code. Only attach to a container if you trust its origin.",{modal:!0},e,r);return n===e?(await t.globalState.update(dP,!0),!0):(n===r&&M.env.openExternal(M.Uri.parse("https://aka.ms/vscode-remote-containers-trust")),!1)}function VW(t){t.globalState.setKeysForSync([fP,dP])}var Ke=k(require("vscode")),ye=k(require("path")),e9=k(require("fs"));var t9=k($6());var r9=k(require("util"));var U6=k(require("path"));var zve=["png","md","json","txt","map"],Kve=["node_modules",".git","bin","out","dist",".vscode-test"],Yve=[{tag:"function.json",pattern:/^function\.json$/i},{tag:"package.json",pattern:/^package\.json$/i},{tag:"sln",pattern:/^.+\.sln$/i},{tag:"project.json",pattern:/^project\.json$/i},{tag:"csproj",pattern:/^.+\.csproj$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"amlignore",pattern:/^.+\.amlignore$/i},{tag:"azureml",pattern:/^.+\.azureml$/i},{tag:"environment.yml",pattern:/^environment\.yml$/i},{tag:"_config.yml",pattern:/^_config\.yml$/i},{tag:"_config.toml",pattern:/^_config\.toml$/i},{tag:"server.xml",pattern:/^server\.xml$/i},{tag:"web.xml",pattern:/^web\.xml$/i}],j6={"Node.js":["package.json"],".NET Core":["sln","project.json","csproj"],"Azure Functions":["function.json"],"Azure Machine Learning":["azureml","amlignore"],Anaconda:["environment.yml"],Jekyll:["_config.yml","_config.toml"],Tomcat:["server.xml","web.xml"],Dapr:[]},H6={"C#":["cs"],"C++":["cpp","cxx",".cc","c++"],"F#":["fs"],JavaScript:["js"],TypeScript:["ts"],Java:["java"],Elm:["elm"],Go:["go"],Python:["py","ipynb"],Ruby:["rb"],Perl:["pl"],PHP:["php"],R:["r"],PowerShell:["ps1"],Dart:["dart"],Rust:["rs"],Swift:["swift"],ReasonML:["re"],TerraForm:["tf"]},Xve=["docker-existing-docker-compose","docker-existing-dockerfile","codespaces-linux"];async function LP(t,e){for(let r of e)if(r.metaData){if(Xve.indexOf(U6.basename(r.definitionFolder))>-1)continue;let n=0,i=0,o=r.metaData.get("languagesPlatforms");if(o){let s=o.split(",").map(a=>a.trim());if(s[0]==="Any")n+=5;else for(let a of s)if(H6[a]){let c=H6[a];for(let u of c)t.fileTypes.get(u.toLowerCase())&&(n+=10),t.mostPopularFileType===u&&(n+=10)}else if(j6[a]){let c=j6[a],u=!1;for(let l of c)t.configFiles.get(l)&&(u=!0,i+=20);u||(i-=20)}}r.recommendationScore=n+(i<0?-4:i)}}async function B6(t,e){return Qve(t,e.rootFolderPath,Kve,zve)}async function Qve(t,e,r,n){let i=new Map,o=new Map,s=500;function a(p,h,g,v){let C=[];(t.readDirWithTypes||t.readDir)(p).then(E=>{if(g.count>=s)return g.count+=E.length,g.maxReached=!0,v(C);let w=E.length;if(w===0)return v(C);let x=E;g.count+E.length>s&&(g.maxReached=!0,w=s-g.count,x=E.slice(0,w)),g.count+=E.length;for(let _ of x){let S=Array.isArray(_)?_[0]:_;(Array.isArray(_)?Promise.resolve((_[1]&Hh.File)!=0):t.isFile(t.path.join(p,S))).then(R=>{R?(C.push(S),--w==0&&v(C)):h.indexOf(S)===-1?a(t.path.join(p,S),h,g,T=>{if(C=C.concat(T),--w==0)return v(C)}):--w==0&&v(C)},()=>{if(--w==0)return v(C)})}},()=>v(C))}let c=p=>{i.has(p)?i.set(p,i.get(p)+1):i.set(p,1)},u=p=>{for(let h of Yve)h.pattern.test(p)&&(o.has(h.tag)?o.set(h.tag,o.get(h.tag)+1):o.set(h.tag,1))},l=p=>{if(p.lastIndexOf(".")>=0){let h=p.split(".").pop();h&&!n.includes(h)&&c(h.toLowerCase())}u(p)},f=p=>[...p.entries()].reduce((h,g)=>g[1]>h[1]?g:h,["",0])[0],d={count:0,maxReached:!1};return new Promise((p,h)=>{a(e,r,d,async g=>{g.forEach(l),p({configFiles:o,fileTypes:i,fileCount:d.count,mostPopularFileType:f(i)})})})}var V6=k(require("path"));var Hu=k(require("vscode"));async function jy(){await Hu.window.showInformationMessage("You need to first save your workspace in a folder containing all its workspace folders.",{modal:!0})}var Hy=class{async readDocument(e){try{let r=await Hu.workspace.fs.readFile(e);return Buffer.from(r).toString()}catch(r){return}}async applyEdits(e,r,n){let i=Yt(n,r);await Hu.workspace.fs.writeFile(e,Buffer.from(i))}};var Pt=k(require("vscode"));function G6(){return{provideCompletionItems(t,e,r){let n=$T(t.getText(),t.offsetAt(e)),i=t.getWordRangeAtPosition(e)||new Pt.Range(e,e);if(n.path[0]==="extensions"){let o=Be(t.getText());return Jve(o,i)}return[]}}}function Jve(t,e){let r=t&&t.extensions||[];if(Array.isArray(r)){let n=Pt.extensions.all.filter(i=>!(i.id.startsWith("vscode.")||i.id==="Microsoft.vscode-markdown"||r.indexOf(i.id)>-1));if(n.length)return n.map(i=>{let o=new Pt.CompletionItem(i.id),s=`"${i.id}"`;return o.kind=Pt.CompletionItemKind.Value,o.insertText=s,o.range=e,o.filterText=s,o})}}async function W6(t){let e=await FP(t);if((e==null?void 0:e.scheme)===fr.scheme){let r=ce(e,t.fileHost.platform);e=await t.fileHost.toCommonURI(r)}e&&await Pt.window.showTextDocument(Pt.Uri.parse(e.toString()))}async function FP(t){let e=await t.findDevContainerFiles();if(!e.length){let n="Add Files...";await Pt.window.showInformationMessage("No container configuration file found.",{modal:!0},n)===n&&await qP(t)&&(e=await t.findDevContainerFiles())}if(!e.length)return;let r;return e.length===1?r={uri:e[0]}:r=await Pt.window.showQuickPick(e.map(n=>({label:n.scheme==="file"?n.fsPath:n.toString(),uri:n})),{placeHolder:"Select a container configuration file"}),r==null?void 0:r.uri}async function z6(t,e){let r=await FP(t);if(r){let n=wt(t.fileHost);r.scheme==="file"&&!await vt(r.fsPath)?await tn(Sn,r,[],wi):r.scheme==="vscode-remote"&&(n=new Hy);let i=await n.readDocument(r);if(i){let s=Be(i).extensions||[],a=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(s.indexOf(e)===-1){s.push(e);let c=Lt(i,["extensions"],s,{formattingOptions:{}});await n.applyEdits(r,c,i),await Pt.window.showInformationMessage(`Extension has been added to the ${a}.`)}else await Pt.window.showInformationMessage(`Extension is already included in the ${a}.`)}}}async function K6(t,e){var s,a;let r=await Pt.commands.executeCommand("remote.tunnel.label",e);if(r===void 0)return;let n=r.label,i=r.port,o=await FP(t);if(o){let c=wt(t.fileHost);o.scheme==="file"&&!await vt(o.fsPath)?await tn(Sn,o,[],wi):o.scheme==="vscode-remote"&&(c=new Hy);let u=await c.readDocument(o);if(u){let f=(s=Be(u).portsAttributes)!=null?s:{},d=(a=f[`${i}`])!=null?a:{},p=t.openConfigurationCommandId?`[Dev Container configuration](command:${t.openConfigurationCommandId})`:"Dev Container configuration";if(f&&d&&d.label===n)await Pt.window.showInformationMessage(`Port attributes are already included in the ${p}.`);else{d.label=n,f[`${i}`]=d;let h=Lt(u,["portsAttributes"],f,{formattingOptions:{}});await c.applyEdits(o,h,u),await Pt.window.showInformationMessage(`Port attributes have been added to the ${p}.`)}}}}var zo=k(require("vscode")),Dd=k(require("path"));async function Y6(t,e){var i;let{fileHost:r}=t,n=await HP();if(n){let o=ce(n,r.platform),s=be(r.path,o),a=await BP(r,s);if(a){let c=j(A({},a.object),{configFilePath:a.uri});if("image"in c)return{workspace:s,config:a,imageName:c.image};if(Xe(c)){let u=((i=c.build)==null?void 0:i.args)||{},l=kt(r,c),f=await MP(r,l,u);if(f)return A({workspace:s,config:a},f)}if("dockerComposeFile"in c){let u=await $r(r,c),l=await e.readDockerComposeConfig(u,void 0),f=await X6(r,u,o,a.uri,c,l);if(f)return A({workspace:s,config:a},f)}}}}async function X6(t,e,r,n,i,o){var u;let s=((o==null?void 0:o.services)||{})[i.service]||{},a=Zve(t,e,r,s),c=a?await MP(t,pc(t,n,a),((u=s.build)==null?void 0:u.args)||{}):void 0;if(c)return c;if(typeof s.image=="string")return{imageName:s.image,manifest:await By(s.image)}}function Zve(t,e,r,n){let i=e.length?t.path.dirname(e[0]):r,o=n.build;if(typeof o=="string")return t.path.resolve(i,o,"Dockerfile");if(o&&typeof o=="object"&&typeof o.context=="string"){let s=typeof o.dockerfile=="string"?o.dockerfile:"Dockerfile";return t.path.resolve(i,o.context,s)}}async function MP(t,e,r){let i=await wt(t).readDocument(e);if(i){let o=(/^\s*FROM\s+(\S+)(\s|$)/m.exec(i)||[])[1]||void 0;if(o){let s=o.replace(/\$\{([^\}]+)\}/,(a,c)=>r[c]||a);return{imageName:s,manifest:await By(s)}}}}async function Q6(t,e,r){let{fileHost:n}=t,{workspace:i,config:o}=e,s=Dd.join(await Bu(),".."),a=zo.window.createQuickPick();a.ignoreFocusOut=!0;let c={fileHost:n,workspace:i,quickPick:a,extensionPath:s,telemetry:await t.telemetry,output:t.output},l=(await fm(c,o.object,async()=>{var d,p;return A({"com.visualstudio.code.devcontainers.id":(d=e.manifest)==null?void 0:d.definitionName,version:(p=e.manifest)==null?void 0:p.definitionVersion},r)})).features.filter(d=>d.included),f=await UP(c,l,l.filter(d=>d.value!==d.default));try{if(f){let d=o.text;for(let p of l){let h=f[p.id];if(h!==p.value){let g=Lt(d,["features",p.id],h!==p.default?h:void 0,{formattingOptions:{}});d=Yt(d,g)}}await wt(n).applyEdits(o.uri,[{content:d,offset:0,length:o.text.length}],o.text)}}finally{a.dispose()}}async function $P(t,e,r,n){var f;if(!jP())return e;let{fileHost:i}=t,o;if("image"in r)o=await By(r.image);else if(Xe(r)){let d=((f=r.build)==null?void 0:f.args)||{},p=kt(i,r),h=await MP(i,p,d);o=h==null?void 0:h.manifest}else if("dockerComposeFile"in r){let d=await $r(i,r);if(d.length&&await i.isFile(d[0])){let p=await i.readFile(d[0]),h=bn(p.toString()),g=await X6(i,d,t.workspace.rootFolderPath,r.configFilePath,r,h);o=g==null?void 0:g.manifest}o=o||await VP(Dd.basename(e.definitionFolder))}let s=Dd.join(await Bu(),".."),c=(await fm(j(A({},t),{extensionPath:s}),r,async()=>({"com.visualstudio.code.devcontainers.id":o==null?void 0:o.definitionName,version:o==null?void 0:o.definitionVersion}))).features.filter(d=>d.included),u=await UP(t,c,c.filter(d=>d.value!==d.default),!0);if(!u)return;if(u==="back")return n();let l=e.configText;for(let d of c){let p=u[d.id];if(p!==d.value){let h=Lt(l,["features",d.id],p!==d.default?p:void 0,{formattingOptions:{}});l=Yt(l,h)}}return j(A({},e),{configText:l})}async function UP(t,e,r,n=!1){let i=await Wi(t.quickPick,e.map(s=>({label:s.name,picked:r.indexOf(s)!==-1,feature:s})).sort((s,a)=>s.label.localeCompare(a.label)),"Select the features for the dev container",void 0,!0,n);if(!i)return;if(i==="back")return"back";let o=i.map(s=>s.feature);return eye(t,e,o,()=>UP(t,e,o))}async function eye(t,e,r,n){let i={};for(let s of e.filter(a=>a.type==="option"))i[s.id]=r.indexOf(s)!==-1;let o=r.filter(s=>s.type==="choice");return async function s(a,c,u){if(!c.length)return a;let l=c[0],f=(l.values||[]).map(p=>({label:String(p),picked:l.value===p})),d=await Wi(t.quickPick,f,"Select...",void 0,void 0,!0);if(!!d)return d==="back"?u():s(j(A({},a),{[l.id]:d.label}),c.slice(1),()=>s(a,c,u))}(i,o,n)}var J6="remote.containers.experimentalContainerFeatures";function Z6(){return zo.commands.executeCommand("setContext","experimentalContainerFeatures",jP()),zo.workspace.onDidChangeConfiguration(t=>{t.affectsConfiguration(J6)&&zo.commands.executeCommand("setContext","experimentalContainerFeatures",jP())})}function jP(){return zo.workspace.getConfiguration().get(J6,!1)}async function n9(t,e){return{async openConfiguration(){return W6(e)},async createConfiguration(){return qP(e)},async addExtensionToConfiguration(r){return z6(e,r)},async addPortLabelToConfiguration(r){return K6(e,r)},createCompletionItemProvider(){return G6()}}}async function qP(t){let{fileHost:e}=t,r=await HP();if(r){let n=ce(r,e.platform),i=be(e.path,n),o=await th(e,i);if(o){let a="Continue";if(await Ke.window.showInformationMessage(`The workspace could fail to open in a container: ${o}`,{modal:!0},a)!==a)return!1}let s=await Od(t,i);if(s){let a=await e.toCommonURI(s);return a&&Ke.window.showTextDocument(Ke.Uri.parse(a.toString())),!0}}return!1}async function HP(){let t=Ke.workspace.workspaceFile,e=Ke.workspace.workspaceFolders,r;if(t){if(t.scheme==="untitled"){await jy();return}r=t}else if(e&&e.length)if(e.length>1){let n=await Ke.window.showWorkspaceFolderPick({placeHolder:"Select a folder to create a container configuration for"});n&&(r=n.uri)}else r=e[0].uri;return r}function Wi(t,e,r,n,i,o){if(t.value="",t.title=n||"Add Development Container Configuration Files",t.placeholder=r,t.canSelectMany=!!i,Array.isArray(e))if(t.items=e,i)t.selectedItems=e.filter(c=>c.picked);else{let c=e.find(u=>u.picked);c&&(t.activeItems=[c])}t.buttons=o?[Ke.QuickInputButtons.Back]:[];let s=[],a=new Promise((c,u)=>{Array.isArray(e)||(t.busy=!0,e.then(l=>{if(t.busy=!1,t.items=l,i)t.selectedItems=l.filter(f=>f.picked);else{let f=l.find(d=>d.picked);f&&(t.activeItems=[f])}},l=>{t.busy=!1,u(l)})),s.push(t.onDidAccept(()=>{c(i?t.selectedItems.slice():t.selectedItems[0]),s.forEach(l=>l.dispose())})),o&&s.push(t.onDidTriggerButton(l=>{l===Ke.QuickInputButtons.Back&&(c("back"),s.forEach(f=>f.dispose()))})),s.push(t.onDidHide(()=>{s.forEach(l=>l.dispose()),t.dispose(),c(void 0)}))});return t.show(),a}var GP={label:"Learn More",description:"Documentation on predefined container definitions",alwaysShow:!0,type:"help"};async function Od(t,e){let{fileHost:r,telemetry:n}=t,i=await n,o=await BP(r,e),a=!!hc(o==null?void 0:o.object)&&!!o;if(a){Vr(i,"exists");let u=ce(o.uri,r.platform);if(!await Ke.window.showWarningMessage(`Dev Container configuration '${r.path.relative(e.configFolderPath,u)}' file already exists.`,{modal:!0},"Continue")){let f=await r.toCommonURI(u);f&&Ke.window.showTextDocument(Ke.Uri.parse(f.toString()));return}}let c=Ke.window.createQuickPick();return c.ignoreFocusOut=!0,WP(j(A({},t),{quickPick:c,replaceExistingConfig:a,existingConfig:o,telemetry:i,workspace:e,codespaces:!!t.codespaces}))}async function WP(t){let{fileHost:e,workspace:r,telemetry:n,existingFilesLearnMoreLink:i}=t,o=await e.readDir(r.rootFolderPath),s=o.filter(p=>/docker.*compose/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),a=o.filter(p=>/dockerfile/i.test(p)).map(p=>e.path.join(r.rootFolderPath,p)),c=a.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:c9(e,p),dockerfile:h,dockerfilePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerfile"}}),u=s.map(p=>{let h=e.path.basename(p);return{label:`From '${h}'`,description:c9(e,p),dockerComposeFile:h,dockerComposePath:p,detail:`Refer to the existing '${h}' in the container configuration`,type:"dockerComposeFile"}});if(!(a.length>0||s.length>0))return Vy(t,void 0);let f={label:"From a predefined container configuration definition...",detail:"Use a base configuration from the container definition registry",alwaysShow:!0,type:"predefined"},d=await Wi(t.quickPick,[f,...c,...u,...i?[GP]:[]],"How would you like to create your container configuration?");if(!d){Vr(n,"canceled");return}if(d.type==="help"){Vr(n,"help"),Ke.env.openExternal(i);return}if(d.type==="predefined")return Vy(t,()=>WP(t));if(d.type==="dockerComposeFile")return oye(t,d.dockerComposePath,()=>WP(t));if(d.type==="dockerfile")return iye(t,d.dockerfilePath)}function i9(t){let e=t.metaData.get("categories");return e?e.trim().split(", ").indexOf("Core")>-1:!1}async function tye(t){let{fileHost:e,workspace:r,predefinedDefinitionsLearnMoreLink:n}=t,i=t.stats||(t.stats=await B6(e,r)),o=await l9(t.codespaces,LP.bind(null,i)),s=[];i.mostPopularFileType.length===0?s=await aye(t.codespaces):s=o.filter(c=>c.recommendationScore&&c.recommendationScore>0&&i9(c));let a;return s.length>0?a=[...n?[GP]:[],...s,{label:"Show All Definitions...",detail:"Show all available predefined container definitions.",alwaysShow:!0,type:"showAll"}]:a=[...n?[GP]:[],...o],{items:a,stats:i}}async function Vy(t,e){let{telemetry:r,predefinedDefinitionsLearnMoreLink:n}=t,i=tye(t),o=await Wi(t.quickPick,i.then(s=>s.items),"Select a container configuration definition",void 0,void 0,!!e);if(o==="back")return e();if(!o){Vr(r,"canceled");return}if(o.type==="help"){Vr(r,"help"),Ke.env.openExternal(n);return}if(o.type==="showAll")return o9(t,(await i).stats,()=>Vy(t,e));if(o.type==="baseConfiguration")return s9(t,o,()=>Vy(t,e))}async function o9(t,e,r){let{telemetry:n}=t,i=await l9(t.codespaces,LP.bind(null,e)),o=await Wi(t.quickPick,[...i],"Select a container configuration definition",void 0,void 0,!0);if(o==="back")return r();if(o&&o.type==="baseConfiguration")return s9(t,o,()=>o9(t,e,r));Vr(n,"canceled")}async function s9(t,e,r){let{telemetry:n}=t,i=await rye(t,e);if(!i){Vr(n,"canceled");return}return i==="back"?r():(Vr(n,"definition",ye.basename(i.definitionFolder)),zP(t,i))}async function zP(t,e){let{quickPick:r}=t;r.busy=!0,r.enabled=!1;try{return await fye(t,e)}finally{r.hide()}}async function rye(t,e){let r=Be(e.configText);return r.configFilePath=pe.file(e.configFilePath),Xe(r)?nye(t,e,r,async()=>"back",(n,i)=>a9(t,n,r,i)):$P(t,e,r,async()=>"back")}async function nye(t,e,r,n,i){var d;let o=kt({platform:process.platform},r),s=(await Ce(o.fsPath)).toString(),a=/^#\s*\[Choice\]\s*([^:\r\n]+):(.*)\r?\nARG\s+([^=\s]+)="?([^"\r\n]*)"?\s*$/gm,c,u=[];for(;c=a.exec(s);)u.push(c);if(!u.length)return e;let l=((d=r.build)==null?void 0:d.args)||{},f=u.map(([,p,h,g,v])=>{let C=l[g]||v,y=h.trim().split(",").map(w=>w.trim()).map(w=>({label:w,description:w===C?"(default)":void 0,value:w})),E=y.findIndex(w=>w.value===C);return E!==-1&&y.unshift(...y.splice(E,1)),{placeholder:p||g,name:g,default:C,items:y}});return async function p(h,g,v){if(!g.length)return i(j(A({},e),{configText:h}),v);let C=g[0],y=await Wi(t.quickPick,C.items,C.placeholder,void 0,void 0,!0);if(!y)return;if(y==="back")return v();let E=h;if(y.value!==C.default){let w=Lt(E,["build","args",C.name],y.value,{formattingOptions:{}});E=Yt(E,w)}return p(E,g.slice(1),()=>p(h,g,v))}(e.configText,f,n)}async function a9(t,e,r,n){var h;let i=kt({platform:process.platform},r),o=(await Ce(i.fsPath)).toString(),s=/^#\s*\[(Option|Install)\]\s*(.+)\r?\nARG\s+([^=\s]+)="?(true|false)"?\s*$/gm,a,c=[];for(;a=s.exec(o);)c.push(a);let u=((h=r.build)==null?void 0:h.args)||{},l=c.map(([,g,v,C,y])=>{let w=(u[C]||y)==="true";return{type:g.toLowerCase(),label:v||C,picked:w,name:C,default:w}}),f=l.some(g=>g.type==="option");f&&l.filter(g=>g.type==="install").forEach(g=>g.label=`Install ${g.label}`);let d=l.length?await Wi(t.quickPick,l,f?`Select the options for the '${e.label}' dev container`:`Select the install options for the '${e.label}' dev container`,void 0,!0,!0):[];if(!d)return;if(d==="back")return n();let p=e.configText;for(let g of l){let v=d.indexOf(g)!==-1;if(v!==g.default){let C=Lt(p,["build","args",g.name],String(v),{formattingOptions:{}});p=Yt(p,C)}}return $P(t,j(A({},e),{configText:p}),r,l.length?()=>a9(t,e,r,n):n)}function c9(t,e){let r=Ke.workspace.workspaceFolders||[];if(r.length<2)return;let n=r.find(i=>t.platform==="win32"?e.toLowerCase().startsWith(i.uri.fsPath.toLowerCase()):e.startsWith(i.uri.fsPath));return n&&n.name}async function iye(t,e){let{fileHost:r,workspace:n,telemetry:i}=t,s=(await Gy()).find(a=>ye.basename(a.definitionFolder)==="docker-existing-dockerfile");if(s){let a=ye.relative(s.definitionFolder,s.configFilePath),c=r.path.sep!==ye.sep?a.replace(ye.sep===ye.win32.sep?/\\/g:/\//g,r.path.sep):a,u=r.path.resolve(n.configFolderPath,c),l=r.path.relative(r.path.dirname(u),e),f=r.platform==="win32"?l.replace(/\\/g,"/"):l,d="dockerFile"in Be(s.configText)?["dockerFile"]:["build","dockerfile"],p=Lt(s.configText,d,f,{formattingOptions:{}}),h=Yt(s.configText,p);return Vr(i,"dockerFile"),zP(t,j(A({},s),{configText:h}))}else{Vr(i,"existingDockerfileDefinitionNotFound");return}}async function oye(t,e,r){let{fileHost:n,workspace:i,telemetry:o}=t,s=(await n.readFile(e)).toString(),a=bn(s);if(!a){await Ke.window.showErrorMessage(`Invalid docker-compose file "${e}"`,{modal:!0});return}let c=a.version,u=Object.keys(a&&a.services||{}),l=u.length<2?u[0]||"":await Wi(t.quickPick,u.map(h=>({label:h,type:"service"})),"Select a service",void 0,void 0,!0);if(l==="back")return r();if(l===void 0){Vr(o,"canceled");return}let f=typeof l=="string"?l:l.label,p=(await Gy()).find(h=>ye.basename(h.definitionFolder)==="docker-existing-docker-compose");if(p){let h=ye.relative(p.definitionFolder,p.configFilePath),g=n.path.sep!==ye.sep?h.replace(ye.sep===ye.win32.sep?/\\/g:/\//g,n.path.sep):h,v=n.path.resolve(i.configFolderPath,g),C=n.path.relative(n.path.dirname(v),e),y=n.platform==="win32"?C.replace(/\\/g,"/"):C,E=Be(p.configText).dockerComposeFile,w=Array.isArray(E)?E.slice(1):[],x=[y,...w],_=Lt(p.configText,["dockerComposeFile"],x,{formattingOptions:{}}),S=Yt(p.configText,_),I=Lt(S,["service"],f,{formattingOptions:{}}),R=Yt(S,I),T=w.reduce((W,K)=>(W[vo({platform:process.platform},{configFilePath:pe.file(p.configFilePath)},K).fsPath]=!0,W),{}),U=j(A({},p),{configText:R,async copyFile(W,K){if(T[W]){let oe=(await Ce(W)).toString(),X=bn(oe);X.version&&c&&X.version!==c&&(oe=oe.replace(new RegExp(`^(version:.*)(${X.version.replace(/\./g,"\\.")})`,"m"),`$1${c}`));let D=Object.keys(X&&X.services||{});D.length&&(oe=oe.replace(new RegExp(`\\b${D[0]}\\b`),f)),await n.writeFile(K,Buffer.from(oe))}else{let oe=await Ce(W);await n.writeFile(K,oe)}}});return Vr(o,"dockerComposeFile"),zP(t,U)}else{Vr(o,"existingDockerComposeDefinitionNotFound");return}}function Vr(t,e,r){let n={outcome:e};r&&(n.definitionName=r),t.sendTelemetryEvent("createConfiguration",n)}function sye(t,e){let r=e.recommendationScore===void 0?0:e.recommendationScore,n=t.recommendationScore===void 0?0:t.recommendationScore;return r-n}var u9=["docker-existing-docker-compose","docker-existing-dockerfile"];async function l9(t,e){let r=(await Gy()).filter(n=>u9.indexOf(ye.basename(n.definitionFolder))===-1);return t&&(r=r.filter(n=>!/^\s*no\b/i.test(n.metaData.get("codespaces")||"yes"))),e?(await e(r),r.sort(sye)):r.sort((n,i)=>n.label.localeCompare(i.label))}async function aye(t){let e=(await Gy()).filter(r=>u9.indexOf(ye.basename(r.definitionFolder))===-1);return e=e.filter(r=>i9(r)),t&&(e=e.filter(r=>!/^\s*no\b/i.test(r.metaData.get("codespaces")||"yes"))),e.sort((r,n)=>r.label.localeCompare(n.label))}async function Gy(){let t=new t9.default,e=await Bu(),r=ye.join(e,"node_modules","vscode-dev-containers","containers"),n=ye.join(e,"node_modules","vscode-dev-containers","containers-readmes"),i=await Gr(r);return(await Promise.all(i.map(async s=>{var y;let a=ye.join(r,s),c=await Vh(a),u=c&&await lye(c);if(!u)return;let l=Be(u);l.configFilePath=pe.file(c);let[,f,d]=((y=l.name)==null?void 0:y.match(/^(.*)(\([^)]*\))$/))||[],p=(f==null?void 0:f.trim())||l.name||s,h=d,g,v=ye.join(n,s,"README.md"),C=new Map;if(await vt(v))try{let E=await Ce(v,{encoding:"utf8"}),w=/\#\s*summary.*\n*(.*)/i.exec(E);if(w){let x=t.render(w[1]);g=cye(x);let _=g.indexOf(". ");_!==-1&&(g=g.substr(0,_+1))}C=uye(E)}catch(E){console.error(E)}return{label:p,description:h,type:"baseConfiguration",detail:g,definitionFolder:a,configText:u,configFilePath:c,metaData:C}}))).filter(s=>!!s)}function cye(t){return t.replace(/<[^>]*>/g,"").trim().replace(/&#([0-9]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,10))}).replace(/&#x([0-9a-f]+);/g,function(e,r){return String.fromCodePoint(parseInt(r,16))}).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e})}function uye(t){let e=new Map,r=!1,n=/^\s*\|\s*Metadata\s*\|\s*Value\s*\|/i,i=/^\s*\|/gi,o={categories:/^\s*\|\s*\*Categories\*\s*\|\s*(.*)\s*\|/i,contributors:/^\s*\|\s*\*Contributors\*\s*\|\s*(.*)\s*\|/i,definitionType:/^\s*\|\s*\*Definition type\*\s*\|\s*(.*)\s*\|/i,codespaces:/^\s*\|\s*\*Works in Codespaces\*\s*\|\s*(.*)\s*\|/i,languagesPlatforms:/^\s*\|\s*\*Languages, platforms\*\s*\|\s*(.*)\s*\|/i},s=t.toString().split(`
`);for(let a of s)if(!r)a.match(n)&&(r=!0);else{if(!a.match(i))break;for(let c in o){let u=a.match(o[c]);u&&u[1]&&e.set(c,u[1])}}return e}async function lye(t){return await vt(t)?(await Ce(t)).toString():void 0}async function fye(t,e){let{fileHost:r,workspace:n,replaceExistingConfig:i,existingConfig:o,output:s}=t,a=n.configFolderPath,c="Skip",u=(await d9(e.definitionFolder)).map(d=>ye.relative(e.definitionFolder,d)),l,f;for(let d of u){let p=ye.join(e.definitionFolder,d),h=p===e.configFilePath,g=r.path.sep!==ye.sep?d.replace(ye.sep===ye.win32.sep?/\\/g:/\//g,r.path.sep):d,v=r.path.join(a,g);if(h&&!i&&o){let C=Be(e.configText);try{f=dye(r,C,v,o)}catch(y){await hye(y,r,v,g,s);return}v=ce(o.uri,r.platform)}else if(await r.isFile(v)){let C=await Ke.window.showInformationMessage(`File '${g}' already exists, overwrite?`,{modal:!0},c,"Overwrite");if(!C)return;if(C===c)continue}if(await r.mkdirp(r.path.dirname(v)),h)l=v,await r.writeFile(v,Buffer.from(f||e.configText));else if(e.copyFile)await e.copyFile(p,v);else{let C=await Ce(p);await r.writeFile(v,C)}}return l}function dye(t,e,r,n){let i=n.text,o=ce(n.uri,t.platform);if("image"in e)i=It(i,["image"],e.image);else if("dockerFile"in e){let l=Vu(t,r,o,e.dockerFile);if(i=It(i,["dockerFile"],l),e.context){let f=Vu(t,r,o,e.context);i=It(i,["context"],f)}}else if("build"in e){let l=Vu(t,r,o,e.build.dockerfile);if(i=It(i,["build","dockerfile"],l),e.build.context){let f=Vu(t,r,o,e.build.context);i=It(i,["build","context"],f)}i=It(i,["build","target"],e.build.target),i=It(i,["build","args"],e.build.args)}else if("dockerComposeFile"in e){let l=pye(t,r,o,e.dockerComposeFile);i=It(i,["dockerComposeFile"],l),i=It(i,["service"],e.service),i=It(i,["workspaceFolder"],e.workspaceFolder)}let s=YP(e.settings,n.object.settings);i=It(i,["settings"],s);let a=KP(n.object.forwardPorts,e.forwardPorts);i=It(i,["forwardPorts"],a);let c=KP(n.object.extensions,e.extensions);if(i=It(i,["extensions"],c),"image"in e||Xe(e)){let l=KP(n.object.mounts,e.mounts);i=It(i,["mounts"],l);let f=YP(e.containerEnv,n.object.containerEnv);i=It(i,["containerEnv"],f),i=It(i,["containerUser"],e.containerUser);let d=f9(n.object.runArgs,e.runArgs);i=It(i,["runArgs"],d)}i=It(i,["postCreateCommand"],e.postCreateCommand);let u=YP(e.remoteEnv,n.object.remoteEnv);return i=It(i,["remoteEnv"],u),i=It(i,["remoteUser"],e.remoteUser),i}function It(t,e,r){if(r===void 0)return t;let n=Lt(t,e,r,{formattingOptions:{}});return Yt(t,n)}function pye(t,e,r,n){return Array.isArray(n)?n.map(i=>Vu(t,e,r,i)):Vu(t,e,r,n)}function Vu({path:t},e,r,n){let i=t.resolve(t.dirname(e),n);return t.relative(t.dirname(r),i)||"."}function KP(t,e){var r;return(r=f9(t,e))==null?void 0:r.filter((n,i,o)=>o.indexOf(n)===i)}function f9(t,e){if(!!(e==null?void 0:e.length))return(t||[]).concat(e)}function YP(t,e){if(!(!t||!Object.keys(t).length))return Object.assign({},t,e)}async function BP(t,e){let r=await Bh(t,e.configFolderPath);if(!r)return;let n=await wt(t).readDocument(r);if(!n)return;let i=Be(n);return{uri:r,text:n,object:i}}async function d9(t){let e=await Gr(t);return[].concat(...await Promise.all(e.map(async r=>{let n=ye.join(t,r);return(await(0,r9.promisify)(e9.lstat)(n)).isDirectory()?d9(n):n})))}async function hye(t,e,r,n,i){i.write(we(t&&(t.stack||t.message)));let o=await e.toCommonURI(r),s=await Ke.window.showErrorMessage(`Could not update '${n}' due to errors in its content. Try fixing these first.`,{modal:!0},...o?["Open devcontainer.json"]:[]);o&&s&&Ke.window.showTextDocument(Ke.Uri.parse(o.toString()))}async function By(t){return(await mye()).find(r=>{var n,i;return(i=(n=r.build)==null?void 0:n.tags)==null?void 0:i.some(o=>{let c=`^mcr.microsoft.com/vscode/devcontainers/${o.split(/\$\{[^}]*\}/).map(u=>u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g").join(".*")}$`;return new RegExp(c).test(t)})})}async function mye(){let t=ye.join(await Bu(),"node_modules","vscode-dev-containers","manifests");return(await Promise.all((await Gr(t)).map(e=>VP(e,t)))).filter(Boolean)}async function VP(t,e){e=e||ye.join(await Bu(),"node_modules","vscode-dev-containers","manifests");let r=ye.join(e,t,"definition-manifest.json");if(await vt(r)){let n=(await Ce(r)).toString(),i=Be(n);return i.definitionName=t,i}}async function Bu(){let t=await Ku(ye.join(__dirname,"node_modules","vscode-dev-containers"))?[]:await Ku(ye.join(__dirname,"..","node_modules","vscode-dev-containers"))?[".."]:["..",".."];return ye.join(__dirname,...t)}async function p9(t,e,r,n,i,o){let s=An(r);if(er(s)&&!await je.workspace.requestWorkspaceTrust({message:Pd}))return Mr(s.hostPath)?(await je.window.showInformationMessage("The WSL folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen in WSL."}),await je.commands.executeCommand("remote-containers.reopenInWSL")):(await je.window.showInformationMessage("The local folder is currently not trusted.",{modal:!0,detail:"Trust is required to build a dev container from it. The folder will now reopen locally."}),await je.commands.executeCommand("remote-containers.reopenLocally")),new Promise(()=>{});let a=sn(s);return a&&!await Id(t,s.repositoryPath)?(await je.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{})):j(A({},await gye(s,t,i,o,e,r,n)),{isTrusted:a||void 0})}async function gye(t,e,r,n,i,o,s){let{log:a,logFilePath:c}=r,u="hostPath"in t&&Mr(t.hostPath)&&!!je.extensions.getExtension("ms-vscode-remote.remote-wsl");u&&je.commands.executeCommand("setContext","canReopenInWSL",!0);let l;return je.window.withProgress({location:je.ProgressLocation.Notification,title:qu,cancellable:!1},async f=>{let{cliHost:d,originalCwd:p}=await vye(t,a),h=A(A({},await zn(e.extensionPath,Vi)),Pc(d,t.settings)),g=A(A({},d.env),h),v=await Fu({authority:o,extensionContext:e,sessionStart:r.sessionStart,progress:f,cliHost:d,env:g,cwd:d.cwd,isLocalContainer:Om(h),telemetry:i,output:a,logFilePath:c,allowSystemConfigChange:!0,postCreate:n}),C={async createConfiguration(y,E){return Od({fileHost:E,telemetry:i,output:a,existingFilesLearnMoreLink:_d,predefinedDefinitionsLearnMoreLink:xd,openConfigurationCommandId:Ed},be(XP.posix,y))},async showError(y,...E){return await je.window.showErrorMessage(y,{modal:!0},...E)}};return l={common:v,parsedAuthority:t,dockerCLI:Go(),dockerComposeCLI:Lu(),dockerEnv:h,workspaceMountConsistencyDefault:_y(),cacheMount:xy()?"volume":"none",configurationTracking:Ey(e.workspaceState),removeOnStartup:await NW(e,o),buildNoCache:await FW(e,o),onRemoveOnShutdownChanged:s,userRepositoryConfigurationPaths:oi(),originalCwd:p,configProvider:C},await Nm(l),hq(l)}).then(f=>(s(async d=>{await LW(e,d&&f.dockerContainerId||!1),await Sd(e,d==="rebuildNoCache"?o:!1)}),Gi(i,QP(t),"success",f.config,f.properties),f),f=>{var E;let d=f instanceof H?f:new H({description:"An error occurred setting up the container.",originalError:f});sn(t)&&(d.volumeName=t.volumeName,d.volumeName===an&&(d.volumeName=Ur(t.repositoryPath).uniqueVolumeName),d.repositoryPath=t.repositoryPath,d.folderPath=t.folder),Gi(i,QP(t),"failure",d.config,d.containerProperties,d);let p="onTheSide",h=(E=d.data)==null?void 0:E.fileWithError,g=h&&(l==null?void 0:l.common.cliHost.path.basename(h))||"devcontainer.json",v=er(t)?[{id:"openFileWithErrorLocally",title:`Open ${g} Locally`,isLastAction:!0,applicable:async(w,x)=>!x||!u,async execute(){let w=l==null?void 0:l.common.cliHost,x=h?w.type==="wsl"?await w.toCommonURI(h):pe.file(h):void 0;await Py(e,t.hostPath,x,c,p);let _=je.Uri.file(t.hostPath);await je.commands.executeCommand("vscode.openFolder",_)}},{id:"openFileWithErrorinWSL",title:`Open ${g} in WSL`,isLastAction:!0,applicable:async()=>u,async execute(){let w=je.Uri.parse((await xl(t.hostPath,a)).toString());await Py(e,w.path,h?w.with({path:h}):void 0,c,p),await je.commands.executeCommand("vscode.openFolder",w)}}]:[],C=sn(t)?t.inspectVolume?[Io]:[{id:"reopenInRecoveryContainer",title:`Open ${g} in Recovery Container`,isLastAction:!0,applicable:(w,x)=>!0,execute:async w=>{await Py(e,t.repositoryPath,h?pe.file(h).with({scheme:"vscode-remote"}):void 0,c,p),await je.commands.executeCommand("remote-containers.inspectVolume",w.volumeName,w.repositoryPath,w.folderPath)}},Io,{id:"openRepository",title:"Open Repository",isLastAction:!1,applicable:(w,x)=>!x,async execute(){je.env.openExternal(je.Uri.parse(t.repositoryPath))}}]:[],y=bc(t)?[Io]:[];return d.actions=[...Ac,Os,Vq,...v,...C,...y,Ic,Ds],yye(d),Ao(d,QP(t),i,!0,r)})}async function vye(t,e){if(er(t)){let r=be(XP,t.hostPath),n=r.rootFolderPath,i=await Jr(r.rootFolderPath,vn,e);return i.cwd!==r.rootFolderPath&&(r=be(i.path,r.isWorkspaceFile?i.path.join(i.cwd,XP.basename(t.hostPath)):i.cwd)),e.write(`Setting up container for folder or workspace: ${r.workspaceOrFolderPath}\r
`),Dm(e,t.settings),{cliHost:i,originalCwd:n}}else{let r=process.cwd();return{cliHost:await Jr(r,vn,e),originalCwd:r}}}function QP(t){return er(t)?"config":sn(t)?t.inspectVolume?"volume":"repository":"volume"}function yye(t){let e=(t.originalError&&(t.originalError.cmdOutput||t.originalError.message)||"").toLowerCase();e&&e.indexOf("drive has not been shared")!==-1?t.description="The drive of the workspace folder is not shared. Share it in the Docker settings first.":e&&(e.indexOf("port is already allocated")!==-1||e.indexOf("address already in use")!==-1)?t.description="A port the container is setup to bind to is already in use. See the Dev Containers terminal for details.":e&&e.indexOf('invalid mount config for type "bind"')!==-1?t.description="A mount config is invalid. Make sure it has the right format and a source folder that exists on the machine where the Docker daemon is running.":e&&e.indexOf("deb.debian.org/debian/dists/jessie-updates")!==-1&&(t.description="The base image references the obsolete Debian 8 update repository.",t.actions.push({id:"learnMore",title:"Learn More",isLastAction:!1,applicable:(r,n)=>n,async execute(){je.env.openExternal(je.Uri.parse("https://aka.ms/vscode-remote/containers/troubleshooting/jessie"))}}))}var Ko=k(require("vscode"));var h9=k(require("util"));var $n=k(require("path"));async function m9(t,e,r){let{common:n}=t,i;try{let{commit:o}=n.product;if(!o)throw new H({description:"Cannot attach without commit id for the remote extension host."});i=await Kn(t,e.Id,r.workspaceFolder,r.remoteUser);let s=wt(n.cliHost,i.shellServer),{hostOrContainerPort:a,hostPortServer:c,remoteEnv:u,serverDownloaded:l}=await po(n,i,r,void 0,void 0,fo);if(Cye(n,i,s,r.configFilePath),Eye(n,i,s,r.configFilePath),Ec(n,i,a,e,be($n.posix,"/")),c){let f=async()=>{await(0,h9.promisify)(c.close.bind(c))()};n.shutdowns.push(f)}return{params:n,properties:i,config:r,resolvedAuthority:{host:xo,port:a,extensionHostEnv:u},tunnelInformation:n.isLocalContainer?_c(e):{},dockerParams:t,dockerContainerId:e.Id,serverDownloaded:l}}catch(o){let s=o instanceof H?o:new H({description:"An error occurred attaching to the container.",originalError:o});throw e&&(s.manageContainer=!1,s.params=t.common,s.containerId=e.Id,s.dockerParams=t),i&&(s.containerProperties=i),s.config=r,s}}function Cye(t,e,r,n){e.installFolder&&g9(t,e,r,n).catch(console.error)}async function g9(t,e,r,n){try{await yi(t,e,["/bin/sh","-c",`# Watch installed extensions
			trap "exit 0" 16
			old=\`ls -A --full-time\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
			exit 2
		`],JN(e),{print:"off"})}catch(i){i&&i.code===1?await wye(t,e,r,n):i&&i.code!==2&&await Cs(6e4)}return g9(t,e,r,n)}async function wye(t,e,r,n){let i=await nL(t,e);await ME(n,async()=>{let o=await Yy(t.cliHost,r,n,e.remoteWorkspaceFolder);if(!xye(o.config.extensions||[],i)){let s=Lt(o.text,["extensions"],i,{formattingOptions:{}});await tn(r,n,s,o.text)}})}function Eye(t,e,r,n){v9(t,e,r,n).catch(console.error)}async function v9(t,e,r,n){try{let i=Th(e),o=$n.posix.dirname(i),s=$n.posix.basename(i);await yi(t,e,["/bin/sh","-c",`# Watch machine settings
			trap "exit 0" 16
			old=\`ls -A --full-time ${s} 2>/dev/null || true\`
			counter=0
			while [ $counter -lt 60 ]
			do
				sleep 1
				new=\`ls -A --full-time ${s} 2>/dev/null || true\`
				if [ "$new" != "$old" ]
				then
					exit 1
				fi
				counter=\`expr $counter + 1\`
			done
		`],o,{print:"off"})}catch(i){i&&i.code===1&&await _ye(t.cliHost,e,r,n)}return v9(t,e,r,n)}async function _ye(t,e,r,n){let{stdout:i}=await e.shellServer.exec(`cat ${Th(e)}`),o=Be(i)||{};await ME(n,async()=>{let s=await Yy(t,r,n,e.remoteWorkspaceFolder);if(JSON.stringify(s.config.settings||{})!==JSON.stringify(o)){let a=Lt(s.text,["settings"],o,{formattingOptions:{}});await tn(r,n,a,s.text)}})}function xye(t,e){let r=new Set(t),n=new Set(e);return r.size===n.size&&t.every(i=>n.has(i))}async function y9(t,e){let r=zy(t,e.Name),n=await S9(r);return n||(r=E9(t,e.Config.Image),n=await S9(r)),n}async function C9(t,e,r,n,i){let o=pe.file(zy(r,n.Name)),s=await Yy(t,e,o,i);return s.exists||(o=pe.file(E9(r,n.Config.Image)),s=await Yy(t,e,o,i)),s}function Wy(t){return $n.join(t,"nameConfigs")}function zy(t,e){let r=e.startsWith("/")?e.substr(1):e;return $n.join(Wy(t),`${x9(r)}.json`)}async function w9(t){try{let e=Wy(t);return(await Gr(e)).filter(n=>n.endsWith(".json")).map(n=>({name:b9(n.substr(0,n.length-5)),uri:pe.file($n.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function Ky(t){return $n.join(t,"imageConfigs")}function E9(t,e){return $n.join(Ky(t),`${x9(e)}.json`)}async function _9(t){try{let e=Ky(t);return(await Gr(e)).filter(n=>n.endsWith(".json")).map(n=>({image:b9(n.substr(0,n.length-5)),uri:pe.file($n.join(e,n))}))}catch(e){if(e&&e.code==="ENOENT")return[];throw e}}function x9(t){return t.replace(/[:/%]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}function b9(t){return t.replace(/%([0-9a-f]{2})/g,(e,r)=>String.fromCharCode(parseInt(r,16)))}async function S9(t){if(!await vt(t))return;let e=await Ce(t),r=Be(e.toString())||{};return r.configFilePath=pe.file(t),r}async function Yy(t,e,r,n){let i=await e.readDocument(r),o=i||wi,s=Be(o)||{},a=sc({platform:t.platform,configFile:r,env:t.env,localWorkspaceFolder:void 0,containerWorkspaceFolder:n},s);return a.configFilePath=r,{exists:!!i,text:o,config:a}}async function P9(t,e,r,n,i){return await Wo(t)?j(A({},await bye(t,e,r,n,i)),{isTrusted:!0}):(await Ko.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function bye(t,e,r,n,i){let o;return Ko.window.withProgress({location:Ko.ProgressLocation.Notification,title:qu,cancellable:!1},async s=>{var a,c;try{let u=Lm(r),{settings:l}=u,f="containerName"in u?u.containerName:u.containerId;n.log.write(`Setting up container: ${f}\r
`),Dm(n.log,l);let d=u.cwd||process.cwd(),p=await Jr(d,vn,n.log),h=Go(),g=Lu(),v=A(A({},await zn(t.extensionPath,Vi)),Pc(p,l)),C=A(A({},p.env),v),y=await Jn({cliHost:p,dockerCLI:h,dockerComposeCLI:g,env:C,output:n.log},"containerName"in u?u.containerName:u.containerId);if(!y)throw new H({description:`Cannot attach to the container with name/id ${f}, it no longer exists.`,data:{reload:!1,attach:!0}});let E=(c=(a=(Ko.workspace.workspaceFolders||[void 0])[0])==null?void 0:a.uri)==null?void 0:c.path,w=await C9(p,Sn,t.globalStoragePath,y,E);if(E&&w.config.workspaceFolder!==E){let R=Lt(w.text,["workspaceFolder"],E,{formattingOptions:{}});await tn(Sn,w.config.configFilePath,R,w.text)}let x={common:await Fu({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:s,cliHost:p,env:C,cwd:d,isLocalContainer:Om(v),telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i}),parsedAuthority:u,dockerCLI:h,dockerComposeCLI:g,dockerEnv:v,workspaceMountConsistencyDefault:_y(),cacheMount:xy()?"volume":"none",configurationTracking:Ey(t.workspaceState),userRepositoryConfigurationPaths:[]};await Nm(x);let _=So(l),S=y.Name.startsWith("/")?y.Name.substr(1):y.Name,I=`Container ${y.Config.Image} (${S})${_}`;if(x.common.setWorkspaceName(I),y.State.Status!=="running")throw new H({description:`Cannot attach to the container ${y.Config.Image} (${S})${_}, it is not running.`,params:x.common,containerId:y.Id,dockerParams:x,data:{reload:!1,start:!0}});return await m9(x,y,w.config)}catch(u){let l=u instanceof H?u:new H({description:"An error occurred attaching to the container.",originalError:u});throw l.actions=[Gq,Wq,...Ac,Os,Io,Ic,Ds],l}}).then(s=>(Gi(e,"attach","success",o,s.properties),s),s=>{let a=s instanceof H?s:new H({description:"An error occurred attaching to the container.",originalError:s});return Gi(e,"attach","failure",o,a.containerProperties,a),Ao(a,"attach",e,!0,n)})}var at=k(require("vscode"));var st=k(require("vscode")),I9=k(require("path")),Ca=k(require("os")),Nd=k(require("fs")),A9=k(require("child_process")),R9=k(yC());async function Xy(t){Iye()?await new T9().downloadAndInstallDocker(t):D9()?await new k9().downloadAndInstallDocker(t):await st.env.openExternal(st.Uri.parse("https://aka.ms/download-docker-linux-vscode"))}var JP=class{async downloadAndInstallDocker(e){if(await this.preInstallCheck(e)){let n="Downloading Docker installer...",i="The Docker Desktop installation is started. Complete the installation and then start Docker Desktop.",o;try{o=await st.window.withProgress({location:st.ProgressLocation.Notification,title:n},async()=>this.downloadInstaller())}catch(a){let c="Downloading the Docker Desktop installer failed. Do you want to manually download and install?",u="Download";throw this.handleError(c,u,this.downloadUrl),a}let s=this.getInstallCommand(o);st.window.showInformationMessage(i);try{await this.install(o,s,e)}catch(a){let c=`Docker Desktop installation failed. ${a}`,u="Install Instruction";throw this.handleError(c,u,"https://aka.ms/AA37qtj"),a}}}async preInstallCheck(e){let r=!0;if(await new O9(e).isDockerInstalledRealTimeCheck()){let n="Docker Desktop is already installed. Would you like to reinstall?",i="Reinstall";r=await st.window.showInformationMessage(n,{modal:!0},i)!==void 0}return r}async downloadInstaller(){let e=`${Pye()}.${this.fileExtension}`;return await Rye(this.downloadUrl,e),e}handleError(e,r,n){st.window.showErrorMessage(e,{title:r}).then(i=>{i&&st.env.openExternal(st.Uri.parse(n))})}},T9=class extends JP{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-windows-vscode";this.fileExtension="exe"}getInstallCommand(e){return`"${e}"`}async install(e,r,n){try{n.write(`Executing command ${r}`),await L9(r,n)}finally{try{await Nd.promises.stat(e),await Nd.promises.unlink(e)}catch(i){}}}},k9=class extends JP{constructor(){super(...arguments);this.downloadUrl="https://aka.ms/download-docker-mac-vscode";this.fileExtension="dmg"}getInstallCommand(e){return`chmod +x '${e}' && open '${e}'`}async install(e){let r="Docker Install",n=this.getInstallCommand(e);await Aye(n,r,{addDockerEnv:!1})}},Sye=0;function Pye(){return I9.join(Ca.tmpdir(),`${st.env.sessionId}-${Sye++}.tmp`)}function Iye(){return Ca.platform()==="win32"}function D9(){return Ca.platform()==="darwin"}async function Aye(t,e,r){var a,c,u;let n;r=r!=null?r:{},r.addDockerEnv&&(n={});let i=new st.Task({type:"shell"},(a=r.workspaceFolder)!=null?a:st.TaskScope.Workspace,e,"Docker",new st.ShellExecution(t,{cwd:r.cwd||((u=(c=r.workspaceFolder)==null?void 0:c.uri)==null?void 0:u.fsPath)||Ca.homedir(),env:n}),[]);r.alwaysRunNew&&(i.definition.idRandomizer=Math.random()),r.focus&&(i.presentationOptions={focus:!0});let o=await st.tasks.executeTask(i);return new Promise((l,f)=>{let d=st.tasks.onDidEndTaskProcess(p=>{p.execution===o&&(d.dispose(),p.exitCode&&r.rejectOnError&&f(p.exitCode),l())})})}var O9=class{constructor(e){this.output=e;this.maxCacheTime=3e4;this.isDockerInstalledLazy=new F9(async()=>{let r=await this.isDockerInstalledRealTimeCheck();return r&&this.isDockerInstalledLazy.cacheForever(),r},this.maxCacheTime)}async isDockerInstalled(){return await this.isDockerInstalledLazy.getValue()}async isDockerInstalledRealTimeCheck(){try{return await L9("docker -v",this.output),!0}catch(e){return!1}}};async function Rye(t,e){await new Promise((r,n)=>{let i=Nd.createWriteStream(e);R9.https.get(t,s=>{if(s.statusCode<200||s.statusCode>299){n(new Error(`Failed to download Docker (${t}): HTTP ${s.statusCode} - ${s.statusMessage}`));return}s.on("error",n),s.pipe(i),s.on("end",r)}).on("error",n)})}var N9=10*1024;async function L9(t,e,r,n){let i=Buffer.alloc(r&&r.maxBuffer||N9),o=Buffer.alloc(r&&r.maxBuffer||N9);return await Tye(t,e,r,n,i,n,o),{stdout:ZP(i),stderr:ZP(o)}}async function Tye(t,e,r,n,i,o,s,a){return await new Promise((c,u)=>{let l,f=0,d=0;r=r||{},r.shell=!0,kye(r,e);let p=A9.spawn(t,r);p.on("error",h=>(l&&(l.dispose(),l=void 0),u(h))),p.on("close",(h,g)=>{if(l&&(l.dispose(),l=void 0),a&&a.isCancellationRequested)return u(new Error("User canceled"));if(h){let v=`Process '${t.length>50?`${t.substring(0,50)}...`:t}' exited with code ${h}`;s&&(v+=`
Error: ${ZP(s)}`);let C=new Error(v);return C.code=h,C.signal=g,C.stdErrHandled=o!==null,u(C)}return c()}),(r==null?void 0:r.stdin)&&(p.stdin.write(r.stdin),p.stdin.end()),(n||i)&&p.stdout.on("data",h=>{let g=h.toString();n&&n(g,p),i&&(f+=i.write(g,f))}),(o||s)&&p.stderr.on("data",h=>{let g=h.toString();o&&o(g,p),s&&(d+=s.write(g,d))}),a&&(l=a.onCancellationRequested(()=>{p.kill()}))})}function kye(t,e){var r,n;!D9()||/(?<=^|:)\/usr\/local\/bin(?=$|:)/i.test(((r=t==null?void 0:t.env)==null?void 0:r.PATH)||process.env.PATH||"")||(t=t!=null?t:{},t.env=(n=t.env)!=null?n:A({},process.env),e.write("WARNING: Adding '/usr/local/bin' to the PATH because it is missing."),t.env.PATH=`${t.env.PATH}:/usr/local/bin`)}function ZP(t){return t.toString().replace(/[\x00-\x09\x0B-\x0C\x0E-\x1F]|\r?\n$/g,"")}var F9=class{constructor(e,r){this.valueFactory=e;this._valueLifetime=r;this._isValueCreated=!1}get isValueCreated(){return this._isValueCreated}cacheForever(){this._valueLifetime=void 0}clear(){this._isValueCreated=!1,this._valuePromise=void 0}async getValue(){if(this._isValueCreated)return this._value;let e=this._valuePromise===void 0;e&&(this._valuePromise=this.valueFactory());let r=await this._valuePromise;if(e&&(this._value=r,this._valuePromise=void 0,this._isValueCreated=!0),this._valueLifetime&&e){let n=setTimeout(()=>{this._valueLifetime&&this._valuePromise===void 0&&(this._isValueCreated=!1,this._value=void 0),clearTimeout(n)},this._valueLifetime)}return r}};async function Or(t,e){var i;let r=(i=(at.workspace.workspaceFolders||[])[0])==null?void 0:i.uri;r&&(r.scheme==="file"&&Mr(r.fsPath)||bl(r))&&(t=await Oe(t.output,r));let n=await Ld(t,e);if(n==="permission")return await at.window.showErrorMessage("Current user does not have permission to run 'docker'.",{modal:!0,detail:"Try adding the user to the 'docker' group."},"Documentation")&&at.env.openExternal(at.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079224")),!1;if(n==="ssh")return await at.window.showErrorMessage("Cannot connect to Docker daemon using 'ssh'.",{modal:!0,detail:"Make sure public/private keys are set up for connecting without keyboard interaction."},"Show Log")&&at.commands.executeCommand(Nu),!1;if(n==="daemon")return await at.window.showErrorMessage("Docker returned an error.",{modal:!0,detail:"Make sure the Docker daemon is running."},"Show Log")&&at.commands.executeCommand(Nu),!1;if(!n||n==="command"){if(t.cliHost.type==="wsl")await at.window.showErrorMessage("Docker Desktop WSL 2 backend required.",{modal:!0},"Read more on docker.com")&&at.env.openExternal(at.Uri.parse("https://docs.docker.com/docker-for-windows/wsl"));else{let o="Install",s="Ignore",a=n===!1?[o,s]:[o],c=await at.window.showErrorMessage("Docker version 17.12.0 or later required.",{modal:!0},...a);if(c===o)Xy(t.output).then(console.error);else if(c===s)return!0}return!1}return n==="wsl1"?(await at.window.showErrorMessage("WSL 2 distro required.",{modal:!0,detail:"The WSL distro is running with WSL 1."},"Read more on docker.com")&&at.env.openExternal(at.Uri.parse("https://docs.docker.com/docker-for-windows/wsl")),!1):!0}async function Ld(t,e){var s,a,c;let r;try{r=(await Ee(t,"version","--format","{{.Server.APIVersion}}")).stdout.toString(),t.output.write(r)}catch(u){console.error(u);let l=u&&(u.stderr?u.stderr.toString():u.message)||"";l&&t.output.write(we(l)),Fd(e,"error",void 0,l);let f=l.toLowerCase();return f.indexOf("permission denied")!==-1?f.indexOf("ssh")!==-1?"ssh":"permission":f.indexOf("enoent")!==-1||f.indexOf("not found")!==-1?"command":t.cliHost.type==="wsl"&&((c=(a=(s=u==null?void 0:u.stdout)==null?void 0:s.toString())==null?void 0:a.toLowerCase())==null?void 0:c.indexOf("wsl 1"))!==-1?"wsl1":"daemon"}let n=r.trim(),i=Za(n);if(!i&&n.toLowerCase().indexOf("error during connect")!==-1)return Fd(e,"error",void 0,n),"daemon";if(!i)return Fd(e,"unparsed",n),!0;let o=!ec(i,[1,35]);return!o&&await YE(t)?(Fd(e,"podman",n),!0):(Fd(e,o?"success":"failure",n),o)}function Fd(t,e,r,n){let i={outcome:e};r&&(i.version=r),n&&(i.errorMessage=n),t.sendTelemetryEvent("dockerVersion",i)}async function q9(t){try{return await mc(t,"--version"),!0}catch(e){return await at.window.showErrorMessage("Docker Compose required",{modal:!0},"Documentation")&&at.env.openExternal(at.Uri.parse("https://go.microsoft.com/fwlink/?linkid=2079610")),!1}}var Gu=k(require("vscode"));var eI=class{constructor(e){this.cliHost=e}async provideDocumentLinks(e,r){let n=[],i=UT(e.getText());if(!i)return n;let o=jT(i)||{};return o.configFilePath=e.uri,Xe(o)&&this._linksForDockerfile(n,o,i,e),"dockerComposeFile"in o&&await this._linksForDockerCompose(n,o,i,e),n}_tryAddDocumentLinkToBucket(e,r,n,i,o){let s=e.positionAt(r),a=e.positionAt(n);s.compareTo(a)!==0&&o.push(new Gu.DocumentLink(new Gu.Range(s,a),i))}_linksForDockerfile(e,r,n,i){let o=Yp(n,["build","dockerfile"])||Yp(n,["dockerFile"]);o&&o.type==="string"&&this._tryAddDocumentLinkToBucket(i,o.offset+1,o.offset+o.length-1,kt(this.cliHost,r),e)}async _linksForDockerCompose(e,r,n,i){let s=(await $r(this.cliHost,r)).map(c=>Gu.Uri.file(c).path),a=Yp(n,["dockerComposeFile"]);if(s.length>0&&a)if(a.type==="array"&&a.children)for(let c=0;c<a.children.length;c++)this._tryAddDocumentLinkToBucket(i,a.children[c].offset+1,a.children[c].offset+a.children[c].length-1,i.uri.with({path:s[c]}),e);else a.type==="string"&&this._tryAddDocumentLinkToBucket(i,a.offset+1,a.offset+a.length-1,i.uri.with({path:s[0]}),e)}};var N=k(require("vscode")),wa=k(require("path"));var M9="Stop Container",$9="Reopen Folder locally",U9="Close Workspace",Yo;(function(i){i.Placeholder="Placeholder",i.Group="Group",i.Container="Container",i.Folder="Folder"})(Yo||(Yo={}));var Wt=class{static isGroupItem(e){return!!e&&e.type===Yo.Group}static isContainerItem(e){return!!e&&e.type===Yo.Container}static isFolderItem(e){return!!e&&e.type===Yo.Folder}},qd;(function(n){n[n.DevContainers=0]="DevContainers",n[n.AttachContainers=1]="AttachContainers",n[n.OtherContainers=2]="OtherContainers"})(qd||(qd={}));var tI=class extends Wt{constructor(e,r){super();this.label=e;this.groupType=r;this.type=Yo.Group}async asTreeItem(e,r,n,i){return new N.TreeItem(this.label,N.TreeItemCollapsibleState.Expanded)}},jn=class extends Wt{constructor(e,r=[],n,i=!1){super();this.container=e;this.folders=r;this.parent=n;this.isDevContainer=i;this.type=Yo.Container;this._alreadyCheckedRepository=!1}async asTreeItem(e,r,n,i){let o=new N.TreeItem(this.getContainerLabel(),this.getCollapsibleState());o.description=this.containerDescription;let s=this.getContextBase();o.iconPath=Qy(r,Lye),o.contextValue="exited"+s;let a=!1;return n&&this.container.Id===n.Id?(o.iconPath=Qy(r,Nye),o.contextValue="active"+s,a=!0):e&&await this.setTreeItemIconAndContext(e,s,o),o.tooltip=this.getHover(a,o.iconPath instanceof N.ThemeIcon?o.iconPath:new N.ThemeIcon("vm"),o.label),this.folders.length===1&&(o.contextValue+="Folder"),o}getContextBase(){return(this.isDevContainer?"Dev":"")+"Container"}getCollapsibleState(){return this.folders.length>1?N.TreeItemCollapsibleState.Expanded:N.TreeItemCollapsibleState.None}async setTreeItemIconAndContext(e,r,n){switch(this.container.State.Status){case"created":{n.iconPath=new N.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"paused":{n.iconPath=new N.ThemeIcon("vm-outline"),n.contextValue="running"+r;break}case"restarting":{n.iconPath=new N.ThemeIcon("vm-outline"),n.contextValue="exited"+r;break}case"exited":{n.iconPath=new N.ThemeIcon("vm"),n.contextValue="exited"+r;break}case"running":{n.iconPath=new N.ThemeIcon("vm-running"),n.contextValue="running"+r;break}}}getTimeElapsed(e){if(!e)return"";let r="",n=e.State.Status,i=new Date(e.State.StartedAt),o=new Date(e.State.FinishedAt);if(i.getFullYear()>1&&o.getFullYear()>1){let s=new Date,a=new Date(i>o?e.State.StartedAt:e.State.FinishedAt),c,u,l=s.getTime()-a.getTime();(u=Math.round(l/jn.years))>0?u===1?c="year":c="years":(u=Math.round(l/jn.days))>0?u===1?c="day":c="days":(u=Math.round(l/jn.hours))>0?u===1?c="hour":c="hours":(u=Math.round(l/jn.minutes))>0?u===1?c="minute":c="minutes":(u=Math.round(l/jn.seconds),u===1?c="second":c="seconds"),r=` ${u} ${c}`+(n.endsWith("ing")?"":" ago")}return`${n.charAt(0).toUpperCase()+n.slice(1)}`+r}getContainerLabel(){if(Sc(this.container)&&this.folders.length>0)return`${wa.basename(this.folders[0].folder.path)}`;{let r=v_(this.container);if(r)return r;let n=this.repository;return n?n.repositoryName:this.container.Config.Image}}get containerDescription(){return this.container.Name.substr(1)}getHover(e,r,n){let i=new N.MarkdownString(void 0,!0);if(i.appendMarkdown(`$(${r.id}) ${n} (${this.container.Name.substr(1)})  
`),this.repository){let s=this.repository.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)";i.appendMarkdown(`${s} [${this.repository.fullRepositoryName}](${this.repository.gitUrlInfo.repositoryUrl})  
`)}let o=Rm(this.container);return o&&i.appendMarkdown(`$(file-symlink-directory) ${o}  
`),e?i.appendMarkdown("$(remote) Connected"):i.appendMarkdown(`$(history) ${this.getTimeElapsed(this.container)}`),i}get repository(){if(!this._alreadyCheckedRepository){let e=Ts(this.container);e&&(this._repository=Ur(e)),this._alreadyCheckedRepository=!0}return this._repository}inspect(e){return Ft(e,this.container.Id)}},wr=jn;wr.seconds=1e3,wr.minutes=jn.seconds*60,wr.hours=jn.minutes*60,wr.days=jn.hours*24,wr.years=jn.days*365;var Ea=class extends Wt{constructor(e,r,n){super();this.container=e;this.folder=r;this.isDevContainer=n;this.type=Yo.Folder}async asTreeItem(e,r,n,i){let o=new N.TreeItem(wa.basename(this.folder.path),N.TreeItemCollapsibleState.None);return o.description=this.folder.path,o.iconPath=Qy(r,qye),o.contextValue="attachedFolder",this.isDevContainer&&!Ts(this.container)&&(o.contextValue="devFolder"),n&&this.container.Id===n.Id&&i===this.folder.path&&(o.iconPath=Qy(r,Fye),o.tooltip=`Active Folder ${o.label}`,o.contextValue=`active${o.contextValue}`),o}};function Dye(t,e,r,n){if(!(!N.env.remoteName||N.env.remoteName!=="attached-container"&&N.env.remoteName!=="dev-container"))return j9(t,e,r,n)}function j9(t,e,r,n){N.commands.executeCommand("setContext","remote-containers:showDetails",!0);let i=new K9(e,n,e.output),o=N.window.createTreeView("detailsContainers",{treeDataProvider:i});return i.setTitle=s=>{o.title=s},t.subscriptions.push(r.onDidChangeActiveContainer(s=>i.refresh(s))),i}function Oye(t,e){let r=[M9];return t&&t.Id===e.Id&&N.workspace.workspaceFolders&&N.workspace.workspaceFolders.length>0&&(r.push(U9),N.workspace.workspaceFolders[0].uri.authority.startsWith("dev-container")&&r.push($9)),r}var H9=class{constructor(e,r){this.dockerParams=e;this.containerId=r;this.writeEmitter=new N.EventEmitter;this.onDidWrite=this.writeEmitter.event;this.destroyables=[]}open(){let{cliHost:e,env:r,output:n}=this.dockerParams;e.exec({cmd:Go(),args:["logs","-f",this.containerId],env:r,output:n}).then(i=>{this.destroyables.push(i.stdout.on("data",o=>{this.write(o.toString())})),this.destroyables.push(i.stderr.on("data",o=>{this.write(o.toString())}))}).catch(console.error)}close(){this.writeEmitter.dispose(),this.destroyables.forEach(e=>{e.destroy()})}write(e){this.writeEmitter.fire(e.replace(/\n/g,`\r
`))}},B9=class{constructor(e,r,n,i,o,s){this.targetsTreeData=e;this.detailsTreeData=r;this.devVolumesTreeData=n;this.dockerParams=i;this.context=o;this.telemetry=s}updateDockerParameters(e){this.dockerParams=e}registerCommands(){let e=[];return e.push(N.commands.registerCommand("remote-containers.stopContainer",this.commandStopContainer,this)),e.push(N.commands.registerCommand("remote-containers.removeContainer",this.commandRemoveContainer,this)),e.push(N.commands.registerCommand("remote-containers.startContainer",this.commandStartContainer,this)),e.push(N.commands.registerCommand("remote-containers.removeRecentFolder",this.commandRemoveRecentFolder,this)),e.push(N.commands.registerCommand("remote-containers.showDetails",this.commandShowDetails,this)),e.push(N.commands.registerCommand("remote-containers.explorerTargetsRefresh",async()=>(await this.targetsTreeData.getDockerParams(!0),this.targetsTreeData.refresh(void 0)),this)),e.push(N.commands.registerCommand("remote-containers.explorerDetailsRefresh",this.commandExplorerDetailsRefresh,this)),e.push(N.commands.registerCommand("remote-containers.attachToContainer",this.commandAttachToContainer,this)),e.push(N.commands.registerCommand("remote-containers.attachToContainerNewWindow",this.commandAttachToContainerNewWindow,this)),e.push(N.commands.registerCommand("remote-containers.inspectDockerResource",this.commandInspectDockerResource,this)),e.push(N.commands.registerCommand("remote-containers.inspectInBasicDevContainer",this.commandInspectInBasicDevContainer,this)),e.push(N.commands.registerCommand("remote-containers.cloneInVolume",this.commandCloneInVolume,this)),e.push(N.commands.registerCommand("remote-containers.removeVolume",this.commandRemoveVolume,this)),e.push(N.commands.registerCommand("remote-containers.pruneVolumes",this.commandPruneVolumes,this)),e.push(N.commands.registerCommand("remote-containers.explorerVolumesRefresh",this.commandExplorerVolumesRefresh,this)),e.push(N.commands.registerCommand("remote-containers.startAndOpenFolder",this.commandStartAndOpenFolder,this)),e.push(N.commands.registerCommand("remote-containers.newContainer",this.commandNewContainer,this)),e.push(N.commands.registerCommand("remote-containers.showContainerLog",this.commandShowContainerLog,this)),e}async commandStopContainer(e){if(!Wt.isContainerItem(e))return;let r=this.targetsTreeData.currentContainer&&this.targetsTreeData.currentContainer.Id===e.container.Id?"Stop active container? This will disconnect your current window.":`Stop ${e.getContainerLabel()}?`,n=await N.window.showWarningMessage(r,{modal:!0},...Oye(this.targetsTreeData.currentContainer,e.container));await this.targetsTreeData.withProgress(e,async()=>{switch(n){case M9:{await aP(this.dockerParams,e.container),e.container=await Ft(this.dockerParams,e.container.Id);break}case U9:{await N.commands.executeCommand("workbench.action.closeFolder");break}case $9:{await N.commands.executeCommand("remote-containers.reopenLocally");break}}})}async commandRemoveContainer(e){if(!Wt.isContainerItem(e))return;let r=await Jn(this.dockerParams,e.container.Id);if(!r)return;let n=await N.window.showWarningMessage("Remove this container?",{modal:!0,detail:"This action is not reversible and deletes the container permanently."},"Remove");await this.targetsTreeData.withProgress(e.parent,async()=>{n==="Remove"&&(await aP(this.dockerParams,e.container),await OW(this.dockerParams,r.Id),this.detailsTreeData&&await this.detailsTreeData.refresh(void 0),await this.tryRemoveVolume(e.container))})}async tryRemoveVolume(e){let r=Rm(e);if(r||(r=kq(e)),r){let n=await Kh(this.dockerParams,r);if((await zE(this.dockerParams)).indexOf(r)>=0){let s;(n==null?void 0:n.Labels)&&n.Labels["vsch.local.repository.unique"]==="true"?s="The container is using a volume with a cloned repository.":s=`This is the last container using '${r}'.`,await N.window.showInformationMessage(s,{modal:!0,detail:"Do you want to remove the volume and the data it contains?"},"Remove")==="Remove"&&await cP(this.dockerParams,r)}}}async commandPruneVolumes(e){let r="Are you sure you want to remove all unused volumes?";await N.window.showInformationMessage(r,{modal:!0},"Remove")==="Remove"&&await this.targetsTreeData.withProgress(e,async()=>{await aF(this.dockerParams)})}async commandExplorerVolumesRefresh(e){return await this.devVolumesTreeData.getDockerParams(),this.devVolumesTreeData.refresh(void 0)}async commandStartContainer(e){!Wt.isContainerItem(e)||await this.targetsTreeData.withProgress(e,async()=>{await Sy(this.dockerParams,e.container),e.container=await Ft(this.dockerParams,e.container.Id)})}async commandRemoveRecentFolder(e){!Wt.isFolderItem(e)||(await N.commands.executeCommand("vscode.removeFromRecentlyOpened",e.folder.toString()),await this.targetsTreeData.refresh(void 0))}async commandShowDetails(e){!Wt.isContainerItem(e)||(this.detailsTreeData||(this.detailsTreeData=j9(this.context,this.dockerParams,this.targetsTreeData,this.telemetry)),await this.detailsTreeData.refresh(e))}async commandExplorerDetailsRefresh(){this.detailsTreeData&&await this.detailsTreeData.refresh(void 0)}async commandStartAndOpenFolder(e){let r,n;Wt.isFolderItem(e)?(n=e,r=e.container):wr.isContainerItem(e)&&(n=e.folders[0],r=e.container),r&&(await Sy(this.dockerParams,r),await N.commands.executeCommand("remote-containers.openFolder",n))}async commandAttachToContainer(e){return this.attachToContainerInternal(e)}async commandAttachToContainerNewWindow(e){return this.attachToContainerInternal(e,!0)}async attachToContainerInternal(e,r=!1){let n;Wt.isContainerItem(e)?n=e.container:this.detailsTreeData&&(n=this.detailsTreeData.container),n&&(await Sy(this.dockerParams,n),await Jy(this.dockerParams,n,this.context,r))}async commandInspectDockerResource(e){let r;(Wt.isContainerItem(e)||Xo.isImageItem(e)||Xo.isVolume(e)||Xo.isDevVolume(e))&&(r=await e.inspect(this.dockerParams)),r&&N.window.showTextDocument(await N.workspace.openTextDocument({language:"json",content:JSON.stringify(r,null,"	")}))}async commandInspectInBasicDevContainer(e){Xo.isDevVolume(e)&&await e.inspectInBasicDevContainer()}async commandCloneInVolume(e){Xo.isDevVolume(e)&&await e.cloneRepositoryInVolume()}async commandRemoveVolume(e){Xo.isDevVolume(e)&&await e.removeVolume(this.dockerParams)}async commandNewContainer(){let e=[{label:"Open Current Folder in Container",command:"remote-containers.reopenInContainer"},{label:"Open Folder in Container...",command:"remote-containers.openFolder"},{label:"Open Workspace in Container...",command:"remote-containers.openWorkspace"},{label:"Clone Repository in Container Volume...",command:"remote-containers.openRepositoryInVolume"},{label:"Clone GitHub Pull Request in Container Volume...",command:"remote-containers.openPullRequestInVolume"},{label:"Try a Sample...",command:"remote-containers.trySample"}],r=await N.window.showQuickPick(e,{placeHolder:"Select an action to create a container"});if(r)return N.commands.executeCommand(r.command)}async commandShowContainerLog(e){if(!Wt.isContainerItem(e))return;let r=new H9(this.dockerParams,e.container.Id);N.window.createTerminal({name:e.container.Config.Image,pty:r}).show()}};async function V9(t,e,r,n){N.commands.executeCommand("setContext","remote-containers:showDetails",!1);let i=await Oe(n),o=new G9(t,e,f,r,n),s=N.window.createTreeView("targetsContainers",{treeDataProvider:o});o.setMessage=d=>s.message=d;let a=Dye(t,i,o,r),c=new X9(t,r,n),u=N.window.createTreeView("devVolumes",{treeDataProvider:c});t.subscriptions.push(u);let l=new B9(o,a,c,i,t,r);t.subscriptions.push(...l.registerCommands());function f(){let d=AW();t.subscriptions.push(d),t.subscriptions.push(d.event(async()=>{o.refresh(void 0),c.refresh(void 0);let p=await Oe(n);a&&a.updateDockerParameters(p),l.updateDockerParameters(p)}))}}var G9=class{constructor(e,r,n,i,o){this.context=e;this.resolverResults=r;this.onFirstReveal=n;this.telemetry=i;this.output=o;this._onDidChangeTreeData=new N.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this._onDidChangeActiveContainer=new N.EventEmitter;this.onDidChangeActiveContainer=this._onDidChangeActiveContainer.event;this.refreshDockerParams=!1;this.needsSSHCredentials=!1;this.setTreeMessage=()=>{};this.devContainers=[];this.attachContainers=[];this.otherContainers=[];this.recentAttachEntries=new Map;this.recentAttachDevContainerEntries=new Map;this.recentDevComposeEntries=new Map;this.containerItems=new Map;this.action=Promise.resolve();this.needsDockerStartOrInstallContext=void 0;this.hasContainersContext=void 0}set setMessage(e){this.setTreeMessage=e}get currentContainer(){return this._currentContainer}async getDockerParams(e=!1){return this.dockerParams||(this.passiveSSHAskpassEnv||(this.passiveSSHAskpassEnv=zn(this.context.extensionPath,async r=>(this.needsSSHCredentials=!0,Vi(r,!1)))),this.dockerParams=await Oe(this.output,void 0,void 0,e?void 0:this.passiveSSHAskpassEnv),await Ld(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;let n="exec_create: /root/.vscode-server";if(r.Action==="die"||r.Action==="destroy"||r.Action==="create")this._onDidChangeTreeData.fire();else if(!r.Action.startsWith("exec_create")&&r.Actor&&r.Actor.ID&&this.containerItems.has(r.Actor.ID)){let i=this.containerItems.get(r.Actor.ID);this.dockerParams&&i?(async()=>{i.container=await Ft(this.dockerParams,i.container.Id),this._onDidChangeTreeData.fire(i)})():this._onDidChangeTreeData.fire(i);return}else if(r.Action.startsWith(n)){this._onDidChangeTreeData.fire();return}}catch(r){}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await jl(e,{event:["create","destroy","die","health-status","kill","pause","rename","resize","restart","start","stop","unpause","update","exec_create"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async getTreeItem(e){return e.asTreeItem(this.dockerParams,this.context,this._currentContainer,this.currentFolder)}async setDockerStartOrInstallContext(e){(this.needsDockerStartOrInstallContext===void 0||this.needsDockerStartOrInstallContext!==e)&&(this.needsDockerStartOrInstallContext=e,!this.needsDockerStartOrInstallContext&&this.hasContainersContext===!1&&this.setHasContainersContext(!0),await N.commands.executeCommand("setContext","remote-containers:needsDockerStartOrInstall",!this.needsDockerStartOrInstallContext&&!this.needsSSHCredentials),await N.commands.executeCommand("setContext","remote-containers:needsSSHCredentials",!this.needsDockerStartOrInstallContext&&this.needsSSHCredentials))}async setHasContainersContext(e){if(this.hasContainersContext===void 0||this.hasContainersContext!==e){this.hasContainersContext=e;let r=N.workspace.workspaceFolders&&N.workspace.workspaceFolders.length>0?"remote-containers:noContainersWithFolder":"remote-containers:noContainersWithoutFolder";await N.commands.executeCommand("setContext",r,!this.hasContainersContext)}}async getDockerOrShowMessage(e){return this.refreshDockerParams&&(this.refreshDockerParams=!1,this.dockerParams=void 0),!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams)?(this.setDockerStartOrInstallContext(!1),this._onDidChangeActiveContainer.fire(void 0),!1):(this.setDockerStartOrInstallContext(!0),!0)}async getChildGroups(e){this.containerItems.clear(),await this.setCurrents(),await this.setContainerTypes(e);let r=[];return(this.devContainers.length>0||this.attachContainers.length>0)&&r.push(new tI("Dev Containers",0)),this.otherContainers.length>0&&r.push(new tI("Other Containers",2)),r}async getChildDevContainer(e,r){let n=await this.getWorkspaceFolderFromContainer(e),i=n?[new Ea(e,n,!0)]:[],o=Sc(e);o&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new Ea(e,a,!1))):o&&this.recentAttachEntries.has(e.Id)?i.push(...this.recentAttachEntries.get(e.Id).map(a=>new Ea(e,a,!1))):(o=Ts(e))&&this.recentAttachDevContainerEntries.has(o)?i.push(...this.recentAttachDevContainerEntries.get(o).map(a=>new Ea(e,a,!1))):o===void 0&&this.recentDevComposeEntries.has(e.Id)&&i.push(...this.recentDevComposeEntries.get(e.Id).map(a=>new Ea(e,a,!1)));let s=new wr(e,i,r,!0);return this.setContainerItems(s),s}setContainerItems(e){this.containerItems.set(e.container.Id,e),this._currentContainer&&e.container.Id===this._currentContainer.Id&&this._onDidChangeActiveContainer.fire(e)}async getChildContainers(e){if(e.groupType===0){let r=this.devContainers.map(async n=>this.getChildDevContainer(n,e));return r.push(...this.attachContainers.map(async n=>{let i=new wr(n,this.recentAttachEntries.get(n.Id).map(o=>new Ea(n,o,!1)),e);return this.setContainerItems(i),i})),Promise.all(r)}else return this.otherContainers.map(r=>{let n=new wr(r,[],e);return this.setContainerItems(n),n})}getChildFolders(e){return e.folders&&e.folders.length>1?e.folders:[]}async getChildItems(e){if(e===void 0){let r=await Ei(this.dockerParams,!0);if(await this.setHasContainersContext(r.length>0),r.length===0)return[];let n=await yo(this.dockerParams,r);return this.getChildGroups(n)}else{if(Wt.isGroupItem(e))return this.getChildContainers(e);if(Wt.isContainerItem(e))return this.getChildFolders(e)}return[]}async getChildren(e){return this.onFirstReveal&&(this.onFirstReveal(),this.onFirstReveal=void 0),await this.action,await this.getDockerOrShowMessage(e)?(this.setTreeMessage(void 0),this.getChildItems(e)):[]}async refresh(e){e===void 0&&(this.refreshDockerParams=!0),this._onDidChangeTreeData.fire(e)}async setCurrents(){let e=N.workspace.workspaceFolders,r;if(this.dockerParams){if(e&&e.length>0){let n=this.resolverResults.get(e[0].uri.authority);n&&n.dockerContainerId&&(r=await Jn(this.dockerParams,n.dockerContainerId),this.currentFolder=e[0].uri.path)}else if(this.resolverResults.size>0){let n=[...this.resolverResults.values()][0].dockerContainerId;n&&(r=await Jn(this.dockerParams,n))}}r!==this._currentContainer&&(this._currentContainer=r)}addContainerToMap(e){if(Sc(e)){this.devContainers.push(e);return}else if(Ts(e)){this.devContainers.push(e);return}else if(v_(e)&&this.recentDevComposeEntries.has(e.Id)){this.devContainers.push(e);return}else if(this.recentAttachEntries.has(e.Id)){this.attachContainers.push(e);return}this.otherContainers.push(e)}async setContainerTypes(e){return await this.setRecentEntries(e),this.devContainers.length=0,this.attachContainers.length=0,this.otherContainers.length=0,e.forEach(r=>{this.addContainerToMap(r)}),{hasDev:this.devContainers.length>0,hasAttach:this.attachContainers.length>0}}async getWorkspaceFolderFromHostWorkspace(e){let r=await Jr(e,vn,this.output),n=be(r.path,e),i=await In(r,n,oi()),o=i&&await bo(r,n,i,this.output)||void 0;if(o&&Xe(o.config))return N.Uri.parse(cf(e,o.workspaceConfig.workspaceFolder,void 0),!0)}async getWorkspaceFolderFromContainer(e){let r=Sc(e);if(r)return this.getWorkspaceFolderFromHostWorkspace(r);{let n=Ts(e),i=Rm(e),o=Dq(e);if(n)return N.Uri.parse(ks(n,i,o,!1,void 0,void 0))}}async getWorkspaceFolderFromHostPath(e){let r=this.dockerParams.cliHost,n=await L_(r,e,this.output),i=Hq(r,n,e);return N.Uri.parse(cf(e,i,void 0),!0)}getWorkspaceFolderFromRepository(e,r,n){return N.Uri.parse(ks(e,r,n,!1,void 0,void 0),!0)}async findComposeTargetContainer(e,r){if(!this.dockerParams)return;let n=be(this.dockerParams.cliHost.path,e),i=await In(this.dockerParams.cliHost,n,oi()),o=i&&await bo(this.dockerParams.cliHost,n,i,this.output);if(o&&"dockerComposeFile"in o.config){let s=await $r(this.dockerParams.cliHost,o.config),a=await rf(this.dockerParams,n,s);return lq(r,a,o.config.service)}}trySetEntryWithAttachAuthority(e,r,n){let i;if("containerName"in r){let o=n.find(s=>s.Name===r.containerName);o&&(i=o.Id)}else i=r.containerId;i&&(this.recentAttachEntries.has(i)?this.recentAttachEntries.get(i).push(e):this.recentAttachEntries.set(i,[e]))}async trySetEntryWithDevAuthority(e,r,n,i){let o=r.hostPath,s=i[o];if(s||(s=await this.getWorkspaceFolderFromHostPath(r.hostPath),i[o]=s),s.path!==e.path){this.recentAttachDevContainerEntries.has(r.hostPath)?this.recentAttachDevContainerEntries.get(r.hostPath).push(e):this.recentAttachDevContainerEntries.set(r.hostPath,[e]);let a=await this.findComposeTargetContainer(r.hostPath,n);a&&this.recentDevComposeEntries.has(a)?this.recentDevComposeEntries.get(a).push(e):a&&this.recentDevComposeEntries.set(a,[e])}}trySetEntryWithRepoAuthority(e,r){this.getWorkspaceFolderFromRepository(r.repositoryPath,r.volumeName,r.folder).path!==e.path&&(this.recentAttachDevContainerEntries.has(r.repositoryPath)?this.recentAttachDevContainerEntries.get(r.repositoryPath).push(e):this.recentAttachDevContainerEntries.set(r.repositoryPath,[e]))}trySetEntryWithVolumeAuthority(e,r){let n=r.volumeName;!n||(this.recentAttachEntries.has(n)?this.recentAttachEntries.get(n).push(e):this.recentAttachEntries.set(n,[e]))}async trySetEntry(e,r,n){var s;if(!e||!e.folderUri&&!e.workspace.configPath)return;let i=(s=e.folderUri)!=null?s:e.workspace.configPath,o=Lm(i.authority);if(o)this.trySetEntryWithAttachAuthority(i,o,r);else{let a=An(i.authority);a&&(er(a)?await this.trySetEntryWithDevAuthority(i,a,r,n):sn(a)?this.trySetEntryWithRepoAuthority(i,a):this.trySetEntryWithVolumeAuthority(i,a))}}async setRecentEntries(e){this.recentAttachEntries.clear(),this.recentAttachDevContainerEntries.clear(),this.recentDevComposeEntries.clear();let r=await N.commands.executeCommand("_workbench.getRecentlyOpened");if(r&&r.workspaces){let n={};for(let i of r.workspaces)await this.trySetEntry(i,e,n)}}withProgress(e,r){return this.action=this.action.then(()=>r()),this.refresh(e)}},Un;(function(s){s.Default="Default",s.Title="Title",s.Image="Image",s.Port="Port",s.Volume="Volume",s.DevVolume="DevVolume"})(Un||(Un={}));var Xo=class{constructor(e){this.label=e;this.type=Un.Default}static isDetailItem(e){return!!e&&e.label!==void 0&&e.type!==void 0}static isImageItem(e){return!!e&&e.type===Un.Image}static isVolume(e){return!!e&&e.type===Un.Volume}static isDevVolume(e){return!!e&&e.type===Un.DevVolume}},W9=class{constructor(e){this.detail=e;this.type=Un.Image;this.context="image";this.label="Image"}inspect(e){return Ss(e,this.detail)}},z9=class{constructor(e,r){this.label=e;this.volumeDetails=r;this.type=Un.Volume;this.context="volume"}async inspect(e){return Kh(e,this.volumeDetails)}},K9=class{constructor(e,r,n){this.dockerParams=e;this.telemetry=r;this.output=n;this._onDidChangeTreeData=new N.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;this.setTreeTitle=()=>{}}updateDockerParameters(e){this.dockerParams=e}set setTitle(e){this.setTreeTitle=e}get container(){return this._container?this._container.container:void 0}getTreeItem(e){let r=new N.TreeItem(e.label,Array.isArray(e.detail)&&e.detail.length>0?N.TreeItemCollapsibleState.Expanded:N.TreeItemCollapsibleState.None);return r.tooltip=e.label,e.detail&&!Array.isArray(e.detail)&&(r.description=e.detail,r.tooltip+=` ${r.description}`),r.contextValue=e.context,r.command=e.command,r}async getAttributes(e,r,n){let i=[];r&&i.push({label:"Workspace",detail:r});let o=Ts(e.container);return o&&i.push({label:"Repository",detail:o}),i.push({label:"Name",detail:e.container.Name}),i.push(new W9(e.container.Config.Image)),n&&i.push({label:"Configuration",detail:n,command:{title:"Open Dev Container File",command:"remote-containers.openDevContainerFile",arguments:[n]},context:"devContainer"}),i}async getMounts(e){let r=[];return e&&e.Mounts.forEach(n=>{if(n.Type==="volume"){let i=n.Name,o=new z9(`Volume: ${i}`,i),s={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Volume mount",detail:[o,s]})}else if(n.Type==="bind"){let i={label:`Source: ${n.Source}`,detail:void 0},o={label:`Destination: ${n.Destination}`,detail:void 0};r.push({label:"Bind mount",detail:[i,o]})}}),r}async getChildrenFromRoot(e){let r=[],n=Sc(e.container),i;if(this.dockerParams&&n){let a=await In(this.dockerParams.cliHost,be(this.dockerParams.cliHost.path,n),oi());a&&(i=ce(a,this.dockerParams.cliHost.platform))}r.push({label:"Attributes",detail:await this.getAttributes(e,n,i),type:Un.Title});let o;this.dockerParams&&(o=await Ft(this.dockerParams,e.container.Id));let s=await this.getMounts(o);return s.length>0&&r.push({label:"Mounts",detail:s,type:Un.Title}),r}async testContainer(){let e=!0;try{(this.dockerParams?await Ft(this.dockerParams,this._container.container.Id):void 0)===void 0&&(e=!1)}catch(r){e=!1}return e||(this._container=void 0,this.setTreeTitle("Details (Containers)")),e}async getChildren(e){if(this._container===void 0)return[];let r=[];return e===void 0?await this.testContainer()&&(this.setTreeTitle(this._container.getContainerLabel()),r=await this.getChildrenFromRoot(this._container)):Array.isArray(e.detail)&&r.push(...e.detail),r}async refresh(e){this.dockerParams=await Oe(this.output),await Ld(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0,this._container=void 0),this._container=e||this._container,this._onDidChangeTreeData.fire(void 0)}},Y9=class extends Xo{constructor(e){super(e.Name);this.type=Un.DevVolume;this.volumeDetails=e,this.createdAt=void 0}async asTreeItem(){let e=this.getLabel(),r=new N.TreeItem(e,N.TreeItemCollapsibleState.None);return r.iconPath=this.iconPath,r.description=this.getDescription(),this.isUniqueVolume()?r.contextValue="uniqueDevVolume":r.contextValue="devVolume",r}isUniqueVolume(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true")return!0}return!1}getLabel(){let e=this.volumeDetails.Name;if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();n&&n.gitUrlInfo.repository!=="unknown"&&(e=n.gitUrlInfo.fullRepositoryName)}return e}getDescription(){let e="";if(this.volumeDetails.Labels&&this.isUniqueVolume()){let n=this.getRepository();if(n&&n.gitUrlInfo.repository!=="unknown"){let i=this.getBranchName(),o=this.getPullRequestId();o?e=`#${o}`:i&&(e=`${i}`)}}return e}getBranchName(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.branch"])return e["vsch.local.repository.branch"]}getPullRequestId(){let e=this.volumeDetails.Labels;if(e&&this.isUniqueVolume()&&e["vsch.local.repository.pullRequestId"])return e["vsch.local.repository.pullRequestId"]}getRepository(){let e=this.volumeDetails.Labels;if(e){let r=e["vsch.local.repository.unique"];if(r&&r==="true"){let n=e["vsch.local.repository"];return Ur(n)}}}get iconPath(){return new N.ThemeIcon("file-symlink-directory")}getTimeElapsed(){if(this.createdAt)return this.createdAt;let e="";if(new Date(this.volumeDetails.CreatedAt).getFullYear()>1){let n=new Date,i=new Date(this.volumeDetails.CreatedAt),o,s,a=n.getTime()-i.getTime();(s=Math.round(a/wr.years))>0?s===1?o="year":o="years":(s=Math.round(a/wr.days))>0?s===1?o="day":o="days":(s=Math.round(a/wr.hours))>0?s===1?o="hour":o="hours":(s=Math.round(a/wr.minutes))>0?s===1?o="minute":o="minutes":(s=Math.round(a/wr.seconds),s===1?o="second":o="seconds"),e=` ${s} ${o} ago`}return this.createdAt=e,e}async inspect(e){return Kh(e,this.volumeDetails.Name)}async inspectInBasicDevContainer(){await N.commands.executeCommand("remote-containers.inspectVolume",this.volumeDetails.Name)}async cloneRepositoryInVolume(){await N.commands.executeCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",this.volumeDetails.Name)}async removeVolume(e){if(!((await zE(e)).indexOf(this.volumeDetails.Name)>=0)){await N.window.showInformationMessage(`Volume '${this.volumeDetails.Name}' is in use and cannot be removed.`,{modal:!0});return}await N.window.showInformationMessage(`Are you sure you want to remove volume '${this.volumeDetails.Name}'?`,{modal:!0},"Remove")==="Remove"&&await cP(e,this.volumeDetails.Name)}},X9=class{constructor(e,r,n){this.telemetry=r;this.output=n;this._onDidChangeTreeData=new N.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event}async getTreeItem(e){return e.asTreeItem()}async getDockerParams(){return this.dockerParams||(this.dockerParams=await Oe(this.output,void 0,void 0),await Ld(this.dockerParams,this.telemetry)!==!0&&(this.dockerParams=void 0)),this.dockerParams}async setHasVolumesContext(e){await N.commands.executeCommand("setContext","remote-containers:noDevVolumes",e)}async getDockerOrShowMessage(e){return!(!this.dockerParams&&(e===void 0&&await this.tryEnsureDocker(),!this.dockerParams))}async getChildren(e){if(!await this.getDockerOrShowMessage(e))return[];let r=await Oe(this.output),n=await Co(r),i=await Ul(r,n),o=a=>!(a.Name==="vscode"||a.Name.length===64&&/^[0-9a-fA-F]+$/.test(a.Name)),s=i.filter(o);return await this.setHasVolumesContext(s.length===0),s.sort((a,c)=>{let u=new Date(a.CreatedAt);return new Date(c.CreatedAt).getTime()-u.getTime()}),s.map(a=>new Y9(a))}async resolveTreeItem(e,r){let n=await Oe(this.output),i=await this.getAssociatedContainers(n,r),o=r.getLabel(),s=r.getRepository(),a=r.getBranchName(),c=r.getPullRequestId(),u=r.getTimeElapsed();return i.length>0?e.tooltip=this.renderMarkdown(o,s,a,c,u,i.join(", ")):e.tooltip=this.renderMarkdown(o,s,a,c,u,"*None*"),e}async getAssociatedContainers(e,r){let n=[],i=await Ei(e,!0),o=await yo(e,i);for(let s of o)for(let a of s.Mounts)a.Type==="volume"&&a.Name===r.volumeDetails.Name&&n.push(s.Name.substring(1));return n}renderMarkdown(e,r,n,i,o,s){let a=new N.MarkdownString(void 0,!0);if(r){let c=r.gitUrlInfo.repository==="github"?"$(github)":"$(source-control)",u=r.gitUrlInfo.repositoryUrl;u.startsWith("http")?(u=r.gitUrlInfo.repositoryUrl.replace(".git",""),a.appendMarkdown(`${c} [${u}](${u})
`)):a.appendMarkdown(`${c} ${u})
`),a.appendMarkdown(`&nbsp;  
`),n&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-compare) [${n}](${u}/tree/${n})
`):a.appendMarkdown(`$(git-compare) ${n}
`),a.appendMarkdown(`&nbsp;  
`)),i&&(r.gitUrlInfo.repository==="github"?a.appendMarkdown(`$(git-pull-request-create) [#${i}](${u}/pull/${i})
`):a.appendMarkdown(`$(git-pull-request-create) #${i}
`),a.appendMarkdown(`&nbsp;  
`)),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`)}else a.appendMarkdown(`$(file-symlink-directory) ${e}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(history) ${o}
`),a.appendMarkdown(`&nbsp;  
`),a.appendMarkdown(`$(vm) ${s}`);return a}handleDockerEvent(e){try{let r=JSON.parse(e.toString());if(!r.Action)return;(r.Action==="die"||r.Action==="destroy"||r.Action==="create"||r.Action==="prune")&&this._onDidChangeTreeData.fire()}catch(r){}}async tryEnsureDocker(){let e=await this.getDockerParams();if(!!e)try{this.eventsProcess&&this.eventsProcess.terminate(),this.eventsProcess=await jl(e,{event:["destroy","die","kill","create","rename","resize","restart","start","stop","unpause","prune"]}),this.eventsProcess.stdout.on("data",r=>{this.handleDockerEvent(r)})}catch(r){r.code!=="ENOENT"&&console.log(r),this.dockerParams=void 0}}async refresh(e){e===void 0&&(this.dockerParams=void 0),this._onDidChangeTreeData.fire(e)}},Nye="vm-active",Lye="vm-default",Fye="folder-active",qye="folder";function Qy(t,e){let r=`${e}.svg`;return{light:N.Uri.file(t.asAbsolutePath(wa.join("resources","light",r))),dark:N.Uri.file(t.asAbsolutePath(wa.join("resources","dark",r))),highContrast:N.Uri.file(t.asAbsolutePath(wa.join("resources","highContrast",r)))}}var nI=k(require("util"));var Qo=k(require("vscode"));async function Q9(t,e,r={}){let n=Uw(e[0],e.slice(1),void 0),i=await jw(e[0],e.slice(1),void 0,t.loadNativeModule),o=await Rh({params:t,startedAt:void 0,sharedDataFolderIsLocalCacheFolder:!1,sharedDataFolder:void 0,remoteWorkspaceFolder:"/",containerUser:void 0,containerEnv:{},remoteExec:n,remotePtyExec:i,remoteExecAsRoot:void 0,rootShellServer:void 0}),{hostOrContainerPort:s,remoteEnv:a,serverDownloaded:c}=await po(t,o,r,void 0,void 0);return{params:t,properties:o,config:void 0,resolvedAuthority:{host:xo,port:s,extensionHostEnv:a},tunnelInformation:{},dockerParams:void 0,dockerContainerId:void 0,serverDownloaded:c}}async function J9(t,e,r){var n,i,o;if(!!await Wo(t)&&r&&r.name){let s=["get","pod",r.name,"-o","json"];r.namespace&&s.push("--namespace",r.namespace);let{cliHost:a,env:c,output:u}=e,l=(await J({exec:a.exec,cmd:"kubectl",args:["config","current-context"],env:c,output:u})).stdout.toString().trim(),f=await J({exec:a.exec,cmd:"kubectl",args:s,env:c,output:u}),d=JSON.parse(f.stdout.toString()),p=((n=d.spec)==null?void 0:n.containers)||[],h=p.length>1?(i=await Qo.window.showQuickPick(p.map(g=>({label:g.name,detail:g.image,container:g})),{placeHolder:"Select container"}))==null?void 0:i.container:p[0];if(h){let g=((o=d.metadata)==null?void 0:o.namespace)||r.namespace,v={remoteAuthority:$ye({context:l,podname:r.name,namespace:g,name:h.name,image:h.image})};/\d$/.test(t.extensionPath)||(v.reuseWindow=!0),await Qo.commands.executeCommand("vscode.newWindow",v)}}}async function Z9(t,e,r,n,i){return await Wo(t)?j(A({},await Mye(t,e,r,n,i)),{isTrusted:!0}):(await Qo.commands.executeCommand("vscode.newWindow",{reuseWindow:!0,remoteAuthority:null}),new Promise(()=>{}))}async function Mye(t,e,r,n,i){return Qo.window.withProgress({location:Qo.ProgressLocation.Notification,title:qu,cancellable:!1},async o=>{try{let s=Uye(r),a=process.cwd(),c=await Jr(a,vn,n.log),u=await Fu({authority:r,extensionContext:t,sessionStart:n.sessionStart,progress:o,cliHost:c,env:c.env,cwd:a,isLocalContainer:!0,telemetry:e,output:n.log,logFilePath:n.logFilePath,allowSystemConfigChange:!1,postCreate:i});u.setWorkspaceName(`${s.name} in ${s.podname} (${s.image})`);let l=["kubectl","exec","-it",s.podname];return s.context&&l.push("--context",s.context),s.namespace&&l.push("--namespace",s.namespace),l.push("--container",s.name,"--"),await Q9(u,l)}catch(s){let a=s instanceof H?s:new H({description:"An error occurred attaching to the container.",originalError:s});throw a.actions=[...Ac,Os,Io,Ic,Ds],a}}).then(o=>(Gi(e,"k8s-container","success",void 0,o.properties),o),o=>{let s=o instanceof H?o:new H({description:"An error occurred attaching to the container.",originalError:o});return Gi(e,"k8s-container","failure",void 0,s.containerProperties,s),Ao(s,"k8s-container",e,!0,n)})}function $ye(t){let e=[];for(let r in t){let n=t[r];n&&e.push(`${r}=${encodeURIComponent(n)}`)}return`k8s-container+${e.join("+")}`}function Uye(t){return t.substr(t.indexOf("+")+1).split("+").reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=decodeURIComponent(r.substr(n+1))),e},{})}var et=k(require("vscode")),Zy=k(require("fs")),Md=k(require("os")),$d=k(require("path")),rI=k(require("child_process")),Ud=k(require("util"));function eC(t){switch(t.quality){case"stable":return"";case"insider":return"-insiders";default:return`-${t.quality}`}}async function e8(t,e){var c;let r=t.globalStorageUri,n=_n.joinPath(r,"cli-bin");await et.workspace.fs.createDirectory(n);let i="";try{i=(await et.workspace.fs.readFile(_n.joinPath(n,"remote-containers-path"))).toString()}catch(u){if((u==null?void 0:u.code)!=="FileNotFound")return}if(i===t.extensionPath)return;let o=_n.joinPath(t.extensionUri,"dev-containers-user-cli","bin"),s=eC(e),a=[{source:"devcontainer",destination:`devcontainer${s}`},{source:"devcontainer.cmd",destination:`devcontainer${s}.cmd`}];for(let u of a)et.workspace.fs.copy(_n.joinPath(o,u.source),_n.joinPath(n,u.destination),{overwrite:!0});await et.workspace.fs.writeFile(_n.joinPath(n,"vscode-app-root"),Buffer.from(et.env.appRoot,"utf-8")),await et.workspace.fs.writeFile(_n.joinPath(n,"vscode-path"),Buffer.from(process.argv0,"utf-8")),await et.workspace.fs.writeFile(_n.joinPath(n,"vscode-quality"),Buffer.from((c=e.quality)!=null?c:"","utf-8")),await et.workspace.fs.writeFile(_n.joinPath(n,"remote-containers-path"),Buffer.from(t.extensionPath,"utf-8"))}async function jye(t,e){let r=eC(e),n="";try{if(n=(await(0,Ud.promisify)(rI.exec)(`powershell.exe -NoProfile -NonInteractive -Command "[System.Environment]::GetEnvironmentVariable('PATH', 'User')"`)).stdout.toString().trim(),n.indexOf(t)>=0)return await et.window.showInformationMessage("The devcontainer CLI is already in your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0;switch(await et.window.showInformationMessage("The devcontainer CLI needs to be added to your PATH",{modal:!0},"Add","Copy CLI Path")){case"Add":let s=(0,Ud.promisify)(rI.exec)(`powershell.exe  -NoProfile -NonInteractive -Command "[System.Environment]::SetEnvironmentVariable('PATH', '${n};${t}', 'User')`),a=et.window.showInformationMessage("The devcontainer CLI has been added to your PATH",{modal:!0,detail:`Try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});await Promise.all([s,a]);break;case"Copy CLI Path":await et.env.clipboard.writeText(t),await et.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${r} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}catch(i){return!1}}async function Hye(t,e){var s;let n=((s=process.env.PATH)!=null?s:"").split(":"),i=[$d.join(Md.homedir(),"bin"),$d.join(Md.homedir(),".local/bin")],o=(0,Ud.promisify)(Zy.stat);for(let a of i){if(n.findIndex(d=>d===a)<0)continue;try{await o(a)}catch{continue}let c=eC(e),u=$d.join(a,`devcontainer${c}`);try{let d=await o(u);return console.log(d),await et.window.showInformationMessage(`The devcontainer CLI is already symlinked in ${a}`,{modal:!0,detail:`Try running 'devcontainer${c} --help'
Note: you may need to restart your shell for PATH changes to take effect`}),!0}catch(d){if((d==null?void 0:d.code)!=="ENOENT")return!1}let l=await et.window.showInformationMessage("The devcontainer CLI needs to be in your PATH",{detail:`Create a symlink in ${a}?`,modal:!0},"Create","Copy CLI Path"),f=$d.join(t,`devcontainer${c}`);switch(l){case"Create":await(0,Ud.promisify)(Zy.symlink)(f,u),await et.window.showInformationMessage(`The devcontainer CLI has been symlinked in ${a}`,{modal:!0,detail:`Try running 'devcontainer${c} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break;case"Copy CLI Path":await et.env.clipboard.writeText(t),await et.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${c} --help'
Note: you may need to restart your shell for PATH changes to take effect`});break}return!0}return!1}async function t8(t,e){let r=t.globalStorageUri,n=_n.joinPath(r,"cli-bin").fsPath;switch(Md.platform()){case"win32":if(await jye(n,e))return;break;case"darwin":case"linux":if(await Hye(n,e))return;break}if(await et.window.showInformationMessage("The devcontainer CLI needs to be included your PATH",{modal:!0},"Copy CLI Path")==="Copy CLI Path"){await et.env.clipboard.writeText(n);let o=eC(e);await et.window.showInformationMessage("The devcontainer CLI path has been copied to the clipboard",{modal:!0,detail:`After adding to your PATH, try running 'devcontainer${o} --help'
Note: you may need to restart your shell for PATH changes to take effect`})}}var o8=class{constructor(e,r){this.telemetry=r,this.output=e}handleUri(e){switch(e.path){case"/cloneInVolume":this.cloneInVolume(e)}}async cloneInVolume(e){let r=i8.parse(e.query);if(!r.url){b.window.showErrorMessage(`Failed to handle the URI '${e}' expected a 'url' query parameter.`,{modal:!0});return}let n;Array.isArray(r.url)?n=r.url[0]:n=r.url;let i=await Oe(this.output.log);if(!!await Or(i,await this.telemetry)){if(!await Bw(i.cliHost,n,this.output.log)){await b.window.showErrorMessage(`Cannot access the repository '${n}'.`,{modal:!0});return}await b.commands.executeCommand(Cy,r.url)}}};async function Vye(t){let e=new Date;VW(t);let r=await mE(t.extensionPath),n=await gE(b.env.appRoot),i=HW(t,r,n),o=`Remote-Containers ${r.version} in VS Code ${b.version} (${n.commit||"out-of-source"}).`,s=new by(t.logPath,e,o);t.subscriptions.push(b.commands.registerCommand(Nu,()=>s.show()));let{channel:a,postCreate:c}=jW(s.log,e);t.subscriptions.push(b.commands.registerCommand(rP,()=>a.show())),t.subscriptions.push(b.workspace.registerRemoteAuthorityResolver("dev-container",{resolve:wy(s,c,Dr.results,async(w,x,_)=>p9(t,await i,w,Dr.onRemoveOnShutdownChanged,x,_)),async getCanonicalURI(w){let x=An(w.authority);return x&&er(x)?Mr(x.hostPath)?xl(x.hostPath,s.log):b.Uri.file(x.hostPath):w}}),b.workspace.registerRemoteAuthorityResolver("attached-container",{resolve:wy(s,c,Dr.results,async(w,x,_)=>P9(t,await i,w,x,_))}),b.workspace.registerRemoteAuthorityResolver("k8s-container",{resolve:wy(s,c,Dr.results,async(w,x,_)=>Z9(t,await i,w,x,_))}),b.window.registerUriHandler(new o8(s,i)));let u=await Oe(s.log),l=async(w,x,_)=>{let S=await Oe(s.log);if(!await Or(S,await i))return;let I;if(Wt.isFolderItem(w)?(I=w.folder,_=Yye()):I=w,I.scheme==="vscode-remote")return b.commands.executeCommand("vscode.openFolder",I,_);{let R=be(S.cliHost.path,ce(I,S.cliHost.platform));return rC(t,R,S,await i,x,_)}};t.subscriptions.push(b.commands.registerCommand("remote-containers.openFolder",async(w,x)=>w?l(w,!1,x):u8(t,!0,await i,!1,s.log))),t.subscriptions.push(b.commands.registerCommand("remote-containers.openWorkspace",async(w,x)=>w?l(w,!1,x):u8(t,!1,await i,!1,s.log))),t.subscriptions.push(b.commands.registerCommand(bW,async w=>jd(t,await i,s.log,w))),t.subscriptions.push(b.commands.registerCommand(Cy,async w=>jd(t,await i,s.log,w,an))),t.subscriptions.push(b.commands.registerCommand(SW,async w=>{if(w.url){let x=w.url;return(w==null?void 0:w.ref)&&(x=`${w.url}/tree/${w.ref}`),jd(t,await i,s.log,x,an)}})),t.subscriptions.push(b.commands.registerCommand(PW,async w=>Qye(t,await i,s.log,w,an))),t.subscriptions.push(b.commands.registerCommand("remote-containers.inspectVolume",async(w,x,_)=>f8(w,x,_,await i,s.log))),t.subscriptions.push(b.commands.registerCommand("remote-containers.inspectVolumeFromViewlet",async w=>Jye(w,await i,s.log))),t.subscriptions.push(b.commands.registerCommand("remote-containers.cloneRepositoryInVolumeFromViewlet",async w=>jd(t,await i,s.log,void 0,w))),t.subscriptions.push(b.commands.registerCommand("remote-containers.reopenInContainer",()=>f(!1))),t.subscriptions.push(b.commands.registerCommand("remote-containers.rebuildAndReopenInContainer",()=>f(!0))),t.subscriptions.push(b.commands.registerCommand("remote-containers.rebuildNoCacheAndReopenInContainer",()=>f("rebuildNoCache")));let f=async w=>{if(!await b.workspace.requestWorkspaceTrust({message:Pd}))return;let _=await Oe(s.log);if(!await Or(_,await i))return;let S=b.workspace.workspaceFile;if(S&&S.scheme==="untitled"){await jy();return}let I=b.workspace.workspaceFolders;if(!S&&I&&I.length){let T=I.length>1?await b.window.showWorkspaceFolderPick({placeHolder:"Pick a folder to reopen in a container."}):I[0];T&&(S=T.uri)}let R=await oP(S);if(R){await Hd(t,R.repositoryPath,R.volumeName,R.folder,_);return}if(S){let T=ce(S,_.cliHost.platform),U=be(_.cliHost.path,T);await rC(t,U,_,await i,w,{forceReuseWindow:!0})}};t.subscriptions.push(b.commands.registerCommand("remote-containers.reopenLocally",async()=>{let w=b.workspace.workspaceFolders,x=b.workspace.workspaceFile||w&&w.length&&w[0].uri;if(x&&x.scheme==="vscode-remote"){let _=An(x.authority);if(_&&er(_)){let S=b.Uri.file(_.hostPath),I={forceReuseWindow:!0};await b.commands.executeCommand("vscode.openFolder",S,I)}else b.window.showInformationMessage("'Reopen Locally' not possible in current context.")}})),t.subscriptions.push(b.commands.registerCommand("remote-containers.reopenInWSL",async()=>{let w=b.workspace.workspaceFolders,x=b.workspace.workspaceFile||w&&w.length&&w[0].uri;if(x&&x.scheme==="vscode-remote"){let _=An(x.authority);if(_&&er(_)&&Mr(_.hostPath)){let S=b.Uri.parse((await xl(_.hostPath,s.log)).toString()),I={forceReuseWindow:!0};await b.commands.executeCommand("vscode.openFolder",S,I)}else b.window.showInformationMessage("'Reopen in WSL' not possible in current context.")}}));let d,p=async w=>{var S;if(!await Wo(t))return;let x,_=typeof w=="string"?w:(S=w==null?void 0:w.containerDesc)==null?void 0:S.Id;if(_){let I=await Oe(s.log);if(!await Or(I,await i))return;x=await Ft(I,_)}else{let I=!1;d||(d=zn(t.extensionPath,async T=>(I=!0,Vi(T))));let R=await Oe(s.log,void 0,void 0,d);if(x=await sCe(R,Or(R,await i),()=>I),!x)return}Jy(u,x,t)};t.subscriptions.push(b.commands.registerCommand("remote-containers.attachToRunningContainer",p)),t.subscriptions.push(b.commands.registerCommand("remote-containers.attachToRunningContainerFromViewlet",p)),t.subscriptions.push(b.commands.registerCommand("remote-containers.attachToK8sContainerFromViewlet",async w=>J9(t,await Oe(s.log),w)));let h=async w=>{var S;let x=await Oe(s.log);if(!await Or(x,await i))return;let _=(S=w==null?void 0:w.pullRequestModel)==null?void 0:S.html_url;jd(t,await i,s.log,_,an)};t.subscriptions.push(b.commands.registerCommand("remote-containers.checkoutPRInVolume",h)),t.subscriptions.push(b.commands.registerCommand("remote-containers.rebuildContainer",async()=>{let w=await ga();if(w){await Hd(t,w.repositoryPath,w.volumeName,w.folder,u,!0);return}return await Promise.all(Dr.onRemoveOnShutdownChangedEmitter.fire(!0)),b.commands.executeCommand("workbench.action.reloadWindow")})),t.subscriptions.push(b.commands.registerCommand("remote-containers.rebuildContainerNoCache",async()=>{let w=await ga();if(w){await Hd(t,w.repositoryPath,w.volumeName,w.folder,u,"rebuildNoCache");return}return await Promise.all(Dr.onRemoveOnShutdownChangedEmitter.fire("rebuildNoCache")),b.commands.executeCommand("workbench.action.reloadWindow")}));let g={fileHost:u.cliHost,findDevContainerFiles:()=>lP(u.cliHost),telemetry:i,output:s.log,existingFilesLearnMoreLink:_d,predefinedDefinitionsLearnMoreLink:xd,openConfigurationCommandId:Ed},v=await n9(t,g);t.subscriptions.push(b.commands.registerCommand("remote-containers.createDevContainerFile",async()=>{if(!b.workspace.workspaceFolders){await b.window.showInformationMessage("Open a folder to create the configuration files in first.",{modal:!0},"Open Folder")&&await b.commands.executeCommand(process.platform==="darwin"?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");return}await aI(t,await i,s.log,v)})),t.subscriptions.push(b.commands.registerCommand("remote-containers.openDevContainerFile",async(w,x)=>{let _,S=await Oe(s.log);if(typeof w=="string"?_=[pe.file(w)]:_=(await Promise.all((await lP(S.cliHost)).map(I=>I.scheme==="vscode-remote"?I:S.cliHost.toCommonURI(ce(I,S.cliHost.platform))))).filter(I=>!!I),_.length){let I;_.length===1?I={uri:_[0]}:I=await b.window.showQuickPick(_.map(T=>({label:T.scheme==="file"?T.fsPath:T.toString(),uri:T})),{placeHolder:"Select container configuration file to open"});let R=await ga();if(R){let T=MW(R.folder);for(let U of T){try{await b.workspace.openTextDocument(b.Uri.parse(U.toString()))}catch(W){continue}await b.commands.executeCommand("vscode.open",b.Uri.parse(U.toString()),x);return}return}if(I){let T=I.uri,U=vq(T);if(U){let W=`https://github.com/microsoft/vscode-dev-containers/tree/main/repository-containers/${process.platform==="win32"?U.replace(/\\/g,"/"):U}`;return b.env.openExternal(b.Uri.parse(W))}else{if(T.scheme==="file"&&await vt(T.fsPath))return await b.commands.executeCommand("vscode.open",b.Uri.parse(T.toString()),x);if(T.scheme==="file"&&Dr.results.size)return await tn(Sn,T,[],wi),await b.commands.executeCommand("vscode.open",b.Uri.parse(T.toString()),x);if(T.scheme==="vscode-remote"&&Dr.results.size)return await b.commands.executeCommand("vscode.open",b.Uri.parse(T.toString()),x);if(w===void 0)return await aI(t,await i,s.log,v)}}}else if(w===void 0)return await aI(t,await i,s.log,v)})),t.subscriptions.push(b.commands.registerCommand("remote-containers.openAttachConfigByNameFile",async()=>{let{dockerContainerId:w,dockerParams:x}=[...Dr.results.values()][0];if(!w||!x)return b.window.showInformationMessage("Named configurations are only available for Docker containers.",{modal:!0});let _=await Ft(x,w),S=zy(t.globalStoragePath,_.Name),I=b.Uri.file(S);return await vt(S)?b.commands.executeCommand("vscode.open",I):(await tn(Sn,I,[],wi),b.commands.executeCommand("vscode.open",I))})),t.subscriptions.push(b.commands.registerCommand("remote-containers.openAttachDevContainerFile",async()=>{let w=[...(await w9(t.globalStoragePath)).map(_=>A({label:_.name},_)).sort((_,S)=>_.label.localeCompare(S.label)),...(await _9(t.globalStoragePath)).map(_=>A({label:_.image},_)).sort((_,S)=>_.label.localeCompare(S.label))],x=await b.window.showQuickPick(w.length?w:[{label:"No configuration found."}],{placeHolder:"Choose a configuration file"});if(x&&"uri"in x)return b.commands.executeCommand("vscode.open",b.Uri.parse(x.uri.toString()))})),t.subscriptions.push(b.commands.registerCommand("remote-containers.settings",async()=>b.commands.executeCommand("workbench.action.openSettings",`@ext:${c8()}`))),t.subscriptions.push(b.commands.registerCommand("remote-containers.getHelp",async()=>b.env.openExternal(b.Uri.parse("https://aka.ms/vscode-remote/containers")))),t.subscriptions.push(b.commands.registerCommand("remote-containers.getStarted",async()=>b.env.openExternal(b.Uri.parse("https://aka.ms/vscode-remote/containers/getting-started")))),t.subscriptions.push(b.commands.registerCommand("remote-containers.reportIssue",async()=>b.commands.executeCommand("vscode.openIssueReporter",c8()))),t.subscriptions.push(b.commands.registerCommand("remote-containers.provideFeedback",async()=>b.env.openExternal(b.Uri.parse("https://aka.ms/vscode-remote/containers/provide-feedback")))),t.subscriptions.push(b.languages.registerDocumentLinkProvider([{pattern:"**/.devcontainer/devcontainer.json",language:"jsonc"},{pattern:"**/.devcontainer.json",language:"jsonc"}],new eI(u.cliHost))),t.subscriptions.push(b.commands.registerCommand("remote-containers.trySample",async()=>{fCe(t,s.log)})),t.subscriptions.push(b.commands.registerCommand("remote-containers.openLogFile",()=>dCe(t))),t.subscriptions.push(b.commands.registerCommand("remote-containers.openLastLogFile",()=>pCe(t,"remoteContainers",s.logFilePath))),t.subscriptions.push(b.commands.registerCommand("remote-containers.showReopenInContainerNotificationReset",()=>uCe(t))),t.subscriptions.push(b.commands.registerCommand("remote-containers.showRecoveryContainerNotificationReset",()=>Wye(t))),t.subscriptions.push(b.commands.registerCommand("remote-containers.installDocker",()=>Xy(s.log))),V9(t,Dr.results,await i,s.log),await e8(t,n),t.subscriptions.push(b.commands.registerCommand("remote-containers.installUserCLI",()=>t8(t,n))),(async()=>{await qW(t)||await m8(t,u,await i)})().catch(console.error),zye(t);let C=b.env.remoteName,y=!C||["dev-container","attached-container","wsl","ssh-remote","exec","k8s-container"].indexOf(C)!==-1?[{pattern:"**/.devcontainer.json"},{pattern:"**/devcontainer.json"}]:[];t.subscriptions.push(b.commands.registerCommand("remote-containers.addExtensionToConfig",v.addExtensionToConfiguration),b.languages.registerCompletionItemProvider([...y,{pattern:Ot.join(Ky(t.globalStoragePath),"*.json")},{pattern:Ot.join(Wy(t.globalStoragePath),"*.json")}],v.createCompletionItemProvider()),b.commands.registerCommand("remote-containers.configureContainerFeatures",async()=>{let w=await Y6(g,{readDockerComposeConfig:async(x,_)=>{let S=await m_(u.cliHost.cwd,x,u.output);return g_(j(A({},xi(u,!0)),{ptyExec:u.cliHost.ptyExec,print:!0}),S,_,u.cliHost.platform)}});if(w){let x;try{x=await Ss(u,w.imageName)}catch{}await Q6(g,w,(x==null?void 0:x.Config.Labels)||{})}}),b.commands.registerCommand("remote-containers.labelPortAndUpdateConfig",v.addPortLabelToConfiguration)),await ga()&&b.commands.executeCommand("setContext","isRecoveryContainer",!0),t.subscriptions.push(Z6())}var s8="showRecoveryContainerNotification",a8="showReopenInContainerNotificationReset",Gye=5e3;function Wye(t){return t.globalState.update(a8,Date.now())}async function zye(t){setTimeout(async()=>{let e=t.globalState.get(a8);if(cI(t.globalState.get(s8),e))return;if(await ga()){let n="This is a recovery container that allows you to edit your Dockerfile. Use 'Reopen in Container' to retry.",i="Reopen in Container",o="Don't Show Again",s=await b.window.showInformationMessage(n,o,i);s===i?b.commands.executeCommand("remote-containers.reopenInContainer"):s===o&&await t.globalState.update(s8,Date.now())}},Gye)}async function Kye(){await Promise.all([...Dr.results.values()].map(t=>Promise.all(t.params.shutdowns.map(e=>{try{e()}catch(r){console.error(r)}}))))}function c8(){let{name:t,publisher:e}=r8();return`${e}.${t}`}async function u8(t,e,r,n,i){let o=await Oe(i);if(!await Or(o,r))return;let s,a=b.workspace.workspaceFolders;if(a&&a[0]){let f=a[0].uri;if(f.scheme==="vscode-remote"){let d=An(f.authority);if(d&&er(d)){let p=be(o.cliHost.path,d.hostPath);s=b.Uri.file(p.rootFolderPath)}else f.authority.startsWith("wsl+")&&(s=f)}else f.scheme==="file"&&(s=f)}s||(s=b.Uri.file(n8.homedir()));let c=e?{defaultUri:s,canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:"Open"}:{defaultUri:s,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{"Code Workspace":["code-workspace"]},openLabel:"Open"},u=await b.window.showOpenDialog(c),l=u&&u[0];if(l){let f=e?l:l.with({path:Ot.posix.dirname(l.path)}),d=await Oe(o.output,f,!1),p=ce(l,d.cliHost.platform),h=be(d.cliHost.path,p);await rC(t,h,d,r,n)}}function Yye(){return b.workspace.getConfiguration("window").get("openFoldersInNewWindow",void 0)==="on"?{forceNewWindow:!0}:{forceReuseWindow:!0}}async function rC(t,e,r,n,i,o){let{cliHost:s}=r;if(Mr(e.rootFolderPath)){if(r=await Oe(r.output,e.rootFolderPath),s=r.cliHost,!await Or(r,n))return;e=be(s.path,e.isWorkspaceFile?s.path.join(s.cwd,Ot.basename(e.workspaceOrFolderPath)):s.cwd)}let a=await th(s,e);if(a){let g="Continue";if(await b.window.showInformationMessage(`The workspace could fail to open in a container: ${a}`,{modal:!0},g)!==g)return}let c=await In(s,e,oi()),u=c&&await bo(s,e,c,r.output);if(!u||!hc(u.config)){let g=await Od({fileHost:s,telemetry:n,output:r.output,existingFilesLearnMoreLink:_d,predefinedDefinitionsLearnMoreLink:xd,openConfigurationCommandId:Ed},e);if(!g||(u=await bo(s,e,pe.file(g).with({scheme:fr.scheme}),r.output),!u))return}let l=u.config;if(!await Xye(r,l))return;let f=u.workspaceConfig.workspaceFolder;if(Xe(l)){let g=kt(s,l);if(!l.initializeCommand&&!await wt(s).readDocument(g))return Bd(`"${g.fsPath}" does not exist.`,s,l.configFilePath);if(l.workspaceFolder&&!Ot.posix.isAbsolute(l.workspaceFolder))return Bd("Workspace folder in devcontainer.json must be an absolute path.",s,l.configFilePath)}else if(!("image"in l))if("dockerComposeFile"in l){if(!await q9(r)||!await aCe(e,r,l))return}else{let g=l.configFilePath;return Bd(`Configuration "${s.path.relative(e.rootFolderPath,ce(g,s.platform))}" not valid.`,s,g)}e.isWorkspaceFile&&(f=Ot.posix.join(f,s.path.basename(e.workspaceOrFolderPath)));let d=Qn(r.env),p=s.type==="wsl"?(await s.toCommonURI(e.workspaceOrFolderPath)).fsPath:e.workspaceOrFolderPath,h=b.Uri.parse(cf(p,f,d));await iC({uri:h,type:e.isWorkspaceFile?"workspace":"folder",label:`${Bq(s.platform,e.workspaceOrFolderPath,await s.homedir())}${So(d)} [Dev Container]`}),await uP(t,i?h.authority:!1),await Sd(t,i==="rebuildNoCache"?h.authority:!1),await b.commands.executeCommand("vscode.openFolder",h,o)}async function Xye(t,e){let r=e.hostRequirements;if(r&&(r.cpus||r.memory)){let n=await Ee(t,"info","--format","{{json .}}"),i=JSON.parse(n.stdout.toString()),o=i.NCPU&&r.cpus&&r.cpus>i.NCPU,s=i.MemTotal&&r.memory&&iI(r.memory)>i.MemTotal;if(o||s){let a=[];i.NCPU&&a.push(`CPUs ${i.NCPU}`),i.MemTotal&&a.push(`RAM ${oI(i.MemTotal)}`);let c=[];r.cpus&&c.push(`CPUs ${r.cpus}`),r.memory&&c.push(`RAM ${oI(iI(r.memory))}`),r.storage&&c.push(`disk ${oI(iI(r.storage))}`);let u=`Docker daemon: ${a.join(", ")}
devcontainer.json: ${c.join(", ")}`;if(!await b.window.showInformationMessage("Not all host requirements in devcontainer.json are met by the Docker daemon.",{modal:!0,detail:u},"Continue"))return!1}}return!0}function iI(t){let e=/^(\d+)([tgmk]b)?$/.exec(t);if(e){let[,r,n]=e,i=parseInt(r,10),o=n&&{t:2**40,g:2**30,m:2**20,k:2**10}[n[0]]||1;return i*o}return 0}function oI(t){let e=Math.min(Math.floor(Math.log2(Math.max(Math.abs(t),1))/10),4),r=t/Math.pow(2,10*e),n=Math.max(Math.pow(10,2-Math.floor(Math.log10(Math.max(Math.abs(r),1)))),1),i=Math.round(r*n)/n,o=[" bytes","kb","mb","gb","tb"][e];return`${i}${o}`}async function jd(t,e,r,n,i){if(!await Id(t))return;let o=await Oe(r),s=null;if(!!await Or(o,e)){if(typeof n=="string")s=n;else{let a=await b.commands.executeCommand("git.api.getRemoteSources",{providerLabel:c=>`Clone a repository from ${c.name} in a Container Volume`,urlLabel:"Clone git repository from URL",branch:!0});if(typeof a=="string"){s=a.trim(),s.split("/").length===2&&s.indexOf(":")===-1&&(s=`https://github.com/${s}`);let c=Xn(s);if(!await Bw(o.cliHost,c.repositoryUrl,o.output)){await b.window.showInformationMessage(`Cannot access the repository '${c.repositoryUrl}'.`,{modal:!0});return}}else if(a){if(!a.branch)return;s=`${a.url}/tree/${a.branch}`}}s&&await l8(t,o,s,i)}}async function l8(t,e,r,n){if(n||(n=await eCe(e)),n){let i=sI(r);n!==an&&(i=await rCe(r)),i&&await Hd(t,r,n,i,e)}}async function Qye(t,e,r,n,i){if(!await Id(t))return;let o=await Oe(r),s=/^(?:(?:https:\/\/)?github.com\/)?([^/]+)\/([^/]+?)(?:\/(?:pull\/([0-9]+)))?(?:\/|$)/i;if(!await Or(o,e))return;let a={placeHolder:"e.g. https://github.com/microsoft/vscode/pull/123",prompt:"Enter a GitHub pull request url",validateInput:l=>s.test(l)?void 0:"Invalid pull request url"},c;if(n?c=n:c=await b.window.showInputBox(a),!c)return;let u=Xn(c);if(u.repository==="unknown"||!u.pullRequestId){await b.window.showInformationMessage(`Invalid pull request URL '${c}'.`,{modal:!0});return}await l8(t,o,c,i)}async function f8(t,e,r,n,i){let o=await Oe(i);!await Or(o,n)||(t||(t=await Zye(o)),t&&(e&&r?await oCe(t,e,r,o):await iCe(t,o)))}async function Jye(t,e,r){let n=await Oe(r);!await Or(n,await e)||t&&t.volumeName&&await f8(t.volumeName,void 0,void 0,e,r)}var nC=class{get detail(){return""}},d8=class extends nC{get label(){return"$(plus) Create a new volume..."}get description(){return""}get volumeName(){return""}get detail(){return"Use this volume to store several cloned repositories."}get alwaysShow(){return!0}},p8=class extends nC{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}},h8=class extends nC{constructor(e){super();this.volume=e}get label(){return`$(folder) ${this.volume.Name}`}get description(){return`created at ${new Date(this.volume.CreatedAt).toDateString()}`}get volumeName(){return this.volume.Name}};async function Zye(t){let e=await Co(t),n=(await Ul(t,e)).map(a=>new h8(a)),i="Select the volume to inspect with Visual Studio Code",o=b.window.createQuickPick();o.items=n,o.placeholder=i,o.show();let s=await new Promise(a=>{o.onDidAccept(()=>a(o.activeItems[0])),o.onDidHide(()=>a(void 0))});return o.hide(),s?s.volume.Name:null}async function eCe(t){let e=await Co(t,["vsch.local.repository.unique=false"]),n=(await Ul(t,e)).map(l=>new p8(l)),i=new d8,o=[i,...n],s="Select the volume for the cloned repository",a=b.window.createQuickPick();a.items=o,a.placeholder=s,a.ignoreFocusOut=!0,a.show();let c=await new Promise(l=>{a.onDidAccept(()=>l(a.activeItems[0])),a.onDidHide(()=>l(void 0))});if(a.hide(),!c)return null;let u=null;return c===i?u=await tCe(t):u=c.volumeName,u}async function tCe(t){let e="",r="vsc-remote-containers",n=await Co(t);n.find(s=>s===r)||(e=r);let i={prompt:"Enter the volume name.",value:e,ignoreFocusOut:!0,validateInput:s=>/^[a-zA-Z0-9][a-zA-Z0-9_.-]+$/i.test(s)?null:s.length<2?"Volume names should be at least two characters and the first character must be alphanumeric.":"Only [a-zA-Z0-9_.-] are allowed and the first character must be alphanumeric."},o=await b.window.showInputBox(i);return o?n.find(s=>s===o)?(await b.window.showErrorMessage("Volume already exists",{modal:!0}),null):o:null}async function rCe(t){let e={prompt:"Enter the target folder name.",value:sI(t),ignoreFocusOut:!0},r=await b.window.showInputBox(e);return r||null}function sI(t){return Ur(t).repositoryName}async function nCe(){return(await b.authentication.getSession("github",["repo"],{createIfNone:!0})).accessToken}async function Hd(t,e,r,n,i,o=!1){let s=Qn(i.env),a=xc(e),c;try{c=await a.parseUrl(void 0)}catch(l){if(l instanceof Cm){b.window.showErrorMessage(l.description);return}let f=await nCe();try{c=await a.parseUrl(f)}catch{b.window.showErrorMessage(`Cannot access '${e}'.`,{modal:!0});return}}let u=b.Uri.parse(ks(e,r,n,!1,s,c));r===an&&(r="a unique volume"),await iC({uri:u,type:"folder",label:`${n} in ${r} [Dev Container]`}),await uP(t,o?u.authority:!1),await Sd(t,o==="rebuildNoCache"?u.authority:!1),await b.commands.executeCommand("vscode.openFolder",u)}async function iCe(t,e){let r=Qn(e.env),n=b.Uri.parse(ks(void 0,t,void 0,!0,r,void 0));await iC({uri:n,type:"folder",label:`Volume ${t} [Dev Container]`}),await b.commands.executeCommand("vscode.openFolder",n)}async function oCe(t,e,r,n){let i=Qn(n.env),o=b.Uri.parse(ks(e,t,r,!0,i,void 0));await iC({uri:o,type:"folder",label:`${r} in ${t} [Inspect Dev Container]`}),await b.commands.executeCommand("vscode.openFolder",o)}async function iC(t){return b.commands.executeCommand("_workbench.addToRecentlyOpened",t)}async function Jy(t,e,r,n){if(!await Wo(r))return;let i,o=t.cliHost;if(o.type==="wsl"){let u=await o.toCommonURI(o.cwd);u&&u.scheme==="file"&&(i=u.fsPath)}let s=Uq(e.Name,Qn(t.env),i),a=await y9(r.globalStoragePath,e),c=r.extensionMode===b.ExtensionMode.Development;if(a&&a.workspaceFolder&&!n){let u=b.Uri.parse(`vscode-remote://${s}${a.workspaceFolder}`),l={};c?l.forceReuseWindow=!0:l.forceNewWindow=!0,await b.commands.executeCommand("vscode.openFolder",u,l)}else{let u={remoteAuthority:s};c&&!n&&(u.reuseWindow=!0),await b.commands.executeCommand("vscode.newWindow",u)}}async function sCe(t,e,r){let n=(async()=>{if(!await e)throw new Error("cancel");let i=await Ei(t),o=await yo(t,i),s=[];if(o.forEach(a=>{a.State.Status==="running"&&s.push({label:a.Name,description:`${a.Config.Image} ${a.Id}`,containerInfo:a})}),s.length===0)throw b.window.showErrorMessage("There are no running containers to attach to.",{modal:!0}),new Error("cancel");return s})();try{let i={placeHolder:"Select the container to attach VS Code"},o=await b.window.showQuickPick(n,i);return!o&&r()&&(await n,o=await b.window.showQuickPick(n,i)),o?o.containerInfo:void 0}catch(i){if(i&&i.message==="cancel")return;throw i}}async function aCe(t,e,r){if(!r.workspaceFolder)return Bd("Workspace folder not specified in devcontainer.json.",e.cliHost,r.configFilePath),!1;if(!Ot.posix.isAbsolute(r.workspaceFolder))return Bd("Workspace folder in devcontainer.json must be an absolute path.",e.cliHost,r.configFilePath),!1;let n=await $r(e.cliHost,r,e.cliHost.env,e.cliHost.cwd),i=await rf(e,t,n),o=await hm(e,i,r.service),s=o&&await Ft(e,o);return!(s&&!await cCe(e.cliHost,n,r,s))}async function cCe(t,e,r,n){let i=[];for(let o=0;o<e.length;o++)await t.isFile(e[o])||i.push(e[o]);return i.length>0?(b.window.showErrorMessage(`The following referenced docker compose files do not exist: ${i.join(", ")}`,{modal:!0}),!1):r.devPort&&!n.Ports.find(o=>r.devPort===o.PrivatePort)?(b.window.showErrorMessage(`The port '${r.devPort}' is not open on the service '${r.service}'`,{modal:!0}),!1):!0}async function Bd(t,e,r){if(await b.window.showErrorMessage(t,{modal:!0},"Open devcontainer.json")){let i=ce(r,e.platform),o=await e.toCommonURI(i);o&&b.window.showTextDocument(b.Uri.parse(o.toString()))}}async function aI(t,e,r,n){if(await n.createConfiguration()){let o=await Oe(r);await m8(t,o,e)}}async function m8(t,e,r){if(b.env.remoteName&&b.env.remoteName!=="wsl")return;let n=b.workspace.workspaceFile,i=b.workspace.workspaceFolders,o=n||i&&i.length&&i[0].uri||void 0;if(o){let{cliHost:s}=e,a=ce(o,s.platform),c=be(s.path,a),u=await In(s,c,oi());u&&await lCe(t,u,c,e,r)}}var oC="showReopenInContainerNotification",g8="showReopenInContainerNotificationReset";function uCe(t){return t.globalState.update(g8,Date.now())}async function lCe(t,e,r,n,i){let o=t.globalState.get(g8);if(cI(t.globalState.get(oC),o)||cI(t.workspaceState.get(oC),o))return;let s=gq(n.cliHost,r,e),a,c="";if(n.cliHost.platform!=="linux"&&b.env.remoteName!=="wsl"&&!(n.cliHost.platform==="win32"&&Mr(r.rootFolderPath))){if(a=await aD(n.cliHost,r,n.output),a&&s){let v=await ch(n.cliHost,r.rootFolderPath,n.output);v&&await lD(n.cliHost,r,n.cliHost.path.relative(v,ce(e,n.cliHost.platform)),n.output)||(a=void 0)}if(a){let v=await bo(n.cliHost,r,e,n.output);(!v||!Xe(v.config)&&!("image"in v.config))&&(a=void 0)}a&&(c=" Or: Clone repository in Docker volume for [better I/O performance](https://aka.ms/vscode-remote/containers/open-repo).")}let u;s?r.isWorkspaceFile?u="Workspace contains a Dev Container configuration file.":u="Folder contains a Dev Container configuration file.":u="There is a [Dev Container configuration](command:remote-containers.openDevContainerFile) available for this repository.";let l="Reopen in Container",f="Clone in Volume",d="Don't Show Again...",p=r.isWorkspaceFile?`${u} Reopen workspace to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${c}`:`${u} Reopen folder to develop in a container ([learn more](https://aka.ms/vscode-remote/docker)).${c}`,h=a?[d,f,l]:[d,l],g=await b.window.showInformationMessage(p,...h);if(g===l){if(!await b.workspace.requestWorkspaceTrust({message:Pd})||!await Or(n,i))return;try{await rC(t,r,n,i,!1,{forceReuseWindow:!0})}catch(C){await Ao(C,"ui",i)}}else if(g===f){let v=await uD(n.cliHost,r,n.output),C="OK",y="Cancel";(!v||C===await b.window.showInformationMessage("Local changes not pushed to the Git remote will not be available in the Docker volume.",C,y))&&await b.window.withProgress({location:b.ProgressLocation.Notification,title:"Clone in Volume"},async(E,w)=>{E.report({message:"Follow the prompts at the top of the window."}),await b.commands.executeCommand(Cy,a)})}else if(g===d){let v=r.isWorkspaceFile?"Any Workspace":"Any Folder",C=r.isWorkspaceFile?"Current Workspace":"Current Folder",y=r.isWorkspaceFile?"Don't show again for the current workspace or for any workspace?":"Don't show again for the current folder or for any folder?",E=await b.window.showInformationMessage(y,v,C);E===v?await t.globalState.update(oC,Date.now()):E===C&&await t.workspaceState.update(oC,Date.now())}}function cI(t,e){return t===!1?t=1:t===void 0&&(t=-1),e===void 0&&(e=0),e<t}async function fCe(t,e){let r=[{label:"C++",detail:"https://github.com/Microsoft/vscode-remote-try-cpp"},{label:"Go",detail:"https://github.com/Microsoft/vscode-remote-try-go"},{label:"Java",detail:"https://github.com/Microsoft/vscode-remote-try-java"},{label:".NET Core",detail:"https://github.com/Microsoft/vscode-remote-try-dotnetcore"},{label:"Node",detail:"https://github.com/Microsoft/vscode-remote-try-node"},{label:"PHP",detail:"https://github.com/Microsoft/vscode-remote-try-php"},{label:"Python",detail:"https://github.com/Microsoft/vscode-remote-try-python"},{label:"Rust",detail:"https://github.com/Microsoft/vscode-remote-try-rust"}],n={placeHolder:"Select a sample repository to clone in a container volume"},i=await b.window.showQuickPick(r,n);if(!i)return;let o=await Oe(e);i.detail&&await Hd(t,i.detail,an,sI(i.detail),o)}async function dCe(t){let e=await Promise.all((await v8(t)).map(async n=>{let i=await(0,nI.promisify)(tC.stat)(n.path),o=n.time;return{label:n.prefix,description:`${Wu(o.getFullYear())}-${Wu(o.getMonth())}-${Wu(o.getDay())} ${Wu(o.getHours())}:${Wu(o.getMinutes())}:${Wu(o.getSeconds())} - ${i.size} bytes`,path:n.path}}));e.length||e.push({label:"No log files found."});let r=await b.window.showQuickPick(e,{placeHolder:"Choose a log file"});r&&r.path&&await b.window.showTextDocument(b.Uri.file(r.path))}function Wu(t,e=2){let r=t.toString();for(;r.length<e;)r="0"+r;return r}async function pCe(t,e,r){let n=(await v8(t)).find(i=>i.name.startsWith(e)&&i.path!==r);n?await b.window.showTextDocument(b.Uri.file(n.path)):await b.window.showInformationMessage("No previous log file found.",{modal:!0})}async function v8(t){let e=[],r=Ot.basename(t.logPath),n=Ot.dirname(Ot.dirname(Ot.dirname(t.logPath)));for(let i of(await uI(n)).sort().reverse()){let o=/(\d\d\d\d)(\d\d)(\d\d)T(\d\d)(\d\d)(\d\d)/.exec(i);if(o){let s=Ot.join(n,i);for(let a of await uI(s)){let c=Ot.join(s,a),u=Ot.join(c,r);for(let l of(await uI(u)).sort()){let f=Ot.join(u,l),d=/(\d\d\d\d)-(\d\d)-(\d\d)T(\d\d)[:\-](\d\d)[:\-](\d\d)\.(\d\d\d)Z/.exec(l),p=d?new Date(`${d[1]}-${d[2]}-${d[3]}T${d[4]}:${d[5]}:${d[6]}.${d[7]}Z`):new Date(`${o[1]}-${o[2]}-${o[3]}T${o[4]}:${o[5]}:${o[6]}Z`);e.push({name:l,path:f,time:p,prefix:d?l.substr(0,d.index-1):l.substr(0,l.length-4)})}}}}return e.sort((i,o)=>i.time>o.time?-1:i.time<o.time?1:i.path.localeCompare(o.path)),e}async function uI(t){try{return await(0,nI.promisify)(tC.readdir)(t)}catch(e){return[]}}0&&(module.exports={activate,attachToContainer,deactivate});
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=extension.js.map
