/*! For license information please see languageserver-web.js.LICENSE.txt */
var serverExportVar;(()=>{var e={8533:(e,t)=>{t.l=class{constructor(){}configure(){}format(){return[]}}},6470:(e,t,n)=>{"use strict";var r=n(4155);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var s={resolve:function(){for(var e,t="",n=!1,s=arguments.length-1;s>=-1&&!n;s--){var a;s>=0?a=arguments[s]:(void 0===e&&(e=r.cwd()),a=e),i(a),0!==a.length&&(t=a+"/"+t,n=47===a.charCodeAt(0))}return t=o(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];i(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":s.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=s.resolve(e))===(t=s.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,o=r-n,a=1;a<t.length&&47===t.charCodeAt(a);++a);for(var c=t.length-a,l=o<c?o:c,u=-1,h=0;h<=l;++h){if(h===l){if(c>l){if(47===t.charCodeAt(a+h))return t.slice(a+h+1);if(0===h)return t.slice(a+h)}else o>l&&(47===e.charCodeAt(n+h)?u=h:0===h&&(u=0));break}var f=e.charCodeAt(n+h);if(f!==t.charCodeAt(a+h))break;47===f&&(u=h)}var d="";for(h=n+u+1;h<=r;++h)h!==r&&47!==e.charCodeAt(h)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(a+u):(a+=u,47===t.charCodeAt(a)&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!o){r=s;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var n,r=0,o=-1,s=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,c=-1;for(n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(47===l){if(!s){r=n+1;break}}else-1===c&&(s=!1,c=n+1),a>=0&&(l===t.charCodeAt(a)?-1==--a&&(o=n):(a=-1,o=c))}return r===o?o=c:-1===o&&(o=e.length),e.slice(r,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!s){r=n+1;break}}else-1===o&&(s=!1,o=n+1);return-1===o?"":e.slice(r,o)},extname:function(e){i(e);for(var t=-1,n=0,r=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===r&&(o=!1,r=a+1),46===c?-1===t?t=a:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){n=a+1;break}}return-1===t||-1===r||0===s||1===s&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+"/"+r:r}(0,e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=e.charCodeAt(0),o=47===r;o?(t.root="/",n=1):n=0;for(var s=-1,a=0,c=-1,l=!0,u=e.length-1,h=0;u>=n;--u)if(47!==(r=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===r?-1===s?s=u:1!==h&&(h=1):-1!==s&&(h=-1);else if(!l){a=u+1;break}return-1===s||-1===c||0===h||1===h&&s===c-1&&s===a+1?-1!==c&&(t.base=t.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(t.name=e.slice(1,s),t.base=e.slice(1,c)):(t.name=e.slice(a,s),t.base=e.slice(a,c)),t.ext=e.slice(s,c)),a>0?t.dir=e.slice(0,a-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};s.posix=s,e.exports=s},4155:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var a,c=[],l=!1,u=-1;function h(){l&&a&&(l=!1,a.length?c=a.concat(c):u=-1,c.length&&f())}function f(){if(!l){var e=s(h);l=!0;for(var t=c.length;t;){for(a=c,c=[];++u<t;)a&&a[u].run();u=-1,t=c.length}a=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=m,r.addListener=m,r.once=m,r.off=m,r.removeListener=m,r.removeAllListeners=m,r.emit=m,r.prependListener=m,r.prependOnceListener=m,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},4971:function(e,t,n){var r;e=n.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var s,a=2147483647,c=36,l=/^xn--/,u=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,m=String.fromCharCode;function p(e){throw RangeError(f[e])}function g(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+g((e=e.replace(h,".")).split("."),t).join(".")}function v(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function b(e){return g(e,(function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+m(e)})).join("")}function S(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var r=0;for(e=n?d(e/700):e>>1,e+=d(e/t);e>455;r+=c)e=d(e/35);return d(r+36*e/(e+38))}function k(e){var t,n,r,i,o,s,l,u,h,f,m,g=[],y=e.length,v=0,S=128,k=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&p("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=v,s=1,l=c;i>=y&&p("invalid-input"),((u=(m=e.charCodeAt(i++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:c)>=c||u>d((a-v)/s))&&p("overflow"),v+=u*s,!(u<(h=l<=k?1:l>=k+26?26:l-k));l+=c)s>d(a/(f=c-h))&&p("overflow"),s*=f;k=w(v-o,t=g.length+1,0==o),d(v/t)>a-S&&p("overflow"),S+=d(v/t),v%=t,g.splice(v++,0,S)}return b(g)}function x(e){var t,n,r,i,o,s,l,u,h,f,g,y,b,k,x,T=[];for(y=(e=v(e)).length,t=128,n=0,o=72,s=0;s<y;++s)(g=e[s])<128&&T.push(m(g));for(r=i=T.length,i&&T.push("-");r<y;){for(l=a,s=0;s<y;++s)(g=e[s])>=t&&g<l&&(l=g);for(l-t>d((a-n)/(b=r+1))&&p("overflow"),n+=(l-t)*b,t=l,s=0;s<y;++s)if((g=e[s])<t&&++n>a&&p("overflow"),g==t){for(u=n,h=c;!(u<(f=h<=o?1:h>=o+26?26:h-o));h+=c)x=u-f,k=c-f,T.push(m(S(f+x%k,0))),u=d(x/k);T.push(m(S(u,0))),o=w(n,b,r==i),n=0,++r}++n,++t}return T.join("")}s={version:"1.3.2",ucs2:{decode:v,encode:b},decode:k,encode:x,toASCII:function(e){return y(e,(function(e){return u.test(e)?"xn--"+x(e):e}))},toUnicode:function(e){return y(e,(function(e){return l.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()},2587:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(n);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var l=0;l<c;++l){var u,h,f,d,m=e[l].replace(s,"%20"),p=m.indexOf(r);p>=0?(u=m.substr(0,p),h=m.substr(p+1)):(u=m,h=""),f=decodeURIComponent(u),d=decodeURIComponent(h),t(o,f)?Array.isArray(o[f])?o[f].push(d):o[f]=[o[f],d]:o[f]=d}return o}},2361:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,i){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var o=encodeURIComponent(t(i))+r;return Array.isArray(e[i])?e[i].map((function(e){return o+encodeURIComponent(t(e))})).join(n):o+encodeURIComponent(t(e[i]))})).join(n):i?encodeURIComponent(t(i))+r+encodeURIComponent(t(e)):""}},7673:(e,t,n)=>{"use strict";t.decode=t.parse=n(2587),t.encode=t.stringify=n(2361)},7510:(e,t)=>{(()=>{"use strict";var e={};(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorStatusDescription=t.xhr=t.configure=void 0,t.configure=(e,t)=>{},t.xhr=async e=>{const t=new Headers;if(e.headers)for(const n in e.headers){const r=e.headers[n];Array.isArray(r)?r.forEach((e=>t.set(n,e))):t.set(n,r)}e.user&&e.password&&t.set("Authorization","Basic "+btoa(e.user+":"+e.password));const n={method:e.type,redirect:e.followRedirects>0?"follow":"manual",mode:"cors",headers:t};e.data&&(n.body=e.data);const r=new Request(e.url,n),i=await fetch(r),o={};i.headers.forEach(((e,t)=>{o[t]=e}));const s=await i.arrayBuffer();return new class{constructor(){this.status=i.status,this.headers=o}get responseText(){return(new TextDecoder).decode(s)}get body(){return new Uint8Array(s)}}},t.getErrorStatusDescription=function(e){return String(e)}})();var n=t;for(var r in e)n[r]=e[r];e.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})()},8575:(e,t,n)=>{"use strict";var r=n(4971),i=n(2502);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.DB=function(e,t){return b(e,!1,!0).resolve(t)};var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),h=["%","/","?",";","#"].concat(u),f=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(7673);function b(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),a=-1!==o&&o<e.indexOf("#")?"?":"#",l=e.split(a);l[0]=l[0].replace(/\\/g,"/");var b=e=l.join(a);if(b=b.trim(),!n&&1===e.split("#").length){var S=c.exec(b);if(S)return this.path=b,this.href=b,this.pathname=S[1],S[2]?(this.search=S[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=s.exec(b);if(w){var k=(w=w[0]).toLowerCase();this.protocol=k,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===b.substr(0,2);!x||w&&g[w]||(b=b.substr(2),this.slashes=!0)}if(!g[w]&&(x||w&&!y[w])){for(var T,C,R=-1,O=0;O<f.length;O++)-1!==(A=b.indexOf(f[O]))&&(-1===R||A<R)&&(R=A);for(-1!==(C=-1===R?b.lastIndexOf("@"):b.lastIndexOf("@",R))&&(T=b.slice(0,C),b=b.slice(C+1),this.auth=decodeURIComponent(T)),R=-1,O=0;O<h.length;O++){var A;-1!==(A=b.indexOf(h[O]))&&(-1===R||A<R)&&(R=A)}-1===R&&(R=b.length),this.host=b.slice(0,R),b=b.slice(R),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var E=this.hostname.split(/\./),_=(O=0,E.length);O<_;O++){var D=E[O];if(D&&!D.match(d)){for(var N="",M=0,I=D.length;M<I;M++)D.charCodeAt(M)>127?N+="x":N+=D[M];if(!N.match(d)){var j=E.slice(0,O),q=E.slice(O+1),F=D.match(m);F&&(j.push(F[1]),q.unshift(F[2])),q.length&&(b="/"+q.join(".")+b),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=r.toASCII(this.hostname));var L=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+L,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!p[k])for(O=0,_=u.length;O<_;O++){var W=u[O];if(-1!==b.indexOf(W)){var V=encodeURIComponent(W);V===W&&(V=escape(W)),b=b.split(W).join(V)}}var U=b.indexOf("#");-1!==U&&(this.hash=b.substr(U),b=b.slice(0,U));var B=b.indexOf("?");if(-1!==B?(this.search=b.substr(B),this.query=b.substr(B+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,B)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){L=this.pathname||"";var K=this.search||"";this.path=L+K}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(n[u]=e[u])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var h=Object.keys(e),f=0;f<h.length;f++){var d=h[f];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var m=(e.pathname||"").split("/");m.length&&!(e.host=m.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",v=n.search||"";n.path=p+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),S=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=S||b||n.host&&e.pathname,k=w,x=n.pathname&&n.pathname.split("/")||[],T=(m=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===x[0]?x[0]=n.host:x.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host=null),w=w&&(""===m[0]||""===x[0])),S)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,x=m;else if(m.length)x||(x=[]),x.pop(),x=x.concat(m),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return T&&(n.hostname=n.host=x.shift(),(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var C=x.slice(-1)[0],R=(n.host||e.host||x.length>1)&&("."===C||".."===C)||""===C,O=0,A=x.length;A>=0;A--)"."===(C=x[A])?x.splice(A,1):".."===C?(x.splice(A,1),O++):O&&(x.splice(A,1),O--);if(!w&&!k)for(;O--;O)x.unshift("..");!w||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),R&&"/"!==x.join("/").substr(-1)&&x.push("");var P,E=""===x[0]||x[0]&&"/"===x[0].charAt(0);return T&&(n.hostname=n.host=E?"":x.length?x.shift():"",(P=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=P.shift(),n.host=n.hostname=P.shift())),(w=w||n.host&&x.length)&&!E&&x.unshift(""),x.length?n.pathname=x.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=a.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},2502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},3022:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=void 0;var i=n(2952),o=n(8988),s=n(8988);function a(e){return function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if("number"==typeof e)throw new Error("Browser implementation does currently not support externalized strings.");return o.localize.apply(void 0,r([e,t],n))}}function c(e){return o.setPseudo("pseudo"===(null==e?void 0:e.locale.toLowerCase())),a}Object.defineProperty(t,"MessageFormat",{enumerable:!0,get:function(){return s.MessageFormat}}),Object.defineProperty(t,"BundleFormat",{enumerable:!0,get:function(){return s.BundleFormat}}),t.loadMessageBundle=a,t.config=c,i.default.install(Object.freeze({loadMessageBundle:a,config:c}))},8988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.localize=t.format=t.setPseudo=t.isPseudo=t.isDefined=t.BundleFormat=t.MessageFormat=void 0;var r,i,o,s=n(2952);function a(e){return void 0!==e}function c(e,n){return t.isPseudo&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===n.length?e:e.replace(/\{(\d+)\}/g,(function(e,t){var r=t[0],i=n[r],o=e;return"string"==typeof i?o=i:"number"!=typeof i&&"boolean"!=typeof i&&null!=i||(o=String(i)),o}))}(o=t.MessageFormat||(t.MessageFormat={})).file="file",o.bundle="bundle",o.both="both",(i=t.BundleFormat||(t.BundleFormat={})).standalone="standalone",i.languagePack="languagePack",function(e){e.is=function(e){var t=e;return t&&a(t.key)&&a(t.comment)}}(r||(r={})),t.isDefined=a,t.isPseudo=!1,t.setPseudo=function(e){t.isPseudo=e},t.format=c,t.localize=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return c(t,n)},t.loadMessageBundle=function(e){return s.default().loadMessageBundle(e)},t.config=function(e){return s.default().config(e)}},2952:(e,t)=>{"use strict";var n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r},1169:(e,t,n)=>{"use strict";e.exports=n(9054)},9054:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.BrowserMessageWriter=t.BrowserMessageReader=void 0,n(5669).default.install();const o=n(3870);i(n(3870),t);class s extends o.AbstractMessageReader{constructor(e){super(),this._onData=new o.Emitter,this._messageListener=e=>{this._onData.fire(e.data)},e.addEventListener("error",(e=>this.fireError(e))),e.onmessage=this._messageListener}listen(e){return this._onData.event(e)}}t.BrowserMessageReader=s;class a extends o.AbstractMessageWriter{constructor(e){super(),this.context=e,this.errorCount=0,e.addEventListener("error",(e=>this.fireError(e)))}write(e){try{return this.context.postMessage(e),Promise.resolve()}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){}}t.BrowserMessageWriter=a,t.createMessageConnection=function(e,t,n,r){return void 0===n&&(n=o.NullLogger),o.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),o.createMessageConnection(e,t,n,r)}},5669:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(147),i=n(3911),o=n(7135),s=n(5530);class a extends s.AbstractMessageBuffer{constructor(e="utf-8"){super(e),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return a.emptyBuffer}fromString(e,t){return(new TextEncoder).encode(e)}toString(e,t){return"ascii"===t?this.asciiDecoder.decode(e):new TextDecoder(t).decode(e)}asNative(e,t){return void 0===t?e:e.slice(0,t)}allocNative(e){return new Uint8Array(e)}}a.emptyBuffer=new Uint8Array(0);class c{constructor(e){this.socket=e,this._onData=new o.Emitter,this._messageListener=e=>{e.data.arrayBuffer().then((e=>{this._onData.fire(new Uint8Array(e))}))},this.socket.addEventListener("message",this._messageListener)}onClose(e){return this.socket.addEventListener("close",e),i.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),i.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),i.Disposable.create((()=>this.socket.removeEventListener("end",e)))}onData(e){return this._onData.event(e)}}class l{constructor(e){this.socket=e}onClose(e){return this.socket.addEventListener("close",e),i.Disposable.create((()=>this.socket.removeEventListener("close",e)))}onError(e){return this.socket.addEventListener("error",e),i.Disposable.create((()=>this.socket.removeEventListener("error",e)))}onEnd(e){return this.socket.addEventListener("end",e),i.Disposable.create((()=>this.socket.removeEventListener("end",e)))}write(e,t){if("string"==typeof e){if(void 0!==t&&"utf-8"!==t)throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${t}`);this.socket.send(e)}else this.socket.send(e);return Promise.resolve()}end(){this.socket.close()}}const u=new TextEncoder,h=Object.freeze({messageBuffer:Object.freeze({create:e=>new a(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if("utf-8"!==t.charset)throw new Error(`In a Browser environments only utf-8 text encding is supported. But got encoding: ${t.charset}`);return Promise.resolve(u.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new c(e),asWritableStream:e=>new l(e)}),console,timer:Object.freeze({setTimeout:(e,t,...n)=>setTimeout(e,t,...n),clearTimeout(e){clearTimeout(e)},setImmediate:(e,...t)=>setTimeout(e,0,...t),clearImmediate(e){clearTimeout(e)}})});function f(){return h}!function(e){e.install=function(){r.default.install(h)}}(f||(f={})),t.default=f},3870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.Trace=t.ProgressType=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.RAL=void 0,t.CancellationStrategy=void 0;const r=n(839);Object.defineProperty(t,"RequestType",{enumerable:!0,get:function(){return r.RequestType}}),Object.defineProperty(t,"RequestType0",{enumerable:!0,get:function(){return r.RequestType0}}),Object.defineProperty(t,"RequestType1",{enumerable:!0,get:function(){return r.RequestType1}}),Object.defineProperty(t,"RequestType2",{enumerable:!0,get:function(){return r.RequestType2}}),Object.defineProperty(t,"RequestType3",{enumerable:!0,get:function(){return r.RequestType3}}),Object.defineProperty(t,"RequestType4",{enumerable:!0,get:function(){return r.RequestType4}}),Object.defineProperty(t,"RequestType5",{enumerable:!0,get:function(){return r.RequestType5}}),Object.defineProperty(t,"RequestType6",{enumerable:!0,get:function(){return r.RequestType6}}),Object.defineProperty(t,"RequestType7",{enumerable:!0,get:function(){return r.RequestType7}}),Object.defineProperty(t,"RequestType8",{enumerable:!0,get:function(){return r.RequestType8}}),Object.defineProperty(t,"RequestType9",{enumerable:!0,get:function(){return r.RequestType9}}),Object.defineProperty(t,"ResponseError",{enumerable:!0,get:function(){return r.ResponseError}}),Object.defineProperty(t,"ErrorCodes",{enumerable:!0,get:function(){return r.ErrorCodes}}),Object.defineProperty(t,"NotificationType",{enumerable:!0,get:function(){return r.NotificationType}}),Object.defineProperty(t,"NotificationType0",{enumerable:!0,get:function(){return r.NotificationType0}}),Object.defineProperty(t,"NotificationType1",{enumerable:!0,get:function(){return r.NotificationType1}}),Object.defineProperty(t,"NotificationType2",{enumerable:!0,get:function(){return r.NotificationType2}}),Object.defineProperty(t,"NotificationType3",{enumerable:!0,get:function(){return r.NotificationType3}}),Object.defineProperty(t,"NotificationType4",{enumerable:!0,get:function(){return r.NotificationType4}}),Object.defineProperty(t,"NotificationType5",{enumerable:!0,get:function(){return r.NotificationType5}}),Object.defineProperty(t,"NotificationType6",{enumerable:!0,get:function(){return r.NotificationType6}}),Object.defineProperty(t,"NotificationType7",{enumerable:!0,get:function(){return r.NotificationType7}}),Object.defineProperty(t,"NotificationType8",{enumerable:!0,get:function(){return r.NotificationType8}}),Object.defineProperty(t,"NotificationType9",{enumerable:!0,get:function(){return r.NotificationType9}}),Object.defineProperty(t,"ParameterStructures",{enumerable:!0,get:function(){return r.ParameterStructures}});const i=n(3911);Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return i.Disposable}});const o=n(7135);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(t,"Emitter",{enumerable:!0,get:function(){return o.Emitter}});const s=n(3881);Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return s.CancellationTokenSource}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return s.CancellationToken}});const a=n(6525);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(t,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}});const c=n(6654);Object.defineProperty(t,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(t,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});const l=n(1343);Object.defineProperty(t,"ConnectionStrategy",{enumerable:!0,get:function(){return l.ConnectionStrategy}}),Object.defineProperty(t,"ConnectionOptions",{enumerable:!0,get:function(){return l.ConnectionOptions}}),Object.defineProperty(t,"NullLogger",{enumerable:!0,get:function(){return l.NullLogger}}),Object.defineProperty(t,"createMessageConnection",{enumerable:!0,get:function(){return l.createMessageConnection}}),Object.defineProperty(t,"ProgressType",{enumerable:!0,get:function(){return l.ProgressType}}),Object.defineProperty(t,"Trace",{enumerable:!0,get:function(){return l.Trace}}),Object.defineProperty(t,"TraceFormat",{enumerable:!0,get:function(){return l.TraceFormat}}),Object.defineProperty(t,"SetTraceNotification",{enumerable:!0,get:function(){return l.SetTraceNotification}}),Object.defineProperty(t,"LogTraceNotification",{enumerable:!0,get:function(){return l.LogTraceNotification}}),Object.defineProperty(t,"ConnectionErrors",{enumerable:!0,get:function(){return l.ConnectionErrors}}),Object.defineProperty(t,"ConnectionError",{enumerable:!0,get:function(){return l.ConnectionError}}),Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return l.CancellationReceiverStrategy}}),Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:!0,get:function(){return l.CancellationSenderStrategy}}),Object.defineProperty(t,"CancellationStrategy",{enumerable:!0,get:function(){return l.CancellationStrategy}});const u=n(147);t.RAL=u.default},3881:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;const r=n(147),i=n(7574),o=n(7135);var s;!function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:o.Event.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:o.Event.None}),e.is=function(t){const n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}}(s=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=r.default().timer.setTimeout(e.bind(t),0);return{dispose(){r.default().timer.clearTimeout(n)}}}));class c{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new o.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}t.CancellationTokenSource=class{get token(){return this._token||(this._token=new c),this._token}cancel(){this._token?this._token.cancel():this._token=s.Cancelled}dispose(){this._token?this._token instanceof c&&this._token.dispose():this._token=s.None}}},1343:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.Trace=t.NullLogger=t.ProgressType=void 0;const r=n(147),i=n(7574),o=n(839),s=n(6184),a=n(7135),c=n(3881);var l,u,h,f,d,m,p,g,y,v,b,S,w;!function(e){e.type=new o.NotificationType("$/cancelRequest")}(l||(l={})),function(e){e.type=new o.NotificationType("$/progress")}(u||(u={})),t.ProgressType=class{constructor(){}},function(e){e.is=function(e){return i.func(e)}}(h||(h={})),t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}}),function(e){e[e.Off=0]="Off",e[e.Messages=1]="Messages",e[e.Verbose=2]="Verbose"}(f=t.Trace||(t.Trace={})),function(e){e.fromString=function(t){if(!i.string(t))return e.Off;switch(t=t.toLowerCase()){default:return e.Off;case"messages":return e.Messages;case"verbose":return e.Verbose}},e.toString=function(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Verbose:return"verbose";default:return"off"}}}(f=t.Trace||(t.Trace={})),function(e){e.Text="text",e.JSON="json"}(t.TraceFormat||(t.TraceFormat={})),function(e){e.fromString=function(t){return"json"===(t=t.toLowerCase())?e.JSON:e.Text}}(d=t.TraceFormat||(t.TraceFormat={})),function(e){e.type=new o.NotificationType("$/setTrace")}(m=t.SetTraceNotification||(t.SetTraceNotification={})),function(e){e.type=new o.NotificationType("$/logTrace")}(p=t.LogTraceNotification||(t.LogTraceNotification={})),function(e){e[e.Closed=1]="Closed",e[e.Disposed=2]="Disposed",e[e.AlreadyListening=3]="AlreadyListening"}(g=t.ConnectionErrors||(t.ConnectionErrors={}));class k extends Error{constructor(e,t){super(t),this.code=e,Object.setPrototypeOf(this,k.prototype)}}t.ConnectionError=k,function(e){e.is=function(e){const t=e;return t&&i.func(t.cancelUndispatched)}}(y=t.ConnectionStrategy||(t.ConnectionStrategy={})),function(e){e.Message=Object.freeze({createCancellationTokenSource:e=>new c.CancellationTokenSource}),e.is=function(e){const t=e;return t&&i.func(t.createCancellationTokenSource)}}(v=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={})),function(e){e.Message=Object.freeze({sendCancellation(e,t){e.sendNotification(l.type,{id:t})},cleanup(e){}}),e.is=function(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}}(b=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={})),function(e){e.Message=Object.freeze({receiver:v.Message,sender:b.Message}),e.is=function(e){const t=e;return t&&v.is(t.receiver)&&b.is(t.sender)}}(S=t.CancellationStrategy||(t.CancellationStrategy={})),(t.ConnectionOptions||(t.ConnectionOptions={})).is=function(e){const t=e;return t&&(S.is(t.cancellationStrategy)||y.is(t.connectionStrategy))},function(e){e[e.New=1]="New",e[e.Listening=2]="Listening",e[e.Closed=3]="Closed",e[e.Disposed=4]="Disposed"}(w||(w={})),t.createMessageConnection=function(e,n,y,v){const b=void 0!==y?y:t.NullLogger;let x=0,T=0,C=0;const R="2.0";let O;const A=Object.create(null);let P;const E=Object.create(null),_=new Map;let D,N,M=new s.LinkedMap,I=Object.create(null),j=Object.create(null),q=f.Off,F=d.Text,L=w.New;const $=new a.Emitter,W=new a.Emitter,V=new a.Emitter,U=new a.Emitter,B=new a.Emitter,K=v&&v.cancellationStrategy?v.cancellationStrategy:S.Message;function H(e){if(null===e)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+e.toString()}function z(e){}function J(){return L===w.Listening}function G(){return L===w.Closed}function Y(){return L===w.Disposed}function X(){L!==w.New&&L!==w.Listening||(L=w.Closed,W.fire(void 0))}function Q(){D||0===M.size||(D=r.default().timer.setImmediate((()=>{D=void 0,function(){if(0===M.size)return;const e=M.shift();try{o.isRequestMessage(e)?function(e){if(Y())return;function t(t,r,i){const s={jsonrpc:R,id:e.id};t instanceof o.ResponseError?s.error=t.toJson():s.result=void 0===t?null:t,ee(s,r,i),n.write(s)}function r(t,r,i){const o={jsonrpc:R,id:e.id,error:t.toJson()};ee(o,r,i),n.write(o)}!function(e){if(q!==f.Off&&N)if(F===d.Text){let t;q===f.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),N.log(`Received request '${e.method} - (${e.id})'.`,t)}else te("receive-request",e)}(e);const s=A[e.method];let a,c;s&&(a=s.type,c=s.handler);const l=Date.now();if(c||O){const s=String(e.id),u=K.receiver.createCancellationTokenSource(s);j[s]=u;try{let h;if(c)if(void 0===e.params){if(void 0!==a&&0!==a.numberOfParams)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines ${a.numberOfParams} params but recevied none.`),e.method,l);h=c(u.token)}else if(Array.isArray(e.params)){if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byName)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,l);h=c(...e.params,u.token)}else{if(void 0!==a&&a.parameterStructures===o.ParameterStructures.byPosition)return void r(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,l);h=c(e.params,u.token)}else O&&(h=O(e.method,e.params,u.token));const f=h;h?f.then?f.then((n=>{delete j[s],t(n,e.method,l)}),(t=>{delete j[s],t instanceof o.ResponseError?r(t,e.method,l):t&&i.string(t.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${t.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)})):(delete j[s],t(h,e.method,l)):(delete j[s],function(t,r,i){void 0===t&&(t=null);const o={jsonrpc:R,id:e.id,result:t};ee(o,r,i),n.write(o)}(h,e.method,l))}catch(n){delete j[s],n instanceof o.ResponseError?t(n,e.method,l):n&&i.string(n.message)?r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,l):r(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,l)}}else r(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,l)}(e):o.isNotificationMessage(e)?function(e){if(Y())return;let t,n;if(e.method===l.type.method)n=e=>{const t=e.id,n=j[String(t)];n&&n.cancel()};else{const r=E[e.method];r&&(n=r.handler,t=r.type)}if(n||P)try{!function(e){if(q!==f.Off&&N&&e.method!==p.type.method)if(F===d.Text){let t;q===f.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),N.log(`Received notification '${e.method}'.`,t)}else te("receive-notification",e)}(e),n?void 0===e.params?(void 0!==t&&0!==t.numberOfParams&&t.parameterStructures!==o.ParameterStructures.byName&&b.error(`Notification ${e.method} defines ${t.numberOfParams} params but recevied none.`),n()):Array.isArray(e.params)?(void 0!==t&&(t.parameterStructures===o.ParameterStructures.byName&&b.error(`Notification ${e.method} defines parameters by name but received parameters by position`),t.numberOfParams!==e.params.length&&b.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${e.params.length} argumennts`)),n(...e.params)):(void 0!==t&&t.parameterStructures===o.ParameterStructures.byPosition&&b.error(`Notification ${e.method} defines parameters by position but received parameters by name`),n(e.params)):P&&P(e.method,e.params)}catch(t){t.message?b.error(`Notification handler '${e.method}' failed with message: ${t.message}`):b.error(`Notification handler '${e.method}' failed unexpectedly.`)}else V.fire(e)}(e):o.isResponseMessage(e)?function(e){if(!Y())if(null===e.id)e.error?b.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,void 0,4)}`):b.error("Received response message without id. No further error information provided.");else{const t=String(e.id),n=I[t];if(function(e,t){if(q!==f.Off&&N)if(F===d.Text){let n;if(q===f.Verbose&&(e.error&&e.error.data?n=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?n=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(n="No result returned.\n\n")),t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";N.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else N.log(`Received response ${e.id} without active response promise.`,n)}else te("receive-response",e)}(e,n),n){delete I[t];try{if(e.error){const t=e.error;n.reject(new o.ResponseError(t.code,t.message,t.data))}else{if(void 0===e.result)throw new Error("Should never happen.");n.resolve(e.result)}}catch(e){e.message?b.error(`Response handler '${n.method}' failed with message: ${e.message}`):b.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}(e):function(e){if(!e)return void b.error("Received empty message.");b.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(i.string(t.id)||i.number(t.id)){const e=String(t.id),n=I[e];n&&n.reject(new Error("The received response has neither a result nor an error property."))}}(e)}finally{Q()}}()})))}e.onClose(X),e.onError((function(e){$.fire([e,void 0,void 0])})),n.onClose(X),n.onError((function(e){$.fire(e)}));const Z=e=>{try{if(o.isNotificationMessage(e)&&e.method===l.type.method){const t=H(e.params.id),r=M.get(t);if(o.isRequestMessage(r)){const i=null==v?void 0:v.connectionStrategy,o=i&&i.cancelUndispatched?i.cancelUndispatched(r,z):void 0;if(o&&(void 0!==o.error||void 0!==o.result))return M.delete(t),o.id=r.id,ee(o,e.method,Date.now()),void n.write(o)}}!function(e,t){var n;o.isRequestMessage(t)?e.set(H(t.id),t):o.isResponseMessage(t)?e.set(null===(n=t.id)?"res-unknown-"+(++C).toString():"res-"+n.toString(),t):e.set("not-"+(++T).toString(),t)}(M,e)}finally{Q()}};function ee(e,t,n){if(q!==f.Off&&N)if(F===d.Text){let r;q===f.Verbose&&(e.error&&e.error.data?r=`Error data: ${JSON.stringify(e.error.data,null,4)}\n\n`:e.result?r=`Result: ${JSON.stringify(e.result,null,4)}\n\n`:void 0===e.error&&(r="No result returned.\n\n")),N.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else te("send-response",e)}function te(e,t){if(!N||q===f.Off)return;const n={isLSPMessage:!0,type:e,message:t,timestamp:Date.now()};N.log(n)}function ne(){if(G())throw new k(g.Closed,"Connection is closed.");if(Y())throw new k(g.Disposed,"Connection is disposed.")}function re(e){return void 0===e?null:e}function ie(e){return null===e?void 0:e}function oe(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function se(e,t){switch(e){case o.ParameterStructures.auto:return oe(t)?ie(t):[re(t)];case o.ParameterStructures.byName:if(!oe(t))throw new Error("Recevied parameters by name but param is not an object literal.");return ie(t);case o.ParameterStructures.byPosition:return[re(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function ae(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=void 0;break;case 1:n=se(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++)n.push(re(t[e]));if(t.length<r)for(let e=t.length;e<r;e++)n.push(null)}return n}const ce={sendNotification:(e,...t)=>{let r,s;if(ne(),i.string(e)){r=e;const n=t[0];let i=0,a=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(i=1,a=n);let c=t.length;const l=c-i;switch(l){case 0:s=void 0;break;case 1:s=se(a,t[i]);break;default:if(a===o.ParameterStructures.byName)throw new Error(`Recevied ${l} parameters for 'by Name' notification parameter structure.`);s=t.slice(i,c).map((e=>re(e)))}}else{const n=t;r=e.method,s=ae(e,n)}const a={jsonrpc:R,method:r,params:s};!function(e){if(q!==f.Off&&N)if(F===d.Text){let t;q===f.Verbose&&(t=e.params?`Params: ${JSON.stringify(e.params,null,4)}\n\n`:"No parameters provided.\n\n"),N.log(`Sending notification '${e.method}'.`,t)}else te("send-notification",e)}(a),n.write(a)},onNotification:(e,t)=>{let n;return ne(),i.func(e)?P=e:t&&(i.string(e)?(n=e,E[e]={type:void 0,handler:t}):(n=e.method,E[e.method]={type:e,handler:t})),{dispose:()=>{void 0!==n?delete E[n]:P=void 0}}},onProgress:(e,t,n)=>{if(_.has(t))throw new Error(`Progress handler for token ${t} already registered`);return _.set(t,n),{dispose:()=>{_.delete(t)}}},sendProgress:(e,t,n)=>{ce.sendNotification(u.type,{token:t,value:n})},onUnhandledProgress:U.event,sendRequest:(e,...t)=>{let r,s,a;if(ne(),function(){if(!J())throw new Error("Call listen() first.")}(),i.string(e)){r=e;const n=t[0],i=t[t.length-1];let l=0,u=o.ParameterStructures.auto;o.ParameterStructures.is(n)&&(l=1,u=n);let h=t.length;c.CancellationToken.is(i)&&(h-=1,a=i);const f=h-l;switch(f){case 0:s=void 0;break;case 1:s=se(u,t[l]);break;default:if(u===o.ParameterStructures.byName)throw new Error(`Recevied ${f} parameters for 'by Name' request parameter structure.`);s=t.slice(l,h).map((e=>re(e)))}}else{const n=t;r=e.method,s=ae(e,n);const i=e.numberOfParams;a=c.CancellationToken.is(n[i])?n[i]:void 0}const l=x++;let u;return a&&(u=a.onCancellationRequested((()=>{K.sender.sendCancellation(ce,l)}))),new Promise(((e,t)=>{const i={jsonrpc:R,id:l,method:r,params:s};let a={method:r,timerStart:Date.now(),resolve:t=>{e(t),K.sender.cleanup(l),null==u||u.dispose()},reject:e=>{t(e),K.sender.cleanup(l),null==u||u.dispose()}};!function(e){if(q!==f.Off&&N)if(F===d.Text){let t;q===f.Verbose&&e.params&&(t=`Params: ${JSON.stringify(e.params,null,4)}\n\n`),N.log(`Sending request '${e.method} - (${e.id})'.`,t)}else te("send-request",e)}(i);try{n.write(i)}catch(e){a.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason")),a=null}a&&(I[String(l)]=a)}))},onRequest:(e,t)=>{ne();let n=null;return h.is(e)?(n=void 0,O=e):i.string(e)?(n=null,void 0!==t&&(n=e,A[e]={handler:t,type:void 0})):void 0!==t&&(n=e.method,A[e.method]={type:e,handler:t}),{dispose:()=>{null!==n&&(void 0!==n?delete A[n]:O=void 0)}}},trace:(e,t,n)=>{let r=!1,o=d.Text;void 0!==n&&(i.boolean(n)?r=n:(r=n.sendNotification||!1,o=n.traceFormat||d.Text)),q=e,F=o,N=q===f.Off?void 0:t,!r||G()||Y()||ce.sendNotification(m.type,{value:f.toString(e)})},onError:$.event,onClose:W.event,onUnhandledNotification:V.event,onDispose:B.event,end:()=>{n.end()},dispose:()=>{if(Y())return;L=w.Disposed,B.fire(void 0);const t=new Error("Connection got disposed.");Object.keys(I).forEach((e=>{I[e].reject(t)})),I=Object.create(null),j=Object.create(null),M=new s.LinkedMap,i.func(n.dispose)&&n.dispose(),i.func(e.dispose)&&e.dispose()},listen:()=>{ne(),function(){if(J())throw new k(g.AlreadyListening,"Connection is already listening")}(),L=w.Listening,e.listen(Z)},inspect:()=>{r.default().console.log("inspect")}};return ce.onNotification(p.type,(e=>{q!==f.Off&&N&&N.log(e.message,q===f.Verbose?e.verbose:void 0)})),ce.onNotification(u.type,(e=>{const t=_.get(e.token);t?t(e.value):U.fire(e)})),ce}},3911:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Disposable=void 0,(t.Disposable||(t.Disposable={})).create=function(e){return{dispose:e}}},7135:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;const r=n(147);!function(e){const t={dispose(){}};e.None=function(){return t}}(t.Event||(t.Event={}));class i{add(e,t=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(t),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks)return;let n=!1;for(let r=0,i=this._callbacks.length;r<i;r++)if(this._callbacks[r]===e){if(this._contexts[r]===t)return this._callbacks.splice(r,1),void this._contexts.splice(r,1);n=!0}if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];const t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,s=n.length;o<s;o++)try{t.push(n[o].apply(i[o],e))}catch(e){r.default().console.error(e)}return t}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}}class o{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,t,n)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,t);const r={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,t),r.dispose=o._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(r),r}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}t.Emitter=o,o._noop=function(){}},7574:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))}},6184:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=void 0,function(e){e.None=0,e.First=1,e.AsOld=e.First,e.Last=2,e.AsNew=e.Last}(n=t.Touch||(t.Touch={}));class r{constructor(){this[Symbol.toStringTag]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e,t=n.None){const r=this._map.get(e);if(r)return t!==n.None&&this.touch(r,t),r.value}set(e,t,r=n.None){let i=this._map.get(e);if(i)i.value=t,r!==n.None&&this.touch(i,r);else{switch(i={key:e,value:t,next:void 0,previous:void 0},r){case n.None:this.addItemLast(i);break;case n.First:this.addItemFirst(i);break;case n.Last:default:this.addItemLast(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let r=this._head;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.key,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}values(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.value,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:[n.key,n.value],done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return r}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(t===n.First||t===n.Last)if(t===n.First){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===n.Last){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}t.LinkedMap=r,t.LRUCache=class extends r{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=n.AsNew){return super.get(e,t)}peek(e){return super.get(e,n.None)}set(e,t){return super.set(e,t,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}},5530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMessageBuffer=void 0,t.AbstractMessageBuffer=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){const t="string"==typeof e?this.fromString(e,this._encoding):e;this._chunks.push(t),this._totalLength+=t.byteLength}tryReadHeaders(){if(0===this._chunks.length)return;let e=0,t=0,n=0,r=0;e:for(;t<this._chunks.length;){const i=this._chunks[t];for(n=0;n<i.length;){switch(i[n]){case 13:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case 10:switch(e){case 1:e=2;break;case 3:e=4,n++;break e;default:e=0}break;default:e=0}n++}r+=i.byteLength,t++}if(4!==e)return;const i=this._read(r+n),o=new Map,s=this.toString(i,"ascii").split("\r\n");if(s.length<2)return o;for(let e=0;e<s.length-2;e++){const t=s[e],n=t.indexOf(":");if(-1===n)throw new Error("Message header must separate key and value using :");const r=t.substr(0,n),i=t.substr(n+1).trim();o.set(r,i)}return o}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(0===e)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){const t=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0],n=this.asNative(t,e);return this._chunks[0]=t.slice(e),this._totalLength-=e,n}const t=this.allocNative(e);let n=0;for(;e>0;){const r=this._chunks[0];if(r.byteLength>e){const i=r.slice(0,e);t.set(i,n),n+=e,this._chunks[0]=r.slice(e),this._totalLength-=e,e-=e}else t.set(r,n),n+=r.byteLength,this._chunks.shift(),this._totalLength-=r.byteLength,e-=r.byteLength}return t}}},6525:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const r=n(147),i=n(7574),o=n(7135);var s;(t.MessageReader||(t.MessageReader={})).is=function(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)};class a{constructor(){this.errorEmitter=new o.Emitter,this.closeEmitter=new o.Emitter,this.partialMessageEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageReader=a,function(e){e.fromOptions=function(e){var t;let n,i;const o=new Map;let s;const a=new Map;if(void 0===e||"string"==typeof e)n=null!=e?e:"utf-8";else{if(n=null!==(t=e.charset)&&void 0!==t?t:"utf-8",void 0!==e.contentDecoder&&(i=e.contentDecoder,o.set(i.name,i)),void 0!==e.contentDecoders)for(const t of e.contentDecoders)o.set(t.name,t);if(void 0!==e.contentTypeDecoder&&(s=e.contentTypeDecoder,a.set(s.name,s)),void 0!==e.contentTypeDecoders)for(const t of e.contentTypeDecoders)a.set(t.name,t)}return void 0===s&&(s=r.default().applicationJson.decoder,a.set(s.name,s)),{charset:n,contentDecoder:i,contentDecoders:o,contentTypeDecoder:s,contentTypeDecoders:a}}}(s||(s={})),t.ReadableStreamMessageReader=class extends a{constructor(e,t){super(),this.readable=e,this.options=s.fromOptions(t),this.buffer=r.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));return this.readable.onError((e=>this.fireError(e))),this.readable.onClose((()=>this.fireClose())),t}onData(e){for(this.buffer.append(e);;){if(-1===this.nextMessageLength){const e=this.buffer.tryReadHeaders();if(!e)return;const t=e.get("Content-Length");if(!t)throw new Error("Header must provide a Content-Length property.");const n=parseInt(t);if(isNaN(n))throw new Error("Content-Length value must be a number.");this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(void 0===e)return void this.setPartialMessageTimer();let t;this.clearPartialMessageTimer(),this.nextMessageLength=-1,t=void 0!==this.options.contentDecoder?this.options.contentDecoder.decode(e):Promise.resolve(e),t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){this.partialMessageTimer&&(r.default().timer.clearTimeout(this.partialMessageTimer),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),this._partialMessageTimeout<=0||(this.partialMessageTimer=r.default().timer.setTimeout(((e,t)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:t}),this.setPartialMessageTimer())}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}},6654:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const r=n(147),i=n(7574),o=n(142),s=n(7135);var a;(t.MessageWriter||(t.MessageWriter={})).is=function(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)};class c{constructor(){this.errorEmitter=new s.Emitter,this.closeEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}t.AbstractMessageWriter=c,function(e){e.fromOptions=function(e){var t,n;return void 0===e||"string"==typeof e?{charset:null!=e?e:"utf-8",contentTypeEncoder:r.default().applicationJson.encoder}:{charset:null!==(t=e.charset)&&void 0!==t?t:"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:null!==(n=e.contentTypeEncoder)&&void 0!==n?n:r.default().applicationJson.encoder}}}(a||(a={})),t.WriteableStreamMessageWriter=class extends c{constructor(e,t){super(),this.writable=e,this.options=a.fromOptions(t),this.errorCount=0,this.writeSemaphore=new o.Semaphore(1),this.writable.onError((e=>this.fireError(e))),this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>this.options.contentTypeEncoder.encode(e,this.options).then((e=>void 0!==this.options.contentEncoder?this.options.contentEncoder.encode(e):e)).then((t=>{const n=[];return n.push("Content-Length: ",t.byteLength.toString(),"\r\n"),n.push("\r\n"),this.doWrite(e,n,t)}),(e=>{throw this.fireError(e),e}))))}async doWrite(e,t,n){try{return await this.writable.write(t.join(""),"ascii"),this.writable.write(n)}catch(t){return this.handleError(t,e),Promise.reject(t)}}handleError(e,t){this.errorCount++,this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}},839:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isResponseMessage=t.isNotificationMessage=t.isRequestMessage=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const r=n(7574);var i;!function(e){e.ParseError=-32700,e.InvalidRequest=-32600,e.MethodNotFound=-32601,e.InvalidParams=-32602,e.InternalError=-32603,e.jsonrpcReservedErrorRangeStart=-32099,e.serverErrorStart=e.jsonrpcReservedErrorRangeStart,e.MessageWriteError=-32099,e.MessageReadError=-32098,e.ServerNotInitialized=-32002,e.UnknownErrorCode=-32001,e.jsonrpcReservedErrorRangeEnd=-32e3,e.serverErrorEnd=e.jsonrpcReservedErrorRangeEnd}(i=t.ErrorCodes||(t.ErrorCodes={}));class o extends Error{constructor(e,t,n){super(t),this.code=r.number(e)?e:i.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,o.prototype)}toJson(){return{code:this.code,message:this.message,data:this.data}}}t.ResponseError=o;class s{constructor(e){this.kind=e}static is(e){return e===s.auto||e===s.byName||e===s.byPosition}toString(){return this.kind}}t.ParameterStructures=s,s.auto=new s("auto"),s.byPosition=new s("byPosition"),s.byName=new s("byName");class a{constructor(e,t){this.method=e,this.numberOfParams=t}get parameterStructures(){return s.auto}}t.AbstractMessageSignature=a,t.RequestType0=class extends a{constructor(e){super(e,0)}},t.RequestType=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType1=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.RequestType2=class extends a{constructor(e){super(e,2)}},t.RequestType3=class extends a{constructor(e){super(e,3)}},t.RequestType4=class extends a{constructor(e){super(e,4)}},t.RequestType5=class extends a{constructor(e){super(e,5)}},t.RequestType6=class extends a{constructor(e){super(e,6)}},t.RequestType7=class extends a{constructor(e){super(e,7)}},t.RequestType8=class extends a{constructor(e){super(e,8)}},t.RequestType9=class extends a{constructor(e){super(e,9)}},t.NotificationType=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType0=class extends a{constructor(e){super(e,0)}},t.NotificationType1=class extends a{constructor(e,t=s.auto){super(e,1),this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}},t.NotificationType2=class extends a{constructor(e){super(e,2)}},t.NotificationType3=class extends a{constructor(e){super(e,3)}},t.NotificationType4=class extends a{constructor(e){super(e,4)}},t.NotificationType5=class extends a{constructor(e){super(e,5)}},t.NotificationType6=class extends a{constructor(e){super(e,6)}},t.NotificationType7=class extends a{constructor(e){super(e,7)}},t.NotificationType8=class extends a{constructor(e){super(e,8)}},t.NotificationType9=class extends a{constructor(e){super(e,9)}},t.isRequestMessage=function(e){const t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))},t.isNotificationMessage=function(e){const t=e;return t&&r.string(t.method)&&void 0===e.id},t.isResponseMessage=function(e){const t=e;return t&&(void 0!==t.result||!!t.error)&&(r.string(t.id)||r.number(t.id)||null===t.id)}},147:(e,t)=>{"use strict";let n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r},142:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Semaphore=void 0;const r=n(147);t.Semaphore=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n}),this.runNext()}))}get active(){return this._active}runNext(){0!==this._waiting.length&&this._active!==this._capacity&&r.default().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(0===this._waiting.length||this._active===this._capacity)return;const e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const t=e.thunk();t instanceof Promise?t.then((t=>{this._active--,e.resolve(t),this.runNext()}),(t=>{this._active--,e.reject(t),this.runNext()})):(this._active--,e.resolve(t),this.runNext())}catch(t){this._active--,e.reject(t),this.runNext()}}}},5224:(e,t,n)=>{"use strict";e.exports=n(152)},152:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const o=n(1169);i(n(1169),t),i(n(1661),t),t.createProtocolConnection=function(e,t,n,r){return o.createMessageConnection(e,t,n,r)}},1661:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.LSPErrorCodes=t.createProtocolConnection=void 0,i(n(9054),t),i(n(1674),t),i(n(6140),t),i(n(542),t);var o,s=n(3767);Object.defineProperty(t,"createProtocolConnection",{enumerable:!0,get:function(){return s.createProtocolConnection}}),(o=t.LSPErrorCodes||(t.LSPErrorCodes={})).lspReservedErrorRangeStart=-32899,o.ContentModified=-32801,o.RequestCancelled=-32800,o.lspReservedErrorRangeEnd=-32800},3767:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createProtocolConnection=void 0;const r=n(9054);t.createProtocolConnection=function(e,t,n,i){return r.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),r.createMessageConnection(e,t,n,i)}},6140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=void 0;const r=n(9054);t.RegistrationType=class{constructor(e){this.method=e}};class i extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=i;class o extends r.RequestType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolRequestType=o;class s extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=s;class a extends r.NotificationType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolNotificationType=a},2918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const r=n(6140);var i,o,s;(s=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={})).method="textDocument/prepareCallHierarchy",s.type=new r.ProtocolRequestType(s.method),(o=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={})).method="callHierarchy/incomingCalls",o.type=new r.ProtocolRequestType(o.method),(i=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={})).method="callHierarchy/outgoingCalls",i.type=new r.ProtocolRequestType(i.method)},9891:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const r=n(6140);var i;(i=t.DocumentColorRequest||(t.DocumentColorRequest={})).method="textDocument/documentColor",i.type=new r.ProtocolRequestType(i.method),(t.ColorPresentationRequest||(t.ColorPresentationRequest={})).type=new r.ProtocolRequestType("textDocument/colorPresentation")},5934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationRequest=void 0;const r=n(6140);(t.ConfigurationRequest||(t.ConfigurationRequest={})).type=new r.ProtocolRequestType("workspace/configuration")},764:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeclarationRequest=void 0;const r=n(6140);var i;(i=t.DeclarationRequest||(t.DeclarationRequest={})).method="textDocument/declaration",i.type=new r.ProtocolRequestType(i.method)},7846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const r=n(6140);var i,o,s,a,c,l,u;(u=t.FileOperationPatternKind||(t.FileOperationPatternKind={})).file="file",u.folder="folder",(l=t.WillCreateFilesRequest||(t.WillCreateFilesRequest={})).method="workspace/willCreateFiles",l.type=new r.ProtocolRequestType(l.method),(c=t.DidCreateFilesNotification||(t.DidCreateFilesNotification={})).method="workspace/didCreateFiles",c.type=new r.ProtocolNotificationType(c.method),(a=t.WillRenameFilesRequest||(t.WillRenameFilesRequest={})).method="workspace/willRenameFiles",a.type=new r.ProtocolRequestType(a.method),(s=t.DidRenameFilesNotification||(t.DidRenameFilesNotification={})).method="workspace/didRenameFiles",s.type=new r.ProtocolNotificationType(s.method),(o=t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={})).method="workspace/didDeleteFiles",o.type=new r.ProtocolNotificationType(o.method),(i=t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={})).method="workspace/willDeleteFiles",i.type=new r.ProtocolRequestType(i.method)},3394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FoldingRangeRequest=t.FoldingRangeKind=void 0;const r=n(6140);var i,o;(o=t.FoldingRangeKind||(t.FoldingRangeKind={})).Comment="comment",o.Imports="imports",o.Region="region",(i=t.FoldingRangeRequest||(t.FoldingRangeRequest={})).method="textDocument/foldingRange",i.type=new r.ProtocolRequestType(i.method)},2122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImplementationRequest=void 0;const r=n(6140);var i;(i=t.ImplementationRequest||(t.ImplementationRequest={})).method="textDocument/implementation",i.type=new r.ProtocolRequestType(i.method)},542:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeError=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.DocumentFilter=void 0,t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=void 0;const r=n(9533),i=n(6140),o=n(2122);Object.defineProperty(t,"ImplementationRequest",{enumerable:!0,get:function(){return o.ImplementationRequest}});const s=n(1589);Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:!0,get:function(){return s.TypeDefinitionRequest}});const a=n(9795);Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return a.WorkspaceFoldersRequest}}),Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return a.DidChangeWorkspaceFoldersNotification}});const c=n(5934);Object.defineProperty(t,"ConfigurationRequest",{enumerable:!0,get:function(){return c.ConfigurationRequest}});const l=n(9891);Object.defineProperty(t,"DocumentColorRequest",{enumerable:!0,get:function(){return l.DocumentColorRequest}}),Object.defineProperty(t,"ColorPresentationRequest",{enumerable:!0,get:function(){return l.ColorPresentationRequest}});const u=n(3394);Object.defineProperty(t,"FoldingRangeRequest",{enumerable:!0,get:function(){return u.FoldingRangeRequest}});const h=n(764);Object.defineProperty(t,"DeclarationRequest",{enumerable:!0,get:function(){return h.DeclarationRequest}});const f=n(5206);Object.defineProperty(t,"SelectionRangeRequest",{enumerable:!0,get:function(){return f.SelectionRangeRequest}});const d=n(1862);Object.defineProperty(t,"WorkDoneProgress",{enumerable:!0,get:function(){return d.WorkDoneProgress}}),Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return d.WorkDoneProgressCreateRequest}}),Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return d.WorkDoneProgressCancelNotification}});const m=n(2918);Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return m.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return m.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return m.CallHierarchyPrepareRequest}});const p=n(9434);Object.defineProperty(t,"SemanticTokenTypes",{enumerable:!0,get:function(){return p.SemanticTokenTypes}}),Object.defineProperty(t,"SemanticTokenModifiers",{enumerable:!0,get:function(){return p.SemanticTokenModifiers}}),Object.defineProperty(t,"SemanticTokens",{enumerable:!0,get:function(){return p.SemanticTokens}}),Object.defineProperty(t,"TokenFormat",{enumerable:!0,get:function(){return p.TokenFormat}}),Object.defineProperty(t,"SemanticTokensRequest",{enumerable:!0,get:function(){return p.SemanticTokensRequest}}),Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return p.SemanticTokensDeltaRequest}}),Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return p.SemanticTokensRangeRequest}}),Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return p.SemanticTokensRefreshRequest}}),Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return p.SemanticTokensRegistrationType}});const g=n(5726);Object.defineProperty(t,"ShowDocumentRequest",{enumerable:!0,get:function(){return g.ShowDocumentRequest}});const y=n(6305);Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return y.LinkedEditingRangeRequest}});const v=n(7846);Object.defineProperty(t,"FileOperationPatternKind",{enumerable:!0,get:function(){return v.FileOperationPatternKind}}),Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:!0,get:function(){return v.DidCreateFilesNotification}}),Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:!0,get:function(){return v.WillCreateFilesRequest}}),Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:!0,get:function(){return v.DidRenameFilesNotification}}),Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:!0,get:function(){return v.WillRenameFilesRequest}}),Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return v.DidDeleteFilesNotification}}),Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return v.WillDeleteFilesRequest}});const b=n(3443);var S,w,k,x,T,C,R,O,A,P,E,_,D,N,M,I,j,q,F,L,$,W,V,U,B,K,H,z,J,G,Y,X,Q,Z,ee,te,ne,re,ie,oe;Object.defineProperty(t,"UniquenessLevel",{enumerable:!0,get:function(){return b.UniquenessLevel}}),Object.defineProperty(t,"MonikerKind",{enumerable:!0,get:function(){return b.MonikerKind}}),Object.defineProperty(t,"MonikerRequest",{enumerable:!0,get:function(){return b.MonikerRequest}}),function(e){e.is=function(e){const t=e;return r.string(t.language)||r.string(t.scheme)||r.string(t.pattern)}}(S=t.DocumentFilter||(t.DocumentFilter={})),function(e){e.is=function(e){if(!Array.isArray(e))return!1;for(let t of e)if(!r.string(t)&&!S.is(t))return!1;return!0}}(w=t.DocumentSelector||(t.DocumentSelector={})),(t.RegistrationRequest||(t.RegistrationRequest={})).type=new i.ProtocolRequestType("client/registerCapability"),(t.UnregistrationRequest||(t.UnregistrationRequest={})).type=new i.ProtocolRequestType("client/unregisterCapability"),(oe=t.ResourceOperationKind||(t.ResourceOperationKind={})).Create="create",oe.Rename="rename",oe.Delete="delete",(ie=t.FailureHandlingKind||(t.FailureHandlingKind={})).Abort="abort",ie.Transactional="transactional",ie.TextOnlyTransactional="textOnlyTransactional",ie.Undo="undo",(t.StaticRegistrationOptions||(t.StaticRegistrationOptions={})).hasId=function(e){const t=e;return t&&r.string(t.id)&&t.id.length>0},(t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={})).is=function(e){const t=e;return t&&(null===t.documentSelector||w.is(t.documentSelector))},(re=t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={})).is=function(e){const t=e;return r.objectLiteral(t)&&(void 0===t.workDoneProgress||r.boolean(t.workDoneProgress))},re.hasWorkDoneProgress=function(e){const t=e;return t&&r.boolean(t.workDoneProgress)},(t.InitializeRequest||(t.InitializeRequest={})).type=new i.ProtocolRequestType("initialize"),(t.InitializeError||(t.InitializeError={})).unknownProtocolVersion=1,(t.InitializedNotification||(t.InitializedNotification={})).type=new i.ProtocolNotificationType("initialized"),(t.ShutdownRequest||(t.ShutdownRequest={})).type=new i.ProtocolRequestType0("shutdown"),(t.ExitNotification||(t.ExitNotification={})).type=new i.ProtocolNotificationType0("exit"),(t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={})).type=new i.ProtocolNotificationType("workspace/didChangeConfiguration"),(ne=t.MessageType||(t.MessageType={})).Error=1,ne.Warning=2,ne.Info=3,ne.Log=4,(t.ShowMessageNotification||(t.ShowMessageNotification={})).type=new i.ProtocolNotificationType("window/showMessage"),(t.ShowMessageRequest||(t.ShowMessageRequest={})).type=new i.ProtocolRequestType("window/showMessageRequest"),(t.LogMessageNotification||(t.LogMessageNotification={})).type=new i.ProtocolNotificationType("window/logMessage"),(t.TelemetryEventNotification||(t.TelemetryEventNotification={})).type=new i.ProtocolNotificationType("telemetry/event"),(te=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={})).None=0,te.Full=1,te.Incremental=2,(ee=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={})).method="textDocument/didOpen",ee.type=new i.ProtocolNotificationType(ee.method),(Z=t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={})).isIncremental=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},Z.isFull=function(e){let t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},(Q=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={})).method="textDocument/didChange",Q.type=new i.ProtocolNotificationType(Q.method),(X=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={})).method="textDocument/didClose",X.type=new i.ProtocolNotificationType(X.method),(Y=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={})).method="textDocument/didSave",Y.type=new i.ProtocolNotificationType(Y.method),(G=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={})).Manual=1,G.AfterDelay=2,G.FocusOut=3,(J=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={})).method="textDocument/willSave",J.type=new i.ProtocolNotificationType(J.method),(z=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={})).method="textDocument/willSaveWaitUntil",z.type=new i.ProtocolRequestType(z.method),(t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={})).type=new i.ProtocolNotificationType("workspace/didChangeWatchedFiles"),(H=t.FileChangeType||(t.FileChangeType={})).Created=1,H.Changed=2,H.Deleted=3,(K=t.WatchKind||(t.WatchKind={})).Create=1,K.Change=2,K.Delete=4,(t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={})).type=new i.ProtocolNotificationType("textDocument/publishDiagnostics"),(B=t.CompletionTriggerKind||(t.CompletionTriggerKind={})).Invoked=1,B.TriggerCharacter=2,B.TriggerForIncompleteCompletions=3,(U=t.CompletionRequest||(t.CompletionRequest={})).method="textDocument/completion",U.type=new i.ProtocolRequestType(U.method),(V=t.CompletionResolveRequest||(t.CompletionResolveRequest={})).method="completionItem/resolve",V.type=new i.ProtocolRequestType(V.method),(W=t.HoverRequest||(t.HoverRequest={})).method="textDocument/hover",W.type=new i.ProtocolRequestType(W.method),($=t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={})).Invoked=1,$.TriggerCharacter=2,$.ContentChange=3,(L=t.SignatureHelpRequest||(t.SignatureHelpRequest={})).method="textDocument/signatureHelp",L.type=new i.ProtocolRequestType(L.method),(F=t.DefinitionRequest||(t.DefinitionRequest={})).method="textDocument/definition",F.type=new i.ProtocolRequestType(F.method),(q=t.ReferencesRequest||(t.ReferencesRequest={})).method="textDocument/references",q.type=new i.ProtocolRequestType(q.method),(j=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={})).method="textDocument/documentHighlight",j.type=new i.ProtocolRequestType(j.method),(I=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={})).method="textDocument/documentSymbol",I.type=new i.ProtocolRequestType(I.method),(M=t.CodeActionRequest||(t.CodeActionRequest={})).method="textDocument/codeAction",M.type=new i.ProtocolRequestType(M.method),(N=t.CodeActionResolveRequest||(t.CodeActionResolveRequest={})).method="codeAction/resolve",N.type=new i.ProtocolRequestType(N.method),(D=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={})).method="workspace/symbol",D.type=new i.ProtocolRequestType(D.method),(_=t.CodeLensRequest||(t.CodeLensRequest={})).method="textDocument/codeLens",_.type=new i.ProtocolRequestType(_.method),(E=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={})).method="codeLens/resolve",E.type=new i.ProtocolRequestType(E.method),(P=t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={})).method="workspace/codeLens/refresh",P.type=new i.ProtocolRequestType0(P.method),(A=t.DocumentLinkRequest||(t.DocumentLinkRequest={})).method="textDocument/documentLink",A.type=new i.ProtocolRequestType(A.method),(O=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={})).method="documentLink/resolve",O.type=new i.ProtocolRequestType(O.method),(R=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={})).method="textDocument/formatting",R.type=new i.ProtocolRequestType(R.method),(C=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={})).method="textDocument/rangeFormatting",C.type=new i.ProtocolRequestType(C.method),(T=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={})).method="textDocument/onTypeFormatting",T.type=new i.ProtocolRequestType(T.method),(t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={})).Identifier=1,(x=t.RenameRequest||(t.RenameRequest={})).method="textDocument/rename",x.type=new i.ProtocolRequestType(x.method),(k=t.PrepareRenameRequest||(t.PrepareRenameRequest={})).method="textDocument/prepareRename",k.type=new i.ProtocolRequestType(k.method),(t.ExecuteCommandRequest||(t.ExecuteCommandRequest={})).type=new i.ProtocolRequestType("workspace/executeCommand"),(t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={})).type=new i.ProtocolRequestType("workspace/applyEdit")},6305:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeRequest=void 0;const r=n(6140);var i;(i=t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={})).method="textDocument/linkedEditingRange",i.type=new r.ProtocolRequestType(i.method)},3443:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const r=n(6140);var i,o,s;(s=t.UniquenessLevel||(t.UniquenessLevel={})).document="document",s.project="project",s.group="group",s.scheme="scheme",s.global="global",(o=t.MonikerKind||(t.MonikerKind={})).import="import",o.export="export",o.local="local",(i=t.MonikerRequest||(t.MonikerRequest={})).method="textDocument/moniker",i.type=new r.ProtocolRequestType(i.method)},1862:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const r=n(9054),i=n(6140);var o;(o=t.WorkDoneProgress||(t.WorkDoneProgress={})).type=new r.ProgressType,o.is=function(e){return e===o.type},(t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={})).type=new i.ProtocolRequestType("window/workDoneProgress/create"),(t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={})).type=new i.ProtocolNotificationType("window/workDoneProgress/cancel")},5206:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionRangeRequest=void 0;const r=n(6140);var i;(i=t.SelectionRangeRequest||(t.SelectionRangeRequest={})).method="textDocument/selectionRange",i.type=new r.ProtocolRequestType(i.method)},9434:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=void 0;const r=n(6140);var i,o,s,a,c,l,u;(u=t.SemanticTokenTypes||(t.SemanticTokenTypes={})).namespace="namespace",u.type="type",u.class="class",u.enum="enum",u.interface="interface",u.struct="struct",u.typeParameter="typeParameter",u.parameter="parameter",u.variable="variable",u.property="property",u.enumMember="enumMember",u.event="event",u.function="function",u.method="method",u.macro="macro",u.keyword="keyword",u.modifier="modifier",u.comment="comment",u.string="string",u.number="number",u.regexp="regexp",u.operator="operator",(l=t.SemanticTokenModifiers||(t.SemanticTokenModifiers={})).declaration="declaration",l.definition="definition",l.readonly="readonly",l.static="static",l.deprecated="deprecated",l.abstract="abstract",l.async="async",l.modification="modification",l.documentation="documentation",l.defaultLibrary="defaultLibrary",(t.SemanticTokens||(t.SemanticTokens={})).is=function(e){const t=e;return void 0!==t&&(void 0===t.resultId||"string"==typeof t.resultId)&&Array.isArray(t.data)&&(0===t.data.length||"number"==typeof t.data[0])},(t.TokenFormat||(t.TokenFormat={})).Relative="relative",(c=t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={})).method="textDocument/semanticTokens",c.type=new r.RegistrationType(c.method),(a=t.SemanticTokensRequest||(t.SemanticTokensRequest={})).method="textDocument/semanticTokens/full",a.type=new r.ProtocolRequestType(a.method),(s=t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={})).method="textDocument/semanticTokens/full/delta",s.type=new r.ProtocolRequestType(s.method),(o=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={})).method="textDocument/semanticTokens/range",o.type=new r.ProtocolRequestType(o.method),(i=t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={})).method="workspace/semanticTokens/refresh",i.type=new r.ProtocolRequestType0(i.method)},5726:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentRequest=void 0;const r=n(6140);var i;(i=t.ShowDocumentRequest||(t.ShowDocumentRequest={})).method="window/showDocument",i.type=new r.ProtocolRequestType(i.method)},1589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeDefinitionRequest=void 0;const r=n(6140);var i;(i=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={})).method="textDocument/typeDefinition",i.type=new r.ProtocolRequestType(i.method)},9795:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const r=n(6140);(t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={})).type=new r.ProtocolRequestType0("workspace/workspaceFolders"),(t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={})).type=new r.ProtocolNotificationType("workspace/didChangeWorkspaceFolders")},9533:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=function(e){return"function"==typeof e},t.array=r,t.stringArray=function(e){return r(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.objectLiteral=function(e){return null!==e&&"object"==typeof e}},1674:(e,t,n)=>{"use strict";var r,i,o,s,a,c,l,u,h,f,d,m,p,g,y,v,b,S,w,k,x,T,C,R,O,A;n.r(t),n.d(t,{integer:()=>r,uinteger:()=>i,Position:()=>o,Range:()=>s,Location:()=>a,LocationLink:()=>c,Color:()=>l,ColorInformation:()=>u,ColorPresentation:()=>h,FoldingRangeKind:()=>f,FoldingRange:()=>d,DiagnosticRelatedInformation:()=>m,DiagnosticSeverity:()=>p,DiagnosticTag:()=>g,CodeDescription:()=>y,Diagnostic:()=>v,Command:()=>b,TextEdit:()=>S,ChangeAnnotation:()=>w,ChangeAnnotationIdentifier:()=>k,AnnotatedTextEdit:()=>x,TextDocumentEdit:()=>T,CreateFile:()=>C,RenameFile:()=>R,DeleteFile:()=>O,WorkspaceEdit:()=>A,WorkspaceChange:()=>ae,TextDocumentIdentifier:()=>P,VersionedTextDocumentIdentifier:()=>E,OptionalVersionedTextDocumentIdentifier:()=>_,TextDocumentItem:()=>D,MarkupKind:()=>N,MarkupContent:()=>M,CompletionItemKind:()=>I,InsertTextFormat:()=>j,CompletionItemTag:()=>q,InsertReplaceEdit:()=>F,InsertTextMode:()=>L,CompletionItem:()=>$,CompletionList:()=>W,MarkedString:()=>V,Hover:()=>U,ParameterInformation:()=>B,SignatureInformation:()=>K,DocumentHighlightKind:()=>H,DocumentHighlight:()=>z,SymbolKind:()=>J,SymbolTag:()=>G,SymbolInformation:()=>Y,DocumentSymbol:()=>X,CodeActionKind:()=>Q,CodeActionContext:()=>Z,CodeAction:()=>ee,CodeLens:()=>te,FormattingOptions:()=>ne,DocumentLink:()=>re,SelectionRange:()=>ie,EOL:()=>le,TextDocument:()=>ce}),function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647}(r||(r={})),function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647}(i||(i={})),function(e){e.create=function(e,t){return e===Number.MAX_VALUE&&(e=i.MAX_VALUE),t===Number.MAX_VALUE&&(t=i.MAX_VALUE),{line:e,character:t}},e.is=function(e){var t=e;return ue.objectLiteral(t)&&ue.uinteger(t.line)&&ue.uinteger(t.character)}}(o||(o={})),function(e){e.create=function(e,t,n,r){if(ue.uinteger(e)&&ue.uinteger(t)&&ue.uinteger(n)&&ue.uinteger(r))return{start:o.create(e,t),end:o.create(n,r)};if(o.is(e)&&o.is(t))return{start:e,end:t};throw new Error("Range#create called with invalid arguments["+e+", "+t+", "+n+", "+r+"]")},e.is=function(e){var t=e;return ue.objectLiteral(t)&&o.is(t.start)&&o.is(t.end)}}(s||(s={})),function(e){e.create=function(e,t){return{uri:e,range:t}},e.is=function(e){var t=e;return ue.defined(t)&&s.is(t.range)&&(ue.string(t.uri)||ue.undefined(t.uri))}}(a||(a={})),function(e){e.create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},e.is=function(e){var t=e;return ue.defined(t)&&s.is(t.targetRange)&&ue.string(t.targetUri)&&(s.is(t.targetSelectionRange)||ue.undefined(t.targetSelectionRange))&&(s.is(t.originSelectionRange)||ue.undefined(t.originSelectionRange))}}(c||(c={})),function(e){e.create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},e.is=function(e){var t=e;return ue.numberRange(t.red,0,1)&&ue.numberRange(t.green,0,1)&&ue.numberRange(t.blue,0,1)&&ue.numberRange(t.alpha,0,1)}}(l||(l={})),function(e){e.create=function(e,t){return{range:e,color:t}},e.is=function(e){var t=e;return s.is(t.range)&&l.is(t.color)}}(u||(u={})),function(e){e.create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},e.is=function(e){var t=e;return ue.string(t.label)&&(ue.undefined(t.textEdit)||S.is(t))&&(ue.undefined(t.additionalTextEdits)||ue.typedArray(t.additionalTextEdits,S.is))}}(h||(h={})),function(e){e.Comment="comment",e.Imports="imports",e.Region="region"}(f||(f={})),function(e){e.create=function(e,t,n,r,i){var o={startLine:e,endLine:t};return ue.defined(n)&&(o.startCharacter=n),ue.defined(r)&&(o.endCharacter=r),ue.defined(i)&&(o.kind=i),o},e.is=function(e){var t=e;return ue.uinteger(t.startLine)&&ue.uinteger(t.startLine)&&(ue.undefined(t.startCharacter)||ue.uinteger(t.startCharacter))&&(ue.undefined(t.endCharacter)||ue.uinteger(t.endCharacter))&&(ue.undefined(t.kind)||ue.string(t.kind))}}(d||(d={})),function(e){e.create=function(e,t){return{location:e,message:t}},e.is=function(e){var t=e;return ue.defined(t)&&a.is(t.location)&&ue.string(t.message)}}(m||(m={})),function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4}(p||(p={})),function(e){e.Unnecessary=1,e.Deprecated=2}(g||(g={})),function(e){e.is=function(e){var t=e;return null!=t&&ue.string(t.href)}}(y||(y={})),function(e){e.create=function(e,t,n,r,i,o){var s={range:e,message:t};return ue.defined(n)&&(s.severity=n),ue.defined(r)&&(s.code=r),ue.defined(i)&&(s.source=i),ue.defined(o)&&(s.relatedInformation=o),s},e.is=function(e){var t,n=e;return ue.defined(n)&&s.is(n.range)&&ue.string(n.message)&&(ue.number(n.severity)||ue.undefined(n.severity))&&(ue.integer(n.code)||ue.string(n.code)||ue.undefined(n.code))&&(ue.undefined(n.codeDescription)||ue.string(null===(t=n.codeDescription)||void 0===t?void 0:t.href))&&(ue.string(n.source)||ue.undefined(n.source))&&(ue.undefined(n.relatedInformation)||ue.typedArray(n.relatedInformation,m.is))}}(v||(v={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return ue.defined(n)&&n.length>0&&(i.arguments=n),i},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.title)&&ue.string(t.command)}}(b||(b={})),function(e){e.replace=function(e,t){return{range:e,newText:t}},e.insert=function(e,t){return{range:{start:e,end:e},newText:t}},e.del=function(e){return{range:e,newText:""}},e.is=function(e){var t=e;return ue.objectLiteral(t)&&ue.string(t.newText)&&s.is(t.range)}}(S||(S={})),function(e){e.create=function(e,t,n){var r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},e.is=function(e){var t=e;return void 0!==t&&ue.objectLiteral(t)&&ue.string(t.label)&&(ue.boolean(t.needsConfirmation)||void 0===t.needsConfirmation)&&(ue.string(t.description)||void 0===t.description)}}(w||(w={})),function(e){e.is=function(e){return"string"==typeof e}}(k||(k={})),function(e){e.replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},e.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},e.del=function(e,t){return{range:e,newText:"",annotationId:t}},e.is=function(e){var t=e;return S.is(t)&&(w.is(t.annotationId)||k.is(t.annotationId))}}(x||(x={})),function(e){e.create=function(e,t){return{textDocument:e,edits:t}},e.is=function(e){var t=e;return ue.defined(t)&&_.is(t.textDocument)&&Array.isArray(t.edits)}}(T||(T={})),function(e){e.create=function(e,t,n){var r={kind:"create",uri:e};return void 0===t||void 0===t.overwrite&&void 0===t.ignoreIfExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"create"===t.kind&&ue.string(t.uri)&&(void 0===t.options||(void 0===t.options.overwrite||ue.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ue.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||k.is(t.annotationId))}}(C||(C={})),function(e){e.create=function(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};return void 0===n||void 0===n.overwrite&&void 0===n.ignoreIfExists||(i.options=n),void 0!==r&&(i.annotationId=r),i},e.is=function(e){var t=e;return t&&"rename"===t.kind&&ue.string(t.oldUri)&&ue.string(t.newUri)&&(void 0===t.options||(void 0===t.options.overwrite||ue.boolean(t.options.overwrite))&&(void 0===t.options.ignoreIfExists||ue.boolean(t.options.ignoreIfExists)))&&(void 0===t.annotationId||k.is(t.annotationId))}}(R||(R={})),function(e){e.create=function(e,t,n){var r={kind:"delete",uri:e};return void 0===t||void 0===t.recursive&&void 0===t.ignoreIfNotExists||(r.options=t),void 0!==n&&(r.annotationId=n),r},e.is=function(e){var t=e;return t&&"delete"===t.kind&&ue.string(t.uri)&&(void 0===t.options||(void 0===t.options.recursive||ue.boolean(t.options.recursive))&&(void 0===t.options.ignoreIfNotExists||ue.boolean(t.options.ignoreIfNotExists)))&&(void 0===t.annotationId||k.is(t.annotationId))}}(O||(O={})),function(e){e.is=function(e){var t=e;return t&&(void 0!==t.changes||void 0!==t.documentChanges)&&(void 0===t.documentChanges||t.documentChanges.every((function(e){return ue.string(e.kind)?C.is(e)||R.is(e)||O.is(e):T.is(e)})))}}(A||(A={}));var P,E,_,D,N,M,I,j,q,F,L,$,W,V,U,B,K,H,z,J,G,Y,X,Q,Z,ee,te,ne,re,ie,oe=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(void 0===n?r=S.insert(e,t):k.is(n)?(i=n,r=x.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=x.insert(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.replace=function(e,t,n){var r,i;if(void 0===n?r=S.replace(e,t):k.is(n)?(i=n,r=x.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=x.replace(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.delete=function(e,t){var n,r;if(void 0===t?n=S.del(e):k.is(t)?(r=t,n=x.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=x.del(e,r)),this.edits.push(n),void 0!==r)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),se=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(k.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw new Error("Id "+n+" is already in use.");if(void 0===t)throw new Error("No annotation provided for id "+n);return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),ae=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new se(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach((function(e){if(T.is(e)){var n=new oe(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))):e.changes&&Object.keys(e.changes).forEach((function(n){var r=new oe(e.changes[n]);t._textEditChanges[n]=r}))):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(_.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version};if(!(r=this._textEditChanges[t.uri])){var n={textDocument:t,edits:i=[]};this._workspaceEdit.documentChanges.push(n),r=new oe(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw new Error("Workspace edit is not configured for normal text edit changes.");var r;if(!(r=this._textEditChanges[e])){var i=[];this._workspaceEdit.changes[e]=i,r=new oe(i),this._textEditChanges[e]=r}return r},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new se,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(w.is(t)||k.is(t)?r=t:n=t,void 0===r?i=C.create(e,n):(o=k.is(r)?r:this._changeAnnotations.manage(r),i=C.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e.prototype.renameFile=function(e,t,n,r){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var i,o,s;if(w.is(n)||k.is(n)?i=n:r=n,void 0===i?o=R.create(e,t,r):(s=k.is(i)?i:this._changeAnnotations.manage(i),o=R.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(o),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw new Error("Workspace edit is not configured for document changes.");var r,i,o;if(w.is(t)||k.is(t)?r=t:n=t,void 0===r?i=O.create(e,n):(o=k.is(r)?r:this._changeAnnotations.manage(r),i=O.create(e,n,o)),this._workspaceEdit.documentChanges.push(i),void 0!==o)return o},e}();!function(e){e.create=function(e){return{uri:e}},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.uri)}}(P||(P={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.uri)&&ue.integer(t.version)}}(E||(E={})),function(e){e.create=function(e,t){return{uri:e,version:t}},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.uri)&&(null===t.version||ue.integer(t.version))}}(_||(_={})),function(e){e.create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},e.is=function(e){var t=e;return ue.defined(t)&&ue.string(t.uri)&&ue.string(t.languageId)&&ue.integer(t.version)&&ue.string(t.text)}}(D||(D={})),function(e){e.PlainText="plaintext",e.Markdown="markdown"}(N||(N={})),function(e){e.is=function(t){var n=t;return n===e.PlainText||n===e.Markdown}}(N||(N={})),function(e){e.is=function(e){var t=e;return ue.objectLiteral(e)&&N.is(t.kind)&&ue.string(t.value)}}(M||(M={})),function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25}(I||(I={})),function(e){e.PlainText=1,e.Snippet=2}(j||(j={})),function(e){e.Deprecated=1}(q||(q={})),function(e){e.create=function(e,t,n){return{newText:e,insert:t,replace:n}},e.is=function(e){var t=e;return t&&ue.string(t.newText)&&s.is(t.insert)&&s.is(t.replace)}}(F||(F={})),function(e){e.asIs=1,e.adjustIndentation=2}(L||(L={})),function(e){e.create=function(e){return{label:e}}}($||($={})),function(e){e.create=function(e,t){return{items:e||[],isIncomplete:!!t}}}(W||(W={})),function(e){e.fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},e.is=function(e){var t=e;return ue.string(t)||ue.objectLiteral(t)&&ue.string(t.language)&&ue.string(t.value)}}(V||(V={})),function(e){e.is=function(e){var t=e;return!!t&&ue.objectLiteral(t)&&(M.is(t.contents)||V.is(t.contents)||ue.typedArray(t.contents,V.is))&&(void 0===e.range||s.is(e.range))}}(U||(U={})),function(e){e.create=function(e,t){return t?{label:e,documentation:t}:{label:e}}}(B||(B={})),function(e){e.create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return ue.defined(t)&&(i.documentation=t),ue.defined(n)?i.parameters=n:i.parameters=[],i}}(K||(K={})),function(e){e.Text=1,e.Read=2,e.Write=3}(H||(H={})),function(e){e.create=function(e,t){var n={range:e};return ue.number(t)&&(n.kind=t),n}}(z||(z={})),function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26}(J||(J={})),function(e){e.Deprecated=1}(G||(G={})),function(e){e.create=function(e,t,n,r,i){var o={name:e,kind:t,location:{uri:r,range:n}};return i&&(o.containerName=i),o}}(Y||(Y={})),function(e){e.create=function(e,t,n,r,i,o){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==o&&(s.children=o),s},e.is=function(e){var t=e;return t&&ue.string(t.name)&&ue.number(t.kind)&&s.is(t.range)&&s.is(t.selectionRange)&&(void 0===t.detail||ue.string(t.detail))&&(void 0===t.deprecated||ue.boolean(t.deprecated))&&(void 0===t.children||Array.isArray(t.children))&&(void 0===t.tags||Array.isArray(t.tags))}}(X||(X={})),function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"}(Q||(Q={})),function(e){e.create=function(e,t){var n={diagnostics:e};return null!=t&&(n.only=t),n},e.is=function(e){var t=e;return ue.defined(t)&&ue.typedArray(t.diagnostics,v.is)&&(void 0===t.only||ue.typedArray(t.only,ue.string))}}(Z||(Z={})),function(e){e.create=function(e,t,n){var r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):b.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},e.is=function(e){var t=e;return t&&ue.string(t.title)&&(void 0===t.diagnostics||ue.typedArray(t.diagnostics,v.is))&&(void 0===t.kind||ue.string(t.kind))&&(void 0!==t.edit||void 0!==t.command)&&(void 0===t.command||b.is(t.command))&&(void 0===t.isPreferred||ue.boolean(t.isPreferred))&&(void 0===t.edit||A.is(t.edit))}}(ee||(ee={})),function(e){e.create=function(e,t){var n={range:e};return ue.defined(t)&&(n.data=t),n},e.is=function(e){var t=e;return ue.defined(t)&&s.is(t.range)&&(ue.undefined(t.command)||b.is(t.command))}}(te||(te={})),function(e){e.create=function(e,t){return{tabSize:e,insertSpaces:t}},e.is=function(e){var t=e;return ue.defined(t)&&ue.uinteger(t.tabSize)&&ue.boolean(t.insertSpaces)}}(ne||(ne={})),function(e){e.create=function(e,t,n){return{range:e,target:t,data:n}},e.is=function(e){var t=e;return ue.defined(t)&&s.is(t.range)&&(ue.undefined(t.target)||ue.string(t.target))}}(re||(re={})),function(e){e.create=function(e,t){return{range:e,parent:t}},e.is=function(t){var n=t;return void 0!==n&&s.is(n.range)&&(void 0===n.parent||e.is(n.parent))}}(ie||(ie={}));var ce,le=["\n","\r\n","\r"];!function(e){function t(e,n){if(e.length<=1)return e;var r=e.length/2|0,i=e.slice(0,r),o=e.slice(r);t(i,n),t(o,n);for(var s=0,a=0,c=0;s<i.length&&a<o.length;){var l=n(i[s],o[a]);e[c++]=l<=0?i[s++]:o[a++]}for(;s<i.length;)e[c++]=i[s++];for(;a<o.length;)e[c++]=o[a++];return e}e.create=function(e,t,n,r){return new he(e,t,n,r)},e.is=function(e){var t=e;return!!(ue.defined(t)&&ue.string(t.uri)&&(ue.undefined(t.languageId)||ue.string(t.languageId))&&ue.uinteger(t.lineCount)&&ue.func(t.getText)&&ue.func(t.positionAt)&&ue.func(t.offsetAt))},e.applyEdits=function(e,n){for(var r=e.getText(),i=t(n,(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n})),o=r.length,s=i.length-1;s>=0;s--){var a=i[s],c=e.offsetAt(a.range.start),l=e.offsetAt(a.range.end);if(!(l<=o))throw new Error("Overlapping edit");r=r.substring(0,c)+a.newText+r.substring(l,r.length),o=c}return r}}(ce||(ce={}));var ue,he=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return o.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var s=n-1;return o.create(s,e-t[s])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();!function(e){var t=Object.prototype.toString;e.defined=function(e){return void 0!==e},e.undefined=function(e){return void 0===e},e.boolean=function(e){return!0===e||!1===e},e.string=function(e){return"[object String]"===t.call(e)},e.number=function(e){return"[object Number]"===t.call(e)},e.numberRange=function(e,n,r){return"[object Number]"===t.call(e)&&n<=e&&e<=r},e.integer=function(e){return"[object Number]"===t.call(e)&&-2147483648<=e&&e<=2147483647},e.uinteger=function(e){return"[object Number]"===t.call(e)&&0<=e&&e<=2147483647},e.func=function(e){return"[object Function]"===t.call(e)},e.objectLiteral=function(e){return null!==e&&"object"==typeof e},e.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}}(ue||(ue={}))},3984:(e,t,n)=>{"use strict";e.exports=n(7630)},7630:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=void 0;const o=n(6265);i(n(5224),t),i(n(6265),t);let s=!1;const a={initialize:e=>{},get shutdownReceived(){return s},set shutdownReceived(e){s=e},exit:e=>{}};t.createConnection=function(e,t,n,r){let i,s,c,l;return void 0!==e&&"features"===e.__brand&&(i=e,e=t,t=n,n=r),o.ConnectionStrategy.is(e)||o.ConnectionOptions.is(e)?l=e:(s=e,c=t,l=n),o.createConnection((e=>o.createProtocolConnection(s,c,e,l)),a,i)}},6265:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProposedFeatures=t.SemanticTokensBuilder=void 0;const o=n(9817);Object.defineProperty(t,"SemanticTokensBuilder",{enumerable:!0,get:function(){return o.SemanticTokensBuilder}}),i(n(152),t),i(n(5878),t),(t.ProposedFeatures||(t.ProposedFeatures={})).all={__brand:"features"}},7985:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallHierarchyFeature=void 0;const r=n(152);t.CallHierarchyFeature=e=>class extends e{get callHierarchy(){return{onPrepare:e=>{this.connection.onRequest(r.CallHierarchyPrepareRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)))},onIncomingCalls:e=>{const t=r.CallHierarchyIncomingCallsRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onOutgoingCalls:e=>{const t=r.CallHierarchyOutgoingCallsRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}}},2507:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationFeature=void 0;const r=n(152),i=n(289);t.ConfigurationFeature=e=>class extends e{getConfiguration(e){return e?i.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let t={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(r.ConfigurationRequest.type,t).then((t=>Array.isArray(e)?t:t[0]))}}},828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileOperationsFeature=void 0;const r=n(152);t.FileOperationsFeature=e=>class extends e{onDidCreateFiles(e){this.connection.onNotification(r.DidCreateFilesNotification.type,(t=>{e(t)}))}onDidRenameFiles(e){this.connection.onNotification(r.DidRenameFilesNotification.type,(t=>{e(t)}))}onDidDeleteFiles(e){this.connection.onNotification(r.DidDeleteFilesNotification.type,(t=>{e(t)}))}onWillCreateFiles(e){return this.connection.onRequest(r.WillCreateFilesRequest.type,((t,n)=>e(t,n)))}onWillRenameFiles(e){return this.connection.onRequest(r.WillRenameFilesRequest.type,((t,n)=>e(t,n)))}onWillDeleteFiles(e){return this.connection.onRequest(r.WillDeleteFilesRequest.type,((t,n)=>e(t,n)))}}},2776:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedEditingRangeFeature=void 0;const r=n(152);t.LinkedEditingRangeFeature=e=>class extends e{onLinkedEditingRange(e){this.connection.onRequest(r.LinkedEditingRangeRequest.type,((t,n)=>e(t,n,this.attachWorkDoneProgress(t),void 0)))}}},8120:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonikerFeature=void 0;const r=n(152);t.MonikerFeature=e=>class extends e{get moniker(){return{on:e=>{const t=r.MonikerRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}}},2731:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attachPartialResult=t.ProgressFeature=t.attachWorkDone=void 0;const r=n(152),i=n(7560);class o{constructor(e,t){this._connection=e,this._token=t,o.Instances.set(this._token,this)}begin(e,t,n,i){let o={kind:"begin",title:e,percentage:t,message:n,cancellable:i};this._connection.sendProgress(r.WorkDoneProgress.type,this._token,o)}report(e,t){let n={kind:"report"};"number"==typeof e?(n.percentage=e,void 0!==t&&(n.message=t)):n.message=e,this._connection.sendProgress(r.WorkDoneProgress.type,this._token,n)}done(){o.Instances.delete(this._token),this._connection.sendProgress(r.WorkDoneProgress.type,this._token,{kind:"end"})}}o.Instances=new Map;class s extends o{constructor(e,t){super(e,t),this._source=new r.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class a{constructor(){}begin(){}report(){}done(){}}class c extends a{constructor(){super(),this._source=new r.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}var l;t.attachWorkDone=function(e,t){if(void 0===t||void 0===t.workDoneToken)return new a;const n=t.workDoneToken;return delete t.workDoneToken,new o(e,n)},t.ProgressFeature=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(e){var t;!0===(null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.workDoneProgress)&&(this._progressSupported=!0,this.connection.onNotification(r.WorkDoneProgressCancelNotification.type,(e=>{let t=o.Instances.get(e.token);(t instanceof s||t instanceof c)&&t.cancel()})))}attachWorkDoneProgress(e){return void 0===e?new a:new o(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){const e=i.generateUuid();return this.connection.sendRequest(r.WorkDoneProgressCreateRequest.type,{token:e}).then((()=>new s(this.connection,e)))}return Promise.resolve(new c)}},function(e){e.type=new r.ProgressType}(l||(l={}));class u{constructor(e,t){this._connection=e,this._token=t}report(e){this._connection.sendProgress(l.type,this._token,e)}}t.attachPartialResult=function(e,t){if(void 0===t||void 0===t.partialResultToken)return;const n=t.partialResultToken;return delete t.partialResultToken,new u(e,n)}},9817:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SemanticTokensBuilder=t.SemanticTokensFeature=void 0;const r=n(152);t.SemanticTokensFeature=e=>class extends e{get semanticTokens(){return{on:e=>{const t=r.SemanticTokensRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onDelta:e=>{const t=r.SemanticTokensDeltaRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))},onRange:e=>{const t=r.SemanticTokensRangeRequest.type;this.connection.onRequest(t,((n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(t,n))))}}}},t.SemanticTokensBuilder=class{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,t,n,r,i){let o=e,s=t;this._dataLen>0&&(o-=this._prevLine,0===o&&(s-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=s,this._data[this._dataLen++]=n,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._prevLine=e,this._prevChar=t}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return void 0!==this._prevData}buildEdits(){if(void 0!==this._prevData){const e=this._prevData.length,t=this._data.length;let n=0;for(;n<t&&n<e&&this._prevData[n]===this._data[n];)n++;if(n<t&&n<e){let r=0;for(;r<t&&r<e&&this._prevData[e-1-r]===this._data[t-1-r];)r++;const i=this._data.slice(n,t-r);return{resultId:this.id,edits:[{start:n,deleteCount:e-r-n,data:i}]}}return n<t?{resultId:this.id,edits:[{start:n,deleteCount:0,data:this._data.slice(n)}]}:n<e?{resultId:this.id,edits:[{start:n,deleteCount:e-n}]}:{resultId:this.id,edits:[]}}return this.build()}}},5878:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConnection=t.combineFeatures=t.combineLanguagesFeatures=t.combineWorkspaceFeatures=t.combineWindowFeatures=t.combineClientFeatures=t.combineTracerFeatures=t.combineTelemetryFeatures=t.combineConsoleFeatures=t._LanguagesImpl=t.BulkUnregistration=t.BulkRegistration=t.ErrorMessageTracker=t.TextDocuments=void 0;const r=n(152),i=n(289),o=n(7560),s=n(2731),a=n(2507),c=n(8634),l=n(7985),u=n(9817),h=n(5421),f=n(828),d=n(2776),m=n(8120);function p(e){if(null!==e)return e}t.TextDocuments=class{constructor(e){this._documents=Object.create(null),this._configuration=e,this._onDidChangeContent=new r.Emitter,this._onDidOpen=new r.Emitter,this._onDidClose=new r.Emitter,this._onDidSave=new r.Emitter,this._onWillSave=new r.Emitter}get onDidChangeContent(){return this._onDidChangeContent.event}get onDidOpen(){return this._onDidOpen.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._documents[e]}all(){return Object.keys(this._documents).map((e=>this._documents[e]))}keys(){return Object.keys(this._documents)}listen(e){e.__textDocumentSync=r.TextDocumentSyncKind.Full,e.onDidOpenTextDocument((e=>{let t=e.textDocument,n=this._configuration.create(t.uri,t.languageId,t.version,t.text);this._documents[t.uri]=n;let r=Object.freeze({document:n});this._onDidOpen.fire(r),this._onDidChangeContent.fire(r)})),e.onDidChangeTextDocument((e=>{let t=e.textDocument,n=e.contentChanges;if(0===n.length)return;let r=this._documents[t.uri];const{version:i}=t;if(null==i)throw new Error(`Received document change event for ${t.uri} without valid version identifier`);r=this._configuration.update(r,n,i),this._documents[t.uri]=r,this._onDidChangeContent.fire(Object.freeze({document:r}))})),e.onDidCloseTextDocument((e=>{let t=this._documents[e.textDocument.uri];t&&(delete this._documents[e.textDocument.uri],this._onDidClose.fire(Object.freeze({document:t})))})),e.onWillSaveTextDocument((e=>{let t=this._documents[e.textDocument.uri];t&&this._onWillSave.fire(Object.freeze({document:t,reason:e.reason}))})),e.onWillSaveTextDocumentWaitUntil(((e,t)=>{let n=this._documents[e.textDocument.uri];return n&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:n,reason:e.reason}),t):[]})),e.onDidSaveTextDocument((e=>{let t=this._documents[e.textDocument.uri];t&&this._onDidSave.fire(Object.freeze({document:t}))}))}},t.ErrorMessageTracker=class{constructor(){this._messages=Object.create(null)}add(e){let t=this._messages[e];t||(t=0),t++,this._messages[e]=t}sendErrors(e){Object.keys(this._messages).forEach((t=>{e.window.showErrorMessage(t)}))}};class g{constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send(r.MessageType.Error,e)}warn(e){this.send(r.MessageType.Warning,e)}info(e){this.send(r.MessageType.Info,e)}log(e){this.send(r.MessageType.Log,e)}send(e,t){this._rawConnection&&this._rawConnection.sendNotification(r.LogMessageNotification.type,{type:e,message:t})}}const y=h.ShowDocumentFeature(s.ProgressFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...t){let n={type:r.MessageType.Error,message:e,actions:t};return this.connection.sendRequest(r.ShowMessageRequest.type,n).then(p)}showWarningMessage(e,...t){let n={type:r.MessageType.Warning,message:e,actions:t};return this.connection.sendRequest(r.ShowMessageRequest.type,n).then(p)}showInformationMessage(e,...t){let n={type:r.MessageType.Info,message:e,actions:t};return this.connection.sendRequest(r.ShowMessageRequest.type,n).then(p)}}));(t.BulkRegistration||(t.BulkRegistration={})).create=function(){return new v};class v{constructor(){this._registrations=[],this._registered=new Set}add(e,t){const n=i.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);const r=o.generateUuid();this._registrations.push({id:r,method:n,registerOptions:t||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}}(t.BulkUnregistration||(t.BulkUnregistration={})).create=function(){return new b(void 0,[])};class b{constructor(e,t){this._connection=e,this._unregistrations=new Map,t.forEach((e=>{this._unregistrations.set(e.method,e)}))}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let t of this._unregistrations.values())e.push(t);let t={unregisterations:e};this._connection.sendRequest(r.UnregistrationRequest.type,t).then(void 0,(e=>{this._connection.console.info("Bulk unregistration failed.")}))}disposeSingle(e){const t=i.string(e)?e:e.method,n=this._unregistrations.get(t);if(!n)return!1;let o={unregisterations:[n]};return this._connection.sendRequest(r.UnregistrationRequest.type,o).then((()=>{this._unregistrations.delete(t)}),(e=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)})),!0}}class S{attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,t,n){return e instanceof v?this.registerMany(e):e instanceof b?this.registerSingle1(e,t,n):this.registerSingle2(e,t)}registerSingle1(e,t,n){const s=i.string(t)?t:t.method,a=o.generateUuid();let c={registrations:[{id:a,method:s,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest(r.RegistrationRequest.type,c).then((t=>(e.add({id:a,method:s}),e)),(e=>(this.connection.console.info(`Registering request handler for ${s} failed.`),Promise.reject(e))))}registerSingle2(e,t){const n=i.string(e)?e:e.method,s=o.generateUuid();let a={registrations:[{id:s,method:n,registerOptions:t||{}}]};return this.connection.sendRequest(r.RegistrationRequest.type,a).then((e=>r.Disposable.create((()=>{this.unregisterSingle(s,n)}))),(e=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(e))))}unregisterSingle(e,t){let n={unregisterations:[{id:e,method:t}]};return this.connection.sendRequest(r.UnregistrationRequest.type,n).then(void 0,(t=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)}))}registerMany(e){let t=e.asRegistrationParams();return this.connection.sendRequest(r.RegistrationRequest.type,t).then((()=>new b(this._connection,t.registrations.map((e=>({id:e.id,method:e.method}))))),(e=>(this.connection.console.info("Bulk registration failed."),Promise.reject(e))))}}const w=f.FileOperationsFeature(c.WorkspaceFoldersFeature(a.ConfigurationFeature(class{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){let t=(n=e)&&n.edit?e:{edit:e};var n;return this.connection.sendRequest(r.ApplyWorkspaceEditRequest.type,t)}})));class k{constructor(){this._trace=r.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,t){this._trace!==r.Trace.Off&&this.connection.sendNotification(r.LogTraceNotification.type,{message:e,verbose:this._trace===r.Trace.Verbose?t:void 0})}}class x{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification(r.TelemetryEventNotification.type,e)}}class T{constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return s.attachWorkDone(this.connection,e)}attachPartialResultProgress(e,t){return s.attachPartialResult(this.connection,t)}}t._LanguagesImpl=T;const C=m.MonikerFeature(d.LinkedEditingRangeFeature(u.SemanticTokensFeature(l.CallHierarchyFeature(T))));function R(e,t){return function(n){return t(e(n))}}function O(e,t){return function(n){return t(e(n))}}function A(e,t){return function(n){return t(e(n))}}function P(e,t){return function(n){return t(e(n))}}function E(e,t){return function(n){return t(e(n))}}function _(e,t){return function(n){return t(e(n))}}t.combineConsoleFeatures=R,t.combineTelemetryFeatures=O,t.combineTracerFeatures=A,t.combineClientFeatures=P,t.combineWindowFeatures=E,t.combineWorkspaceFeatures=_,t.combineLanguagesFeatures=function(e,t){return function(n){return t(e(n))}},t.combineFeatures=function(e,t){function n(e,t,n){return e&&t?n(e,t):e||t}return{__brand:"features",console:n(e.console,t.console,R),tracer:n(e.tracer,t.tracer,A),telemetry:n(e.telemetry,t.telemetry,O),client:n(e.client,t.client,P),window:n(e.window,t.window,E),workspace:n(e.workspace,t.workspace,_)}},t.createConnection=function(e,t,n){const o=n&&n.console?new(n.console(g)):new g,a=e(o);o.rawAttach(a);const c=n&&n.tracer?new(n.tracer(k)):new k,l=n&&n.telemetry?new(n.telemetry(x)):new x,u=n&&n.client?new(n.client(S)):new S,h=n&&n.window?new(n.window(y)):new y,f=n&&n.workspace?new(n.workspace(w)):new w,d=n&&n.languages?new(n.languages(C)):new C,m=[o,c,l,u,h,f,d];function p(e){return e instanceof Promise?e:i.thenable(e)?new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))})):Promise.resolve(e)}let v,b,T,R={listen:()=>a.listen(),sendRequest:(e,...t)=>a.sendRequest(i.string(e)?e:e.method,...t),onRequest:(e,t)=>a.onRequest(e,t),sendNotification:(e,t)=>{const n=i.string(e)?e:e.method;1===arguments.length?a.sendNotification(n):a.sendNotification(n,t)},onNotification:(e,t)=>a.onNotification(e,t),onProgress:a.onProgress,sendProgress:a.sendProgress,onInitialize:e=>b=e,onInitialized:e=>a.onNotification(r.InitializedNotification.type,e),onShutdown:e=>v=e,onExit:e=>T=e,get console(){return o},get telemetry(){return l},get tracer(){return c},get client(){return u},get window(){return h},get workspace(){return f},get languages(){return d},onDidChangeConfiguration:e=>a.onNotification(r.DidChangeConfigurationNotification.type,e),onDidChangeWatchedFiles:e=>a.onNotification(r.DidChangeWatchedFilesNotification.type,e),__textDocumentSync:void 0,onDidOpenTextDocument:e=>a.onNotification(r.DidOpenTextDocumentNotification.type,e),onDidChangeTextDocument:e=>a.onNotification(r.DidChangeTextDocumentNotification.type,e),onDidCloseTextDocument:e=>a.onNotification(r.DidCloseTextDocumentNotification.type,e),onWillSaveTextDocument:e=>a.onNotification(r.WillSaveTextDocumentNotification.type,e),onWillSaveTextDocumentWaitUntil:e=>a.onRequest(r.WillSaveTextDocumentWaitUntilRequest.type,e),onDidSaveTextDocument:e=>a.onNotification(r.DidSaveTextDocumentNotification.type,e),sendDiagnostics:e=>a.sendNotification(r.PublishDiagnosticsNotification.type,e),onHover:e=>a.onRequest(r.HoverRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),void 0))),onCompletion:e=>a.onRequest(r.CompletionRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onCompletionResolve:e=>a.onRequest(r.CompletionResolveRequest.type,e),onSignatureHelp:e=>a.onRequest(r.SignatureHelpRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),void 0))),onDeclaration:e=>a.onRequest(r.DeclarationRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onDefinition:e=>a.onRequest(r.DefinitionRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onTypeDefinition:e=>a.onRequest(r.TypeDefinitionRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onImplementation:e=>a.onRequest(r.ImplementationRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onReferences:e=>a.onRequest(r.ReferencesRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onDocumentHighlight:e=>a.onRequest(r.DocumentHighlightRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onDocumentSymbol:e=>a.onRequest(r.DocumentSymbolRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onWorkspaceSymbol:e=>a.onRequest(r.WorkspaceSymbolRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onCodeAction:e=>a.onRequest(r.CodeActionRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onCodeActionResolve:e=>a.onRequest(r.CodeActionResolveRequest.type,((t,n)=>e(t,n))),onCodeLens:e=>a.onRequest(r.CodeLensRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onCodeLensResolve:e=>a.onRequest(r.CodeLensResolveRequest.type,((t,n)=>e(t,n))),onDocumentFormatting:e=>a.onRequest(r.DocumentFormattingRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),void 0))),onDocumentRangeFormatting:e=>a.onRequest(r.DocumentRangeFormattingRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),void 0))),onDocumentOnTypeFormatting:e=>a.onRequest(r.DocumentOnTypeFormattingRequest.type,((t,n)=>e(t,n))),onRenameRequest:e=>a.onRequest(r.RenameRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),void 0))),onPrepareRename:e=>a.onRequest(r.PrepareRenameRequest.type,((t,n)=>e(t,n))),onDocumentLinks:e=>a.onRequest(r.DocumentLinkRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onDocumentLinkResolve:e=>a.onRequest(r.DocumentLinkResolveRequest.type,((t,n)=>e(t,n))),onDocumentColor:e=>a.onRequest(r.DocumentColorRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onColorPresentation:e=>a.onRequest(r.ColorPresentationRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onFoldingRanges:e=>a.onRequest(r.FoldingRangeRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onSelectionRanges:e=>a.onRequest(r.SelectionRangeRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),s.attachPartialResult(a,t)))),onExecuteCommand:e=>a.onRequest(r.ExecuteCommandRequest.type,((t,n)=>e(t,n,s.attachWorkDone(a,t),void 0))),dispose:()=>a.dispose()};for(let e of m)e.attach(R);return a.onRequest(r.InitializeRequest.type,(e=>{t.initialize(e),i.string(e.trace)&&(c.trace=r.Trace.fromString(e.trace));for(let t of m)t.initialize(e.capabilities);if(b)return p(b(e,(new r.CancellationTokenSource).token,s.attachWorkDone(a,e),void 0)).then((e=>{if(e instanceof r.ResponseError)return e;let t=e;t||(t={capabilities:{}});let n=t.capabilities;n||(n={},t.capabilities=n),void 0===n.textDocumentSync||null===n.textDocumentSync?n.textDocumentSync=i.number(R.__textDocumentSync)?R.__textDocumentSync:r.TextDocumentSyncKind.None:i.number(n.textDocumentSync)||i.number(n.textDocumentSync.change)||(n.textDocumentSync.change=i.number(R.__textDocumentSync)?R.__textDocumentSync:r.TextDocumentSyncKind.None);for(let e of m)e.fillServerCapabilities(n);return t}));{let e={capabilities:{textDocumentSync:r.TextDocumentSyncKind.None}};for(let t of m)t.fillServerCapabilities(e.capabilities);return e}})),a.onRequest(r.ShutdownRequest.type,(()=>(t.shutdownReceived=!0,v?v((new r.CancellationTokenSource).token):void 0))),a.onNotification(r.ExitNotification.type,(()=>{try{T&&T()}finally{t.shutdownReceived?t.exit(0):t.exit(1)}})),a.onNotification(r.SetTraceNotification.type,(e=>{c.trace=r.Trace.fromString(e.value)})),R}},5421:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShowDocumentFeature=void 0;const r=n(152);t.ShowDocumentFeature=e=>class extends e{showDocument(e){return this.connection.sendRequest(r.ShowDocumentRequest.type,e)}}},289:(e,t)=>{"use strict";function n(e){return"string"==typeof e||e instanceof String}function r(e){return"function"==typeof e}function i(e){return Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.thenable=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,t.boolean=function(e){return!0===e||!1===e},t.string=n,t.number=function(e){return"number"==typeof e||e instanceof Number},t.error=function(e){return e instanceof Error},t.func=r,t.array=i,t.stringArray=function(e){return i(e)&&e.every((e=>n(e)))},t.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)},t.thenable=function(e){return e&&r(e.then)}},7560:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateUuid=t.parse=t.isUUID=t.v4=t.empty=void 0;class n{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class r extends n{constructor(){super([r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),"-","4",r._randomHex(),r._randomHex(),r._randomHex(),"-",r._oneOf(r._timeHighBits),r._randomHex(),r._randomHex(),r._randomHex(),"-",r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex(),r._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return r._oneOf(r._chars)}}function i(){return new r}r._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],r._timeHighBits=["8","9","a","b"],t.empty=new n("00000000-0000-0000-0000-000000000000"),t.v4=i;const o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function s(e){return o.test(e)}t.isUUID=s,t.parse=function(e){if(!s(e))throw new Error("invalid uuid");return new n(e)},t.generateUuid=function(){return i().asHex()}},8634:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceFoldersFeature=void 0;const r=n(152);t.WorkspaceFoldersFeature=e=>class extends e{initialize(e){let t=e.workspace;t&&t.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new r.Emitter,this.connection.onNotification(r.DidChangeWorkspaceFoldersNotification.type,(e=>{this._onDidChangeWorkspaceFolders.fire(e.event)})))}getWorkspaceFolders(){return this.connection.sendRequest(r.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return this._unregistration||(this._unregistration=this.connection.client.register(r.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}}},8212:(e,t,n)=>{"use strict";e.exports=n(7630)},4458:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=void 0;var i=n(4574),o=n(9369),s=n(9369);function a(e){return function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if("number"==typeof e)throw new Error("Browser implementation does currently not support externalized strings.");return o.localize.apply(void 0,r([e,t],n))}}function c(e){return o.setPseudo("pseudo"===(null==e?void 0:e.locale.toLowerCase())),a}Object.defineProperty(t,"MessageFormat",{enumerable:!0,get:function(){return s.MessageFormat}}),Object.defineProperty(t,"BundleFormat",{enumerable:!0,get:function(){return s.BundleFormat}}),t.loadMessageBundle=a,t.config=c,i.default.install(Object.freeze({loadMessageBundle:a,config:c}))},9369:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.loadMessageBundle=t.localize=t.format=t.setPseudo=t.isPseudo=t.isDefined=t.BundleFormat=t.MessageFormat=void 0;var r,i,o,s=n(4574);function a(e){return void 0!==e}function c(e,n){return t.isPseudo&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===n.length?e:e.replace(/\{(\d+)\}/g,(function(e,t){var r=t[0],i=n[r],o=e;return"string"==typeof i?o=i:"number"!=typeof i&&"boolean"!=typeof i&&null!=i||(o=String(i)),o}))}(o=t.MessageFormat||(t.MessageFormat={})).file="file",o.bundle="bundle",o.both="both",(i=t.BundleFormat||(t.BundleFormat={})).standalone="standalone",i.languagePack="languagePack",function(e){e.is=function(e){var t=e;return t&&a(t.key)&&a(t.comment)}}(r||(r={})),t.isDefined=a,t.isPseudo=!1,t.setPseudo=function(e){t.isPseudo=e},t.format=c,t.localize=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return c(t,n)},t.loadMessageBundle=function(e){return s.default().loadMessageBundle(e)},t.config=function(e){return s.default().config(e)}},4574:(e,t)=>{"use strict";var n;function r(){if(void 0===n)throw new Error("No runtime abstraction layer installed");return n}Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.install=function(e){if(void 0===e)throw new Error("No runtime abstraction layer provided");n=e}}(r||(r={})),t.default=r}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var r={};(()=>{"use strict";n.r(r);var e,t=n(7630),i=n(3984),o=n(4155);e=(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var a;s>=0?a=arguments[s]:(void 0===e&&(e=o.cwd()),a=e),t(a),0!==a.length&&(r=a+"/"+r,i=47===a.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,s=o-i,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,l=s<c?s:c,u=-1,h=0;h<=l;++h){if(h===l){if(c>l){if(47===n.charCodeAt(a+h))return n.slice(a+h+1);if(0===h)return n.slice(a+h)}else s>l&&(47===e.charCodeAt(i+h)?u=h:0===h&&(u=0));break}var f=e.charCodeAt(i+h);if(f!==n.charCodeAt(a+h))break;47===f&&(u=h)}var d="";for(h=i+u+1;h<=o;++h)h!==o&&47!==e.charCodeAt(h)||(0===d.length?d+="..":d+="/..");return d.length>0?d+n.slice(a+u):(a+=u,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!o){i=s;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,o=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(r=e.length-1;r>=0;--r){var l=e.charCodeAt(r);if(47===l){if(!s){i=r+1;break}}else-1===c&&(s=!1,c=r+1),a>=0&&(l===n.charCodeAt(a)?-1==--a&&(o=r):(a=-1,o=c))}return i===o?o=c:-1===o&&(o=e.length),e.slice(i,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){i=r+1;break}}else-1===o&&(s=!1,o=r+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===i&&(o=!1,i=a+1),46===c?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!o){r=a+1;break}}return-1===n||-1===i||0===s||1===s&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+"/"+r:r}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),o=47===i;o?(n.root="/",r=1):r=0;for(var s=-1,a=0,c=-1,l=!0,u=e.length-1,h=0;u>=r;--u)if(47!==(i=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===i?-1===s?s=u:1!==h&&(h=1):-1!==s&&(h=-1);else if(!l){a=u+1;break}return-1===s||-1===c||0===h||1===h&&s===c-1&&s===a+1?-1!==c&&(n.base=n.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},447:(e,t,n)=>{var r;if(n.r(t),n.d(t,{URI:()=>p,Utils:()=>R}),"object"==typeof o)r="win32"===o.platform;else if("object"==typeof navigator){var i=navigator.userAgent;r=i.indexOf("Windows")>=0}var s,a,c=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=/^\w[\w\d+.-]*$/,u=/^\//,h=/^\/\//,f="",d="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,p=function(){function e(e,t,n,r,i,o){void 0===o&&(o=!1),"object"==typeof e?(this.scheme=e.scheme||f,this.authority=e.authority||f,this.path=e.path||f,this.query=e.query||f,this.fragment=e.fragment||f):(this.scheme=function(e,t){return e||t?e:"file"}(e,o),this.authority=t||f,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==d&&(t=d+t):t=d}return t}(this.scheme,n||f),this.query=r||f,this.fragment=i||f,function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!l.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!u.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(h.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,o))}return e.isUri=function(t){return t instanceof e||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"function"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString},Object.defineProperty(e.prototype,"fsPath",{get:function(){return w(this,!1)},enumerable:!1,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,r=e.path,i=e.query,o=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=f),void 0===n?n=this.authority:null===n&&(n=f),void 0===r?r=this.path:null===r&&(r=f),void 0===i?i=this.query:null===i&&(i=f),void 0===o?o=this.fragment:null===o&&(o=f),t===this.scheme&&n===this.authority&&r===this.path&&i===this.query&&o===this.fragment?this:new y(t,n,r,i,o)},e.parse=function(e,t){void 0===t&&(t=!1);var n=m.exec(e);return n?new y(n[2]||f,C(n[4]||f),C(n[5]||f),C(n[7]||f),C(n[9]||f),t):new y(f,f,f,f,f)},e.file=function(e){var t=f;if(r&&(e=e.replace(/\\/g,d)),e[0]===d&&e[1]===d){var n=e.indexOf(d,2);-1===n?(t=e.substring(2),e=d):(t=e.substring(2,n),e=e.substring(n)||d)}return new y("file",t,e,f,f)},e.from=function(e){return new y(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),k(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new y(t);return n._formatted=t.external,n._fsPath=t._sep===g?t.fsPath:null,n}return t},e}(),g=r?1:void 0,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return c(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=w(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?k(this,!0):(this._formatted||(this._formatted=k(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=g),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(p),v=((a={})[58]="%3A",a[47]="%2F",a[63]="%3F",a[35]="%23",a[91]="%5B",a[93]="%5D",a[64]="%40",a[33]="%21",a[36]="%24",a[38]="%26",a[39]="%27",a[40]="%28",a[41]="%29",a[42]="%2A",a[43]="%2B",a[44]="%2C",a[59]="%3B",a[61]="%3D",a[32]="%20",a);function b(e,t){for(var n=void 0,r=-1,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o)-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),void 0!==n&&(n+=e.charAt(i));else{void 0===n&&(n=e.substr(0,i));var s=v[o];void 0!==s?(-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),n+=s):-1===r&&(r=i)}}return-1!==r&&(n+=encodeURIComponent(e.substring(r))),void 0!==n?n:e}function S(e){for(var t=void 0,n=0;n<e.length;n++){var r=e.charCodeAt(n);35===r||63===r?(void 0===t&&(t=e.substr(0,n)),t+=v[r]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function w(e,t){var n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,r&&(n=n.replace(/\//g,"\\")),n}function k(e,t){var n=t?S:b,r="",i=e.scheme,o=e.authority,s=e.path,a=e.query,c=e.fragment;if(i&&(r+=i,r+=":"),(o||"file"===i)&&(r+=d,r+=d),o){var l=o.indexOf("@");if(-1!==l){var u=o.substr(0,l);o=o.substr(l+1),-1===(l=u.indexOf(":"))?r+=n(u,!1):(r+=n(u.substr(0,l),!1),r+=":",r+=n(u.substr(l+1),!1)),r+="@"}-1===(l=(o=o.toLowerCase()).indexOf(":"))?r+=n(o,!1):(r+=n(o.substr(0,l),!1),r+=o.substr(l))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(h=s.charCodeAt(1))>=65&&h<=90&&(s="/"+String.fromCharCode(h+32)+":"+s.substr(3));else if(s.length>=2&&58===s.charCodeAt(1)){var h;(h=s.charCodeAt(0))>=65&&h<=90&&(s=String.fromCharCode(h+32)+":"+s.substr(2))}r+=n(s,!0)}return a&&(r+="?",r+=n(a,!1)),c&&(r+="#",r+=t?c:b(c,!1)),r}function x(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+x(e.substr(3)):e}}var T=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function C(e){return e.match(T)?e.replace(T,(function(e){return x(e)})):e}var R,O=n(470),A=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},P=O.posix||O;!function(e){e.joinPath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.with({path:P.join.apply(P,A([e.path],t))})},e.resolvePath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.path||"/";return e.with({path:P.resolve.apply(P,A([r],t))})},e.dirname=function(e){var t=P.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)?e:e.with({path:t})},e.basename=function(e){return P.basename(e.path)},e.extname=function(e){return P.extname(e.path)}}(R||(R={}))}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(447)})();const{URI:s,Utils:a}=e;var c,l,u,h,f,d,m,p,g,y,v=n(7510),b=n(8575);!function(e){e.type=new t.NotificationType("json/schemaAssociations")}(c||(c={})),function(e){e.type=new t.NotificationType("yaml/registerCustomSchemaRequest")}(l||(l={})),function(e){e.type=new t.NotificationType("yaml/registerContentRequest")}(u||(u={})),function(e){e.type=new t.NotificationType("yaml/resultLimitReached")}(h||(h={})),function(e){e.type=new t.RequestType("vscode/content")}(f||(f={})),function(e){e.type=new t.RequestType("custom/schema/content")}(d||(d={})),function(e){e.type=new t.RequestType("custom/schema/request")}(m||(m={})),function(e){e.type=new t.RequestType("json/colorSymbols")}(p||(p={})),function(e){e.type=new t.RequestType("json/schema/modify")}(g||(g={})),function(e){e.type=new t.NotificationType("yaml/supportSchemaSelection"),e.getSchema=new t.RequestType("yaml/get/jsonSchema"),e.getAllSchemas=new t.RequestType("yaml/get/all/jsonSchemas"),e.schemaStoreInitialized=new t.NotificationType("yaml/schema/store/initialized")}(y||(y={}));var S=n(6470);const w=e=>/^(((\.\.?)|([\w-@. ]+))(\/|\\\\?))*[\w-. ]*\.[\w-]+$/i.test(e),k=(e,t,n)=>{for(const t of e)if(n.startsWith(t.name)){const e=s.parse(t.uri).fsPath,r=n.split(S.sep);return r.shift(),s.file((0,S.join)(e,r.join())).toString()}return t?s.file((0,S.join)(t.fsPath,n)).toString():(0,S.normalize)(n)},x={resolveRelativePath:(e,t)=>b.DB(t,e)};function T(e,t){void 0===t&&(t=!1);var n=e.length,r=0,i="",o=0,s=16,a=0,c=0,l=0,u=0,h=0;function f(t,n){for(var i=0,o=0;i<t||!n;){var s=e.charCodeAt(r);if(s>=48&&s<=57)o=16*o+s-48;else if(s>=65&&s<=70)o=16*o+s-65+10;else{if(!(s>=97&&s<=102))break;o=16*o+s-97+10}r++,i++}return i<t&&(o=-1),o}function d(){if(i="",h=0,o=r,c=a,u=l,r>=n)return o=n,s=17;var t=e.charCodeAt(r);if(C(t)){do{r++,i+=String.fromCharCode(t),t=e.charCodeAt(r)}while(C(t));return s=15}if(R(t))return r++,i+=String.fromCharCode(t),13===t&&10===e.charCodeAt(r)&&(r++,i+="\n"),a++,l=r,s=14;switch(t){case 123:return r++,s=1;case 125:return r++,s=2;case 91:return r++,s=3;case 93:return r++,s=4;case 58:return r++,s=6;case 44:return r++,s=5;case 34:return r++,i=function(){for(var t="",i=r;;){if(r>=n){t+=e.substring(i,r),h=2;break}var o=e.charCodeAt(r);if(34===o){t+=e.substring(i,r),r++;break}if(92!==o){if(o>=0&&o<=31){if(R(o)){t+=e.substring(i,r),h=2;break}h=6}r++}else{if(t+=e.substring(i,r),++r>=n){h=2;break}switch(e.charCodeAt(r++)){case 34:t+='"';break;case 92:t+="\\";break;case 47:t+="/";break;case 98:t+="\b";break;case 102:t+="\f";break;case 110:t+="\n";break;case 114:t+="\r";break;case 116:t+="\t";break;case 117:var s=f(4,!0);s>=0?t+=String.fromCharCode(s):h=4;break;default:h=5}i=r}}return t}(),s=10;case 47:var d=r-1;if(47===e.charCodeAt(r+1)){for(r+=2;r<n&&!R(e.charCodeAt(r));)r++;return i=e.substring(d,r),s=12}if(42===e.charCodeAt(r+1)){r+=2;for(var p=n-1,g=!1;r<p;){var y=e.charCodeAt(r);if(42===y&&47===e.charCodeAt(r+1)){r+=2,g=!0;break}r++,R(y)&&(13===y&&10===e.charCodeAt(r)&&r++,a++,l=r)}return g||(r++,h=1),i=e.substring(d,r),s=13}return i+=String.fromCharCode(t),r++,s=16;case 45:if(i+=String.fromCharCode(t),++r===n||!O(e.charCodeAt(r)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=function(){var t=r;if(48===e.charCodeAt(r))r++;else for(r++;r<e.length&&O(e.charCodeAt(r));)r++;if(r<e.length&&46===e.charCodeAt(r)){if(!(++r<e.length&&O(e.charCodeAt(r))))return h=3,e.substring(t,r);for(r++;r<e.length&&O(e.charCodeAt(r));)r++}var n=r;if(r<e.length&&(69===e.charCodeAt(r)||101===e.charCodeAt(r)))if((++r<e.length&&43===e.charCodeAt(r)||45===e.charCodeAt(r))&&r++,r<e.length&&O(e.charCodeAt(r))){for(r++;r<e.length&&O(e.charCodeAt(r));)r++;n=r}else h=3;return e.substring(t,n)}(),s=11;default:for(;r<n&&m(t);)r++,t=e.charCodeAt(r);if(o!==r){switch(i=e.substring(o,r)){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(t),r++,s=16}}function m(e){if(C(e)||R(e))return!1;switch(e){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}return{setPosition:function(e){r=e,i="",o=0,s=16,h=0},getPosition:function(){return r},scan:t?function(){var e;do{e=d()}while(e>=12&&e<=15);return e}:d,getToken:function(){return s},getTokenValue:function(){return i},getTokenOffset:function(){return o},getTokenLength:function(){return r-o},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return o-u},getTokenError:function(){return h}}}function C(e){return 32===e||9===e||11===e||12===e||160===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function R(e){return 10===e||13===e||8232===e||8233===e}function O(e){return e>=48&&e<=57}var A;!function(e){e.DEFAULT={allowTrailingComma:!1}}(A||(A={}));var P,E=T,_=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=A.DEFAULT);var r=null,i=[],o=[];function s(e){Array.isArray(i)?i.push(e):null!==r&&(i[r]=e)}return function(e,t,n){void 0===n&&(n=A.DEFAULT);var r=T(e,!1);function i(e){return e?function(){return e(r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}function o(e){return e?function(t){return e(t,r.getTokenOffset(),r.getTokenLength(),r.getTokenStartLine(),r.getTokenStartCharacter())}:function(){return!0}}var s=i(t.onObjectBegin),a=o(t.onObjectProperty),c=i(t.onObjectEnd),l=i(t.onArrayBegin),u=i(t.onArrayEnd),h=o(t.onLiteralValue),f=o(t.onSeparator),d=i(t.onComment),m=o(t.onError),p=n&&n.disallowComments,g=n&&n.allowTrailingComma;function y(){for(;;){var e=r.scan();switch(r.getTokenError()){case 4:v(14);break;case 5:v(15);break;case 3:v(13);break;case 1:p||v(11);break;case 2:v(12);break;case 6:v(16)}switch(e){case 12:case 13:p?v(10):d();break;case 16:v(1);break;case 15:case 14:break;default:return e}}}function v(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=[]),m(e),t.length+n.length>0)for(var i=r.getToken();17!==i;){if(-1!==t.indexOf(i)){y();break}if(-1!==n.indexOf(i))break;i=y()}}function b(e){var t=r.getTokenValue();return e?h(t):a(t),y(),!0}y(),17===r.getToken()?!!n.allowEmptyContent||v(4,[],[]):function e(){switch(r.getToken()){case 3:return function(){l(),y();for(var t=!1;4!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||v(4,[],[]),f(","),y(),4===r.getToken()&&g)break}else t&&v(6,[],[]);e()||v(4,[],[4,5]),t=!0}return u(),4!==r.getToken()?v(8,[4],[]):y(),!0}();case 1:return function(){s(),y();for(var t=!1;2!==r.getToken()&&17!==r.getToken();){if(5===r.getToken()){if(t||v(4,[],[]),f(","),y(),2===r.getToken()&&g)break}else t&&v(6,[],[]);(10!==r.getToken()?(v(3,[],[2,5]),0):(b(!1),6===r.getToken()?(f(":"),y(),e()||v(4,[],[2,5])):v(5,[],[2,5]),1))||v(4,[],[2,5]),t=!0}return c(),2!==r.getToken()?v(7,[2],[]):y(),!0}();case 10:return b(!0);default:return function(){switch(r.getToken()){case 11:var e=r.getTokenValue(),t=Number(e);isNaN(t)&&(v(2),t=0),h(t);break;case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return y(),!0}()}}()?17!==r.getToken()&&v(9,[],[]):v(4,[],[])}(e,{onObjectBegin:function(){var e={};s(e),o.push(i),i=e,r=null},onObjectProperty:function(e){r=e},onObjectEnd:function(){i=o.pop()},onArrayBegin:function(){var e=[];s(e),o.push(i),i=e,r=null},onArrayEnd:function(){i=o.pop()},onLiteralValue:s,onError:function(e,n,r){t.push({error:e,offset:n,length:r})}},n),i[0]},D=function e(t,n,r){if(void 0===r&&(r=!1),function(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}(t,n,r)){var i=t.children;if(Array.isArray(i))for(var o=0;o<i.length&&i[o].offset<=n;o++){var s=e(i[o],n,r);if(s)return s}return t}},N=function e(t){if(!t.parent||!t.parent.children)return[];var n=e(t.parent);if("property"===t.parent.type){var r=t.parent.children[0].value;n.push(r)}else if("array"===t.parent.type){var i=t.parent.children.indexOf(t);-1!==i&&n.push(i)}return n},M=function e(t){switch(t.type){case"array":return t.children.map(e);case"object":for(var n=Object.create(null),r=0,i=t.children;r<i.length;r++){var o=i[r],s=o.children[1];s&&(n[o.children[0].value]=e(s))}return n;case"null":case"string":case"number":case"boolean":return t.value;default:return}},I=n(4155);P=(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function n(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}var r={resolve:function(){for(var e,r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s;o>=0?s=arguments[o]:(void 0===e&&(e=I.cwd()),s=e),t(s),0!==s.length&&(r=s+"/"+r,i=47===s.charCodeAt(0))}return r=n(r,!i),i?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(e){if(t(e),0===e.length)return".";var r=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=n(e,!r)).length||r||(e="."),e.length>0&&i&&(e+="/"),r?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,n=0;n<arguments.length;++n){var i=arguments[n];t(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":r.normalize(e)},relative:function(e,n){if(t(e),t(n),e===n)return"";if((e=r.resolve(e))===(n=r.resolve(n)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var o=e.length,s=o-i,a=1;a<n.length&&47===n.charCodeAt(a);++a);for(var c=n.length-a,l=s<c?s:c,u=-1,h=0;h<=l;++h){if(h===l){if(c>l){if(47===n.charCodeAt(a+h))return n.slice(a+h+1);if(0===h)return n.slice(a+h)}else s>l&&(47===e.charCodeAt(i+h)?u=h:0===h&&(u=0));break}var f=e.charCodeAt(i+h);if(f!==n.charCodeAt(a+h))break;47===f&&(u=h)}var d="";for(h=i+u+1;h<=o;++h)h!==o&&47!==e.charCodeAt(h)||(0===d.length?d+="..":d+="/..");return d.length>0?d+n.slice(a+u):(a+=u,47===n.charCodeAt(a)&&++a,n.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var n=e.charCodeAt(0),r=47===n,i=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(n=e.charCodeAt(s))){if(!o){i=s;break}}else o=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,n){if(void 0!==n&&"string"!=typeof n)throw new TypeError('"ext" argument must be a string');t(e);var r,i=0,o=-1,s=!0;if(void 0!==n&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var a=n.length-1,c=-1;for(r=e.length-1;r>=0;--r){var l=e.charCodeAt(r);if(47===l){if(!s){i=r+1;break}}else-1===c&&(s=!1,c=r+1),a>=0&&(l===n.charCodeAt(a)?-1==--a&&(o=r):(a=-1,o=c))}return i===o?o=c:-1===o&&(o=e.length),e.slice(i,o)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!s){i=r+1;break}}else-1===o&&(s=!1,o=r+1);return-1===o?"":e.slice(i,o)},extname:function(e){t(e);for(var n=-1,r=0,i=-1,o=!0,s=0,a=e.length-1;a>=0;--a){var c=e.charCodeAt(a);if(47!==c)-1===i&&(o=!1,i=a+1),46===c?-1===n?n=a:1!==s&&(s=1):-1!==n&&(s=-1);else if(!o){r=a+1;break}}return-1===n||-1===i||0===s||1===s&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+"/"+r:r}(0,e)},parse:function(e){t(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r,i=e.charCodeAt(0),o=47===i;o?(n.root="/",r=1):r=0;for(var s=-1,a=0,c=-1,l=!0,u=e.length-1,h=0;u>=r;--u)if(47!==(i=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===i?-1===s?s=u:1!==h&&(h=1):-1!==s&&(h=-1);else if(!l){a=u+1;break}return-1===s||-1===c||0===h||1===h&&s===c-1&&s===a+1?-1!==c&&(n.base=n.name=0===a&&o?e.slice(1,c):e.slice(a,c)):(0===a&&o?(n.name=e.slice(1,s),n.base=e.slice(1,c)):(n.name=e.slice(a,s),n.base=e.slice(a,c)),n.ext=e.slice(s,c)),a>0?n.dir=e.slice(0,a-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,e.exports=r},447:(e,t,n)=>{var r;if(n.r(t),n.d(t,{URI:()=>m,Utils:()=>C}),"object"==typeof I)r="win32"===I.platform;else if("object"==typeof navigator){var i=navigator.userAgent;r=i.indexOf("Windows")>=0}var o,s,a=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=/^\w[\w\d+.-]*$/,l=/^\//,u=/^\/\//,h="",f="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,m=function(){function e(e,t,n,r,i,o){void 0===o&&(o=!1),"object"==typeof e?(this.scheme=e.scheme||h,this.authority=e.authority||h,this.path=e.path||h,this.query=e.query||h,this.fragment=e.fragment||h):(this.scheme=function(e,t){return e||t?e:"file"}(e,o),this.authority=t||h,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==f&&(t=f+t):t=f}return t}(this.scheme,n||h),this.query=r||h,this.fragment=i||h,function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'+e.authority+'", path: "'+e.path+'", query: "'+e.query+'", fragment: "'+e.fragment+'"}');if(e.scheme&&!c.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!l.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,o))}return e.isUri=function(t){return t instanceof e||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"function"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString},Object.defineProperty(e.prototype,"fsPath",{get:function(){return S(this,!1)},enumerable:!1,configurable:!0}),e.prototype.with=function(e){if(!e)return this;var t=e.scheme,n=e.authority,r=e.path,i=e.query,o=e.fragment;return void 0===t?t=this.scheme:null===t&&(t=h),void 0===n?n=this.authority:null===n&&(n=h),void 0===r?r=this.path:null===r&&(r=h),void 0===i?i=this.query:null===i&&(i=h),void 0===o?o=this.fragment:null===o&&(o=h),t===this.scheme&&n===this.authority&&r===this.path&&i===this.query&&o===this.fragment?this:new g(t,n,r,i,o)},e.parse=function(e,t){void 0===t&&(t=!1);var n=d.exec(e);return n?new g(n[2]||h,T(n[4]||h),T(n[5]||h),T(n[7]||h),T(n[9]||h),t):new g(h,h,h,h,h)},e.file=function(e){var t=h;if(r&&(e=e.replace(/\\/g,f)),e[0]===f&&e[1]===f){var n=e.indexOf(f,2);-1===n?(t=e.substring(2),e=f):(t=e.substring(2,n),e=e.substring(n)||f)}return new g("file",t,e,h,h)},e.from=function(e){return new g(e.scheme,e.authority,e.path,e.query,e.fragment)},e.prototype.toString=function(e){return void 0===e&&(e=!1),w(this,e)},e.prototype.toJSON=function(){return this},e.revive=function(t){if(t){if(t instanceof e)return t;var n=new g(t);return n._formatted=t.external,n._fsPath=t._sep===p?t.fsPath:null,n}return t},e}(),p=r?1:void 0,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._formatted=null,t._fsPath=null,t}return a(t,e),Object.defineProperty(t.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=S(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(e){return void 0===e&&(e=!1),e?w(this,!0):(this._formatted||(this._formatted=w(this,!1)),this._formatted)},t.prototype.toJSON=function(){var e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=p),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e},t}(m),y=((s={})[58]="%3A",s[47]="%2F",s[63]="%3F",s[35]="%23",s[91]="%5B",s[93]="%5D",s[64]="%40",s[33]="%21",s[36]="%24",s[38]="%26",s[39]="%27",s[40]="%28",s[41]="%29",s[42]="%2A",s[43]="%2B",s[44]="%2C",s[59]="%3B",s[61]="%3D",s[32]="%20",s);function v(e,t){for(var n=void 0,r=-1,i=0;i<e.length;i++){var o=e.charCodeAt(i);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o)-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),void 0!==n&&(n+=e.charAt(i));else{void 0===n&&(n=e.substr(0,i));var s=y[o];void 0!==s?(-1!==r&&(n+=encodeURIComponent(e.substring(r,i)),r=-1),n+=s):-1===r&&(r=i)}}return-1!==r&&(n+=encodeURIComponent(e.substring(r))),void 0!==n?n:e}function b(e){for(var t=void 0,n=0;n<e.length;n++){var r=e.charCodeAt(n);35===r||63===r?(void 0===t&&(t=e.substr(0,n)),t+=y[r]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function S(e,t){var n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//"+e.authority+e.path:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,r&&(n=n.replace(/\//g,"\\")),n}function w(e,t){var n=t?b:v,r="",i=e.scheme,o=e.authority,s=e.path,a=e.query,c=e.fragment;if(i&&(r+=i,r+=":"),(o||"file"===i)&&(r+=f,r+=f),o){var l=o.indexOf("@");if(-1!==l){var u=o.substr(0,l);o=o.substr(l+1),-1===(l=u.indexOf(":"))?r+=n(u,!1):(r+=n(u.substr(0,l),!1),r+=":",r+=n(u.substr(l+1),!1)),r+="@"}-1===(l=(o=o.toLowerCase()).indexOf(":"))?r+=n(o,!1):(r+=n(o.substr(0,l),!1),r+=o.substr(l))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2))(h=s.charCodeAt(1))>=65&&h<=90&&(s="/"+String.fromCharCode(h+32)+":"+s.substr(3));else if(s.length>=2&&58===s.charCodeAt(1)){var h;(h=s.charCodeAt(0))>=65&&h<=90&&(s=String.fromCharCode(h+32)+":"+s.substr(2))}r+=n(s,!0)}return a&&(r+="?",r+=n(a,!1)),c&&(r+="#",r+=t?c:v(c,!1)),r}function k(e){try{return decodeURIComponent(e)}catch(t){return e.length>3?e.substr(0,3)+k(e.substr(3)):e}}var x=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function T(e){return e.match(x)?e.replace(x,(function(e){return k(e)})):e}var C,R=n(470),O=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},A=R.posix||R;!function(e){e.joinPath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.with({path:A.join.apply(A,O([e.path],t))})},e.resolvePath=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e.path||"/";return e.with({path:A.resolve.apply(A,O([r],t))})},e.dirname=function(e){var t=A.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)?e:e.with({path:t})},e.basename=function(e){return A.basename(e.path)},e.extname=function(e){return A.extname(e.path)}}(C||(C={}))}},t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}return n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(447)})();const{URI:j,Utils:q}=P;function F(e,t){if(e.length<t.length)return!1;for(var n=0;n<t.length;n++)if(e[n]!==t[n])return!1;return!0}function L(e,t){var n=e.length-t.length;return n>0?e.lastIndexOf(t)===n:0===n&&e===t}function $(e){return F(e,"(?i)")?new RegExp(e.substring(4),"iu"):new RegExp(e,"u")}function W(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;var n,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!W(e[n],t[n]))return!1}else{var i=[];for(r in e)i.push(r);i.sort();var o=[];for(r in t)o.push(r);if(o.sort(),!W(i,o))return!1;for(n=0;n<i.length;n++)if(!W(e[i[n]],t[i[n]]))return!1}return!0}function V(e){return"number"==typeof e}function U(e){return void 0!==e}function B(e){return"boolean"==typeof e}var K,H,z,J,G,Y=n(1674),X=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Q=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(t,n){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(e.isIncremental(o)){var s=te(o.range),a=this.offsetAt(s.start),c=this.offsetAt(s.end);this._content=this._content.substring(0,a)+o.text+this._content.substring(c,this._content.length);var l=Math.max(s.start.line,0),u=Math.max(s.end.line,0),h=this._lineOffsets,f=ee(o.text,!1,a);if(u-l===f.length)for(var d=0,m=f.length;d<m;d++)h[d+l+1]=f[d];else f.length<1e4?h.splice.apply(h,X([l+1,u-l],f,!1)):this._lineOffsets=h=h.slice(0,l+1).concat(f,h.slice(u+1));var p=o.text.length-(c-a);if(0!==p)for(d=l+1+f.length,m=h.length;d<m;d++)h[d]=h[d]+p}else{if(!e.isFull(o))throw new Error("Unknown change event received");this._content=o.text,this._lineOffsets=void 0}}this._version=n},e.prototype.getLineOffsets=function(){return void 0===this._lineOffsets&&(this._lineOffsets=ee(this._content,!0)),this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return{line:0,character:e};for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var o=n-1;return{line:o,character:e-t[o]}},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e.isIncremental=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0!==t.range&&(void 0===t.rangeLength||"number"==typeof t.rangeLength)},e.isFull=function(e){var t=e;return null!=t&&"string"==typeof t.text&&void 0===t.range&&void 0===t.rangeLength},e}();function Z(e,t){if(e.length<=1)return e;var n=e.length/2|0,r=e.slice(0,n),i=e.slice(n);Z(r,t),Z(i,t);for(var o=0,s=0,a=0;o<r.length&&s<i.length;){var c=t(r[o],i[s]);e[a++]=c<=0?r[o++]:i[s++]}for(;o<r.length;)e[a++]=r[o++];for(;s<i.length;)e[a++]=i[s++];return e}function ee(e,t,n){void 0===n&&(n=0);for(var r=t?[n]:[],i=0;i<e.length;i++){var o=e.charCodeAt(i);13!==o&&10!==o||(13===o&&i+1<e.length&&10===e.charCodeAt(i+1)&&i++,r.push(n+i+1))}return r}function te(e){var t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function ne(e){var t=te(e.range);return t!==e.range?{newText:e.newText,range:t}:e}(G=K||(K={})).create=function(e,t,n,r){return new Q(e,t,n,r)},G.update=function(e,t,n){if(e instanceof Q)return e.update(t,n),e;throw new Error("TextDocument.update: document must be created by TextDocument.create")},G.applyEdits=function(e,t){for(var n=e.getText(),r=0,i=[],o=0,s=Z(t.map(ne),(function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}));o<s.length;o++){var a=s[o],c=e.offsetAt(a.range.start);if(c<r)throw new Error("Overlapping edit");c>r&&i.push(n.substring(r,c)),a.newText.length&&i.push(a.newText),r=e.offsetAt(a.range.end)}return i.push(n.substr(r)),i.join("")},(J=H||(H={}))[J.Undefined=0]="Undefined",J[J.EnumValueMismatch=1]="EnumValueMismatch",J[J.Deprecated=2]="Deprecated",J[J.UnexpectedEndOfComment=257]="UnexpectedEndOfComment",J[J.UnexpectedEndOfString=258]="UnexpectedEndOfString",J[J.UnexpectedEndOfNumber=259]="UnexpectedEndOfNumber",J[J.InvalidUnicode=260]="InvalidUnicode",J[J.InvalidEscapeCharacter=261]="InvalidEscapeCharacter",J[J.InvalidCharacter=262]="InvalidCharacter",J[J.PropertyExpected=513]="PropertyExpected",J[J.CommaExpected=514]="CommaExpected",J[J.ColonExpected=515]="ColonExpected",J[J.ValueExpected=516]="ValueExpected",J[J.CommaOrCloseBacketExpected=517]="CommaOrCloseBacketExpected",J[J.CommaOrCloseBraceExpected=518]="CommaOrCloseBraceExpected",J[J.TrailingComma=519]="TrailingComma",J[J.DuplicateKey=520]="DuplicateKey",J[J.CommentNotPermitted=521]="CommentNotPermitted",J[J.SchemaResolveError=768]="SchemaResolveError",function(e){e.LATEST={textDocument:{completion:{completionItem:{documentationFormat:[Y.MarkupKind.Markdown,Y.MarkupKind.PlainText],commitCharactersSupport:!0}}}}}(z||(z={}));var re,ie,oe,se=n(3022),ae=(re=function(e,t){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},re(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}re(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ce=se.loadMessageBundle(),le={"color-hex":{errorMessage:ce("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:ce("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:ce("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:ce("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:ce("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},ue=function(){function e(e,t,n){void 0===n&&(n=0),this.offset=t,this.length=n,this.parent=e}return Object.defineProperty(e.prototype,"children",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")},e}();function he(e){return B(e)?e?{}:{not:{}}:e}ae((function(e,t){var n=oe.call(this,e,t)||this;return n.type="null",n.value=null,n}),oe=ue),function(e){ae((function(t,n,r){var i=e.call(this,t,r)||this;return i.type="boolean",i.value=n,i}),e)}(ue),function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="array",r.items=[],r}ae(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.items},enumerable:!1,configurable:!0})}(ue),function(e){ae((function(t,n){var r=e.call(this,t,n)||this;return r.type="number",r.isInteger=!0,r.value=Number.NaN,r}),e)}(ue),function(e){ae((function(t,n,r){var i=e.call(this,t,n,r)||this;return i.type="string",i.value="",i}),e)}(ue),function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.type="property",i.colonOffset=-1,i.keyNode=r,i}ae(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]},enumerable:!1,configurable:!0})}(ue),function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type="object",r.properties=[],r}ae(t,e),Object.defineProperty(t.prototype,"children",{get:function(){return this.properties},enumerable:!1,configurable:!0})}(ue),function(e){e[e.Key=0]="Key",e[e.Enum=1]="Enum"}(ie||(ie={}));var fe=function(){function e(e,t){void 0===e&&(e=-1),this.focusOffset=e,this.exclude=t,this.schemas=[]}return e.prototype.add=function(e){this.schemas.push(e)},e.prototype.merge=function(e){Array.prototype.push.apply(this.schemas,e.schemas)},e.prototype.include=function(e){return(-1===this.focusOffset||ye(e,this.focusOffset))&&e!==this.exclude},e.prototype.newSub=function(){return new e(-1,this.exclude)},e}(),de=function(){function e(){}return Object.defineProperty(e.prototype,"schemas",{get:function(){return[]},enumerable:!1,configurable:!0}),e.prototype.add=function(e){},e.prototype.merge=function(e){},e.prototype.include=function(e){return!0},e.prototype.newSub=function(){return this},e.instance=new e,e}(),me=function(){function e(){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=void 0}return e.prototype.hasProblems=function(){return!!this.problems.length},e.prototype.mergeAll=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this.merge(r)}},e.prototype.merge=function(e){this.problems=this.problems.concat(e.problems)},e.prototype.mergeEnumValues=function(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(var t=0,n=this.problems;t<n.length;t++){var r=n[t];r.code===H.EnumValueMismatch&&(r.message=ce("enumWarning","Value is not accepted. Valid values: {0}.",this.enumValues.map((function(e){return JSON.stringify(e)})).join(", ")))}}},e.prototype.mergePropertyMatch=function(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&1===e.enumValues.length&&this.primaryValueMatches++},e.prototype.compare=function(e){var t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.propertiesMatches-e.propertiesMatches},e}();function pe(e){return M(e)}function ge(e){return N(e)}function ye(e,t,n){return void 0===n&&(n=!1),t>=e.offset&&t<e.offset+e.length||n&&t===e.offset+e.length}function ve(e,t,n,r){if(e&&r.include(e)){var i=e;switch(i.type){case"object":!function(e,t,n,r){for(var i=Object.create(null),o=[],s=0,a=e.properties;s<a.length;s++)i[L=(g=a[s]).keyNode.value]=g.valueNode,o.push(L);if(Array.isArray(t.required))for(var c=0,l=t.required;c<l.length;c++)if(!i[x=l[c]]){var u=e.parent&&"property"===e.parent.type&&e.parent.keyNode,h=u?{offset:u.offset,length:u.length}:{offset:e.offset,length:1};n.problems.push({location:h,message:ce("MissingRequiredPropWarning",'Missing property "{0}".',x)})}var f=function(e){for(var t=o.indexOf(e);t>=0;)o.splice(t,1),t=o.indexOf(e)};if(t.properties)for(var d=0,m=Object.keys(t.properties);d<m.length;d++){f(x=m[d]);var p=t.properties[x];if(P=i[x])if(B(p))if(p)n.propertiesMatches++,n.propertiesValueMatches++;else{var g=P.parent;n.problems.push({location:{offset:g.keyNode.offset,length:g.keyNode.length},message:t.errorMessage||ce("DisallowedExtraPropWarning","Property {0} is not allowed.",x)})}else ve(P,p,R=new me,r),n.mergePropertyMatch(R)}if(t.patternProperties)for(var y=0,v=Object.keys(t.patternProperties);y<v.length;y++)for(var b=v[y],S=$(b),w=0,k=o.slice(0);w<k.length;w++){var x=k[w];S.test(x)&&(f(x),(P=i[x])&&(B(p=t.patternProperties[b])?p?(n.propertiesMatches++,n.propertiesValueMatches++):(g=P.parent,n.problems.push({location:{offset:g.keyNode.offset,length:g.keyNode.length},message:t.errorMessage||ce("DisallowedExtraPropWarning","Property {0} is not allowed.",x)})):(ve(P,p,R=new me,r),n.mergePropertyMatch(R))))}if("object"==typeof t.additionalProperties){for(var T=0,C=o;T<C.length;T++)if(P=i[x=C[T]]){var R=new me;ve(P,t.additionalProperties,R,r),n.mergePropertyMatch(R)}}else if(!1===t.additionalProperties&&o.length>0)for(var O=0,A=o;O<A.length;O++){var P;(P=i[x=A[O]])&&(g=P.parent,n.problems.push({location:{offset:g.keyNode.offset,length:g.keyNode.length},message:t.errorMessage||ce("DisallowedExtraPropWarning","Property {0} is not allowed.",x)}))}if(V(t.maxProperties)&&e.properties.length>t.maxProperties&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties)}),V(t.minProperties)&&e.properties.length<t.minProperties&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties)}),t.dependencies)for(var E=0,_=Object.keys(t.dependencies);E<_.length;E++)if(i[L=_[E]]){var D=t.dependencies[L];if(Array.isArray(D))for(var N=0,M=D;N<M.length;N++){var I=M[N];i[I]?n.propertiesValueMatches++:n.problems.push({location:{offset:e.offset,length:e.length},message:ce("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",I,L)})}else(p=he(D))&&(ve(e,p,R=new me,r),n.mergePropertyMatch(R))}var j=he(t.propertyNames);if(j)for(var q=0,F=e.properties;q<F.length;q++){var L;(L=F[q].keyNode)&&ve(L,j,n,de.instance)}}(i,t,n,r);break;case"array":!function(e,t,n,r){if(Array.isArray(t.items)){for(var i=t.items,o=0;o<i.length;o++){var s=he(i[o]),a=new me;(f=e.items[o])?(ve(f,s,a,r),n.mergePropertyMatch(a)):e.items.length>=i.length&&n.propertiesValueMatches++}if(e.items.length>i.length)if("object"==typeof t.additionalItems)for(var c=i.length;c<e.items.length;c++)a=new me,ve(e.items[c],t.additionalItems,a,r),n.mergePropertyMatch(a);else!1===t.additionalItems&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",i.length)})}else{var l=he(t.items);if(l)for(var u=0,h=e.items;u<h.length;u++){var f;ve(f=h[u],l,a=new me,r),n.mergePropertyMatch(a)}}var d=he(t.contains);if(d){var m=e.items.some((function(e){var t=new me;return ve(e,d,t,de.instance),!t.hasProblems()}));m||n.problems.push({location:{offset:e.offset,length:e.length},message:t.errorMessage||ce("requiredItemMissingWarning","Array does not contain required item.")})}if(V(t.minItems)&&e.items.length<t.minItems&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems)}),V(t.maxItems)&&e.items.length>t.maxItems&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems)}),!0===t.uniqueItems){var p=pe(e),g=p.some((function(e,t){return t!==p.lastIndexOf(e)}));g&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("uniqueItemsWarning","Array has duplicate items.")})}}(i,t,n,r);break;case"string":!function(e,t,n,r){if(V(t.minLength)&&e.value.length<t.minLength&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("minLengthWarning","String is shorter than the minimum length of {0}.",t.minLength)}),V(t.maxLength)&&e.value.length>t.maxLength&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("maxLengthWarning","String is longer than the maximum length of {0}.",t.maxLength)}),"string"==typeof t.pattern&&($(t.pattern).test(e.value)||n.problems.push({location:{offset:e.offset,length:e.length},message:t.patternErrorMessage||t.errorMessage||ce("patternWarning",'String does not match the pattern of "{0}".',t.pattern)})),t.format)switch(t.format){case"uri":case"uri-reference":var i=void 0;if(e.value){var o=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/.exec(e.value);o?o[2]||"uri"!==t.format||(i=ce("uriSchemeMissing","URI with a scheme is expected.")):i=ce("uriMissing","URI is expected.")}else i=ce("uriEmpty","URI expected.");i&&n.problems.push({location:{offset:e.offset,length:e.length},message:t.patternErrorMessage||t.errorMessage||ce("uriFormatWarning","String is not a URI: {0}",i)});break;case"color-hex":case"date-time":case"date":case"time":case"email":var s=le[t.format];e.value&&s.pattern.exec(e.value)||n.problems.push({location:{offset:e.offset,length:e.length},message:t.patternErrorMessage||t.errorMessage||s.errorMessage})}}(i,t,n);break;case"number":!function(e,t,n,r){var i=e.value;function o(e){var t,n=/^(-?\d+)(?:\.(\d+))?(?:e([-+]\d+))?$/.exec(e.toString());return n&&{value:Number(n[1]+(n[2]||"")),multiplier:((null===(t=n[2])||void 0===t?void 0:t.length)||0)-(parseInt(n[3])||0)}}if(V(t.multipleOf)){var s=-1;if(Number.isInteger(t.multipleOf))s=i%t.multipleOf;else{var a=o(t.multipleOf),c=o(i);if(a&&c){var l=Math.pow(10,Math.abs(c.multiplier-a.multiplier));c.multiplier<a.multiplier?c.value*=l:a.value*=l,s=c.value%a.value}}0!==s&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf)})}function u(e,t){return V(t)?t:B(t)&&t?e:void 0}function h(e,t){if(!B(t)||!t)return e}var f=u(t.minimum,t.exclusiveMinimum);V(f)&&i<=f&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",f)});var d=u(t.maximum,t.exclusiveMaximum);V(d)&&i>=d&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",d)});var m=h(t.minimum,t.exclusiveMinimum);V(m)&&i<m&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("minimumWarning","Value is below the minimum of {0}.",m)});var p=h(t.maximum,t.exclusiveMaximum);V(p)&&i>p&&n.problems.push({location:{offset:e.offset,length:e.length},message:ce("maximumWarning","Value is above the maximum of {0}.",p)})}(i,t,n);break;case"property":return ve(i.valueNode,t,n,r)}!function(){function e(e){return i.type===e||"integer"===e&&"number"===i.type&&i.isInteger}if(Array.isArray(t.type)?t.type.some(e)||n.problems.push({location:{offset:i.offset,length:i.length},message:t.errorMessage||ce("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", "))}):t.type&&(e(t.type)||n.problems.push({location:{offset:i.offset,length:i.length},message:t.errorMessage||ce("typeMismatchWarning",'Incorrect type. Expected "{0}".',t.type)})),Array.isArray(t.allOf))for(var o=0,s=t.allOf;o<s.length;o++){var a=s[o];ve(i,he(a),n,r)}var c=he(t.not);if(c){var l=new me,u=r.newSub();ve(i,c,l,u),l.hasProblems()||n.problems.push({location:{offset:i.offset,length:i.length},message:ce("notSchemaWarning","Matches a schema that is not allowed.")});for(var h=0,f=u.schemas;h<f.length;h++){var d=f[h];d.inverted=!d.inverted,r.add(d)}}var m=function(e,t){for(var o=[],s=void 0,a=0,c=e;a<c.length;a++){var l=he(c[a]),u=new me,h=r.newSub();if(ve(i,l,u,h),u.hasProblems()||o.push(l),s)if(t||u.hasProblems()||s.validationResult.hasProblems()){var f=u.compare(s.validationResult);f>0?s={schema:l,validationResult:u,matchingSchemas:h}:0===f&&(s.matchingSchemas.merge(h),s.validationResult.mergeEnumValues(u))}else s.matchingSchemas.merge(h),s.validationResult.propertiesMatches+=u.propertiesMatches,s.validationResult.propertiesValueMatches+=u.propertiesValueMatches;else s={schema:l,validationResult:u,matchingSchemas:h}}return o.length>1&&t&&n.problems.push({location:{offset:i.offset,length:1},message:ce("oneOfWarning","Matches multiple schemas when only one must validate.")}),s&&(n.merge(s.validationResult),n.propertiesMatches+=s.validationResult.propertiesMatches,n.propertiesValueMatches+=s.validationResult.propertiesValueMatches,r.merge(s.matchingSchemas)),o.length};Array.isArray(t.anyOf)&&m(t.anyOf,!1),Array.isArray(t.oneOf)&&m(t.oneOf,!0);var p=function(e){var t=new me,o=r.newSub();ve(i,he(e),t,o),n.merge(t),n.propertiesMatches+=t.propertiesMatches,n.propertiesValueMatches+=t.propertiesValueMatches,r.merge(o)},g=he(t.if);if(g&&function(e,t,n){var o=he(e),s=new me,a=r.newSub();ve(i,o,s,a),r.merge(a),s.hasProblems()?n&&p(n):t&&p(t)}(g,he(t.then),he(t.else)),Array.isArray(t.enum)){for(var y=pe(i),v=!1,b=0,S=t.enum;b<S.length;b++){if(W(y,S[b])){v=!0;break}}n.enumValues=t.enum,n.enumValueMatch=v,v||n.problems.push({location:{offset:i.offset,length:i.length},code:H.EnumValueMismatch,message:t.errorMessage||ce("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map((function(e){return JSON.stringify(e)})).join(", "))})}U(t.const)&&(W(y=pe(i),t.const)?n.enumValueMatch=!0:(n.problems.push({location:{offset:i.offset,length:i.length},code:H.EnumValueMismatch,message:t.errorMessage||ce("constWarning","Value must be {0}.",JSON.stringify(t.const))}),n.enumValueMatch=!1),n.enumValues=[t.const]),t.deprecationMessage&&i.parent&&n.problems.push({location:{offset:i.parent.offset,length:i.parent.length},severity:Y.DiagnosticSeverity.Warning,message:t.deprecationMessage,code:H.Deprecated})}(),r.add({node:i,schema:t})}}function be(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");for(var n,r=String(e),i="",o=!!t&&!!t.extended,s=!!t&&!!t.globstar,a=!1,c=t&&"string"==typeof t.flags?t.flags:"",l=0,u=r.length;l<u;l++)switch(n=r[l]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":i+="\\"+n;break;case"?":if(o){i+=".";break}case"[":case"]":if(o){i+=n;break}case"{":if(o){a=!0,i+="(";break}case"}":if(o){a=!1,i+=")";break}case",":if(a){i+="|";break}i+="\\"+n;break;case"*":for(var h=r[l-1],f=1;"*"===r[l+1];)f++,l++;var d=r[l+1];s?!(f>1)||"/"!==h&&void 0!==h&&"{"!==h&&","!==h||"/"!==d&&void 0!==d&&","!==d&&"}"!==d?i+="([^/]*)":("/"===d?l++:"/"===h&&i.endsWith("\\/")&&(i=i.substr(0,i.length-2)),i+="((?:[^/]*(?:/|$))*)"):i+=".*";break;default:i+=n}return c&&~c.indexOf("g")||(i="^"+i+"$"),new RegExp(i,c)}!function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=[]),this.root=e,this.syntaxErrors=t,this.comments=n}e.prototype.getNodeFromOffset=function(e,t){if(void 0===t&&(t=!1),this.root)return D(this.root,e,t)},e.prototype.visit=function(e){if(this.root){var t=function(n){var r=e(n),i=n.children;if(Array.isArray(i))for(var o=0;o<i.length&&r;o++)r=t(i[o]);return r};t(this.root)}},e.prototype.validate=function(e,t,n){if(void 0===n&&(n=Y.DiagnosticSeverity.Warning),this.root&&t){var r=new me;return ve(this.root,t,r,de.instance),r.problems.map((function(t){var r,i=Y.Range.create(e.positionAt(t.location.offset),e.positionAt(t.location.offset+t.location.length));return Y.Diagnostic.create(i,t.message,null!==(r=t.severity)&&void 0!==r?r:n,t.code)}))}},e.prototype.getMatchingSchemas=function(e,t,n){void 0===t&&(t=-1);var r=new fe(t,n);return this.root&&e&&ve(this.root,e,new me,r),r.schemas}}();var Se=se.loadMessageBundle(),we=function(){function e(e,t){this.globWrappers=[];try{for(var n=0,r=e;n<r.length;n++){var i=r[n],o="!"!==i[0];o||(i=i.substring(1)),i.length>0&&("/"===i[0]&&(i=i.substring(1)),this.globWrappers.push({regexp:be("**/"+i,{extended:!0,globstar:!0}),include:o}))}this.uris=t}catch(e){this.globWrappers.length=0,this.uris=[]}}return e.prototype.matchesPattern=function(e){for(var t=!1,n=0,r=this.globWrappers;n<r.length;n++){var i=r[n],o=i.regexp,s=i.include;o.test(e)&&(t=s)}return t},e.prototype.getURIs=function(){return this.uris},e}(),ke=function(){function e(e,t,n){this.service=e,this.url=t,this.dependencies={},n&&(this.unresolvedSchema=this.service.promise.resolve(new xe(n)))}return e.prototype.getUnresolvedSchema=function(){return this.unresolvedSchema||(this.unresolvedSchema=this.service.loadSchema(this.url)),this.unresolvedSchema},e.prototype.getResolvedSchema=function(){var e=this;return this.resolvedSchema||(this.resolvedSchema=this.getUnresolvedSchema().then((function(t){return e.service.resolveSchemaContent(t,e.url,e.dependencies)}))),this.resolvedSchema},e.prototype.clearSchema=function(){this.resolvedSchema=void 0,this.unresolvedSchema=void 0,this.dependencies={}},e}(),xe=function(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t},Te=function(){function e(e,t){void 0===t&&(t=[]),this.schema=e,this.errors=t}return e.prototype.getSection=function(e){var t=this.getSectionRecursive(e,this.schema);if(t)return he(t)},e.prototype.getSectionRecursive=function(e,t){if(!t||"boolean"==typeof t||0===e.length)return t;var n=e.shift();if(t.properties&&(t.properties[n],1))return this.getSectionRecursive(e,t.properties[n]);if(t.patternProperties)for(var r=0,i=Object.keys(t.patternProperties);r<i.length;r++){var o=i[r];if($(o).test(n))return this.getSectionRecursive(e,t.patternProperties[o])}else{if("object"==typeof t.additionalProperties)return this.getSectionRecursive(e,t.additionalProperties);if(n.match("[0-9]+"))if(Array.isArray(t.items)){var s=parseInt(n,10);if(!isNaN(s)&&t.items[s])return this.getSectionRecursive(e,t.items[s])}else if(t.items)return this.getSectionRecursive(e,t.items)}},e}(),Ce=function(){function e(e,t,n){this.contextService=t,this.requestService=e,this.promiseConstructor=n||Promise,this.callOnDispose=[],this.contributionSchemas={},this.contributionAssociations=[],this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={}}return e.prototype.getRegisteredSchemaIds=function(e){return Object.keys(this.registeredSchemasIds).filter((function(t){var n=j.parse(t).scheme;return"schemaservice"!==n&&(!e||e(n))}))},Object.defineProperty(e.prototype,"promise",{get:function(){return this.promiseConstructor},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){for(;this.callOnDispose.length>0;)this.callOnDispose.pop()()},e.prototype.onResourceChange=function(e){var t=this;this.cachedSchemaForResource=void 0;for(var n=!1,r=[e=Oe(e)],i=Object.keys(this.schemasById).map((function(e){return t.schemasById[e]}));r.length;)for(var o=r.pop(),s=0;s<i.length;s++){var a=i[s];a&&(a.url===o||a.dependencies[o])&&(a.url!==o&&r.push(a.url),a.clearSchema(),i[s]=void 0,n=!0)}return n},e.prototype.setSchemaContributions=function(e){if(e.schemas){var t=e.schemas;for(var n in t){var r=Oe(n);this.contributionSchemas[r]=this.addSchemaHandle(r,t[n])}}if(Array.isArray(e.schemaAssociations))for(var i=0,o=e.schemaAssociations;i<o.length;i++){var s=o[i],a=s.uris.map(Oe),c=this.addFilePatternAssociation(s.pattern,a);this.contributionAssociations.push(c)}},e.prototype.addSchemaHandle=function(e,t){var n=new ke(this,e,t);return this.schemasById[e]=n,n},e.prototype.getOrAddSchemaHandle=function(e,t){return this.schemasById[e]||this.addSchemaHandle(e,t)},e.prototype.addFilePatternAssociation=function(e,t){var n=new we(e,t);return this.filePatternAssociations.push(n),n},e.prototype.registerExternalSchema=function(e,t,n){var r=Oe(e);return this.registeredSchemasIds[r]=!0,this.cachedSchemaForResource=void 0,t&&this.addFilePatternAssociation(t,[r]),n?this.addSchemaHandle(r,n):this.getOrAddSchemaHandle(r)},e.prototype.clearExternalSchemas=function(){for(var e in this.schemasById={},this.filePatternAssociations=[],this.registeredSchemasIds={},this.cachedSchemaForResource=void 0,this.contributionSchemas)this.schemasById[e]=this.contributionSchemas[e],this.registeredSchemasIds[e]=!0;for(var t=0,n=this.contributionAssociations;t<n.length;t++){var r=n[t];this.filePatternAssociations.push(r)}},e.prototype.getResolvedSchema=function(e){var t=Oe(e),n=this.schemasById[t];return n?n.getResolvedSchema():this.promise.resolve(void 0)},e.prototype.loadSchema=function(e){if(!this.requestService){var t=Se("json.schema.norequestservice","Unable to load schema from '{0}'. No schema request service available",Ae(e));return this.promise.resolve(new xe({},[t]))}return this.requestService(e).then((function(t){if(!t){var n=Se("json.schema.nocontent","Unable to load schema from '{0}': No content.",Ae(e));return new xe({},[n])}var r,i=[];r=_(t,i);var o=i.length?[Se("json.schema.invalidFormat","Unable to parse content from '{0}': Parse error at offset {1}.",Ae(e),i[0].offset)]:[];return new xe(r,o)}),(function(t){var n=t.toString(),r=t.toString().split("Error: ");return r.length>1&&(n=r[1]),L(n,".")&&(n=n.substr(0,n.length-1)),new xe({},[Se("json.schema.nocontent","Unable to load schema from '{0}': {1}.",Ae(e),n)])}))},e.prototype.resolveSchemaContent=function(e,t,n){var r=this,i=e.errors.slice(0),o=e.schema;if(o.$schema){var s=Oe(o.$schema);if("http://json-schema.org/draft-03/schema"===s)return this.promise.resolve(new Te({},[Se("json.schema.draft03.notsupported","Draft-03 schemas are not supported.")]));"https://json-schema.org/draft/2019-09/schema"===s&&i.push(Se("json.schema.draft201909.notsupported","Draft 2019-09 schemas are not yet fully supported."))}var a=this.contextService,c=function(e,t,n,r){var o=r?decodeURIComponent(r):void 0,s=function(e,t){if(!t)return e;var n=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some((function(e){return e=e.replace(/~1/g,"/").replace(/~0/g,"~"),!(n=n[e])})),n}(t,o);if(s)for(var a in s)s.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(e[a]=s[a]);else i.push(Se("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",o,n))},l=function(e,t,n,o,s){a&&!/^[A-Za-z][A-Za-z0-9+\-.+]*:\/\/.*/.test(t)&&(t=a.resolveRelativePath(t,o)),t=Oe(t);var l=r.getOrAddSchemaHandle(t);return l.getUnresolvedSchema().then((function(r){if(s[t]=!0,r.errors.length){var o=n?t+"#"+n:t;i.push(Se("json.schema.problemloadingref","Problems loading reference '{0}': {1}",o,r.errors[0]))}return c(e,r.schema,t,n),u(e,r.schema,t,l.dependencies)}))},u=function(e,t,n,i){if(!e||"object"!=typeof e)return Promise.resolve(null);for(var o=[e],s=[],a=[],u=function(e){for(var r=[];e.$ref;){var s=e.$ref,u=s.split("#",2);if(delete e.$ref,u[0].length>0)return void a.push(l(e,u[0],u[1],n,i));-1===r.indexOf(s)&&(c(e,t,n,u[1]),r.push(s))}!function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var i=r[n];"object"==typeof i&&o.push(i)}}(e.items,e.additionalItems,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var i=r[n];if("object"==typeof i)for(var s in i){var a=i[s];"object"==typeof a&&o.push(a)}}}(e.definitions,e.properties,e.patternProperties,e.dependencies),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e;n<r.length;n++){var i=r[n];if(Array.isArray(i))for(var s=0,a=i;s<a.length;s++){var c=a[s];"object"==typeof c&&o.push(c)}}}(e.anyOf,e.allOf,e.oneOf,e.items)};o.length;){var h=o.pop();s.indexOf(h)>=0||(s.push(h),u(h))}return r.promise.all(a)};return u(o,o,t,n).then((function(e){return new Te(o,i)}))},e.prototype.getSchemaForResource=function(e,t){if(t&&t.root&&"object"===t.root.type){var n=t.root.properties.filter((function(e){return"$schema"===e.keyNode.value&&e.valueNode&&"string"===e.valueNode.type}));if(n.length>0){var r=n[0].valueNode;if(r&&"string"===r.type){var i=pe(r);if(i&&F(i,".")&&this.contextService&&(i=this.contextService.resolveRelativePath(i,e)),i){var o=Oe(i);return this.getOrAddSchemaHandle(o).getResolvedSchema()}}}}if(this.cachedSchemaForResource&&this.cachedSchemaForResource.resource===e)return this.cachedSchemaForResource.resolvedSchema;for(var s=Object.create(null),a=[],c=function(e){try{return j.parse(e).with({fragment:null,query:null}).toString()}catch(t){return e}}(e),l=0,u=this.filePatternAssociations;l<u.length;l++){var h=u[l];if(h.matchesPattern(c))for(var f=0,d=h.getURIs();f<d.length;f++){var m=d[f];s[m]||(a.push(m),s[m]=!0)}}var p=a.length>0?this.createCombinedSchema(e,a).getResolvedSchema():this.promise.resolve(void 0);return this.cachedSchemaForResource={resource:e,resolvedSchema:p},p},e.prototype.createCombinedSchema=function(e,t){if(1===t.length)return this.getOrAddSchemaHandle(t[0]);var n="schemaservice://combinedSchema/"+encodeURIComponent(e),r={allOf:t.map((function(e){return{$ref:e}}))};return this.addSchemaHandle(n,r)},e.prototype.getMatchingSchemas=function(e,t,n){if(n){var r=n.id||"schemaservice://untitled/matchingSchemas/"+Re++;return this.resolveSchemaContent(new xe(n),r,{}).then((function(e){return t.getMatchingSchemas(e.schema).filter((function(e){return!e.inverted}))}))}return this.getSchemaForResource(e.uri,t).then((function(e){return e?t.getMatchingSchemas(e.schema).filter((function(e){return!e.inverted})):[]}))},e}(),Re=0;function Oe(e){try{return j.parse(e).toString()}catch(t){return e}}function Ae(e){try{var t=j.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}var Pe=n(4458);function Ee(e){try{return new RegExp(e,"u")}catch(t){return new RegExp(e)}}const _e=Symbol.for("yaml.alias"),De=Symbol.for("yaml.document"),Ne=Symbol.for("yaml.map"),Me=Symbol.for("yaml.pair"),Ie=Symbol.for("yaml.scalar"),je=Symbol.for("yaml.seq"),qe=Symbol.for("yaml.node.type"),Fe=e=>!!e&&"object"==typeof e&&e[qe]===_e,Le=e=>!!e&&"object"==typeof e&&e[qe]===De,$e=e=>!!e&&"object"==typeof e&&e[qe]===Ne,We=e=>!!e&&"object"==typeof e&&e[qe]===Me,Ve=e=>!!e&&"object"==typeof e&&e[qe]===Ie,Ue=e=>!!e&&"object"==typeof e&&e[qe]===je;function Be(e){if(e&&"object"==typeof e)switch(e[qe]){case Ne:case je:return!0}return!1}function Ke(e){if(e&&"object"==typeof e)switch(e[qe]){case _e:case Ne:case Ie:case je:return!0}return!1}class He{constructor(e){Object.defineProperty(this,qe,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}}const ze=Symbol("break visit"),Je=Symbol("skip children"),Ge=Symbol("remove node");function Ye(e,t){"object"==typeof t&&(t.Collection||t.Node||t.Value)&&(t=Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t)),Le(e)?Xe(null,e.contents,t,Object.freeze([e]))===Ge&&(e.contents=null):Xe(null,e,t,Object.freeze([]))}function Xe(e,t,n,r){let i;if("function"==typeof n?i=n(e,t,r):$e(t)?n.Map&&(i=n.Map(e,t,r)):Ue(t)?n.Seq&&(i=n.Seq(e,t,r)):We(t)?n.Pair&&(i=n.Pair(e,t,r)):Ve(t)?n.Scalar&&(i=n.Scalar(e,t,r)):Fe(t)&&n.Alias&&(i=n.Alias(e,t,r)),Ke(i)||We(i)){const t=r[r.length-1];if(Be(t))t.items[e]=i;else if(We(t))"key"===e?t.key=i:t.value=i;else{if(!Le(t)){const e=Fe(t)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}t.contents=i}return Xe(e,i,n,r)}if("symbol"!=typeof i)if(Be(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const i=Xe(e,t.items[e],n,r);if("number"==typeof i)e=i-1;else{if(i===ze)return ze;i===Ge&&(t.items.splice(e,1),e-=1)}}}else if(We(t)){r=Object.freeze(r.concat(t));const e=Xe("key",t.key,n,r);if(e===ze)return ze;e===Ge&&(t.key=null);const i=Xe("value",t.value,n,r);if(i===ze)return ze;i===Ge&&(t.value=null)}return i}Ye.BREAK=ze,Ye.SKIP=Je,Ye.REMOVE=Ge;const Qe={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class Ze{constructor(e,t){this.marker=null,this.yaml=Object.assign({},Ze.defaultYaml,e),this.tags=Object.assign({},Ze.defaultTags,t)}clone(){const e=new Ze(this.yaml,this.tags);return e.marker=this.marker,e}atDocument(){const e=new Ze(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Ze.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Ze.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:Ze.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Ze.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,r]=n;return this.tags[e]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,n.length<1)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;return"1.1"===e||"1.2"===e?(this.yaml.version=e,!0):(t(6,`Unsupported YAML version ${e}`,!0),!1)}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,r]=e.match(/^(.*!)([^!]*)$/);r||t(`The ${e} tag has no suffix`);const i=this.tags[n];return i?i+decodeURIComponent(r):"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>Qe[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let r;if(e&&n.length>0&&Ke(e.contents)){const t={};Ye(e.contents,((e,n)=>{Ke(n)&&n.tag&&(t[n.tag]=!0)})),r=Object.keys(t)}else r=[];for(const[i,o]of n)"!!"===i&&"tag:yaml.org,2002:"===o||e&&!r.some((e=>e.startsWith(o)))||t.push(`%TAG ${i} ${o}`);return t.join("\n")}}function et(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function tt(e){const t=new Set;return Ye(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function nt(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}Ze.defaultYaml={explicit:!1,version:"1.2"},Ze.defaultTags={"!!":"tag:yaml.org,2002:"};class rt extends He{constructor(e){super(_e),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return Ye(e,{Node:(e,n)=>{if(n===this)return Ye.BREAK;n.anchor===this.source&&(t=n)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:i}=t,o=this.resolve(r);if(!o){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}const s=n.get(o);if(!s||void 0===s.res)throw new ReferenceError("This should not happen: Alias anchor was not resolved?");if(i>=0&&(s.count+=1,0===s.aliasCount&&(s.aliasCount=it(r,o,n)),s.count*s.aliasCount>i))throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack");return s.res}toString(e,t,n){const r=`*${this.source}`;if(e){if(et(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${r} `}return r}}function it(e,t,n){if(Fe(t)){const r=t.resolve(e),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}if(Be(t)){let r=0;for(const i of t.items){const t=it(e,i,n);t>r&&(r=t)}return r}if(We(t)){const r=it(e,t.key,n),i=it(e,t.value,n);return Math.max(r,i)}return 1}function ot(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>ot(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n||!Ve(r=e)&&!Be(r)||!r.anchor)return e.toJSON(t,n);const i={aliasCount:0,count:1,res:void 0};n.anchors.set(e,i),n.onCreate=e=>{i.res=e,delete n.onCreate};const o=e.toJSON(t,n);return n.onCreate&&n.onCreate(o),o}var r;return"bigint"!=typeof e||n&&n.keep?e:Number(e)}const st=e=>!e||"function"!=typeof e&&"object"!=typeof e;class at extends He{constructor(e){super(Ie),this.value=e}toJSON(e,t){return t&&t.keep?this.value:ot(this.value,e,t)}toString(){return String(this.value)}}function ct(e,t,n){var r,i;if(Le(e)&&(e=e.contents),Ke(e))return e;if(We(e)){const t=null===(i=(r=n.schema[Ne]).createNode)||void 0===i?void 0:i.call(r,n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"function"==typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:o,onAnchor:s,onTagObj:a,schema:c,sourceObjects:l}=n;let u;if(o&&e&&"object"==typeof e){if(u=l.get(e),u)return u.anchor||(u.anchor=s(e)),new rt(u.anchor);u={anchor:null,node:null},l.set(e,u)}t&&t.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let h=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),r=e.find((e=>!e.format))||e[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return n.find((t=>t.identify&&t.identify(e)&&!t.format))}(e,t,c.tags);if(!h){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){const t=new at(e);return u&&(u.node=t),t}h=e instanceof Map?c[Ne]:Symbol.iterator in Object(e)?c[je]:c[Ne]}a&&(a(h),delete n.onTagObj);const f=(null==h?void 0:h.createNode)?h.createNode(n.schema,e,n):new at(e);return t&&(f.tag=t),u&&(u.node=f),f}function lt(e,t,n){let r=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=r,r=e}else r=new Map([[n,r]])}return ct(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}at.BLOCK_FOLDED="BLOCK_FOLDED",at.BLOCK_LITERAL="BLOCK_LITERAL",at.PLAIN="PLAIN",at.QUOTE_DOUBLE="QUOTE_DOUBLE",at.QUOTE_SINGLE="QUOTE_SINGLE";const ut=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class ht extends He{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map((t=>Ke(t)||We(t)?t.clone(e):t)),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(ut(e))this.add(t);else{const[n,...r]=e,i=this.get(n,!0);if(Be(i))i.addIn(r,t);else{if(void 0!==i||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,lt(this.schema,r,t))}}}deleteIn([e,...t]){if(0===t.length)return this.delete(e);const n=this.get(e,!0);if(Be(n))return n.deleteIn(t);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`)}getIn([e,...t],n){const r=this.get(e,!0);return 0===t.length?!n&&Ve(r)?r.value:r:Be(r)?r.getIn(t,n):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!We(t))return!1;const n=t.value;return null==n||e&&Ve(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn([e,...t]){if(0===t.length)return this.has(e);const n=this.get(e,!0);return!!Be(n)&&n.hasIn(t)}setIn([e,...t],n){if(0===t.length)this.set(e,n);else{const r=this.get(e,!0);if(Be(r))r.setIn(t,n);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${e}. Remaining path: ${t}`);this.set(e,lt(this.schema,t,n))}}}}ht.maxFlowStringSingleLineLength=60;const ft="flow",dt="block",mt="quoted";function pt(e,t,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:s,onOverflow:a}={}){if(!i||i<0)return e;const c=Math.max(1+o,1+i-t.length);if(e.length<=c)return e;const l=[],u={};let h,f,d=i-t.length;"number"==typeof r&&(r>i-Math.max(2,o)?l.push(0):d=i-r);let m,p=!1,g=-1,y=-1,v=-1;for(n===dt&&(g=gt(e,g),-1!==g&&(d=g+c));m=e[g+=1];){if(n===mt&&"\\"===m){switch(y=g,e[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}v=g}if("\n"===m)n===dt&&(g=gt(e,g)),d=g+c,h=void 0;else{if(" "===m&&f&&" "!==f&&"\n"!==f&&"\t"!==f){const t=e[g+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(h=g)}if(g>=d)if(h)l.push(h),d=h+c,h=void 0;else if(n===mt){for(;" "===f||"\t"===f;)f=m,m=e[g+=1],p=!0;const t=g>v+1?g-2:y-1;if(u[t])return e;l.push(t),u[t]=!0,d=t+c,h=void 0}else p=!0}f=m}if(p&&a&&a(),0===l.length)return e;s&&s();let b=e.slice(0,l[0]);for(let r=0;r<l.length;++r){const i=l[r],o=l[r+1]||e.length;0===i?b=`\n${t}${e.slice(0,o)}`:(n===mt&&u[i]&&(b+=`${e[i]}\\`),b+=`\n${t}${e.slice(i+1,o)}`)}return b}function gt(e,t){let n=e[t+1];for(;" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}const yt=e=>({indentAtStart:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),vt=e=>/^(%|---|\.\.\.)/m.test(e);function bt(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,i=t.options.doubleQuotedMinMultiLineLength,o=t.indent||(vt(e)?"  ":"");let s="",a=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(s+=n.slice(a,e)+"\\ ",e+=1,a=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{s+=n.slice(a,e);const t=n.substr(e+2,4);switch(t){case"0000":s+="\\0";break;case"0007":s+="\\a";break;case"000b":s+="\\v";break;case"001b":s+="\\e";break;case"0085":s+="\\N";break;case"00a0":s+="\\_";break;case"2028":s+="\\L";break;case"2029":s+="\\P";break;default:"00"===t.substr(0,2)?s+="\\x"+t.substr(2):s+=n.substr(e,6)}e+=5,a=e+1}break;case"n":if(r||'"'===n[e+2]||n.length<i)e+=1;else{for(s+=n.slice(a,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)s+="\n",e+=2;s+=o," "===n[e+2]&&(s+="\\"),e+=1,a=e+1}break;default:e+=1}return s=a?s+n.slice(a):n,r?s:pt(s,o,mt,yt(t))}function St(e,t){if(t.implicitKey){if(/\n/.test(e))return bt(e,t)}else if(/[ \t]\n|\n[ \t]/.test(e))return bt(e,t);const n=t.indent||(vt(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?r:pt(r,n,ft,yt(t))}function wt({comment:e,type:t,value:n},r,i,o){if(/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return bt(n,r);const s=r.indent||(r.forceBlockIndent||vt(n)?"  ":""),a=t!==at.BLOCK_FOLDED&&(t===at.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const r=t-n,i=e.length;if(i<=r)return!1;for(let t=0,n=0;t<i;++t)if("\n"===e[t]){if(t-n>r)return!0;if(n=t+1,i-n<=r)return!1}return!0}(n,r.options.lineWidth,s.length));if(!n)return a?"|\n":">\n";let c,l;for(l=n.length;l>0;--l){const e=n[l-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let u=n.substring(l);const h=u.indexOf("\n");-1===h?c="-":n===u||h!==u.length-1?(c="+",o&&o()):c="",u&&(n=n.slice(0,-u.length),"\n"===u[u.length-1]&&(u=u.slice(0,-1)),u=u.replace(/\n+(?!\n|$)/g,`$&${s}`));let f,d=!1,m=-1;for(f=0;f<n.length;++f){const e=n[f];if(" "===e)d=!0;else{if("\n"!==e)break;m=f}}let p=n.substring(0,m<f?m+1:f);p&&(n=n.substring(p.length),p=p.replace(/\n+/g,`$&${s}`));let g=(a?"|":">")+(d?s?"2":"1":"")+c;return e&&(g+=" #"+e.replace(/ ?[\r\n]+/g," "),i&&i()),a?`${g}\n${s}${p}${n=n.replace(/\n+/g,`$&${s}`)}${u}`:`${g}\n${s}${pt(`${p}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${s}`)}${u}`,s,dt,yt(r))}`}function kt(e,t,n,r){const{implicitKey:i,inFlow:o}=t,s="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:a}=e;a!==at.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(s.value)&&(a=at.QUOTE_DOUBLE);const c=e=>{switch(e){case at.BLOCK_FOLDED:case at.BLOCK_LITERAL:return i||o?bt(s.value,t):wt(s,t,n,r);case at.QUOTE_DOUBLE:return bt(s.value,t);case at.QUOTE_SINGLE:return St(s.value,t);case at.PLAIN:return function(e,t,n,r){var i;const{type:o,value:s}=e,{actualString:a,implicitKey:c,indent:l,inFlow:u}=t;if(c&&/[\n[\]{},]/.test(s)||u&&/[[\]{},]/.test(s))return bt(s,t);if(!s||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s)){const i=-1!==s.indexOf('"'),o=-1!==s.indexOf("'");let a;return a=i&&!o?St:o&&!i?bt:t.options.singleQuote?St:bt,c||u||-1===s.indexOf("\n")?a(s,t):wt(e,t,n,r)}if(!c&&!u&&o!==at.PLAIN&&-1!==s.indexOf("\n"))return wt(e,t,n,r);if(""===l&&vt(s))return t.forceBlockIndent=!0,wt(e,t,n,r);const h=s.replace(/\n+/g,`$&\n${l}`);if(a)for(const e of t.doc.schema.tags)if(e.default&&"tag:yaml.org,2002:str"!==e.tag&&(null===(i=e.test)||void 0===i?void 0:i.test(h)))return bt(s,t);return c?h:pt(h,l,ft,yt(t))}(s,t,n,r);default:return null}};let l=c(a);if(null===l){const{defaultKeyType:e,defaultStringType:n}=t.options,r=i&&e||n;if(l=c(r),null===l)throw new Error(`Unsupported default string type ${r}`)}return l}const xt=(e,t)=>({anchors:new Set,doc:e,indent:"",indentStep:"number"==typeof t.indent?" ".repeat(t.indent):"  ",options:Object.assign({defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:!1,trueStr:"true",verifyAliasOrder:!0},t)});function Tt(e,t,n,r){if(We(e))return e.toString(t,n,r);if(Fe(e))return e.toString(t);let i;const o=Ke(e)?e:t.doc.createNode(e,{onTagObj:e=>i=e});i||(i=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))||n[0]}let n,r;if(Ve(t)){r=t.value;const i=e.filter((e=>e.identify&&e.identify(r)));n=i.find((e=>e.format===t.format))||i.find((e=>!e.format))}else r=t,n=e.find((e=>e.nodeClass&&r instanceof e.nodeClass));if(!n){const e=r&&r.constructor?r.constructor.name:typeof r;throw new Error(`Tag not resolved for ${e} value`)}return n}(t.doc.schema.tags,o));const s=function(e,t,{anchors:n,doc:r}){const i=[],o=(Ve(e)||Be(e))&&e.anchor;return o&&et(o)&&(n.add(o),i.push(`&${o}`)),e.tag?i.push(r.directives.tagString(e.tag)):t.default||i.push(r.directives.tagString(t.tag)),i.join(" ")}(o,i,t);s.length>0&&(t.indentAtStart=(t.indentAtStart||0)+s.length+1);const a="function"==typeof i.stringify?i.stringify(o,t,n,r):Ve(o)?kt(o,t,n,r):o.toString(t,n,r);return s?Ve(o)||"{"===a[0]||"["===a[0]?`${s} ${a}`:`${s}\n${t.indent}${a}`:a}const Ct=(e,t)=>/^\n+$/.test(e)?e.substring(1):e.replace(/^(?!$)(?: $)?/gm,`${t}#`);function Rt(e,t,n){return n?n.includes("\n")?`${e}\n`+Ct(n,t):e.endsWith(" ")?`${e}#${n}`:`${e} #${n}`:e}var Ot=n(4155);function At(e,t){"debug"!==e&&"warn"!==e||(void 0!==Ot&&Ot.emitWarning?Ot.emitWarning(t):console.warn(t))}function Pt(e,t,{key:n,value:r}){if(e&&e.doc.schema.merge&&Et(n))if(Ue(r))for(const n of r.items)_t(e,t,n);else if(Array.isArray(r))for(const n of r)_t(e,t,n);else _t(e,t,r);else{const i=ot(n,"",e);if(t instanceof Map)t.set(i,ot(r,i,e));else if(t instanceof Set)t.add(i);else{const o=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(Ke(e)&&n&&n.doc){const t=xt(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const r=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(r);e.length>40&&(e=e.substring(0,36)+'..."'),At(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(t)}(n,i,e),s=ot(r,o,e);o in t?Object.defineProperty(t,o,{value:s,writable:!0,enumerable:!0,configurable:!0}):t[o]=s}}return t}const Et=e=>"<<"===e||Ve(e)&&"<<"===e.value&&(!e.type||e.type===at.PLAIN);function _t(e,t,n){const r=e&&Fe(n)?n.resolve(e.doc):n;if(!$e(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,e,Map);for(const[e,n]of i)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}function Dt(e,t,n){const r=ct(e,void 0,n),i=ct(t,void 0,n);return new Nt(r,i)}class Nt{constructor(e,t=null){Object.defineProperty(this,qe,{value:Me}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return Ke(t)&&(t=t.clone(e)),Ke(n)&&(n=n.clone(e)),new Nt(t,n)}toJSON(e,t){return Pt(t,t&&t.mapAsMap?new Map:{},this)}toString(e,t,n){return e&&e.doc?function({key:e,value:t},n,r,i){const{allNullValues:o,doc:s,indent:a,indentStep:c,options:{indentSeq:l,simpleKeys:u}}=n;let h=Ke(e)&&e.comment||null;if(u){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(Be(e))throw new Error("With simple keys, collection cannot be used as a key value")}let f=!u&&(!e||h&&null==t&&!n.inFlow||Be(e)||(Ve(e)?e.type===at.BLOCK_FOLDED||e.type===at.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!f&&(u||!o),indent:a+c});let d=!1,m=!1,p=Tt(e,n,(()=>d=!0),(()=>m=!0));if(!f&&!n.inFlow&&p.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");f=!0}if(n.inFlow){if(o||null==t)return d&&r&&r(),f?`? ${p}`:p}else if(o&&!u||null==t&&f)return d&&(h=null),m&&!h&&i&&i(),Rt(`? ${p}`,n.indent,h);d&&(h=null),p=f?`? ${Rt(p,n.indent,h)}\n${a}:`:Rt(`${p}:`,n.indent,h);let g="",y=null;Ke(t)?(t.spaceBefore&&(g="\n"),t.commentBefore&&(g+=`\n${Ct(t.commentBefore,n.indent)}`),y=t.comment):t&&"object"==typeof t&&(t=s.createNode(t)),n.implicitKey=!1,f||h||!Ve(t)||(n.indentAtStart=p.length+1),m=!1,l||!(c.length>=2)||n.inFlow||f||!Ue(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substr(2));let v=!1;const b=Tt(t,n,(()=>v=!0),(()=>m=!0));let S=" ";return g||h?S=`${g}\n${n.indent}`:!f&&Be(t)?("["===b[0]||"{"===b[0])&&!b.includes("\n")||(S=`\n${n.indent}`):"\n"===b[0]&&(S=""),n.inFlow?(v&&r&&r(),p+S+b):(v&&(y=null),m&&!y&&i&&i(),Rt(p+S+b,n.indent,y))}(this,e,t,n):JSON.stringify(this)}}const Mt={intAsBigInt:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"};function It({comment:e,flow:t,items:n},r,{blockItem:i,flowChars:o,itemIndent:s,onChompKeep:a,onComment:c}){const{indent:l,indentStep:u}=r,h=t||r.inFlow;h&&(s+=u),r=Object.assign({},r,{indent:s,inFlow:h,type:null});let f=!0,d=!1;const m=n.reduce(((e,t,i)=>{let o=null;if(Ke(t)){!d&&t.spaceBefore&&e.push({comment:!0,str:""});let n=t.commentBefore;if(n&&d&&(n=n.replace(/^\n+/,"")),n){/^\n+$/.test(n)&&(n=n.substring(1));for(const t of n.match(/^.*$/gm)){const n=" "===t?"#":t?`#${t}`:"";e.push({comment:!0,str:n})}}t.comment&&(o=t.comment,f=!1)}else if(We(t)){const n=Ke(t.key)?t.key:null;if(n){!d&&n.spaceBefore&&e.push({comment:!0,str:""});let t=n.commentBefore;if(t&&d&&(t=t.replace(/^\n+/,"")),t){/^\n+$/.test(t)&&(t=t.substring(1));for(const n of t.match(/^.*$/gm)){const t=" "===n?"#":n?`#${n}`:"";e.push({comment:!0,str:t})}}n.comment&&(f=!1)}if(h){const e=Ke(t.value)?t.value:null;e?(e.comment&&(o=e.comment),(e.comment||e.commentBefore)&&(f=!1)):null==t.value&&n&&n.comment&&(o=n.comment)}}d=!1;let a=Tt(t,r,(()=>o=null),(()=>d=!0));return h&&i<n.length-1&&(a+=","),a=Rt(a,s,o),d&&(o||h)&&(d=!1),e.push({comment:!1,str:a}),e}),[]);let p;if(0===m.length)p=o.start+o.end;else if(h){const{start:e,end:t}=o,n=m.map((e=>e.str));let r=2;for(const e of m){if(e.comment||e.str.includes("\n")){f=!1;break}r+=e.str.length+2}if(!f||r>ht.maxFlowStringSingleLineLength){p=e;for(const e of n)p+=e?`\n${u}${l}${e}`:"\n";p+=`\n${l}${t}`}else p=`${e} ${n.join(" ")} ${t}`}else{const e=m.map(i);p=e.shift()||"";for(const t of e)p+=t?`\n${l}${t}`:"\n"}return e?(p+="\n"+Ct(e,l),c&&c()):d&&a&&a(),p}function jt(e,t){const n=Ve(t)?t.value:t;for(const r of e)if(We(r)){if(r.key===t||r.key===n)return r;if(Ve(r.key)&&r.key.value===n)return r}}class qt extends ht{constructor(e){super(Ne,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,t){let n;n=We(e)?e:new Nt(e&&"object"==typeof e&&"key"in e?e.key:e,e.value);const r=jt(this.items,n.key),i=this.schema&&this.schema.sortMapEntries;if(r){if(!t)throw new Error(`Key ${n.key} already set`);Ve(r.value)&&st(n.value)?r.value.value=n.value:r.value=n.value}else if(i){const e=this.items.findIndex((e=>i(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=jt(this.items,e);return!!t&&this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=jt(this.items,e),r=n&&n.value;return!t&&Ve(r)?r.value:r}has(e){return!!jt(this.items,e)}set(e,t){this.add(new Nt(e,t),!0)}toJSON(e,t,n){const r=n?new n:t&&t.mapAsMap?new Map:{};t&&t.onCreate&&t.onCreate(r);for(const e of this.items)Pt(t,r,e);return r}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!We(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),It(this,e,{blockItem:e=>e.str,flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const Ft={collection:"map",createNode:function(e,t,n){const{keepUndefined:r,replacer:i}=n,o=new qt(e),s=(e,s)=>{if("function"==typeof i)s=i.call(t,e,s);else if(Array.isArray(i)&&!i.includes(e))return;(void 0!==s||r)&&o.items.push(Dt(e,s,n))};if(t instanceof Map)for(const[e,n]of t)s(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))s(e,t[e]);return"function"==typeof e.sortMapEntries&&o.items.sort(e.sortMapEntries),o},default:!0,nodeClass:qt,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>($e(e)||t("Expected a mapping for this tag"),e)};class Lt extends ht{constructor(e){super(je,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){const t=$t(e);return"number"==typeof t&&this.items.splice(t,1).length>0}get(e,t){const n=$t(e);if("number"!=typeof n)return;const r=this.items[n];return!t&&Ve(r)?r.value:r}has(e){const t=$t(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=$t(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[n];Ve(r)&&st(t)?r.value=t:this.items[n]=t}toJSON(e,t){const n=[];t&&t.onCreate&&t.onCreate(n);let r=0;for(const e of this.items)n.push(ot(e,String(r++),t));return n}toString(e,t,n){return e?It(this,e,{blockItem:e=>e.comment?e.str:`- ${e.str}`,flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}}function $t(e){let t=Ve(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const Wt={collection:"seq",createNode:function(e,t,n){const{replacer:r}=n,i=new Lt(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let o of t){if("function"==typeof r){const n=t instanceof Set?o:String(e++);o=r.call(t,n,o)}i.items.push(ct(o,void 0,n))}}return i},default:!0,nodeClass:Lt,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(Ue(e)||t("Expected a sequence for this tag"),e)},Vt={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,r)=>kt(e,t=Object.assign({actualString:!0},t),n,r)},Ut={identify:e=>null==e,createNode:()=>new at(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new at(null),stringify:({source:e},t)=>e&&Ut.test.test(e)?e:t.options.nullStr},Bt={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new at("t"===e[0]||"T"===e[0]),stringify:({source:e,value:t},n)=>e&&Bt.test.test(e)&&t===("t"===e[0]||"T"===e[0])?e:t?n.options.trueStr:n.options.falseStr};function Kt({format:e,minFractionDigits:t,tag:n,value:r}){if("bigint"==typeof r)return String(r);const i="number"==typeof r?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(o)){let e=o.indexOf(".");e<0&&(e=o.length,o+=".");let n=t-(o.length-e-1);for(;n-- >0;)o+="0"}return o}const Ht={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Kt},zt={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify:({value:e})=>Number(e).toExponential()},Jt={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new at(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:Kt},Gt=e=>"bigint"==typeof e||Number.isInteger(e),Yt=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function Xt(e,t,n){const{value:r}=e;return Gt(r)&&r>=0?n+r.toString(t):Kt(e)}const Qt={identify:e=>Gt(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>Yt(e,2,8,n),stringify:e=>Xt(e,8,"0o")},Zt={identify:Gt,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>Yt(e,0,10,n),stringify:Kt},en={identify:e=>Gt(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>Yt(e,2,16,n),stringify:e=>Xt(e,16,"0x")},tn=[Ft,Wt,Vt,Ut,Bt,Qt,Zt,en,Ht,zt,Jt];function nn(e){return"bigint"==typeof e||Number.isInteger(e)}const rn=({value:e})=>JSON.stringify(e),on=[Ft,Wt].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:rn},{identify:e=>null==e,createNode:()=>new at(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:rn},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:rn},{identify:nn,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>nn(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:rn}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),sn={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof Buffer)return Buffer.from(e,"base64");if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},r,i,o){const s=n;let a;if("function"==typeof Buffer)a=s instanceof Buffer?s.toString("base64"):Buffer.from(s.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<s.length;++t)e+=String.fromCharCode(s[t]);a=btoa(e)}}if(t||(t=at.BLOCK_LITERAL),t!==at.QUOTE_DOUBLE){const e=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),n=Math.ceil(a.length/e),i=new Array(n);for(let t=0,r=0;t<n;++t,r+=e)i[t]=a.substr(r,e);a=i.join(t===at.BLOCK_LITERAL?"\n":" ")}return kt({comment:e,type:t,value:a},r,i,o)}};function an(e,t){if(Ue(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!We(r)){if($e(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");const e=r.items[0]||new Nt(new at(null));if(r.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${r.commentBefore}\n${e.key.commentBefore}`:r.commentBefore),r.comment){const t=e.value||e.key;t.comment=t.comment?`${r.comment}\n${t.comment}`:r.comment}r=e}e.items[n]=We(r)?r:new Nt(r)}}else t("Expected a sequence for this tag");return e}function cn(e,t,n){const{replacer:r}=n,i=new Lt(e);i.tag="tag:yaml.org,2002:pairs";let o=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let s,a;if("function"==typeof r&&(e=r.call(t,String(o++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);s=e[0],a=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected { key: value } tuple: ${e}`);s=t[0],a=e[s]}else s=e;i.items.push(Dt(s,a,n))}return i}const ln={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:an,createNode:cn};class un extends Lt{constructor(){super(),this.add=qt.prototype.add.bind(this),this.delete=qt.prototype.delete.bind(this),this.get=qt.prototype.get.bind(this),this.has=qt.prototype.has.bind(this),this.set=qt.prototype.set.bind(this),this.tag=un.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t&&t.onCreate&&t.onCreate(n);for(const e of this.items){let r,i;if(We(e)?(r=ot(e.key,"",t),i=ot(e.value,r,t)):r=ot(e,"",t),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,i)}return n}}un.tag="tag:yaml.org,2002:omap";const hn={collection:"seq",identify:e=>e instanceof Map,nodeClass:un,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=an(e,t),r=[];for(const{key:e}of n.items)Ve(e)&&(r.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):r.push(e.value));return Object.assign(new un,n)},createNode(e,t,n){const r=cn(e,t,n),i=new un;return i.items=r.items,i}};function fn({value:e,source:t},n){return t&&(e?dn:mn).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const dn={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new at(!0),stringify:fn},mn={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new at(!1),stringify:fn},pn={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Kt},gn={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify:({value:e})=>Number(e).toExponential()},yn={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new at(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const r=e.substring(n+1).replace(/_/g,"");"0"===r[r.length-1]&&(t.minFractionDigits=r.length)}return t},stringify:Kt},vn=e=>"bigint"==typeof e||Number.isInteger(e);function bn(e,t,n,{intAsBigInt:r}){const i=e[0];if("-"!==i&&"+"!==i||(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===i?BigInt(-1)*t:t}const o=parseInt(e,n);return"-"===i?-1*o:o}function Sn(e,t,n){const{value:r}=e;if(vn(r)){const e=r.toString(t);return r<0?"-"+n+e.substr(1):n+e}return Kt(e)}const wn={identify:vn,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>bn(e,2,2,n),stringify:e=>Sn(e,2,"0b")},kn={identify:vn,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>bn(e,1,8,n),stringify:e=>Sn(e,8,"0")},xn={identify:vn,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>bn(e,0,10,n),stringify:Kt},Tn={identify:vn,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>bn(e,2,16,n),stringify:e=>Sn(e,16,"0x")};class Cn extends qt{constructor(e){super(e),this.tag=Cn.tag}add(e){let t;t=We(e)?e:"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new Nt(e.key,null):new Nt(e,null),jt(this.items,t.key)||this.items.push(t)}get(e,t){const n=jt(this.items,e);return!t&&We(n)?Ve(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=jt(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new Nt(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}}Cn.tag="tag:yaml.org,2002:set";const Rn={collection:"map",identify:e=>e instanceof Set,nodeClass:Cn,default:!1,tag:"tag:yaml.org,2002:set",resolve(e,t){if($e(e)){if(e.hasAllNullValues(!0))return Object.assign(new Cn,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e},createNode(e,t,n){const{replacer:r}=n,i=new Cn(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof r&&(e=r.call(t,e,e)),i.items.push(Dt(e,null,n));return i}};function On(e,t){const n=e[0],r="-"===n||"+"===n?e.substring(1):e,i=e=>t?BigInt(e):Number(e),o=r.replace(/_/g,"").split(":").reduce(((e,t)=>e*i(60)+i(t)),i(0));return"-"===n?i(-1)*o:o}function An(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return Kt(e);let r="";t<0&&(r="-",t*=n(-1));const i=n(60),o=[t%i];return t<60?o.unshift(0):(t=(t-o[0])/i,o.unshift(t%i),t>=60&&(t=(t-o[0])/i,o.unshift(t))),r+o.map((e=>e<10?"0"+String(e):String(e))).join(":").replace(/000000\d*$/,"")}const Pn={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>On(e,n),stringify:An},En={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>On(e,!1),stringify:An},_n={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(_n.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,o,s,a]=t.map(Number),c=t[7]?Number((t[7]+"00").substr(1,3)):0;let l=Date.UTC(n,r-1,i,o||0,s||0,a||0,c);const u=t[8];if(u&&"Z"!==u){let e=On(u,!1);Math.abs(e)<30&&(e*=60),l-=6e4*e}return new Date(l)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Dn=[Ft,Wt,Vt,Ut,dn,mn,wn,kn,xn,Tn,pn,gn,yn,sn,hn,ln,Rn,Pn,En,_n],Nn={core:tn,failsafe:[Ft,Wt,Vt],json:on,yaml11:Dn,"yaml-1.1":Dn},Mn={binary:sn,bool:Bt,float:Jt,floatExp:zt,floatNaN:Ht,floatTime:En,int:Zt,intHex:en,intOct:Qt,intTime:Pn,map:Ft,null:Ut,omap:hn,pairs:ln,seq:Wt,set:Rn,timestamp:_n},In={"tag:yaml.org,2002:binary":sn,"tag:yaml.org,2002:omap":hn,"tag:yaml.org,2002:pairs":ln,"tag:yaml.org,2002:set":Rn,"tag:yaml.org,2002:timestamp":_n},jn=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class qn{constructor({customTags:e,merge:t,resolveKnownTags:n,schema:r,sortMapEntries:i}){this.merge=!!t,this.name=r||"core",this.knownTags=n?In:{},this.tags=function(e,t){let n=Nn[t];if(!n){const e=Object.keys(Nn).filter((e=>"yaml11"!==e)).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e}`)}if(Array.isArray(e))for(const t of e)n=n.concat(t);else"function"==typeof e&&(n=e(n.slice()));return n.map((e=>{if("string"!=typeof e)return e;const t=Mn[e];if(t)return t;const n=Object.keys(Mn).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown custom tag "${e}"; use one of ${n}`)}))}(e,this.name),Object.defineProperty(this,Ne,{value:Ft}),Object.defineProperty(this,Ie,{value:Vt}),Object.defineProperty(this,je,{value:Wt}),this.sortMapEntries=!0===i?jn:i||null}clone(){const e=Object.create(qn.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function Fn(e,t,n,r){if(r&&"object"==typeof r)if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t){const n=r[t],i=Fn(e,r,String(t),n);void 0===i?delete r[t]:i!==n&&(r[t]=i)}else if(r instanceof Map)for(const t of Array.from(r.keys())){const n=r.get(t),i=Fn(e,r,t,n);void 0===i?r.delete(t):i!==n&&r.set(t,i)}else if(r instanceof Set)for(const t of Array.from(r)){const n=Fn(e,r,t,t);void 0===n?r.delete(t):n!==t&&(r.delete(t),r.add(n))}else for(const[t,n]of Object.entries(r)){const i=Fn(e,r,t,n);void 0===i?delete r[t]:i!==n&&(r[t]=i)}return e.call(t,n,r)}class Ln{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,qe,{value:De});let r=null;"function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t,t=void 0);const i=Object.assign({},Mt,n);this.options=i;let{version:o}=i;(null==n?void 0:n.directives)?(this.directives=n.directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Ze({version:o}),this.setSchema(o,n),this.contents=void 0===e?null:this.createNode(e,r,n)}clone(){const e=Object.create(Ln.prototype,{[qe]:{value:De}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),e.directives=this.directives.clone(),e.schema=this.schema.clone(),e.contents=Ke(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){$n(this.contents)&&this.contents.add(e)}addIn(e,t){$n(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=tt(this);e.anchor=!t||n.has(t)?nt(t||"a",n):t}return new rt(e.anchor)}createNode(e,t,n){let r;if("function"==typeof t)e=t.call({"":e},"",e),r=t;else if(Array.isArray(t)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),r=t}else void 0===n&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:s,keepUndefined:a,onTagObj:c,tag:l}=n||{},{onAnchor:u,setAnchors:h,sourceObjects:f}=function(e,t){const n=[],r=new Map;let i=null;return{onAnchor(r){n.push(r),i||(i=tt(e));const o=nt(t,i);return i.add(o),o},setAnchors(){for(const e of n){const t=r.get(e);if("object"!=typeof t||!t.anchor||!Ve(t.node)&&!Be(t.node)){const t=new Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:r}}(this,o||"a"),d=ct(e,l,{aliasDuplicateObjects:null==i||i,keepUndefined:null!=a&&a,onAnchor:u,onTagObj:c,replacer:r,schema:this.schema,sourceObjects:f});return s&&Be(d)&&(d.flow=!0),h(),d}createPair(e,t,n={}){const r=this.createNode(e,null,n),i=this.createNode(t,null,n);return new Nt(r,i)}delete(e){return!!$n(this.contents)&&this.contents.delete(e)}deleteIn(e){return ut(e)?null!=this.contents&&(this.contents=null,!0):!!$n(this.contents)&&this.contents.deleteIn(e)}get(e,t){return Be(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return ut(e)?!t&&Ve(this.contents)?this.contents.value:this.contents:Be(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!Be(this.contents)&&this.contents.has(e)}hasIn(e){return ut(e)?void 0!==this.contents:!!Be(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=lt(this.schema,[e],t):$n(this.contents)&&this.contents.set(e,t)}setIn(e,t){ut(e)?this.contents=t:null==this.contents?this.contents=lt(this.schema,Array.from(e),t):$n(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t){let n;switch(String(e)){case"1.1":this.directives.yaml.version="1.1",n=Object.assign({merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"},t);break;case"1.2":this.directives.yaml.version="1.2",n=Object.assign({merge:!1,resolveKnownTags:!0,schema:"core"},t);break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1' or '1.2' as version, but found: ${t}`)}}this.schema=new qn(n)}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){const s={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100,stringify:Tt},a=ot(this.contents,t||"",s);if("function"==typeof i)for(const{count:e,res:t}of s.anchors.values())i(t,e);return"function"==typeof o?Fn(o,{"":a},"",a):a}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let r=!0===t.directives;if(!1!==t.directives){const t=e.directives.toString(e);t?(n.push(t),r=!0):e.directives.marker&&(r=!0)}r&&n.push("---"),e.commentBefore&&(1!==n.length&&n.unshift(""),n.unshift(Ct(e.commentBefore,"")));const i=xt(e,t);let o=!1,s=null;if(e.contents){Ke(e.contents)&&(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore&&n.push(Ct(e.contents.commentBefore,"")),i.forceBlockIndent=!!e.comment,s=e.contents.comment);const t=s?void 0:()=>o=!0;let a=Tt(e.contents,i,(()=>s=null),t);s&&(a=Rt(a,"",s)),"|"!==a[0]&&">"!==a[0]||"---"!==n[n.length-1]?n.push(a):n[n.length-1]=`--- ${a}`}else n.push(Tt(e.contents,i));let a=e.comment;return a&&o&&(a=a.replace(/^\n+/,"")),a&&(o&&!s||""===n[n.length-1]||n.push(""),n.push(Ct(a,""))),n.join("\n")+"\n"}(this,e)}}function $n(e){if(Be(e))return!0;throw new Error("Expected a YAML collection as document contents")}class Wn extends Error{constructor(e,t,n,r){super(),this.name=e,this.code=n,this.message=r,this.pos=t}}class Vn extends Wn{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class Un extends Wn{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const Bn=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((e=>t.linePos(e)));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,s=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(o>=60&&s.length>80){const e=Math.min(o-39,s.length-79);s="…"+s.substring(e),o-=e-1}if(s.length>80&&(s=s.substring(0,79)+"…"),r>1&&/^ *$/.test(s.substring(0,o))){let n=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),s=n+s}if(/[^ ]/.test(s)){let e=1;const t=n.linePos[1];t&&t.line===r&&t.col>i&&(e=Math.min(t.col-i,80-o));const a=" ".repeat(o)+"^".repeat(e);n.message+=`:\n\n${s}\n${a}\n`}};function Kn(e,{flow:t,indicator:n,next:r,offset:i,onError:o,startOnNewline:s}){let a=!1,c=s,l=s,u="",h="",f=!1,d=!1,m=null,p=null,g=null,y=null,v=null;for(const r of e)switch(d&&("space"!==r.type&&"newline"!==r.type&&"comma"!==r.type&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),d=!1),r.type){case"space":!t&&c&&"doc-start"!==n&&"\t"===r.source[0]&&o(r,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||o(r,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=r.source.substring(1)||" ";u?u+=h+e:u=e,h="",c=!1;break}case"newline":c?u?u+=r.source:a=!0:h+=r.source,c=!0,f=!0,l=!0;break;case"anchor":m&&o(r,"MULTIPLE_ANCHORS","A node can have at most one anchor"),m=r,null===v&&(v=r.offset),c=!1,l=!1,d=!0;break;case"tag":p&&o(r,"MULTIPLE_TAGS","A node can have at most one tag"),p=r,null===v&&(v=r.offset),c=!1,l=!1,d=!0;break;case n:(m||p)&&o(r,"BAD_PROP_ORDER",`Anchors and tags must be after the ${r.source} indicator`),y=r,c=!1,l=!1;break;case"comma":if(t){g&&o(r,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),g=r,c=!1,l=!1;break}default:o(r,"UNEXPECTED_TOKEN",`Unexpected ${r.type} token`),c=!1,l=!1}const b=e[e.length-1],S=b?b.offset+b.source.length:i;return d&&r&&"space"!==r.type&&"newline"!==r.type&&"comma"!==r.type&&("scalar"!==r.type||""!==r.source)&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:g,found:y,spaceBefore:a,comment:u,hasNewline:f,anchor:m,tag:p,end:S,start:null!=v?v:S}}function Hn(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return!0;if(e.end)for(const t of e.end)if("newline"===t.type)return!0;return!1;case"flow-collection":for(const t of e.items){for(const e of t.start)if("newline"===e.type)return!0;if(t.sep)for(const e of t.sep)if("newline"===e.type)return!0;if(Hn(t.key)||Hn(t.value))return!0}return!1;default:return!0}}function zn(e,t,n){const{uniqueKeys:r}=e.options;if(!1===r)return!1;const i="function"==typeof r?r:(t,n)=>t===n||Ve(t)&&Ve(n)&&t.value===n.value&&!("<<"===t.value&&e.schema.merge);return t.some((e=>i(e.key,n)))}const Jn="All mapping items must start at the same column";function Gn(e,t,n,r){let i="";if(e){let o=!1,s="";for(const a of e){const{source:e,type:c}=a;switch(c){case"space":o=!0;break;case"comment":{n&&!o&&r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=e.substring(1)||" ";i?i+=s+t:i=t,s="";break}case"newline":i&&(s+=e),o=!0;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}t+=e.length}}return{comment:i,offset:t}}const Yn="Block collections are not allowed within flow collections",Xn=e=>e&&("block-map"===e.type||"block-seq"===e.type);function Qn(e){let t,n;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(e){t=/(.*?)[ \t]*\r?\n/ys,n=/[ \t]*(.*?)[ \t]*\r?\n/ys}let r=t.exec(e);if(!r)return e;let i=r[1],o=" ",s=t.lastIndex;for(n.lastIndex=s;r=n.exec(e);)""===r[1]?"\n"===o?i+=o:o="\n":(i+=o+r[1],o=" "),s=n.lastIndex;const a=/[ \t]*(.*)/ys;return a.lastIndex=s,r=a.exec(e),i+o+(r&&r[1]||"")}function Zn(e,t){let n="",r=e[t+1];for(;!(" "!==r&&"\t"!==r&&"\n"!==r&&"\r"!==r||"\r"===r&&"\n"!==e[t+2]);)"\n"===r&&(n+="\n"),r=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const er={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function tr(e,t,n,r){const i=e.substr(t,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const i=e.substr(t-2,n+2);return r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),i}return String.fromCodePoint(o)}function nr(e,t,n,r){const{value:i,type:o,comment:s,range:a}="block-scalar"===t.type?function(e,t,n){const r=e.offset,i=function({offset:e,props:t},n,r){if("block-scalar-header"!==t[0].type)return r(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=t[0],o=i[0];let s=0,a="",c=-1;for(let t=1;t<i.length;++t){const n=i[t];if(a||"-"!==n&&"+"!==n){const r=Number(n);!s&&r?s=r:-1===c&&(c=e+t)}else a=n}-1!==c&&r(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,u="",h=i.length;for(let e=1;e<t.length;++e){const i=t[e];switch(i.type){case"space":l=!0;case"newline":h+=i.source.length;break;case"comment":n&&!l&&r(i,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),h+=i.source.length,u=i.source.substring(1);break;case"error":r(i,"UNEXPECTED_TOKEN",i.message),h+=i.source.length;break;default:{r(i,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${i.type}`);const e=i.source;e&&"string"==typeof e&&(h+=e.length)}}}return{mode:o,indent:s,chomp:a,comment:u,length:h}}(e,t,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const o=">"===i.mode?at.BLOCK_FOLDED:at.BLOCK_LITERAL,s=e.source?function(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),i=[r&&r[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)i.push([t[e],t[e+1]]);return i}(e.source):[];let a=s.length;for(let e=s.length-1;e>=0;--e){const t=s[e][1];if(""!==t&&"\r"!==t)break;a=e}if(!e.source||0===a){const t="+"===i.chomp?s.map((e=>e[0])).join("\n"):"";let n=r+i.length;return e.source&&(n+=e.source.length),{value:t,type:o,comment:i.comment,range:[r,n,n]}}let c=e.indent+i.indent,l=e.offset+i.length,u=0;for(let e=0;e<a;++e){const[t,r]=s[e];if(""!==r&&"\r"!==r){if(t.length<c){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+t.length,"MISSING_CHAR",e)}0===i.indent&&(c=t.length),u=e;break}0===i.indent&&t.length>c&&(c=t.length),l+=t.length+r.length+1}let h="",f="",d=!1;for(let e=0;e<u;++e)h+=s[e][0].slice(c)+"\n";for(let e=u;e<a;++e){let[t,r]=s[e];l+=t.length+r.length+1;const a="\r"===r[r.length-1];if(a&&(r=r.slice(0,-1)),r&&t.length<c){const e="Block scalar lines must not be less indented than their "+(i.indent?"explicit indentation indicator":"first line");n(l-r.length-(a?2:1),"BAD_INDENT",e),t=""}o===at.BLOCK_LITERAL?(h+=f+t.slice(c)+r,f="\n"):t.length>c||"\t"===r[0]?(" "===f?f="\n":d||"\n"!==f||(f="\n\n"),h+=f+t.slice(c)+r,f="\n",d=!0):""===r?"\n"===f?h+="\n":f="\n":(h+=f+r,f=" ",d=!1)}switch(i.chomp){case"-":break;case"+":for(let e=a;e<s.length;++e)h+="\n"+s[e][0].slice(c);"\n"!==h[h.length-1]&&(h+="\n");break;default:h+="\n"}const m=r+i.length+e.source.length;return{value:h,type:o,comment:i.comment,range:[r,m,m]}}(t,e.options.strict,r):function(e,t,n){const{offset:r,type:i,source:o,end:s}=e;let a,c;const l=(e,t,i)=>n(r+e,t,i);switch(i){case"scalar":a=at.PLAIN,c=function(e,t){let n="";switch(e[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${e[0]}`;break;case"@":case"`":n=`reserved character ${e[0]}`}return n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Qn(e)}(o,l);break;case"single-quoted-scalar":a=at.QUOTE_SINGLE,c=function(e,t){return"'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote"),Qn(e.slice(1,-1)).replace(/''/g,"'")}(o,l);break;case"double-quoted-scalar":a=at.QUOTE_DOUBLE,c=function(e,t){let n="";for(let r=1;r<e.length-1;++r){const i=e[r];if("\r"!==i||"\n"!==e[r+1])if("\n"===i){const{fold:t,offset:i}=Zn(e,r);n+=t,r=i}else if("\\"===i){let i=e[++r];const o=er[i];if(o)n+=o;else if("\n"===i)for(i=e[r+1];" "===i||"\t"===i;)i=e[1+ ++r];else if("\r"===i&&"\n"===e[r+1])for(i=e[1+ ++r];" "===i||"\t"===i;)i=e[1+ ++r];else if("x"===i||"u"===i||"U"===i){const o={x:2,u:4,U:8}[i];n+=tr(e,r+1,o,t),r+=o}else{const i=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),n+=i}}else if(" "===i||"\t"===i){const t=r;let o=e[r+1];for(;" "===o||"\t"===o;)o=e[1+ ++r];"\n"===o||"\r"===o&&"\n"===e[r+2]||(n+=r>t?e.slice(t,r+1):i)}else n+=i}return'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote'),n}(o,l);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+o.length,r+o.length]}}const u=r+o.length,h=Gn(s,u,t,n);return{value:c,type:a,comment:h.comment,range:[r,u,h.offset]}}(t,e.options.strict,r),c=n?e.directives.tagName(n.source,(e=>r(n,"TAG_RESOLVE_FAILED",e))):null,l=n&&c?function(e,t,n,r,i){var o;if("!"===n)return e[Ie];const s=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;s.push(t)}for(const e of s)if(null===(o=e.test)||void 0===o?void 0:o.test(t))return e;const a=e.knownTags[n];return a&&!a.collection?(e.tags.push(Object.assign({},a,{default:!1,test:void 0})),a):(i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),e[Ie])}(e.schema,i,c,n,r):function(e,t,n){var r;if(n)for(const n of e.tags)if(n.default&&(null===(r=n.test)||void 0===r?void 0:r.test(t)))return n;return e[Ie]}(e.schema,i,"scalar"===t.type);let u;try{const o=l.resolve(i,(e=>r(n||t,"TAG_RESOLVE_FAILED",e)),e.options);u=Ve(o)?o:new at(o)}catch(e){const o=e instanceof Error?e.message:String(e);r(n||t,"TAG_RESOLVE_FAILED",o),u=new at(i)}return u.range=a,u.source=i,o&&(u.type=o),c&&(u.tag=c),l.format&&(u.format=l.format),s&&(u.comment=s),u}function rr(e,t,n){if(t){null===n&&(n=t.length);for(let r=n-1;r>=0;--r){let n=t[r];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++r];"space"===(null==n?void 0:n.type);)e+=n.source.length,n=t[++r];break}}return e}const ir={composeNode:or,composeEmptyNode:sr};function or(e,t,n,r){const{spaceBefore:i,comment:o,anchor:s,tag:a}=n;let c;switch(t.type){case"alias":c=function({options:e},{offset:t,source:n,end:r},i){const o=new rt(n.substring(1));""===o.source&&i(t,"BAD_ALIAS","Alias cannot be an empty string");const s=t+n.length,a=Gn(r,s,e.strict,i);return o.range=[t,s,a.offset],a.comment&&(o.comment=a.comment),o}(e,t,r),(s||a)&&r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=nr(e,t,a,r),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=function(e,t,n,r,i){let o;switch(n.type){case"block-map":o=function({composeNode:e,composeEmptyNode:t},n,r,i){var o;const s=new qt(n.schema);let a=r.offset;for(const{start:c,key:l,sep:u,value:h}of r.items){const f=Kn(c,{indicator:"explicit-key-ind",next:l||(null==u?void 0:u[0]),offset:a,onError:i,startOnNewline:!0}),d=!f.found;if(d){if(l&&("block-seq"===l.type?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in l&&l.indent!==r.indent&&i(a,"BAD_INDENT",Jn)),!f.anchor&&!f.tag&&!u){f.comment&&(s.comment?s.comment+="\n"+f.comment:s.comment=f.comment);continue}}else(null===(o=f.found)||void 0===o?void 0:o.indent)!==r.indent&&i(a,"BAD_INDENT",Jn);d&&Hn(l)&&i(l,"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line");const m=f.end,p=l?e(n,l,f,i):t(n,m,c,null,f,i);zn(n,s.items,p)&&i(m,"DUPLICATE_KEY","Map keys must be unique");const g=Kn(u||[],{indicator:"map-value-ind",next:h,offset:p.range[2],onError:i,startOnNewline:!l||"block-scalar"===l.type});if(a=g.end,g.found){d&&("block-map"!==(null==h?void 0:h.type)||g.hasNewline||i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&f.start<g.found.offset-1024&&i(p.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const r=h?e(n,h,g,i):t(n,a,u,null,g,i);a=r.range[2],s.items.push(new Nt(p,r))}else d&&i(p.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),g.comment&&(p.comment?p.comment+="\n"+g.comment:p.comment=g.comment),s.items.push(new Nt(p))}return s.range=[r.offset,a,a],s}(e,t,n,i);break;case"block-seq":o=function({composeNode:e,composeEmptyNode:t},n,r,i){const o=new Lt(n.schema);let s=r.offset;for(const{start:a,value:c}of r.items){const r=Kn(a,{indicator:"seq-item-ind",next:c,offset:s,onError:i,startOnNewline:!0});if(s=r.end,!r.found){if(!(r.anchor||r.tag||c)){r.comment&&(o.comment=r.comment);continue}c&&"block-seq"===c.type?i(s,"BAD_INDENT","All sequence items must start at the same column"):i(s,"MISSING_CHAR","Sequence item without - indicator")}const l=c?e(n,c,r,i):t(n,s,a,null,r,i);s=l.range[2],o.items.push(l)}return o.range=[r.offset,s,s],o}(e,t,n,i);break;case"flow-collection":o=function({composeNode:e,composeEmptyNode:t},n,r,i){const o="{"===r.start.source,s=o?"flow map":"flow sequence",a=o?new qt(n.schema):new Lt(n.schema);a.flow=!0;let c=r.offset;for(let l=0;l<r.items.length;++l){const{start:u,key:h,sep:f,value:d}=r.items[l],m=Kn(u,{flow:s,indicator:"explicit-key-ind",next:h||(null==f?void 0:f[0]),offset:c,onError:i,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||f||d)){0===l&&m.comma?i(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):l<r.items.length-1&&i(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),m.comment&&(a.comment?a.comment+="\n"+m.comment:a.comment=m.comment);continue}!o&&n.options.strict&&Hn(h)&&i(h,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===l)m.comma&&i(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(m.comma||i(m.start,"MISSING_CHAR",`Missing , between ${s} items`),m.comment){let e="";e:for(const t of u)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}if(e){let t=a.items[a.items.length-1];We(t)&&(t=t.value||t.key),t.comment?t.comment+="\n"+e:t.comment=e,m.comment=m.comment.substring(e.length+1)}}if(o||f||m.found){const r=m.end,l=h?e(n,h,m,i):t(n,r,u,null,m,i);Xn(h)&&i(l.range,"BLOCK_IN_FLOW",Yn);const p=Kn(f||[],{flow:s,indicator:"map-value-ind",next:d,offset:l.range[2],onError:i,startOnNewline:!1});if(p.found){if(!o&&!m.found&&n.options.strict){if(f)for(const e of f){if(e===p.found)break;if("newline"===e.type){i(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<p.found.offset-1024&&i(p.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else d&&("source"in d&&d.source&&":"===d.source[0]?i(d,"MISSING_CHAR",`Missing space after : in ${s}`):i(p.start,"MISSING_CHAR",`Missing , or : between ${s} items`));const g=d?e(n,d,p,i):p.found?t(n,p.end,f,null,p,i):null;g?Xn(d)&&i(g.range,"BLOCK_IN_FLOW",Yn):p.comment&&(l.comment?l.comment+="\n"+p.comment:l.comment=p.comment);const y=new Nt(l,g);if(o){const e=a;zn(n,e.items,l)&&i(r,"DUPLICATE_KEY","Map keys must be unique"),e.items.push(y)}else{const e=new qt(n.schema);e.flow=!0,e.items.push(y),a.items.push(e)}c=g?g.range[2]:p.end}else{const r=d?e(n,d,m,i):t(n,m.end,f,null,m,i);a.items.push(r),c=r.range[2],Xn(d)&&i(r.range,"BLOCK_IN_FLOW",Yn)}}const l=o?"}":"]",[u,...h]=r.end;let f=c;if(u&&u.source===l?f=u.offset+u.source.length:(i(c+1,"MISSING_CHAR",`Expected ${s} to end with ${l}`),u&&1!==u.source.length&&h.unshift(u)),h.length>0){const e=Gn(h,f,n.options.strict,i);e.comment&&(a.comment?a.comment+="\n"+e.comment:a.comment=e.comment),a.range=[r.offset,f,e.offset]}else a.range=[r.offset,f,f];return a}(e,t,n,i)}if(!r)return o;const s=t.directives.tagName(r.source,(e=>i(r,"TAG_RESOLVE_FAILED",e)));if(!s)return o;const a=o.constructor;if("!"===s||s===a.tagName)return o.tag=a.tagName,o;const c=$e(o)?"map":"seq";let l=t.schema.tags.find((e=>e.collection===c&&e.tag===s));if(!l){const e=t.schema.knownTags[s];if(!e||e.collection!==c)return i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,!0),o.tag=s,o;t.schema.tags.push(Object.assign({},e,{default:!1})),l=e}const u=l.resolve(o,(e=>i(r,"TAG_RESOLVE_FAILED",e)),t.options),h=Ke(u)?u:new at(u);return h.range=o.range,h.tag=s,(null==l?void 0:l.format)&&(h.format=l.format),h}(ir,e,t,a,r),s&&(c.anchor=s.source.substring(1));break;default:throw console.log(t),new Error(`Unsupporten token type: ${t.type}`)}return s&&""===c.anchor&&r(s,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(c.spaceBefore=!0),o&&("scalar"===t.type&&""===t.source?c.comment=o:c.commentBefore=o),c}function sr(e,t,n,r,{spaceBefore:i,comment:o,anchor:s,tag:a},c){const l=nr(e,{type:"scalar",offset:rr(t,n,r),indent:-1,source:""},a,c);return s&&(l.anchor=s.source.substring(1),""===l.anchor&&c(s,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(l.spaceBefore=!0),o&&(l.comment=o),l}function ar(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+("string"==typeof n?n.length:1)]}function cr(e){var t;let n="",r=!1,i=!1;for(let o=0;o<e.length;++o){const s=e[o];switch(s[0]){case"#":n+=(""===n?"":i?"\n\n":"\n")+(s.substring(1)||" "),r=!0,i=!1;break;case"%":"#"!==(null===(t=e[o+1])||void 0===t?void 0:t[0])&&(o+=1),r=!1;break;default:r||(i=!0),r=!1}}return{comment:n,afterEmptyLine:i}}class lr{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,r)=>{const i=ar(e);r?this.warnings.push(new Un(i,t,n)):this.errors.push(new Vn(i,t,n))},this.directives=new Ze({version:e.version||Mt.version}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:r}=cr(this.prelude);if(n){const i=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(r||e.directives.marker||!i)e.commentBefore=n;else if(Be(i)&&!i.flow&&i.items.length>0){let e=i.items[0];We(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=i.commentBefore;i.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:cr(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const t of e)yield*this.next(t);yield*this.end(t,n)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,((t,n,r)=>{const i=ar(e);i[0]+=t,this.onError(i,"BAD_DIRECTIVE",n,r)})),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:r,value:i,end:o},s){const a=Object.assign({directives:t},e),c=new Ln(void 0,a),l={directives:c.directives,options:c.options,schema:c.schema},u=Kn(r,{indicator:"doc-start",next:i||(null==o?void 0:o[0]),offset:n,onError:s,startOnNewline:!0});u.found&&(c.directives.marker=!0,!i||"block-map"!==i.type&&"block-seq"!==i.type||u.hasNewline||s(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?or(l,i,u,s):sr(l,u.end,r,null,u,s);const h=c.contents.range[2],f=Gn(o,h,!1,s);return f.comment&&(c.comment=f.comment),c.range=[n,h,f.offset],c}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.marker&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new Vn(ar(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new Vn(ar(e),"UNEXPECTED_TOKEN",t));break}const t=Gn(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new Vn(ar(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({directives:this.directives},this.options),n=new Ln(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,t,t],this.decorate(n,!1),yield n}}}const ur=Symbol("break visit"),hr=Symbol("skip children"),fr=Symbol("remove item");function dr(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),mr(Object.freeze([]),e,t)}function mr(e,t,n){let r=n(t,e);if("symbol"==typeof r)return r;for(const i of["key","value"]){const o=t[i];if(o&&"items"in o){for(let t=0;t<o.items.length;++t){const r=mr(Object.freeze(e.concat([[i,t]])),o.items[t],n);if("number"==typeof r)t=r-1;else{if(r===ur)return ur;r===fr&&(o.items.splice(t,1),t-=1)}}"function"==typeof r&&"key"===i&&(r=r(t,e))}}return"function"==typeof r?r(t,e):r}dr.BREAK=ur,dr.SKIP=hr,dr.REMOVE=fr,dr.itemAtPath=(e,t)=>{let n=e;for(const[e,r]of t){const t=n&&n[e];if(!t||!("items"in t))return;n=t.items[r]}return n},dr.parentCollection=(e,t)=>{const n=dr.itemAtPath(e,t.slice(0,-1)),r=t[t.length-1][0],i=n&&n[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function pr(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const gr="0123456789ABCDEFabcdef".split(""),yr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),vr=",[]{}".split(""),br=" ,[]{}\n\r\t".split(""),Sr=e=>!e||br.includes(e);class wr{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!t;let n=this.next||"stream";for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&pr(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if("\ufeff"===e[0]&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length;const n=e.indexOf("#");if(-1!==n){const r=e[n-1];" "!==r&&"\t"!==r||(t=n-1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const r=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield"",yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if("---"===e&&pr(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===e&&pr(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!pr(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&pr(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Sr),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),t=yield*this.pushSpaces(!0),e>0&&(this.indentValue=n=t)}while(e+t>0);const r=this.getLine();if(null===r)return this.setNext("flow");if((-1!==n&&n<this.indentNext||0===n&&(r.startsWith("---")||r.startsWith("..."))&&pr(r[3]))&&(n!==this.indentNext-1||1!==this.flowLevel||"]"!==r[0]&&"}"!==r[0]))return this.flowLevel=0,yield"",yield*this.parseLineStart();let i=0;for(;","===r[i];)i+=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));switch(i+=(yield*this.pushIndicators()),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Sr),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||pr(e)||","===e)return yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let r=n.indexOf("\n",this.pos);if(-1!==r){for(;-1!==r;){const e=this.continueScalar(r+1);if(-1===e)break;r=n.indexOf("\n",e)}-1!==r&&(t=r-("\r"===n[r-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil((e=>pr(e)||"#"===e))}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let r=this.pos;e=this.buffer[r];++r)switch(e){case" ":n+=1;break;case"\n":t=r,n=0;break;case"\r":{const e=this.buffer[r+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let e=t-1,n=this.buffer[e];for("\r"===n&&(n=this.buffer[--e]);" "===n||"\t"===n;)n=this.buffer[--e];if(!("\n"===n&&e>=this.pos))break;t=e}return yield"",yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,r=this.pos-1;for(;t=this.buffer[++r];)if(":"===t){const t=this.buffer[r+1];if(pr(t)||e&&","===t)break;n=r}else if(pr(t)){let i=this.buffer[r+1];if("\r"===t&&("\n"===i?(r+=1,t="\n",i=this.buffer[r+1]):n=r),"#"===i||e&&vr.includes(i))break;if("\n"===t){const e=this.continueScalar(r+1);if(-1===e)break;r=Math.max(r,e-2)}}else{if(e&&vr.includes(t))break;n=r}return t||this.atEnd?(yield"",yield*this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Sr))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case":":case"?":case"-":if(pr(this.charAt(1)))return 0===this.flowLevel&&(this.indentNext=this.indentValue+1),(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!pr(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(yr.includes(t))t=this.buffer[++e];else{if("%"!==t||!gr.includes(this.buffer[e+1])||!gr.includes(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class kr{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const r=t+n>>1;this.lineStarts[r]<e?t=r+1:n=r}return this.lineStarts[t]===e?{line:t+1,col:1}:0===t?{line:0,col:e}:{line:t,col:e-this.lineStarts[t-1]+1}}}}function xr(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function Tr(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return!0}return!1}function Cr(e){switch(null==e?void 0:e.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Rr(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep||t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function Or(e){var t;if(0===e.length)return[];let n=e.length;e:for(;--n>=0;)switch(e[n].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===(null===(t=e[++n])||void 0===t?void 0:t.type););return e.splice(n,e.length)}function Ar(e){if("flow-seq-start"===e.start.type)for(const t of e.items)!t.sep||t.value||xr(t.start,"explicit-key-ind")||xr(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,Cr(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Pr{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new wr,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=function(e){switch(e){case"\ufeff":return"byte-order-mark";case"":return"doc-mode";case"":return"flow-error-end";case"":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e||this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch("block-scalar"!==t.type&&"flow-collection"!==t.type||(t.indent="indent"in e?e.indent:-1),"flow-collection"===t.type&&Ar(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!xr(n.start,"explicit-key-ind"));n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&!Tr(n.start)&&(0===t.indent||n.start.every((e=>"comment"!==e.type||e.indent<t.indent)))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(Tr(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){const t=Or(Rr(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var t;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){const t="end"in n.value?n.value.end:void 0,r=Array.isArray(t)?t[t.length-1]:void 0;"comment"===(null==r?void 0:r.type)?null==t||t.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2],i=null===(t=null==r?void 0:r.value)||void 0===t?void 0:t.end;if(Array.isArray(i))return Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),void e.items.pop()}n.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const t=!this.onKeyLine&&this.indent===e.indent&&(n.sep||Tr(n.start));switch(this.type){case"anchor":case"tag":return void(t||n.value?(e.items.push({start:[this.sourceToken]}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken));case"explicit-key-ind":return n.sep||xr(n.start,"explicit-key-ind")?t||n.value?e.items.push({start:[this.sourceToken]}):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):n.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(n.sep)if(n.value||t&&!xr(n.start,"explicit-key-ind"))e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(xr(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]});else if(xr(n.start,"explicit-key-ind")&&Cr(n.key)&&!xr(n.sep,"newline")){const e=Or(n.start),t=n.key,r=n.sep;r.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:t,sep:r}]})}else n.sep.push(this.sourceToken);else Object.assign(n,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);return void(t||n.value?(e.items.push({start:[],key:r,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(r):(Object.assign(n,{key:r,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(e);if(r)return t&&"block-seq"!==r.type&&xr(n.start,"explicit-key-ind")&&e.items.push({start:[]}),void this.stack.push(r)}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var t;const n=e.items[e.items.length-1];switch(this.type){case"newline":if(n.value){const t="end"in n.value?n.value.end:void 0,r=Array.isArray(t)?t[t.length-1]:void 0;"comment"===(null==r?void 0:r.type)?null==t||t.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,e.indent)){const r=e.items[e.items.length-2],i=null===(t=null==r?void 0:r.value)||void 0===t?void 0:t.end;if(Array.isArray(i))return Array.prototype.push.apply(i,n.start),i.push(this.sourceToken),void e.items.pop()}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=e.indent)break;return void n.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(n.value||xr(n.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case"map-value-ind":return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if("block-map"!==t.type||"map-value-ind"!==this.type&&("newline"!==this.type||t.items[t.items.length-1].sep))if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=Or(Rr(t));Ar(e);const r=e.end.splice(1,e.end.length);r.push(this.sourceToken);const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e);else yield*this.pop(),yield*this.step()}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=Or(Rr(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t}]}}case"map-value-ind":{this.onKeyLine=!0;const t=Or(Rr(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return"comment"===this.type&&!(this.indent<=t)&&e.every((e=>"newline"===e.type||"space"===e.type))}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function Er(e,t,n){let r;"function"==typeof t?r=t:void 0===n&&t&&"object"==typeof t&&(n=t);const i=function(e,t={}){const{lineCounter:n,prettyErrors:r}=function(e){const t=!e||!1!==e.prettyErrors;return{lineCounter:e&&e.lineCounter||t&&new kr||null,prettyErrors:t}}(t),i=new Pr(null==n?void 0:n.addNewLine),o=new lr(t);let s=null;for(const t of o.compose(i.parse(e),!0,e.length))if(s){if("silent"!==s.options.logLevel){s.errors.push(new Vn(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else s=t;return r&&n&&(s.errors.forEach(Bn(e,n)),s.warnings.forEach(Bn(e,n))),s}(e,n);if(!i)return null;if(i.warnings.forEach((e=>At(i.options.logLevel,e))),i.errors.length>0){if("silent"!==i.options.logLevel)throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}function _r(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let n,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!_r(e[n],t[n]))return!1}else{const i=[];for(r in e)i.push(r);i.sort();const o=[];for(r in t)o.push(r);if(o.sort(),!_r(i,o))return!1;for(n=0;n<i.length;n++)if(!_r(e[i[n]],t[i[n]]))return!1}return!0}function Dr(e){return"number"==typeof e}function Nr(e){return void 0!==e}function Mr(e){return"boolean"==typeof e}function Ir(e){return"string"==typeof e}function jr(e){const t=e.match(/^(?:.*\/)?(.*?)(?:\.schema\.json)?$/);let n=!!t&&t[1];return n||(n="typeNotFound",console.error(`$ref (${e}) not parsed properly`)),n}function qr(e,t,n){if(null!==e&&"object"==typeof e){var r=t+"\t";if(Array.isArray(e)){if(0===e.length)return"[]";for(var i="[\n",o=0;o<e.length;o++)i+=r+qr(e[o],r,n),o<e.length-1&&(i+=","),i+="\n";return i+(t+"]")}var s=Object.keys(e);if(0===s.length)return"{}";for(i="{\n",o=0;o<s.length;o++){var a=s[o];i+=r+JSON.stringify(a)+": "+qr(e[a],r,n),o<s.length-1&&(i+=","),i+="\n"}return i+(t+"}")}return n(e)}var Fr=se.loadMessageBundle();!function(){function e(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=Promise),void 0===r&&(r={}),this.schemaService=e,this.contributions=t,this.promiseConstructor=n,this.clientCapabilities=r}e.prototype.doResolve=function(e){for(var t=this.contributions.length-1;t>=0;t--){var n=this.contributions[t].resolveCompletion;if(n){var r=n(e);if(r)return r}}return this.promiseConstructor.resolve(e)},e.prototype.doComplete=function(e,t,n){var r=this,i={items:[],isIncomplete:!1},o=e.getText(),s=e.offsetAt(t),a=n.getNodeFromOffset(s,!0);if(this.isInComment(e,a?a.offset:0,s))return Promise.resolve(i);if(a&&s===a.offset+a.length&&s>0){var c=o[s-1];("object"===a.type&&"}"===c||"array"===a.type&&"]"===c)&&(a=a.parent)}var l,u=this.getCurrentWord(e,s);if(!a||"string"!==a.type&&"number"!==a.type&&"boolean"!==a.type&&"null"!==a.type){var h=s-u.length;h>0&&'"'===o[h-1]&&h--,l=Y.Range.create(e.positionAt(h),t)}else l=Y.Range.create(e.positionAt(a.offset),e.positionAt(a.offset+a.length));var f={},d={add:function(e){var t=e.label,n=f[t];if(n)n.documentation||(n.documentation=e.documentation),n.detail||(n.detail=e.detail);else{if((t=t.replace(/[\n]/g,"↵")).length>60){var r=t.substr(0,57).trim()+"...";f[r]||(t=r)}l&&void 0!==e.insertText&&(e.textEdit=Y.TextEdit.replace(l,e.insertText)),e.label=t,f[t]=e,i.items.push(e)}},setAsIncomplete:function(){i.isIncomplete=!0},error:function(e){console.error(e)},log:function(e){console.log(e)},getNumberOfProposals:function(){return i.items.length}};return this.schemaService.getSchemaForResource(e.uri,n).then((function(t){var c=[],h=!0,m="",p=void 0;if(a&&"string"===a.type){var g=a.parent;g&&"property"===g.type&&g.keyNode===a&&(h=!g.valueNode,p=g,m=o.substr(a.offset+1,a.length-2),g&&(a=g.parent))}if(a&&"object"===a.type){if(a.offset===s)return i;a.properties.forEach((function(e){p&&p===e||(f[e.keyNode.value]=Y.CompletionItem.create("__"))}));var y="";h&&(y=r.evaluateSeparatorAfter(e,e.offsetAt(l.end))),t?r.getPropertyCompletions(t,n,a,h,y,d):r.getSchemaLessPropertyCompletions(n,a,m,d);var v=ge(a);r.contributions.forEach((function(t){var n=t.collectPropertyCompletions(e.uri,v,u,h,""===y,d);n&&c.push(n)})),!t&&u.length>0&&'"'!==o.charAt(s-u.length-1)&&(d.add({kind:Y.CompletionItemKind.Property,label:r.getLabelForValue(u),insertText:r.getInsertTextForProperty(u,void 0,!1,y),insertTextFormat:Y.InsertTextFormat.Snippet,documentation:""}),d.setAsIncomplete())}var b={};return t?r.getValueCompletions(t,n,a,s,e,d,b):r.getSchemaLessValueCompletions(n,a,s,e,d),r.contributions.length>0&&r.getContributedValueCompletions(n,a,s,e,d,c),r.promiseConstructor.all(c).then((function(){if(0===d.getNumberOfProposals()){var t=s;!a||"string"!==a.type&&"number"!==a.type&&"boolean"!==a.type&&"null"!==a.type||(t=a.offset+a.length);var n=r.evaluateSeparatorAfter(e,t);r.addFillerValueCompletions(b,n,d)}return i}))}))},e.prototype.getPropertyCompletions=function(e,t,n,r,i,o){var s=this;t.getMatchingSchemas(e.schema,n.offset).forEach((function(e){if(e.node===n&&!e.inverted){var t=e.schema.properties;t&&Object.keys(t).forEach((function(e){var n=t[e];if("object"==typeof n&&!n.deprecationMessage&&!n.doNotSuggest){var a={kind:Y.CompletionItemKind.Property,label:e,insertText:s.getInsertTextForProperty(e,n,r,i),insertTextFormat:Y.InsertTextFormat.Snippet,filterText:s.getFilterTextForValue(e),documentation:s.fromMarkup(n.markdownDescription)||n.description||""};void 0!==n.suggestSortText&&(a.sortText=n.suggestSortText),a.insertText&&L(a.insertText,"$1"+i)&&(a.command={title:"Suggest",command:"editor.action.triggerSuggest"}),o.add(a)}}));var a=e.schema.propertyNames;if("object"==typeof a&&!a.deprecationMessage&&!a.doNotSuggest){var c=function(e,t){void 0===t&&(t=void 0);var n={kind:Y.CompletionItemKind.Property,label:e,insertText:s.getInsertTextForProperty(e,void 0,r,i),insertTextFormat:Y.InsertTextFormat.Snippet,filterText:s.getFilterTextForValue(e),documentation:t||s.fromMarkup(a.markdownDescription)||a.description||""};void 0!==a.suggestSortText&&(n.sortText=a.suggestSortText),n.insertText&&L(n.insertText,"$1"+i)&&(n.command={title:"Suggest",command:"editor.action.triggerSuggest"}),o.add(n)};if(a.enum)for(var l=0;l<a.enum.length;l++){var u=void 0;a.markdownEnumDescriptions&&l<a.markdownEnumDescriptions.length?u=s.fromMarkup(a.markdownEnumDescriptions[l]):a.enumDescriptions&&l<a.enumDescriptions.length&&(u=a.enumDescriptions[l]),c(a.enum[l],u)}a.const&&c(a.const)}}}))},e.prototype.getSchemaLessPropertyCompletions=function(e,t,n,r){var i=this,o=function(e){e.properties.forEach((function(e){var t=e.keyNode.value;r.add({kind:Y.CompletionItemKind.Property,label:t,insertText:i.getInsertTextForValue(t,""),insertTextFormat:Y.InsertTextFormat.Snippet,filterText:i.getFilterTextForValue(t),documentation:""})}))};if(t.parent)if("property"===t.parent.type){var s=t.parent.keyNode.value;e.visit((function(e){return"property"===e.type&&e!==t.parent&&e.keyNode.value===s&&e.valueNode&&"object"===e.valueNode.type&&o(e.valueNode),!0}))}else"array"===t.parent.type&&t.parent.items.forEach((function(e){"object"===e.type&&e!==t&&o(e)}));else"object"===t.type&&r.add({kind:Y.CompletionItemKind.Property,label:"$schema",insertText:this.getInsertTextForProperty("$schema",void 0,!0,""),insertTextFormat:Y.InsertTextFormat.Snippet,documentation:"",filterText:this.getFilterTextForValue("$schema")})},e.prototype.getSchemaLessValueCompletions=function(e,t,n,r,i){var o=this,s=n;if(!t||"string"!==t.type&&"number"!==t.type&&"boolean"!==t.type&&"null"!==t.type||(s=t.offset+t.length,t=t.parent),!t)return i.add({kind:this.getSuggestionKind("object"),label:"Empty object",insertText:this.getInsertTextForValue({},""),insertTextFormat:Y.InsertTextFormat.Snippet,documentation:""}),void i.add({kind:this.getSuggestionKind("array"),label:"Empty array",insertText:this.getInsertTextForValue([],""),insertTextFormat:Y.InsertTextFormat.Snippet,documentation:""});var a=this.evaluateSeparatorAfter(r,s),c=function(e){e.parent&&!ye(e.parent,n,!0)&&i.add({kind:o.getSuggestionKind(e.type),label:o.getLabelTextForMatchingNode(e,r),insertText:o.getInsertTextForMatchingNode(e,r,a),insertTextFormat:Y.InsertTextFormat.Snippet,documentation:""}),"boolean"===e.type&&o.addBooleanValueCompletion(!e.value,a,i)};if("property"===t.type&&n>(t.colonOffset||0)){var l=t.valueNode;if(l&&(n>l.offset+l.length||"object"===l.type||"array"===l.type))return;var u=t.keyNode.value;e.visit((function(e){return"property"===e.type&&e.keyNode.value===u&&e.valueNode&&c(e.valueNode),!0})),"$schema"===u&&t.parent&&!t.parent.parent&&this.addDollarSchemaCompletions(a,i)}if("array"===t.type)if(t.parent&&"property"===t.parent.type){var h=t.parent.keyNode.value;e.visit((function(e){return"property"===e.type&&e.keyNode.value===h&&e.valueNode&&"array"===e.valueNode.type&&e.valueNode.items.forEach(c),!0}))}else t.items.forEach(c)},e.prototype.getValueCompletions=function(e,t,n,r,i,o,s){var a=r,c=void 0,l=void 0;if(!n||"string"!==n.type&&"number"!==n.type&&"boolean"!==n.type&&"null"!==n.type||(a=n.offset+n.length,l=n,n=n.parent),n){if("property"===n.type&&r>(n.colonOffset||0)){var u=n.valueNode;if(u&&r>u.offset+u.length)return;c=n.keyNode.value,n=n.parent}if(n&&(void 0!==c||"array"===n.type)){for(var h=this.evaluateSeparatorAfter(i,a),f=0,d=t.getMatchingSchemas(e.schema,n.offset,l);f<d.length;f++){var m=d[f];if(m.node===n&&!m.inverted&&m.schema){if("array"===n.type&&m.schema.items)if(Array.isArray(m.schema.items)){var p=this.findItemAtOffset(n,i,r);p<m.schema.items.length&&this.addSchemaValueCompletions(m.schema.items[p],h,o,s)}else this.addSchemaValueCompletions(m.schema.items,h,o,s);if(void 0!==c){var g=!1;if(m.schema.properties&&(S=m.schema.properties[c])&&(g=!0,this.addSchemaValueCompletions(S,h,o,s)),m.schema.patternProperties&&!g)for(var y=0,v=Object.keys(m.schema.patternProperties);y<v.length;y++){var b=v[y];if($(b).test(c)){g=!0;var S=m.schema.patternProperties[b];this.addSchemaValueCompletions(S,h,o,s)}}m.schema.additionalProperties&&!g&&(S=m.schema.additionalProperties,this.addSchemaValueCompletions(S,h,o,s))}}}"$schema"!==c||n.parent||this.addDollarSchemaCompletions(h,o),s.boolean&&(this.addBooleanValueCompletion(!0,h,o),this.addBooleanValueCompletion(!1,h,o)),s.null&&this.addNullValueCompletion(h,o)}}else this.addSchemaValueCompletions(e.schema,"",o,s)},e.prototype.getContributedValueCompletions=function(e,t,n,r,i,o){if(t){if("string"!==t.type&&"number"!==t.type&&"boolean"!==t.type&&"null"!==t.type||(t=t.parent),t&&"property"===t.type&&n>(t.colonOffset||0)){var s=t.keyNode.value,a=t.valueNode;if((!a||n<=a.offset+a.length)&&t.parent){var c=ge(t.parent);this.contributions.forEach((function(e){var t=e.collectValueCompletions(r.uri,c,s,i);t&&o.push(t)}))}}}else this.contributions.forEach((function(e){var t=e.collectDefaultCompletions(r.uri,i);t&&o.push(t)}))},e.prototype.addSchemaValueCompletions=function(e,t,n,r){var i=this;"object"==typeof e&&(this.addEnumValueCompletions(e,t,n),this.addDefaultValueCompletions(e,t,n),this.collectTypes(e,r),Array.isArray(e.allOf)&&e.allOf.forEach((function(e){return i.addSchemaValueCompletions(e,t,n,r)})),Array.isArray(e.anyOf)&&e.anyOf.forEach((function(e){return i.addSchemaValueCompletions(e,t,n,r)})),Array.isArray(e.oneOf)&&e.oneOf.forEach((function(e){return i.addSchemaValueCompletions(e,t,n,r)})))},e.prototype.addDefaultValueCompletions=function(e,t,n,r){var i=this;void 0===r&&(r=0);var o=!1;if(U(e.default)){for(var s=e.type,a=e.default,c=r;c>0;c--)a=[a],s="array";n.add({kind:this.getSuggestionKind(s),label:this.getLabelForValue(a),insertText:this.getInsertTextForValue(a,t),insertTextFormat:Y.InsertTextFormat.Snippet,detail:Fr("json.suggest.default","Default value")}),o=!0}Array.isArray(e.examples)&&e.examples.forEach((function(s){for(var a=e.type,c=s,l=r;l>0;l--)c=[c],a="array";n.add({kind:i.getSuggestionKind(a),label:i.getLabelForValue(c),insertText:i.getInsertTextForValue(c,t),insertTextFormat:Y.InsertTextFormat.Snippet}),o=!0})),Array.isArray(e.defaultSnippets)&&e.defaultSnippets.forEach((function(s){var a,c,l=e.type,u=s.body,h=s.label;if(U(u)){e.type;for(var f=r;f>0;f--)u=[u];a=i.getInsertTextForSnippetValue(u,t),c=i.getFilterTextForSnippetValue(u),h=h||i.getLabelForSnippetValue(u)}else{if("string"!=typeof s.bodyText)return;var d="",m="",p="";for(f=r;f>0;f--)d=d+p+"[\n",m=m+"\n"+p+"]",p+="\t",l="array";a=d+p+s.bodyText.split("\n").join("\n"+p)+m+t,h=h||a,c=a.replace(/[\n]/g,"")}n.add({kind:i.getSuggestionKind(l),label:h,documentation:i.fromMarkup(s.markdownDescription)||s.description,insertText:a,insertTextFormat:Y.InsertTextFormat.Snippet,filterText:c}),o=!0})),!o&&"object"==typeof e.items&&!Array.isArray(e.items)&&r<5&&this.addDefaultValueCompletions(e.items,t,n,r+1)},e.prototype.addEnumValueCompletions=function(e,t,n){if(U(e.const)&&n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,t),insertTextFormat:Y.InsertTextFormat.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(var r=0,i=e.enum.length;r<i;r++){var o=e.enum[r],s=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&r<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?s=this.fromMarkup(e.markdownEnumDescriptions[r]):e.enumDescriptions&&r<e.enumDescriptions.length&&(s=e.enumDescriptions[r]),n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(o),insertText:this.getInsertTextForValue(o,t),insertTextFormat:Y.InsertTextFormat.Snippet,documentation:s})}},e.prototype.collectTypes=function(e,t){if(!Array.isArray(e.enum)&&!U(e.const)){var n=e.type;Array.isArray(n)?n.forEach((function(e){return t[e]=!0})):n&&(t[n]=!0)}},e.prototype.addFillerValueCompletions=function(e,t,n){e.object&&n.add({kind:this.getSuggestionKind("object"),label:"{}",insertText:this.getInsertTextForGuessedValue({},t),insertTextFormat:Y.InsertTextFormat.Snippet,detail:Fr("defaults.object","New object"),documentation:""}),e.array&&n.add({kind:this.getSuggestionKind("array"),label:"[]",insertText:this.getInsertTextForGuessedValue([],t),insertTextFormat:Y.InsertTextFormat.Snippet,detail:Fr("defaults.array","New array"),documentation:""})},e.prototype.addBooleanValueCompletion=function(e,t,n){n.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,t),insertTextFormat:Y.InsertTextFormat.Snippet,documentation:""})},e.prototype.addNullValueCompletion=function(e,t){t.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:Y.InsertTextFormat.Snippet,documentation:""})},e.prototype.addDollarSchemaCompletions=function(e,t){var n=this,r=this.schemaService.getRegisteredSchemaIds((function(e){return"http"===e||"https"===e}));r.forEach((function(r){return t.add({kind:Y.CompletionItemKind.Module,label:n.getLabelForValue(r),filterText:n.getFilterTextForValue(r),insertText:n.getInsertTextForValue(r,e),insertTextFormat:Y.InsertTextFormat.Snippet,documentation:""})}))},e.prototype.getLabelForValue=function(e){return JSON.stringify(e)},e.prototype.getFilterTextForValue=function(e){return JSON.stringify(e)},e.prototype.getFilterTextForSnippetValue=function(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},e.prototype.getLabelForSnippetValue=function(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")},e.prototype.getInsertTextForPlainText=function(e){return e.replace(/[\\\$\}]/g,"\\$&")},e.prototype.getInsertTextForValue=function(e,t){var n=JSON.stringify(e,null,"\t");return"{}"===n?"{$1}"+t:"[]"===n?"[$1]"+t:this.getInsertTextForPlainText(n+t)},e.prototype.getInsertTextForSnippetValue=function(e,t){return qr(e,"",(function(e){return"string"==typeof e&&"^"===e[0]?e.substr(1):JSON.stringify(e)}))+t},e.prototype.getInsertTextForGuessedValue=function(e,t){switch(typeof e){case"object":return null===e?"${1:null}"+t:this.getInsertTextForValue(e,t);case"string":var n=JSON.stringify(e);return n=n.substr(1,n.length-2),'"${1:'+(n=this.getInsertTextForPlainText(n))+'}"'+t;case"number":case"boolean":return"${1:"+JSON.stringify(e)+"}"+t}return this.getInsertTextForValue(e,t)},e.prototype.getSuggestionKind=function(e){if(Array.isArray(e)){var t=e;e=t.length>0?t[0]:void 0}if(!e)return Y.CompletionItemKind.Value;switch(e){default:return Y.CompletionItemKind.Value;case"object":return Y.CompletionItemKind.Module;case"property":return Y.CompletionItemKind.Property}},e.prototype.getLabelTextForMatchingNode=function(e,t){switch(e.type){case"array":return"[]";case"object":return"{}";default:return t.getText().substr(e.offset,e.length)}},e.prototype.getInsertTextForMatchingNode=function(e,t,n){switch(e.type){case"array":return this.getInsertTextForValue([],n);case"object":return this.getInsertTextForValue({},n);default:var r=t.getText().substr(e.offset,e.length)+n;return this.getInsertTextForPlainText(r)}},e.prototype.getInsertTextForProperty=function(e,t,n,r){var i=this.getInsertTextForValue(e,"");if(!n)return i;var o,s=i+": ",a=0;if(t){if(Array.isArray(t.defaultSnippets)){if(1===t.defaultSnippets.length){var c=t.defaultSnippets[0].body;U(c)&&(o=this.getInsertTextForSnippetValue(c,""))}a+=t.defaultSnippets.length}if(t.enum&&(o||1!==t.enum.length||(o=this.getInsertTextForGuessedValue(t.enum[0],"")),a+=t.enum.length),U(t.default)&&(o||(o=this.getInsertTextForGuessedValue(t.default,"")),a++),Array.isArray(t.examples)&&t.examples.length&&(o||(o=this.getInsertTextForGuessedValue(t.examples[0],"")),a+=t.examples.length),0===a){var l=Array.isArray(t.type)?t.type[0]:t.type;switch(l||(t.properties?l="object":t.items&&(l="array")),l){case"boolean":o="$1";break;case"string":o='"$1"';break;case"object":o="{$1}";break;case"array":o="[$1]";break;case"number":case"integer":o="${1:0}";break;case"null":o="${1:null}";break;default:return i}}}return(!o||a>1)&&(o="$1"),s+o+r},e.prototype.getCurrentWord=function(e,t){for(var n=t-1,r=e.getText();n>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(r.charAt(n));)n--;return r.substring(n+1,t)},e.prototype.evaluateSeparatorAfter=function(e,t){var n=E(e.getText(),!0);switch(n.setPosition(t),n.scan()){case 5:case 2:case 4:case 17:return"";default:return","}},e.prototype.findItemAtOffset=function(e,t,n){for(var r=E(t.getText(),!0),i=e.items,o=i.length-1;o>=0;o--){var s=i[o];if(n>s.offset+s.length)return r.setPosition(s.offset+s.length),5===r.scan()&&n>=r.getTokenOffset()+r.getTokenLength()?o+1:o;if(n>=s.offset)return o}return 0},e.prototype.isInComment=function(e,t,n){var r=E(e.getText(),!1);r.setPosition(t);for(var i=r.scan();17!==i&&r.getTokenOffset()+r.getTokenLength()<n;)i=r.scan();return(12===i||13===i)&&r.getTokenOffset()<=n},e.prototype.fromMarkup=function(e){if(e&&this.doesSupportMarkdown())return{kind:Y.MarkupKind.Markdown,value:e}},e.prototype.doesSupportMarkdown=function(){if(!U(this.supportsMarkdown)){var e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=e&&e.completionItem&&Array.isArray(e.completionItem.documentationFormat)&&-1!==e.completionItem.documentationFormat.indexOf(Y.MarkupKind.Markdown)}return this.supportsMarkdown},e.prototype.doesSupportsCommitCharacters=function(){if(!U(this.supportsCommitCharacters)){var e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsCommitCharacters=e&&e.completionItem&&!!e.completionItem.commitCharactersSupport}return this.supportsCommitCharacters}}();var Lr=se.loadMessageBundle(),$r=function(){function e(e,t){this.jsonSchemaService=e,this.promise=t,this.validationEnabled=!0}return e.prototype.configure=function(e){e&&(this.validationEnabled=!1!==e.validate,this.commentSeverity=e.allowComments?void 0:Y.DiagnosticSeverity.Error)},e.prototype.doValidation=function(e,t,n,r){var i=this;if(!this.validationEnabled)return this.promise.resolve([]);var o=[],s={},a=function(e){var t=e.range.start.line+" "+e.range.start.character+" "+e.message;s[t]||(s[t]=!0,o.push(e))},c=function(r){var s=(null==n?void 0:n.trailingCommas)?Br(n.trailingCommas):Y.DiagnosticSeverity.Error,c=(null==n?void 0:n.comments)?Br(n.comments):i.commentSeverity,l=(null==n?void 0:n.schemaValidation)?Br(n.schemaValidation):Y.DiagnosticSeverity.Warning,u=(null==n?void 0:n.schemaRequest)?Br(n.schemaRequest):Y.DiagnosticSeverity.Warning;if(r){if(r.errors.length&&t.root&&u){var h=t.root,f="object"===h.type?h.properties[0]:void 0;if(f&&"$schema"===f.keyNode.value){var d=f.valueNode||f,m=Y.Range.create(e.positionAt(d.offset),e.positionAt(d.offset+d.length));a(Y.Diagnostic.create(m,r.errors[0],u,H.SchemaResolveError))}else m=Y.Range.create(e.positionAt(h.offset),e.positionAt(h.offset+1)),a(Y.Diagnostic.create(m,r.errors[0],u,H.SchemaResolveError))}else if(l){var p=t.validate(e,r.schema,l);p&&p.forEach(a)}Vr(r.schema)&&(c=void 0),Ur(r.schema)&&(s=void 0)}for(var g=0,y=t.syntaxErrors;g<y.length;g++){var v=y[g];if(v.code===H.TrailingComma){if("number"!=typeof s)continue;v.severity=s}a(v)}if("number"==typeof c){var b=Lr("InvalidCommentToken","Comments are not permitted in JSON.");t.comments.forEach((function(e){a(Y.Diagnostic.create(e,b,c,H.CommentNotPermitted))}))}return o};if(r){var l=r.id||"schemaservice://untitled/"+Wr++;return this.jsonSchemaService.resolveSchemaContent(new xe(r),l,{}).then((function(e){return c(e)}))}return this.jsonSchemaService.getSchemaForResource(e.uri,t).then((function(e){return c(e)}))},e}(),Wr=0;function Vr(e){if(e&&"object"==typeof e){if(B(e.allowComments))return e.allowComments;if(e.allOf)for(var t=0,n=e.allOf;t<n.length;t++){var r=Vr(n[t]);if(B(r))return r}}}function Ur(e){if(e&&"object"==typeof e){if(B(e.allowTrailingCommas))return e.allowTrailingCommas;var t=e;if(B(t.allowsTrailingCommas))return t.allowsTrailingCommas;if(e.allOf)for(var n=0,r=e.allOf;n<r.length;n++){var i=Ur(r[n]);if(B(i))return i}}}function Br(e){switch(e){case"error":return Y.DiagnosticSeverity.Error;case"warning":return Y.DiagnosticSeverity.Warning;case"ignore":return}}function Kr(e){return e<48?0:e<=57?e-48:(e<97&&(e+=32),e>=97&&e<=102?e-97+10:0)}function Hr(e){if("#"===e[0])switch(e.length){case 4:return{red:17*Kr(e.charCodeAt(1))/255,green:17*Kr(e.charCodeAt(2))/255,blue:17*Kr(e.charCodeAt(3))/255,alpha:1};case 5:return{red:17*Kr(e.charCodeAt(1))/255,green:17*Kr(e.charCodeAt(2))/255,blue:17*Kr(e.charCodeAt(3))/255,alpha:17*Kr(e.charCodeAt(4))/255};case 7:return{red:(16*Kr(e.charCodeAt(1))+Kr(e.charCodeAt(2)))/255,green:(16*Kr(e.charCodeAt(3))+Kr(e.charCodeAt(4)))/255,blue:(16*Kr(e.charCodeAt(5))+Kr(e.charCodeAt(6)))/255,alpha:1};case 9:return{red:(16*Kr(e.charCodeAt(1))+Kr(e.charCodeAt(2)))/255,green:(16*Kr(e.charCodeAt(3))+Kr(e.charCodeAt(4)))/255,blue:(16*Kr(e.charCodeAt(5))+Kr(e.charCodeAt(6)))/255,alpha:(16*Kr(e.charCodeAt(7))+Kr(e.charCodeAt(8)))/255}}}var zr=function(){function e(e){this.schemaService=e}return e.prototype.findDocumentSymbols=function(e,t,n){var r=this;void 0===n&&(n={resultLimit:Number.MAX_VALUE});var i=t.root;if(!i)return[];var o=n.resultLimit||Number.MAX_VALUE,s=e.uri;if(("vscode://defaultsettings/keybindings.json"===s||L(s.toLowerCase(),"/user/keybindings.json"))&&"array"===i.type){for(var a=[],c=0,l=i.items;c<l.length;c++){var u=l[c];if("object"===u.type)for(var h=0,f=u.properties;h<f.length;h++){var d=f[h];if("key"===d.keyNode.value&&d.valueNode){var m=Y.Location.create(e.uri,Jr(e,u));if(a.push({name:pe(d.valueNode),kind:Y.SymbolKind.Function,location:m}),--o<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),a}}}return a}for(var p=[{node:i,containerName:""}],g=0,y=!1,v=[],b=function(t,n){"array"===t.type?t.items.forEach((function(e){e&&p.push({node:e,containerName:n})})):"object"===t.type&&t.properties.forEach((function(t){var i=t.valueNode;if(i)if(o>0){o--;var s=Y.Location.create(e.uri,Jr(e,t)),a=n?n+"."+t.keyNode.value:t.keyNode.value;v.push({name:r.getKeyLabel(t),kind:r.getSymbolKind(i.type),location:s,containerName:n}),p.push({node:i,containerName:a})}else y=!0}))};g<p.length;){var S=p[g++];b(S.node,S.containerName)}return y&&n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),v},e.prototype.findDocumentSymbols2=function(e,t,n){var r=this;void 0===n&&(n={resultLimit:Number.MAX_VALUE});var i=t.root;if(!i)return[];var o=n.resultLimit||Number.MAX_VALUE,s=e.uri;if(("vscode://defaultsettings/keybindings.json"===s||L(s.toLowerCase(),"/user/keybindings.json"))&&"array"===i.type){for(var a=[],c=0,l=i.items;c<l.length;c++){var u=l[c];if("object"===u.type)for(var h=0,f=u.properties;h<f.length;h++){var d=f[h];if("key"===d.keyNode.value&&d.valueNode){var m=Jr(e,u),p=Jr(e,d.keyNode);if(a.push({name:pe(d.valueNode),kind:Y.SymbolKind.Function,range:m,selectionRange:p}),--o<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),a}}}return a}for(var g=[],y=[{node:i,result:g}],v=0,b=!1,S=function(t,n){"array"===t.type?t.items.forEach((function(t,i){if(t)if(o>0){o--;var s=Jr(e,t),a=s,c={name:String(i),kind:r.getSymbolKind(t.type),range:s,selectionRange:a,children:[]};n.push(c),y.push({result:c.children,node:t})}else b=!0})):"object"===t.type&&t.properties.forEach((function(t){var i=t.valueNode;if(i)if(o>0){o--;var s=Jr(e,t),a=Jr(e,t.keyNode),c=[],l={name:r.getKeyLabel(t),kind:r.getSymbolKind(i.type),range:s,selectionRange:a,children:c,detail:r.getDetail(i)};n.push(l),y.push({result:c,node:i})}else b=!0}))};v<y.length;){var w=y[v++];S(w.node,w.result)}return b&&n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(s),g},e.prototype.getSymbolKind=function(e){switch(e){case"object":return Y.SymbolKind.Module;case"string":return Y.SymbolKind.String;case"number":return Y.SymbolKind.Number;case"array":return Y.SymbolKind.Array;case"boolean":return Y.SymbolKind.Boolean;default:return Y.SymbolKind.Variable}},e.prototype.getKeyLabel=function(e){var t=e.keyNode.value;return t&&(t=t.replace(/[\n]/g,"↵")),t&&t.trim()?t:'"'+t+'"'},e.prototype.getDetail=function(e){if(e)return"boolean"===e.type||"number"===e.type||"null"===e.type||"string"===e.type?String(e.value):"array"===e.type?e.children.length?void 0:"[]":"object"===e.type?e.children.length?void 0:"{}":void 0},e.prototype.findDocumentColors=function(e,t,n){return this.schemaService.getSchemaForResource(e.uri,t).then((function(r){var i=[];if(r)for(var o=n&&"number"==typeof n.resultLimit?n.resultLimit:Number.MAX_VALUE,s={},a=0,c=t.getMatchingSchemas(r.schema);a<c.length;a++){var l=c[a];if(!l.inverted&&l.schema&&("color"===l.schema.format||"color-hex"===l.schema.format)&&l.node&&"string"===l.node.type){var u=String(l.node.offset);if(!s[u]){var h=Hr(pe(l.node));if(h){var f=Jr(e,l.node);i.push({color:h,range:f})}if(s[u]=!0,--o<=0)return n&&n.onResultLimitExceeded&&n.onResultLimitExceeded(e.uri),i}}}return i}))},e.prototype.getColorPresentations=function(e,t,n,r){var i,o=[],s=Math.round(255*n.red),a=Math.round(255*n.green),c=Math.round(255*n.blue);function l(e){var t=e.toString(16);return 2!==t.length?"0"+t:t}return i=1===n.alpha?"#"+l(s)+l(a)+l(c):"#"+l(s)+l(a)+l(c)+l(Math.round(255*n.alpha)),o.push({label:i,textEdit:Y.TextEdit.replace(r,JSON.stringify(i))}),o},e}();function Jr(e,t){return Y.Range.create(e.positionAt(t.offset),e.positionAt(t.offset+t.length))}var Gr=se.loadMessageBundle(),Yr={schemaAssociations:[],schemas:{"http://json-schema.org/schema#":{$ref:"http://json-schema.org/draft-07/schema#"},"http://json-schema.org/draft-04/schema#":{$schema:"http://json-schema.org/draft-04/schema#",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{default:0}]},simpleTypes:{type:"string",enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},default:{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean",default:!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean",default:!1},maxLength:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minLength:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},pattern:{type:"string",format:"regex"},additionalItems:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minItems:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},uniqueItems:{type:"boolean",default:!1},maxProperties:{allOf:[{$ref:"#/definitions/positiveInteger"}]},minProperties:{allOf:[{$ref:"#/definitions/positiveIntegerDefault0"}]},required:{allOf:[{$ref:"#/definitions/stringArray"}]},additionalProperties:{anyOf:[{type:"boolean"},{$ref:"#"}],default:{}},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{anyOf:[{type:"string",enum:["date-time","uri","email","hostname","ipv4","ipv6","regex"]},{type:"string"}]},allOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},anyOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},oneOf:{allOf:[{$ref:"#/definitions/schemaArray"}]},not:{allOf:[{$ref:"#"}]}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},default:{}},"http://json-schema.org/draft-07/schema#":{definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}}},Xr={id:Gr("schema.json.id","A unique identifier for the schema."),$schema:Gr("schema.json.$schema","The schema to verify this document against."),title:Gr("schema.json.title","A descriptive title of the element."),description:Gr("schema.json.description","A long description of the element. Used in hover menus and suggestions."),default:Gr("schema.json.default","A default value. Used by suggestions."),multipleOf:Gr("schema.json.multipleOf","A number that should cleanly divide the current value (i.e. have no remainder)."),maximum:Gr("schema.json.maximum","The maximum numerical value, inclusive by default."),exclusiveMaximum:Gr("schema.json.exclusiveMaximum","Makes the maximum property exclusive."),minimum:Gr("schema.json.minimum","The minimum numerical value, inclusive by default."),exclusiveMinimum:Gr("schema.json.exclusiveMininum","Makes the minimum property exclusive."),maxLength:Gr("schema.json.maxLength","The maximum length of a string."),minLength:Gr("schema.json.minLength","The minimum length of a string."),pattern:Gr("schema.json.pattern","A regular expression to match the string against. It is not implicitly anchored."),additionalItems:Gr("schema.json.additionalItems","For arrays, only when items is set as an array. If it is a schema, then this schema validates items after the ones specified by the items array. If it is false, then additional items will cause validation to fail."),items:Gr("schema.json.items","For arrays. Can either be a schema to validate every element against or an array of schemas to validate each item against in order (the first schema will validate the first element, the second schema will validate the second element, and so on."),maxItems:Gr("schema.json.maxItems","The maximum number of items that can be inside an array. Inclusive."),minItems:Gr("schema.json.minItems","The minimum number of items that can be inside an array. Inclusive."),uniqueItems:Gr("schema.json.uniqueItems","If all of the items in the array must be unique. Defaults to false."),maxProperties:Gr("schema.json.maxProperties","The maximum number of properties an object can have. Inclusive."),minProperties:Gr("schema.json.minProperties","The minimum number of properties an object can have. Inclusive."),required:Gr("schema.json.required","An array of strings that lists the names of all properties required on this object."),additionalProperties:Gr("schema.json.additionalProperties","Either a schema or a boolean. If a schema, then used to validate all properties not matched by 'properties' or 'patternProperties'. If false, then any properties not matched by either will cause this schema to fail."),definitions:Gr("schema.json.definitions","Not used for validation. Place subschemas here that you wish to reference inline with $ref."),properties:Gr("schema.json.properties","A map of property names to schemas for each property."),patternProperties:Gr("schema.json.patternProperties","A map of regular expressions on property names to schemas for matching properties."),dependencies:Gr("schema.json.dependencies","A map of property names to either an array of property names or a schema. An array of property names means the property named in the key depends on the properties in the array being present in the object in order to be valid. If the value is a schema, then the schema is only applied to the object if the property in the key exists on the object."),enum:Gr("schema.json.enum","The set of literal values that are valid."),type:Gr("schema.json.type","Either a string of one of the basic schema types (number, integer, null, array, object, boolean, string) or an array of strings specifying a subset of those types."),format:Gr("schema.json.format","Describes the format expected for the value."),allOf:Gr("schema.json.allOf","An array of schemas, all of which must match."),anyOf:Gr("schema.json.anyOf","An array of schemas, where at least one must match."),oneOf:Gr("schema.json.oneOf","An array of schemas, exactly one of which must match."),not:Gr("schema.json.not","A schema which must not match."),$id:Gr("schema.json.$id","A unique identifier for the schema."),$ref:Gr("schema.json.$ref","Reference a definition hosted on any location."),$comment:Gr("schema.json.$comment","Comments from schema authors to readers or maintainers of the schema."),readOnly:Gr("schema.json.readOnly","Indicates that the value of the instance is managed exclusively by the owning authority."),examples:Gr("schema.json.examples","Sample JSON values associated with a particular schema, for the purpose of illustrating usage."),contains:Gr("schema.json.contains",'An array instance is valid against "contains" if at least one of its elements is valid against the given schema.'),propertyNames:Gr("schema.json.propertyNames","If the instance is an object, this keyword validates if every property name in the instance validates against the provided schema."),const:Gr("schema.json.const","An instance validates successfully against this keyword if its value is equal to the value of the keyword."),contentMediaType:Gr("schema.json.contentMediaType","Describes the media type of a string property."),contentEncoding:Gr("schema.json.contentEncoding","Describes the content encoding of a string property."),if:Gr("schema.json.if",'The validation outcome of the "if" subschema controls which of the "then" or "else" keywords are evaluated.'),then:Gr("schema.json.then",'The "if" subschema is used for validation when the "if" subschema succeeds.'),else:Gr("schema.json.else",'The "else" subschema is used for validation when the "if" subschema fails.')};for(var Qr in Yr.schemas){var Zr=Yr.schemas[Qr];for(var ei in Zr.properties){var ti=Zr.properties[ei];"boolean"==typeof ti&&(ti=Zr.properties[ei]={});var ni=Xr[ei];ni?ti.description=ni:console.log(ei+": localize('schema.json."+ei+'\', "")')}}function ri(e,t){var n=[];return t.visit((function(r){var i;if("property"===r.type&&"$ref"===r.keyNode.value&&"string"===(null===(i=r.valueNode)||void 0===i?void 0:i.type)){var o=r.valueNode.value,s=function(e,t){var n=function(e){return"#"===e?[]:"#"!==e[0]||"/"!==e[1]?null:e.substring(2).split(/\//).map(si)}(t);return n?oi(n,e.root):null}(t,o);if(s){var a=e.positionAt(s.offset);n.push({target:e.uri+"#"+(a.line+1)+","+(a.character+1),range:ii(e,r.valueNode)})}}return!0})),Promise.resolve(n)}function ii(e,t){return Y.Range.create(e.positionAt(t.offset+1),e.positionAt(t.offset+t.length-1))}function oi(e,t){if(!t)return null;if(0===e.length)return t;var n=e.shift();if(t&&"object"===t.type){var r=t.properties.find((function(e){return e.keyNode.value===n}));return r?oi(e,r.valueNode):null}if(t&&"array"===t.type&&n.match(/^(0|[1-9][0-9]*)$/)){var i=Number.parseInt(n),o=t.items[i];return o?oi(e,o):null}return null}function si(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function ai(e,t){for(const n of t.documents)if(n.internalDocument&&n.internalDocument.range[0]<=e&&n.internalDocument.range[2]>=e)return n;return 1===t.documents.length?t.documents[0]:null}function ci(e){const t=["mapping","scalar","sequence"];return e.filter((e=>{if("string"==typeof e){const n=e.split(" "),r=n[1]&&n[1].toLowerCase()||"scalar";return"map"!==r&&-1!==t.indexOf(r)}return!1}))}function li(e,t){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(let n=e.length-1;n>=0;n--)if(e[n]!==t[n])return!1;return!0}const ui=Pe.loadMessageBundle(),hi={"color-hex":{errorMessage:ui("colorHexFormatWarning","Invalid color format. Use #RGB, #RGBA, #RRGGBB or #RRGGBBAA."),pattern:/^#([0-9A-Fa-f]{3,4}|([0-9A-Fa-f]{2}){3,4})$/},"date-time":{errorMessage:ui("dateTimeFormatWarning","String is not a RFC3339 date-time."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},date:{errorMessage:ui("dateFormatWarning","String is not a RFC3339 date."),pattern:/^(\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$/i},time:{errorMessage:ui("timeFormatWarning","String is not a RFC3339 time."),pattern:/^([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(Z|(\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$/i},email:{errorMessage:ui("emailFormatWarning","String is not an e-mail address."),pattern:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},fi="YAML";var di;!function(e){e.missingRequiredPropWarning="missingRequiredPropWarning",e.typeMismatchWarning="typeMismatchWarning",e.constWarning="constWarning"}(di||(di={}));const mi={[di.missingRequiredPropWarning]:'Missing property "{0}".',[di.typeMismatchWarning]:'Incorrect type. Expected "{0}".',[di.constWarning]:"Value must be {0}."};class pi{constructor(e,t,n,r){this.offset=n,this.length=r,this.parent=e,this.internalNode=t}getNodeFromOffsetEndInclusive(e){const t=[],n=r=>{if(e>=r.offset&&e<=r.offset+r.length){const i=r.children;for(let r=0;r<i.length&&i[r].offset<=e;r++){const e=n(i[r]);e&&t.push(e)}return r}return null},r=n(this);let i=Number.MAX_VALUE,o=null;for(const n of t){const t=n.length+n.offset-e+(e-n.offset);t<i&&(o=n,i=t)}return o||r}get children(){return[]}toString(){return"type: "+this.type+" ("+this.offset+"/"+this.length+")"+(this.parent?" parent: {"+this.parent.toString()+"}":"")}}class gi extends pi{constructor(e,t,n,r){super(e,t,n,r),this.type="null",this.value=null}}class yi extends pi{constructor(e,t,n,r,i){super(e,t,r,i),this.type="boolean",this.value=n}}class vi extends pi{constructor(e,t,n,r){super(e,t,n,r),this.type="array",this.items=[]}get children(){return this.items}}class bi extends pi{constructor(e,t,n,r){super(e,t,n,r),this.type="number",this.isInteger=!0,this.value=Number.NaN}}class Si extends pi{constructor(e,t,n,r){super(e,t,n,r),this.type="string",this.value=""}}class wi extends pi{constructor(e,t,n,r){super(e,t,n,r),this.type="property",this.colonOffset=-1}get children(){return this.valueNode?[this.keyNode,this.valueNode]:[this.keyNode]}}class ki extends pi{constructor(e,t,n,r){super(e,t,n,r),this.type="object",this.properties=[]}get children(){return this.properties}}function xi(e){return Mr(e)?e?{}:{not:{}}:e}var Ti;!function(e){e[e.Key=0]="Key",e[e.Enum=1]="Enum"}(Ti||(Ti={}));class Ci{constructor(e=-1,t=null){this.focusOffset=e,this.exclude=t,this.schemas=[]}add(e){this.schemas.push(e)}merge(e){this.schemas.push(...e.schemas)}include(e){return(-1===this.focusOffset||function(e,t,n=!1){return t>=e.offset&&t<=e.offset+e.length||n&&t===e.offset+e.length}(e,this.focusOffset))&&e!==this.exclude}newSub(){return new Ci(-1,this.exclude)}}class Ri{constructor(){}get schemas(){return[]}add(e){}merge(e){}include(e){return!0}newSub(){return this}}Ri.instance=new Ri;class Oi{constructor(e){this.problems=[],this.propertiesMatches=0,this.propertiesValueMatches=0,this.primaryValueMatches=0,this.enumValueMatch=!1,this.enumValues=e?[]:null}hasProblems(){return!!this.problems.length}mergeAll(e){for(const t of e)this.merge(t)}merge(e){this.problems=this.problems.concat(e.problems)}mergeEnumValues(e){if(!this.enumValueMatch&&!e.enumValueMatch&&this.enumValues&&e.enumValues){this.enumValues=this.enumValues.concat(e.enumValues);for(const e of this.problems)e.code===H.EnumValueMismatch&&(e.message=ui("enumWarning","Value is not accepted. Valid values: {0}.",[...new Set(this.enumValues)].map((e=>JSON.stringify(e))).join(", ")))}}mergeWarningGeneric(e,t){var n,r;if(null===(n=this.problems)||void 0===n?void 0:n.length)for(const n of t){const t=this.problems.filter((e=>e.problemType===n));for(const i of t){const t=null===(r=e.problems)||void 0===r?void 0:r.find((e=>e.problemType===n&&i.location.offset===e.location.offset&&(n!==di.missingRequiredPropWarning||li(e.problemArgs,i.problemArgs))));t&&(t.problemArgs.length&&(t.problemArgs.filter((e=>!i.problemArgs.includes(e))).forEach((e=>i.problemArgs.push(e))),i.message=Di(i.problemType,i.problemArgs)),this.mergeSources(t,i))}}}mergePropertyMatch(e){this.merge(e),this.propertiesMatches++,(e.enumValueMatch||!e.hasProblems()&&e.propertiesMatches)&&this.propertiesValueMatches++,e.enumValueMatch&&e.enumValues&&this.primaryValueMatches++}mergeSources(e,t){const n=e.source.replace("yaml-schema: ","");t.source.includes(n)||(t.source=t.source+" | "+n),t.schemaUri.includes(e.schemaUri[0])||(t.schemaUri=t.schemaUri.concat(e.schemaUri))}compareGeneric(e){const t=this.hasProblems();return t!==e.hasProblems()?t?-1:1:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesMatches-e.propertiesMatches}compareKubernetes(e){const t=this.hasProblems();return this.propertiesMatches!==e.propertiesMatches?this.propertiesMatches-e.propertiesMatches:this.enumValueMatch!==e.enumValueMatch?e.enumValueMatch?-1:1:this.primaryValueMatches!==e.primaryValueMatches?this.primaryValueMatches-e.primaryValueMatches:this.propertiesValueMatches!==e.propertiesValueMatches?this.propertiesValueMatches-e.propertiesValueMatches:t!==e.hasProblems()?t?-1:1:this.propertiesMatches-e.propertiesMatches}}function Ai(e){return M(e)}function Pi(e,t,n,r,i,o){const{isKubernetes:a}=o;if(e&&i.include(e)){switch(t.url||(t.url=n.url),t.title||(t.title=n.title),e.type){case"object":!function(e,t,r,i){var s;const c=Object.create(null),l=[],u=[...e.properties];for(;u.length>0;){const e=u.pop(),t=e.keyNode.value;if("<<"===t&&e.valueNode)switch(e.valueNode.type){case"object":u.push(...e.valueNode.properties);break;case"array":e.valueNode.items.forEach((e=>{var t;e&&(t=e.properties,Symbol.iterator in Object(t))&&u.push(...e.properties)}))}else c[t]=e.valueNode,l.push(t)}if(Array.isArray(t.required))for(const i of t.required)if(!c[i]){const o=e.parent&&"property"===e.parent.type&&e.parent.keyNode,s=o?{offset:o.offset,length:o.length}:{offset:e.offset,length:1};r.problems.push({location:s,severity:Y.DiagnosticSeverity.Warning,message:Di(di.missingRequiredPropWarning,[i]),source:Ei(t,n),schemaUri:_i(t,n),problemArgs:[i],problemType:di.missingRequiredPropWarning})}const h=e=>{let t=l.indexOf(e);for(;t>=0;)l.splice(t,1),t=l.indexOf(e)};if(t.properties)for(const e of Object.keys(t.properties)){h(e);const l=t.properties[e],u=c[e];if(u)if(Mr(l))if(l)r.propertiesMatches++,r.propertiesValueMatches++;else{const i=u.parent;r.problems.push({location:{offset:i.keyNode.offset,length:i.keyNode.length},severity:Y.DiagnosticSeverity.Warning,message:t.errorMessage||ui("DisallowedExtraPropWarning","Property {0} is not allowed.",e),source:Ei(t,n),schemaUri:_i(t,n)})}else{l.url=null!==(s=t.url)&&void 0!==s?s:n.url;const e=new Oi(a);Pi(u,l,t,e,i,o),r.mergePropertyMatch(e),r.mergeEnumValues(e)}}if(t.patternProperties)for(const e of Object.keys(t.patternProperties)){const s=Ee(e);for(const u of l.slice(0))if(s.test(u)){h(u);const s=c[u];if(s){const c=t.patternProperties[e];if(Mr(c))if(c)r.propertiesMatches++,r.propertiesValueMatches++;else{const e=s.parent;r.problems.push({location:{offset:e.keyNode.offset,length:e.keyNode.length},severity:Y.DiagnosticSeverity.Warning,message:t.errorMessage||ui("DisallowedExtraPropWarning","Property {0} is not allowed.",u),source:Ei(t,n),schemaUri:_i(t,n)})}else{const e=new Oi(a);Pi(s,c,t,e,i,o),r.mergePropertyMatch(e),r.mergeEnumValues(e)}}}}if("object"==typeof t.additionalProperties)for(const e of l){const n=c[e];if(n){const e=new Oi(a);Pi(n,t.additionalProperties,t,e,i,o),r.mergePropertyMatch(e),r.mergeEnumValues(e)}}else if((!1===t.additionalProperties||"object"===t.type&&void 0===t.additionalProperties&&!0===o.disableAdditionalProperties)&&l.length>0)for(const e of l){const i=c[e];if(i){let o=null;"property"!==i.type?(o=i.parent,"object"===o.type&&(o=o.properties[0])):o=i,r.problems.push({location:{offset:o.keyNode.offset,length:o.keyNode.length},severity:Y.DiagnosticSeverity.Warning,message:t.errorMessage||ui("DisallowedExtraPropWarning","Property {0} is not allowed.",e),source:Ei(t,n),schemaUri:_i(t,n)})}}if(Dr(t.maxProperties)&&e.properties.length>t.maxProperties&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("MaxPropWarning","Object has more properties than limit of {0}.",t.maxProperties),source:Ei(t,n),schemaUri:_i(t,n)}),Dr(t.minProperties)&&e.properties.length<t.minProperties&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("MinPropWarning","Object has fewer properties than the required number of {0}",t.minProperties),source:Ei(t,n),schemaUri:_i(t,n)}),t.dependencies)for(const s of Object.keys(t.dependencies))if(c[s]){const l=t.dependencies[s];if(Array.isArray(l))for(const i of l)c[i]?r.propertiesValueMatches++:r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("RequiredDependentPropWarning","Object is missing property {0} required by property {1}.",i,s),source:Ei(t,n),schemaUri:_i(t,n)});else{const n=xi(l);if(n){const s=new Oi(a);Pi(e,n,t,s,i,o),r.mergePropertyMatch(s),r.mergeEnumValues(s)}}}const f=xi(t.propertyNames);if(f)for(const n of e.properties){const e=n.keyNode;e&&Pi(e,f,t,r,Ri.instance,o)}}(e,t,r,i);break;case"array":!function(e,t,r,i){if(Array.isArray(t.items)){const s=t.items;for(let n=0;n<s.length;n++){const c=xi(s[n]),l=new Oi(a),u=e.items[n];u?(Pi(u,c,t,l,i,o),r.mergePropertyMatch(l),r.mergeEnumValues(l)):e.items.length>=s.length&&r.propertiesValueMatches++}if(e.items.length>s.length)if("object"==typeof t.additionalItems)for(let n=s.length;n<e.items.length;n++){const s=new Oi(a);Pi(e.items[n],t.additionalItems,t,s,i,o),r.mergePropertyMatch(s),r.mergeEnumValues(s)}else!1===t.additionalItems&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("additionalItemsWarning","Array has too many items according to schema. Expected {0} or fewer.",s.length),source:Ei(t,n),schemaUri:_i(t,n)})}else{const n=xi(t.items);if(n)for(const s of e.items){const e=new Oi(a);Pi(s,n,t,e,i,o),r.mergePropertyMatch(e),r.mergeEnumValues(e)}}const s=xi(t.contains);if(s&&(e.items.some((e=>{const n=new Oi(a);return Pi(e,s,t,n,Ri.instance,o),!n.hasProblems()}))||r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:t.errorMessage||ui("requiredItemMissingWarning","Array does not contain required item."),source:Ei(t,n),schemaUri:_i(t,n)})),Dr(t.minItems)&&e.items.length<t.minItems&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("minItemsWarning","Array has too few items. Expected {0} or more.",t.minItems),source:Ei(t,n),schemaUri:_i(t,n)}),Dr(t.maxItems)&&e.items.length>t.maxItems&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("maxItemsWarning","Array has too many items. Expected {0} or fewer.",t.maxItems),source:Ei(t,n),schemaUri:_i(t,n)}),!0===t.uniqueItems){const i=Ai(e);i.some(((e,t)=>t!==i.lastIndexOf(e)))&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("uniqueItemsWarning","Array has duplicate items."),source:Ei(t,n),schemaUri:_i(t,n)})}}(e,t,r,i);break;case"string":!function(e,t,r){if(Dr(t.minLength)&&e.value.length<t.minLength&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("minLengthWarning","String is shorter than the minimum length of {0}.",t.minLength),source:Ei(t,n),schemaUri:_i(t,n)}),Dr(t.maxLength)&&e.value.length>t.maxLength&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("maxLengthWarning","String is longer than the maximum length of {0}.",t.maxLength),source:Ei(t,n),schemaUri:_i(t,n)}),Ir(t.pattern)&&(Ee(t.pattern).test(e.value)||r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||ui("patternWarning",'String does not match the pattern of "{0}".',t.pattern),source:Ei(t,n),schemaUri:_i(t,n)})),t.format)switch(t.format){case"uri":case"uri-reference":{let i;if(e.value)try{s.parse(e.value).scheme||"uri"!==t.format||(i=ui("uriSchemeMissing","URI with a scheme is expected."))}catch(e){i=e.message}else i=ui("uriEmpty","URI expected.");i&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||ui("uriFormatWarning","String is not a URI: {0}",i),source:Ei(t,n),schemaUri:_i(t,n)})}break;case"color-hex":case"date-time":case"date":case"time":case"email":{const i=hi[t.format];e.value&&i.pattern.exec(e.value)||r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:t.patternErrorMessage||t.errorMessage||i.errorMessage,source:Ei(t,n),schemaUri:_i(t,n)})}}}(e,t,r);break;case"number":!function(e,t,r){const i=e.value;function o(e,t){return Dr(t)?t:Mr(t)&&t?e:void 0}function s(e,t){if(!Mr(t)||!t)return e}Dr(t.multipleOf)&&i%t.multipleOf!=0&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("multipleOfWarning","Value is not divisible by {0}.",t.multipleOf),source:Ei(t,n),schemaUri:_i(t,n)});const a=o(t.minimum,t.exclusiveMinimum);Dr(a)&&i<=a&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("exclusiveMinimumWarning","Value is below the exclusive minimum of {0}.",a),source:Ei(t,n),schemaUri:_i(t,n)});const c=o(t.maximum,t.exclusiveMaximum);Dr(c)&&i>=c&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("exclusiveMaximumWarning","Value is above the exclusive maximum of {0}.",c),source:Ei(t,n),schemaUri:_i(t,n)});const l=s(t.minimum,t.exclusiveMinimum);Dr(l)&&i<l&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("minimumWarning","Value is below the minimum of {0}.",l),source:Ei(t,n),schemaUri:_i(t,n)});const u=s(t.maximum,t.exclusiveMaximum);Dr(u)&&i>u&&r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("maximumWarning","Value is above the maximum of {0}.",u),source:Ei(t,n),schemaUri:_i(t,n)})}(e,t,r);break;case"property":return Pi(e.valueNode,t,t,r,i,o)}!function(){function s(t){return e.type===t||"integer"===t&&"number"===e.type&&e.isInteger}if(Array.isArray(t.type))t.type.some(s)||r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:t.errorMessage||ui("typeArrayMismatchWarning","Incorrect type. Expected one of {0}.",t.type.join(", ")),source:Ei(t,n),schemaUri:_i(t,n)});else if(t.type&&!s(t.type)){const i="object"===t.type?function(e){return e.$id?jr(e.$id):e.$ref||e._$ref?jr(e.$ref||e._$ref):e.title||(Array.isArray(e.type)?e.type.join(" | "):e.type)}(t):t.type;r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:t.errorMessage||Di(di.typeMismatchWarning,[i]),source:Ei(t,n),schemaUri:_i(t,n),problemType:di.typeMismatchWarning,problemArgs:[i]})}if(Array.isArray(t.allOf))for(const n of t.allOf)Pi(e,xi(n),t,r,i,o);const u=xi(t.not);if(u){const s=new Oi(a),c=i.newSub();Pi(e,u,t,s,c,o),s.hasProblems()||r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,message:ui("notSchemaWarning","Matches a schema that is not allowed."),source:Ei(t,n),schemaUri:_i(t,n)});for(const e of c.schemas)e.inverted=!e.inverted,i.add(e)}const h=(s,u)=>{const h=[];let f=null;for(const n of s){const r=xi(n),s=new Oi(a),d=i.newSub();Pi(e,r,t,s,d,o),s.hasProblems()||h.push(r),f=f?a?c(s,f,r,d):l(u,s,f,r,d):{schema:r,validationResult:s,matchingSchemas:d}}return h.length>1&&u&&r.problems.push({location:{offset:e.offset,length:1},severity:Y.DiagnosticSeverity.Warning,message:ui("oneOfWarning","Matches multiple schemas when only one must validate."),source:Ei(t,n),schemaUri:_i(t,n)}),null!==f&&(r.merge(f.validationResult),r.propertiesMatches+=f.validationResult.propertiesMatches,r.propertiesValueMatches+=f.validationResult.propertiesValueMatches,i.merge(f.matchingSchemas)),h.length};Array.isArray(t.anyOf)&&h(t.anyOf,!1),Array.isArray(t.oneOf)&&h(t.oneOf,!0);const f=(t,n)=>{const s=new Oi(a),c=i.newSub();Pi(e,xi(t),n,s,c,o),r.merge(s),r.propertiesMatches+=s.propertiesMatches,r.propertiesValueMatches+=s.propertiesValueMatches,i.merge(c)},d=xi(t.if);if(d&&((t,n,r,s)=>{const c=xi(t),l=new Oi(a),u=i.newSub();Pi(e,c,n,l,u,o),i.merge(u),l.hasProblems()?s&&f(s,n):r&&f(r,n)})(d,t,xi(t.then),xi(t.else)),Array.isArray(t.enum)){const i=Ai(e);let o=!1;for(const e of t.enum)if(_r(i,e)){o=!0;break}r.enumValues=t.enum,r.enumValueMatch=o,o||r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,code:H.EnumValueMismatch,message:t.errorMessage||ui("enumWarning","Value is not accepted. Valid values: {0}.",t.enum.map((e=>JSON.stringify(e))).join(", ")),source:Ei(t,n),schemaUri:_i(t,n)})}Nr(t.const)&&(_r(Ai(e),t.const)?r.enumValueMatch=!0:(r.problems.push({location:{offset:e.offset,length:e.length},severity:Y.DiagnosticSeverity.Warning,code:H.EnumValueMismatch,problemType:di.constWarning,message:t.errorMessage||Di(di.constWarning,[JSON.stringify(t.const)]),source:Ei(t,n),schemaUri:_i(t,n),problemArgs:[JSON.stringify(t.const)]}),r.enumValueMatch=!1),r.enumValues=[t.const]),t.deprecationMessage&&e.parent&&r.problems.push({location:{offset:e.parent.offset,length:e.parent.length},severity:Y.DiagnosticSeverity.Warning,message:t.deprecationMessage,source:Ei(t,n),schemaUri:_i(t,n)})}(),i.add({node:e,schema:t})}function c(e,t,n,r){const i=e.compareKubernetes(t.validationResult);return i>0?t={schema:n,validationResult:e,matchingSchemas:r}:0===i&&(t.matchingSchemas.merge(r),t.validationResult.mergeEnumValues(e)),t}function l(e,t,n,r,i){if(e||t.hasProblems()||n.validationResult.hasProblems()){const e=t.compareGeneric(n.validationResult);e>0?n={schema:r,validationResult:t,matchingSchemas:i}:0===e&&(n.matchingSchemas.merge(i),n.validationResult.mergeEnumValues(t),n.validationResult.mergeWarningGeneric(t,[di.missingRequiredPropWarning,di.typeMismatchWarning,di.constWarning]))}else n.matchingSchemas.merge(i),n.validationResult.propertiesMatches+=t.propertiesMatches,n.validationResult.propertiesValueMatches+=t.propertiesValueMatches;return n}}function Ei(e,t){var n;if(e){let r;if(e.title)r=e.title;else if(t.title)r=t.title;else{const i=null!==(n=e.url)&&void 0!==n?n:t.url;if(i){const e=s.parse(i);"file"===e.scheme&&(r=e.fsPath),r=e.toString()}}if(r)return`yaml-schema: ${r}`}return fi}function _i(e,t){var n;const r=null!==(n=e.url)&&void 0!==n?n:t.url;return r?[r]:[]}function Di(e,t){return ui(e,mi[e],t.join(" | "))}let Ni=0;function Mi(e,t,n,r){if(e||(Ni=0),t){if($e(t))return function(e,t,n,r){let i;i=e.flow&&!e.range?function(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(const r of e.items)We(r)&&(Ke(r.key)&&r.key.range&&r.key.range[0]<=t&&(t=r.key.range[0]),Ke(r.value)&&r.value.range&&r.value.range[2]>=n&&(n=r.value.range[2]));return[t,n,n]}(e):e.range;const o=new ki(t,e,...ji(i,r));for(const t of e.items)We(t)&&o.properties.push(Mi(o,t,n,r));return o}(t,e,n,r);if(We(t))return function(e,t,n,r){const i=e.key,o=e.value,s=i.range[0];let a=i.range[1],c=i.range[2];o&&(a=o.range[1],c=o.range[2]);const l=new wi(t,e,...ji([s,a,c],r));if(Fe(i)){const e=new Si(t,i,...Ii(i.range));e.value=i.source,l.keyNode=e}else l.keyNode=Mi(l,i,n,r);return l.valueNode=Mi(l,o,n,r),l}(t,e,n,r);if(Ue(t))return function(e,t,n,r){const i=new vi(t,e,...Ii(e.range));for(const t of e.items)Ke(t)&&i.children.push(Mi(i,t,n,r));return i}(t,e,n,r);if(Ve(t))return function(e,t){if(null===e.value)return new gi(t,e,...Ii(e.range));switch(typeof e.value){case"string":{const n=new Si(t,e,...Ii(e.range));return n.value=e.value,n}case"boolean":return new yi(t,e,e.value,...Ii(e.range));case"number":{const n=new bi(t,e,...Ii(e.range));return n.value=e.value,n.isInteger=Number.isInteger(n.value),n}}}(t,e);if(Fe(t)){if(Ni>1e3)return;return function(e,t,n,r){return Ni++,Mi(t,e.resolve(n),n,r)}(t,e,n,r)}}}function Ii(e){return[e[0],e[1]-e[0]]}function ji(e,t){const n=t.linePos(e[0]),r=t.linePos(e[1]),i=[e[0],e[1]-e[0]];return n.line===r.line||t.lineStarts.length===r.line&&1!==r.col||i[1]--,i}function qi(e){if(e.items.length>1)return!1;const t=e.items[0];return!(!Ve(t.key)||!Ve(t.value)||""!==t.key.value||t.value.value)}function Fi(e){return void 0!==e.start}function Li(e,t,n){let r=n(t,e);if("symbol"==typeof r)return r;for(const i of["key","value"]){const o=t[i];if(o&&"items"in o){for(let t=0;t<o.items.length;++t){const r=Li(Object.freeze(e.concat([[i,t]])),o.items[t],n);if("number"==typeof r)t=r-1;else{if(r===Ye.BREAK)return Ye.BREAK;r===Ye.REMOVE&&(o.items.splice(t,1),t-=1)}}"function"==typeof r&&"key"===i&&(r=r(t,e))}}const i=t.sep;if(i)for(let t=0;t<i.length;++t){const r=Li(Object.freeze(e),i[t],n);if("number"==typeof r)t=r-1;else{if(r===Ye.BREAK)return Ye.BREAK;r===Ye.REMOVE&&(i.items.splice(t,1),t-=1)}}return"function"==typeof r?r(t,e):r}class $i extends class{constructor(e,t=[],n=[]){this.root=e,this.syntaxErrors=t,this.comments=n}getNodeFromOffset(e,t=!1){if(this.root)return D(this.root,e,t)}getNodeFromOffsetEndInclusive(e){return this.root&&this.root.getNodeFromOffsetEndInclusive(e)}visit(e){if(this.root){const t=n=>{let r=e(n);const i=n.children;if(Array.isArray(i))for(let e=0;e<i.length&&r;e++)r=t(i[e]);return r};t(this.root)}}validate(e,n){if(this.root&&n){const r=new Oi(this.isKubernetes);return Pi(this.root,n,n,r,Ri.instance,{isKubernetes:this.isKubernetes,disableAdditionalProperties:this.disableAdditionalProperties}),r.problems.map((n=>{const r=Y.Range.create(e.positionAt(n.location.offset),e.positionAt(n.location.offset+n.location.length)),i=t.Diagnostic.create(r,n.message,n.severity,n.code?n.code:H.Undefined,n.source);return i.data={schemaUri:n.schemaUri},i}))}return null}getMatchingSchemas(e,t=-1,n=null){const r=new Ci(t,n);return this.root&&e&&Pi(this.root,e,e,new Oi(this.isKubernetes),r,{isKubernetes:this.isKubernetes,disableAdditionalProperties:this.disableAdditionalProperties}),r.schemas}}{constructor(e){super(null,[]),this.lineCounter=e}collectLineComments(){this._lineComments=[],this._internalDocument.commentBefore&&this._internalDocument.commentBefore.split("\n").forEach((e=>this._lineComments.push(`#${e}`))),Ye(this.internalDocument,((e,t)=>{(null==t?void 0:t.commentBefore)&&(null==t?void 0:t.commentBefore.split("\n")).forEach((e=>this._lineComments.push(`#${e}`))),(null==t?void 0:t.comment)&&this._lineComments.push(`#${t.comment}`)})),this._internalDocument.comment&&this._lineComments.push(`#${this._internalDocument.comment}`)}set internalDocument(e){this._internalDocument=e,this.root=Mi(null,this._internalDocument.contents,this._internalDocument,this.lineCounter)}get internalDocument(){return this._internalDocument}get lineComments(){return this._lineComments||this.collectLineComments(),this._lineComments}set lineComments(e){this._lineComments=e}get errors(){return this.internalDocument.errors.map(Ui)}get warnings(){return this.internalDocument.warnings.map(Ui)}getSchemas(e,t,n){const r=[];return t.validate(e,r,n.start),r}getNodeFromPosition(e,t){const n=t.getPosition(e);if(0===t.getLineContent(n.line).trim().length)return[this.findClosestNode(e,t),!0];let r;return Ye(this.internalDocument,((t,n)=>{if(!n)return;const i=n.range;return i?i[0]<=e&&i[1]>=e?void(r=n):Ye.SKIP:void 0})),[r,!1]}findClosestNode(e,t){let n,r=this.internalDocument.range[2],i=this.internalDocument.range[0];Ye(this.internalDocument,((t,o)=>{if(!o)return;const s=o.range;if(!s)return;const a=Math.abs(s[2]-e);i<=s[0]&&a<=r&&(r=a,i=s[0],n=o)}));const o=t.getPosition(e),s=function(e,t){if(e.length<t)return 0;for(let n=0;n<t;n++){const t=e.charCodeAt(n);if(32!==t&&9!==t)return n}return t}(t.getLineContent(o.line),o.character);return Ve(n)&&null===n.value||s===o.character&&(n=this.getProperParentByIndentation(s,n,t)),n}getProperParentByIndentation(e,t,n){if(!t)return this.internalDocument.contents;if(t.range){const r=n.getPosition(t.range[0]);if(!(r.character!==e&&r.character>0))return t;{const r=this.getParent(t);if(r)return this.getProperParentByIndentation(e,r,n)}}else if(We(t)){const r=this.getParent(t);return this.getProperParentByIndentation(e,r,n)}return t}getParent(e){return function(e,t){let n;if(Ye(e,((e,r,i)=>{if(r===t)return n=i[i.length-1],Ye.BREAK})),!Le(n))return n}(this.internalDocument,e)}}class Wi{constructor(e,t){this.documents=e,this.tokens=t,this.errors=[],this.warnings=[]}}const Vi=new class{constructor(){this.cache=new Map}getYamlDocument(e,t,n=!1){return this.ensureCache(e,null!=t?t:zi,n),this.cache.get(e.uri).document}clear(){this.cache.clear()}ensureCache(e,t,n){const r=e.uri;this.cache.has(r)||this.cache.set(r,{version:-1,document:new Wi([],[]),parserOptions:zi});const i=this.cache.get(r);if(i.version!==e.version||t.customTags&&!li(i.parserOptions.customTags,t.customTags)){let r=e.getText();n&&!/\S/.test(r)&&(r=`{${r}}`);const o=function(e,t=zi){const n={strict:!1,customTags:Hi(t.customTags),version:t.yamlVersion},r=new lr(n),i=new kr,o=new Pr(i.addNewLine).parse(e),s=Array.from(o),a=r.compose(s,!0,e.length),c=Array.from(a,(e=>function(e,t){const n=new $i(t);return n.internalDocument=e,n}(e,i)));return new Wi(c,s)}(r,t);i.document=o,i.version=e.version,i.parserOptions=t}}};function Ui(e){return{message:e.message,location:{start:e.pos[0],end:e.pos[1],toLineEnd:!0},severity:1,code:H.Undefined}}class Bi{constructor(e,t){this.tag=e,this.type=t}get collection(){return"mapping"===this.type?"map":"sequence"===this.type?"seq":void 0}resolve(e){return $e(e)&&"mapping"===this.type||Ue(e)&&"sequence"===this.type||"string"==typeof e&&"scalar"===this.type?e:void 0}}class Ki{constructor(){this.tag="!include",this.type="scalar"}resolve(e,t){if(e&&e.length>0&&e.trim())return e;t("!include without value")}}function Hi(e){const t=[],n=ci(e);for(const e of n){const n=e.split(" "),r=n[0],i=n[1]&&n[1].toLowerCase()||"scalar";t.push(new Bi(r,i))}return t.push(new Ki),t}const zi={customTags:[],yamlVersion:"1.2"};function Ji(e){const t=e.match(/^#\s+yaml-language-server\s*:/g);return null!==t&&1===t.length}var Gi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};const Yi=Pe.loadMessageBundle();var Xi;!function(e){e[e.delete=0]="delete",e[e.add=1]="add",e[e.deleteAll=2]="deleteAll"}(Xi||(Xi={}));class Qi{constructor(e){try{this.patternRegExp=new RegExp(function(e){return e.replace(/[-\\{}+?|^$.,[\]()#\s]/g,"\\$&").replace(/[*]/g,".*")}(e)+"$")}catch(e){this.patternRegExp=null}this.schemas=[]}addSchema(e){this.schemas.push(e)}matchesPattern(e){return this.patternRegExp&&this.patternRegExp.test(e)}getSchemas(){return this.schemas}}class Zi extends Ce{constructor(e,t,n){super(e,t,n),this.schemaUriToNameAndDescription=new Map,this.customSchemaProvider=void 0,this.requestService=e,this.schemaPriorityMapping=new Map}registerCustomSchemaProvider(e){this.customSchemaProvider=e}getAllSchemas(){const e=[],t=new Set;for(const n of this.filePatternAssociations){const r=n.uris[0];if(t.has(r))continue;t.add(r);const i={uri:r,fromStore:!1,usedForCurrentFile:!1};if(this.schemaUriToNameAndDescription.has(r)){const[e,t]=this.schemaUriToNameAndDescription.get(r);i.name=e,i.description=t,i.fromStore=!0}e.push(i)}return e}resolveSchemaContent(e,t,n){return Gi(this,void 0,void 0,(function*(){const r=e.errors.slice(0);let i=e.schema;const o=this.contextService,s=(e,t,n,i)=>{const o=((e,t)=>{if(!t)return e;let n=e;return"/"===t[0]&&(t=t.substr(1)),t.split("/").some((e=>(n=n[e],!n))),n})(t,i);if(o)for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&!Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=o[t]);else r.push(Yi("json.schema.invalidref","$ref '{0}' in '{1}' can not be resolved.",i,n))},a=(e,t,n,i,a)=>{o&&!/^\w+:\/\/.*/.test(t)&&(t=o.resolveRelativePath(t,i)),t=this.normalizeId(t);const l=this.getOrAddSchemaHandle(t);return l.getUnresolvedSchema().then((i=>{if(a[t]=!0,i.errors.length){const e=n?t+"#"+n:t;r.push(Yi("json.schema.problemloadingref","Problems loading reference '{0}': {1}",e,i.errors[0]))}return s(e,i.schema,t,n),e.url=t,c(e,i.schema,t,l.dependencies)}))},c=(e,t,n,r)=>Gi(this,void 0,void 0,(function*(){if(!e||"object"!=typeof e)return null;const o=[e],c=[],l=[],u=e=>{const i=[];for(;e.$ref;){const o=e.$ref,c=o.split("#",2);if(e._$ref=e.$ref,delete e.$ref,c[0].length>0)return void l.push(a(e,c[0],c[1],n,r));-1===i.indexOf(o)&&(s(e,t,n,c[1]),i.push(o))}((...e)=>{for(const t of e)"object"==typeof t&&o.push(t)})(e.items,e.additionalItems,e.additionalProperties,e.not,e.contains,e.propertyNames,e.if,e.then,e.else),((...e)=>{for(const t of e)if("object"==typeof t)for(const e in t){const n=t[e];"object"==typeof n&&o.push(n)}})(e.definitions,e.properties,e.patternProperties,e.dependencies),((...e)=>{for(const t of e)if(Array.isArray(t))for(const e of t)"object"==typeof e&&o.push(e)})(e.anyOf,e.allOf,e.oneOf,e.items,e.schemaSequence)};if(n.indexOf("#")>0){const e=n.split("#",2);if(e[0].length>0&&e[1].length>0){const t={};yield a(t,e[0],e[1],n,r);for(const e in i)"required"!==e&&Object.prototype.hasOwnProperty.call(i,e)&&!Object.prototype.hasOwnProperty.call(t,e)&&(t[e]=i[e]);i=t}}for(;o.length;){const e=o.pop();c.indexOf(e)>=0||(c.push(e),u(e))}return Promise.all(l)}));return yield c(i,i,t,n),new Te(i,r)}))}getSchemaForResource(e,t){const n=()=>{const n=Object.create(null),r=[];let i=function(e){if(e instanceof $i){const t=e.lineComments.find((e=>Ji(e)));if(null!=t){const e=t.match(/\$schema=\S+/g);if(null!==e&&e.length>=1)return e.length>=2&&console.log("Several $schema attributes have been found on the yaml-language-server modeline. The first one will be picked."),e[0].substring("$schema=".length)}}}(t);if(void 0!==i){if(!i.startsWith("file:")&&!i.startsWith("http"))if(S.isAbsolute(i))i=s.file(i).toString();else{const t=s.parse(e);i=s.file(S.resolve(S.parse(t.fsPath).dir,i)).toString()}this.addSchemaPriority(i,Lo.Modeline),r.push(i),n[i]=!0}for(const t of this.filePatternAssociations)if(t.matchesPattern(e))for(const e of t.getURIs())n[e]||(r.push(e),n[e]=!0);const o=this.normalizeId(e);if(this.schemasById[o]&&r.push(o),r.length>0){const n=this.highestPrioritySchemas(r),i=super.createCombinedSchema(e,n);return i.getResolvedSchema().then((e=>(e.schema&&"string"!=typeof e.schema&&(e.schema.url=i.url),e.schema&&e.schema.schemaSequence&&e.schema.schemaSequence[t.currentDocIndex]?new Te(e.schema.schemaSequence[t.currentDocIndex]):e)))}return Promise.resolve(null)};return this.customSchemaProvider?this.customSchemaProvider(e).then((e=>Array.isArray(e)?0===e.length?n():Promise.all(e.map((e=>this.resolveCustomSchema(e,t)))).then((e=>({errors:[],schema:{anyOf:e.map((e=>e.schema))}})),(()=>n())):e?this.resolveCustomSchema(e,t):n())).then((e=>e),(()=>n())):n()}addSchemaPriority(e,t){let n=this.schemaPriorityMapping.get(e);n?(n=n.add(t),this.schemaPriorityMapping.set(e,n)):this.schemaPriorityMapping.set(e,(new Set).add(t))}highestPrioritySchemas(e){let t=0;const n=new Map;return e.forEach((e=>{(this.schemaPriorityMapping.get(e)||[0]).forEach((r=>{r>t&&(t=r);let i=n.get(r);i?(i=i.concat(e),n.set(r,i)):n.set(r,[e])}))})),n.get(t)||[]}resolveCustomSchema(e,t){return Gi(this,void 0,void 0,(function*(){const n=yield this.loadSchema(e),r=yield this.resolveSchemaContent(n,e,[]);return r.schema&&(r.schema.url=e),r.schema&&r.schema.schemaSequence&&r.schema.schemaSequence[t.currentDocIndex]?new Te(r.schema.schemaSequence[t.currentDocIndex]):r}))}saveSchema(e,t){return Gi(this,void 0,void 0,(function*(){const n=this.normalizeId(e);return this.getOrAddSchemaHandle(n,t),this.schemaPriorityMapping.set(n,(new Set).add(Lo.Settings)),Promise.resolve(void 0)}))}deleteSchemas(e){return Gi(this,void 0,void 0,(function*(){return e.schemas.forEach((e=>{this.deleteSchema(e)})),Promise.resolve(void 0)}))}deleteSchema(e){return Gi(this,void 0,void 0,(function*(){const t=this.normalizeId(e);return this.schemasById[t]&&delete this.schemasById[t],this.schemaPriorityMapping.delete(t),Promise.resolve(void 0)}))}addContent(e){return Gi(this,void 0,void 0,(function*(){const t=yield this.getResolvedSchema(e.schema);if(t){const n=this.resolveJSONSchemaToSection(t.schema,e.path);"object"==typeof n&&(n[e.key]=e.content),yield this.saveSchema(e.schema,t.schema)}}))}deleteContent(e){return Gi(this,void 0,void 0,(function*(){const t=yield this.getResolvedSchema(e.schema);if(t){const n=this.resolveJSONSchemaToSection(t.schema,e.path);"object"==typeof n&&delete n[e.key],yield this.saveSchema(e.schema,t.schema)}}))}resolveJSONSchemaToSection(e,t){const n=t.split("/");let r=e;for(const e of n)""!==e&&(this.resolveNext(r,e),r=r[e]);return r}resolveNext(e,t){if(Array.isArray(e)&&isNaN(t))throw new Error("Expected a number after the array object");if("object"==typeof e&&"string"!=typeof t)throw new Error("Expected a string after the object")}normalizeId(e){try{return s.parse(e).toString()}catch(t){return e}}getOrAddSchemaHandle(e,t){return super.getOrAddSchemaHandle(e,t)}loadSchema(e){const t=this.requestService;return super.loadSchema(e).then((n=>{if(n.errors&&void 0===n.schema)return t(e).then((t=>{if(!t){const t=Yi("json.schema.nocontent","Unable to load schema from '{0}': No content.",eo(e));return new xe({},[t])}try{const e=Er(t);return new xe(e,[])}catch(t){const n=Yi("json.schema.invalidFormat","Unable to parse content from '{0}': {1}.",eo(e),t);return new xe({},[n])}}),(e=>{let t=e.toString();const n=e.toString().split("Error: ");return n.length>1&&(t=n[1]),new xe({},[t])}));if(n.uri=e,this.schemaUriToNameAndDescription.has(e)){const[t,r]=this.schemaUriToNameAndDescription.get(e);n.schema.title=null!=t?t:n.schema.title,n.schema.description=null!=r?r:n.schema.description}return n}))}registerExternalSchema(e,t,n,r,i){return(r||i)&&this.schemaUriToNameAndDescription.set(e,[r,i]),super.registerExternalSchema(e,t,n)}clearExternalSchemas(){super.clearExternalSchemas()}setSchemaContributions(e){super.setSchemaContributions(e)}getRegisteredSchemaIds(e){return super.getRegisteredSchemaIds(e)}getResolvedSchema(e){return super.getResolvedSchema(e)}onResourceChange(e){return super.onResourceChange(e)}}function eo(e){try{const t=s.parse(e);if("file"===t.scheme)return t.fsPath}catch(e){}return e}class to{constructor(e,t){this.telemetry=t,this.jsonDocumentSymbols=new zr(e),this.jsonDocumentSymbols.getKeyLabel=e=>{const t=e.keyNode.internalNode;let n="";return n=$e(t)?"{}":Ue(t)?"[]":t.source,n}}findDocumentSymbols(e,t={resultLimit:Number.MAX_VALUE}){let n=[];try{const r=Vi.getYamlDocument(e);if(!r||0===r.documents.length)return null;for(const i of r.documents)i.root&&(n=n.concat(this.jsonDocumentSymbols.findDocumentSymbols(e,i,t)))}catch(e){this.telemetry.sendError("yaml.documentSymbols.error",{error:e.toString()})}return n}findHierarchicalDocumentSymbols(e,t={resultLimit:Number.MAX_VALUE}){let n=[];try{const r=Vi.getYamlDocument(e);if(!r||0===r.documents.length)return null;for(const i of r.documents)i.root&&(n=n.concat(this.jsonDocumentSymbols.findDocumentSymbols2(e,i,t)))}catch(e){this.telemetry.sendError("yaml.hierarchicalDocumentSymbols.error",{error:e.toString()})}return n}}function no(e,t){for(const n of e)n.isKubernetes=t}function ro(e,t){for(const n in t){const r=t[n];if(new Qi(r).matchesPattern(e.uri))return!0}return!1}class io{constructor(e,t){this.telemetry=t,this.shouldHover=!0,this.schemaService=e}configure(e){e&&(this.shouldHover=e.hover)}doHover(e,t,n=!1){try{if(!this.shouldHover||!e)return Promise.resolve(void 0);const r=Vi.getYamlDocument(e),i=ai(e.offsetAt(t),r);if(null===i)return Promise.resolve(void 0);no(r.documents,n);const o=r.documents.indexOf(i);return i.currentDocIndex=o,this.getHover(e,t,i)}catch(e){this.telemetry.sendError("yaml.hover.error",{error:e.toString()})}}getHover(e,t,n){const r=e.offsetAt(t);let i=n.getNodeFromOffset(r);if(!i||("object"===i.type||"array"===i.type)&&r>i.offset+1&&r<i.offset+i.length-1)return Promise.resolve(null);const o=i;if("string"===i.type){const e=i.parent;if(e&&"property"===e.type&&e.keyNode===i&&(i=e.valueNode,!i))return Promise.resolve(null)}const a=Y.Range.create(e.positionAt(o.offset),e.positionAt(o.offset+o.length));return this.schemaService.getSchemaForResource(e.uri,n).then((e=>{if(e&&i&&!e.errors.length){let r,o,c,l;n.getMatchingSchemas(e.schema,i.offset).every((e=>{if(e.node===i&&!e.inverted&&e.schema&&(r=r||e.schema.title,o=o||e.schema.markdownDescription||oo(e.schema.description),e.schema.enum)){const t=e.schema.enum.indexOf(Ai(i));e.schema.markdownEnumDescriptions?c=e.schema.markdownEnumDescriptions[t]:e.schema.enumDescriptions&&(c=oo(e.schema.enumDescriptions[t])),c&&(l=e.schema.enum[t],"string"!=typeof l&&(l=JSON.stringify(l)))}return!0}));let u="";return r&&(u="#### "+oo(r)),o&&(u.length>0&&(u+="\n\n"),u+=o),c&&(u.length>0&&(u+="\n\n"),u+=`\`${t=l,-1!==t.indexOf("`")?"`` "+t+" ``":t}\`: ${c}`),u.length>0&&e.schema.url&&(u+=`\n\nSource: [${function(e){let t="JSON Schema";const n=e.url;if(n){const e=s.parse(n);t=S.basename(e.fsPath)}else e.title&&(t=e.title);return t}(e.schema)}](${e.schema.url})`),{contents:{kind:"markdown",value:u},range:a}}var t;return null}))}}function oo(e){if(e)return e.replace(/([^\n\r])(\r?\n)([^\n\r])/gm,"$1\n\n$3").replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}class so{constructor(e){this.doc=e}getLineCount(){return this.doc.lineCount}getLineLength(e){const t=this.doc.getLineOffsets();return e>=t.length?this.doc.getText().length:e<0?0:(e+1<t.length?t[e+1]:this.doc.getText().length)-t[e]}getLineContent(e){const t=this.doc.getLineOffsets();if(e>=t.length)return this.doc.getText();if(e<0)return"";const n=e+1<t.length?t[e+1]:this.doc.getText().length;return this.doc.getText().substring(t[e],n)}getLineCharCode(e,t){return this.doc.getText(Y.Range.create(e-1,t-1,e-1,t)).charCodeAt(0)}getText(e){return this.doc.getText(e)}getPosition(e){return this.doc.positionAt(e)}}const ao=(e,n)=>{const r=n.positionAt(e.location.start),i={start:r,end:e.location.toLineEnd?t.Position.create(r.line,new so(n).getLineLength(r.line)):n.positionAt(e.location.end)};return t.Diagnostic.create(i,e.message,e.severity,e.code,fi)};class co{constructor(e){this.MATCHES_MULTIPLE="Matches multiple schemas when only one must validate.",this.validationEnabled=!0,this.jsonValidation=new $r(e,Promise)}configure(e){e&&(this.validationEnabled=e.validate,this.customTags=e.customTags,this.disableAdditionalProperties=e.disableAdditionalProperties,this.yamlVersion=e.yamlVersion)}doValidation(e,t=!1){return n=this,r=void 0,o=function*(){if(!this.validationEnabled)return Promise.resolve([]);const n=[];try{const r=Vi.getYamlDocument(e,{customTags:this.customTags,yamlVersion:this.yamlVersion},!0);let i=0;for(const o of r.documents){o.isKubernetes=t,o.currentDocIndex=i,o.disableAdditionalProperties=this.disableAdditionalProperties;const r=yield this.jsonValidation.doValidation(e,o),s=o;s.errors.length>0&&n.push(...s.errors),s.warnings.length>0&&n.push(...s.warnings),n.push(...r),i++}}catch(e){console.error(e.toString())}let r;const i=new Set,o=[];for(let s of n){if(t&&s.message===this.MATCHES_MULTIPLE)continue;if(Object.prototype.hasOwnProperty.call(s,"location")&&(s=ao(s,e)),s.source||(s.source=fi),r&&r.message===s.message&&r.range.end.line===s.range.start.line&&Math.abs(r.range.end.character-s.range.end.character)>=1){r.range.end=s.range.end;continue}r=s;const n=s.range.start.line+" "+s.range.start.character+" "+s.message;i.has(n)||(o.push(s),i.add(n))}return o},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,a)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o}}var lo,uo=n(8533);class ho{constructor(e){this.telemetry=e}findLinks(e){try{const t=Vi.getYamlDocument(e),n=[];for(const r of t.documents)n.push(ri(e,r));return Promise.all(n).then((e=>[].concat(...e)))}catch(e){this.telemetry.sendError("yaml.documentLink.error",{error:e.toString()})}}}function fo(e,t){if(!e)return;const n=[],r=Vi.getYamlDocument(e);for(const t of r.documents)t.visit((t=>{var r;return("property"===t.type&&"array"===t.valueNode.type||"object"===t.type&&"array"===(null===(r=t.parent)||void 0===r?void 0:r.type))&&n.push(mo(e,t)),"property"===t.type&&"object"===t.valueNode.type&&n.push(mo(e,t)),!0}));const i=t&&t.rangeLimit;return"number"!=typeof i||n.length<=i?n:(t&&t.onRangeLimitExceeded&&t.onRangeLimitExceeded(e.uri),n.slice(0,t.rangeLimit))}function mo(e,n){const r=e.positionAt(n.offset);let i=e.positionAt(n.offset+n.length);const o=e.getText(t.Range.create(r,i)),s=o.length-o.trimRight().length;return s>0&&(i=e.positionAt(n.offset+n.length-s)),t.FoldingRange.create(r.line,i.line,r.character,i.character)}!function(e){e.JUMP_TO_SCHEMA="jumpToSchema"}(lo||(lo={}));class po{constructor(e){this.clientCapabilities=e,this.indentation="  "}configure(e){this.indentation=e.indentation}getCodeAction(e,t){if(!t.context.diagnostics)return;const n=[];return n.push(...this.getJumpToSchemaActions(t.context.diagnostics)),n.push(...this.getTabToSpaceConverting(t.context.diagnostics,e)),n}getJumpToSchemaActions(e){var n,r,i,o,s;if(null===(o=null===(i=null===(r=null===(n=this.clientCapabilities)||void 0===n?void 0:n.window)||void 0===r?void 0:r.showDocument)||void 0===i?void 0:i.support)||void 0===o||!o)return[];const a=new Map;for(const t of e){const e=(null===(s=t.data)||void 0===s?void 0:s.schemaUri)||[];for(const n of e)n&&(a.has(n)||a.set(n,[]),a.get(n).push(t))}const c=[];for(const e of a.keys()){const n=t.CodeAction.create(`Jump to schema location (${S.basename(e)})`,t.Command.create("JumpToSchema",lo.JUMP_TO_SCHEMA,e));n.diagnostics=a.get(e),c.push(n)}return c}getTabToSpaceConverting(e,n){const r=[],i=new so(n),o=[];for(const s of e)if("Using tabs can lead to unpredictable results"===s.message){if(o.includes(s.range.start.line))continue;const e=i.getLineContent(s.range.start.line);let a=0,c="";for(let t=s.range.start.character;t<=s.range.end.character&&"\t"===e.charAt(t);t++)a++,c+=this.indentation;o.push(s.range.start.line);let l=s.range;a!==s.range.end.character-s.range.start.character&&(l=t.Range.create(s.range.start,t.Position.create(s.range.end.line,s.range.start.character+a))),r.push(t.CodeAction.create("Convert Tab to Spaces",go(n.uri,[t.TextEdit.replace(l,c)]),t.CodeActionKind.QuickFix))}if(0!==r.length){const e=[];for(let n=0;n<=i.getLineCount();n++){const r=i.getLineContent(n);let o=0,s="";for(let i=0;i<r.length;i++){const a=r.charAt(i);if(" "!==a&&"\t"!==a){0!==o&&(e.push(t.TextEdit.replace(t.Range.create(n,i-o,n,i),s)),o=0,s="");break}" "!==a||0===o?"\t"===a&&(s+=this.indentation,o++):(e.push(t.TextEdit.replace(t.Range.create(n,i-o,n,i),s)),o=0,s="")}0!==o&&e.push(t.TextEdit.replace(t.Range.create(n,0,n,i.getLineLength(n)),s))}e.length>0&&r.push(t.CodeAction.create("Convert all Tabs to Spaces",go(n.uri,e),t.CodeActionKind.QuickFix))}return r}}function go(e,t){const n={};return n[e]=t,{changes:n}}const yo=new class{constructor(){this.commands=new Map}executeCommand(e){if(this.commands.has(e.command))return this.commands.get(e.command)(...e.arguments);throw new Error(`Command '${e.command}' not found`)}registerCommand(e,t){this.commands.set(e,t)}};function vo(e,n){const{position:r}=n,i=new so(e);if("\n"===n.ch){const e=i.getLineContent(r.line-1);if(e.trimRight().endsWith(":")){const o=i.getLineContent(r.line),s=o.substring(r.character,o.length),a=-1!==e.indexOf(" - ");if(0===s.trimRight().length){const i=r.character-(e.length-e.trimLeft().length);if(i===n.options.tabSize&&!a)return;const s=[];return o.length>0&&s.push(t.TextEdit.del(t.Range.create(r,t.Position.create(r.line,o.length-1)))),s.push(t.TextEdit.insert(r," ".repeat(n.options.tabSize+(a?2-i:0)))),s}if(a)return[t.TextEdit.insert(r," ".repeat(n.options.tabSize))]}if(e.trimRight().endsWith("|"))return[t.TextEdit.insert(r," ".repeat(n.options.tabSize))];if(e.includes(" - ")&&!e.includes(": "))return[t.TextEdit.insert(r,"- ")];if(e.includes(" - ")&&e.includes(": "))return[t.TextEdit.insert(r,"  ")]}}const bo="https://raw.githubusercontent.com/yannh/kubernetes-json-schema/master/v1.20.5-standalone-strict/all.json",So="https://www.schemastore.org/api/json/catalog.json";function wo(e,t,n,r){return"kubernetes"===n.trim().toLowerCase()?(r.send({name:"yaml.schema.configured",properties:{kubernetes:!0}}),bo):w(n)?k(e,t,n):n}function ko(e){const t=new Map;return e?(e.url?e.url.startsWith("schemaservice://combinedSchema/")?xo(e,t):t.set(e.url,e):xo(e,t),t):t}function xo(e,t){e.allOf&&To(e.allOf,t),e.anyOf&&To(e.anyOf,t),e.oneOf&&To(e.oneOf,t)}function To(e,t){for(const n of e)Mr(n)||n.url&&!t.has(n.url)&&t.set(n.url,n)}class Co{constructor(e,t){this.schemaService=e,this.telemetry=t}getCodeLens(e,t){return n=this,r=void 0,o=function*(){const t=[];try{const n=Vi.getYamlDocument(e);for(const r of n.documents){const n=yield this.schemaService.getSchemaForResource(e.uri,r);if(null==n?void 0:n.schema){const e=ko(null==n?void 0:n.schema);if(0===e.size)continue;for(const n of e){const e=Y.CodeLens.create(Y.Range.create(0,0,0,0));e.command={title:Ro(n[0],n[1]),command:lo.JUMP_TO_SCHEMA,arguments:[n[0]]},t.push(e)}}}}catch(e){this.telemetry.sendError("yaml.codeLens.error",{error:e.toString()})}return t},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,a)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o}resolveCodeLens(e){return e}}function Ro(e,t){const n=s.parse(e);let r=S.basename(n.fsPath);return S.extname(n.fsPath)||(r+=".json"),Object.getOwnPropertyDescriptor(t,"name")?Object.getOwnPropertyDescriptor(t,"name").value+` (${r})`:t.title?t.title+` (${r})`:r}var Oo=n(8212);class Ao{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function Po(e,t,n,r,i){let o;for(i.spacesDiff=0,i.looksLikeAlignment=!1,o=0;o<t&&o<r&&e.charCodeAt(o)===n.charCodeAt(o);o++);let s=0,a=0;for(let n=o;n<t;n++)32===e.charCodeAt(n)?s++:a++;let c=0,l=0;for(let e=o;e<r;e++)32===n.charCodeAt(e)?c++:l++;if(s>0&&a>0)return;if(c>0&&l>0)return;const u=Math.abs(a-l),h=Math.abs(s-c);if(0===u)return i.spacesDiff=h,void(h>0&&0<=c-1&&c-1<e.length&&c<n.length&&32!==n.charCodeAt(c)&&32===e.charCodeAt(c-1)&&44===e.charCodeAt(e.length-1)&&(i.looksLikeAlignment=!0));h%u!=0||(i.spacesDiff=h/u)}function Eo(e,t,n,r,i=0,o=0){if(null!==e&&"object"==typeof e){const s=0===i&&r.shouldIndentWithTab||i>0?t+"  ":"";if(Array.isArray(e)){if(o+=1,0===e.length)return"";let a="";for(let c=0;c<e.length;c++){let l=e[c];Array.isArray(e[c])||(l=_o(e[c],o)),a+=s+Eo(l,t,n,r,i+=1,o),c<e.length-1&&(a+="\n")}return a+=t,a}{const o=Object.keys(e);if(0===o.length)return"";let a=0===i&&r.newLineFirst||i>0?"\n":"";for(let c=0;c<o.length;c++){const l=o[c];0!==i||0!==c||r.indentFirstObject?a+=s+l+": "+Eo(e[l],s,n,r,i+=1,0):a+=t+l+": "+Eo(e[l],s,n,r,i+=1,0),c<o.length-1&&(a+="\n")}return a+=t,a}}return n(e)}function _o(e,t){const n={};for(let r=0;r<Object.keys(e).length;r++){const i=Object.keys(e)[r];0===r?n["- ".repeat(t)+i]=e[i]:n["  ".repeat(t)+i]=e[i]}return n}const Do=Pe.loadMessageBundle(),No=/[\\]+"/g;class Mo{constructor(e,t={},n,r){this.schemaService=e,this.clientCapabilities=t,this.yamlDocument=n,this.telemetry=r,this.completionEnabled=!0}configure(e){e&&(this.completionEnabled=e.completion),this.customTags=e.customTags,this.yamlVersion=e.yamlVersion,this.configuredIndentation=e.indentation}doComplete(e,t,n=!1){return r=this,i=void 0,s=function*(){const r=Oo.CompletionList.create([],!1);if(!this.completionEnabled)return r;const i=this.yamlDocument.getYamlDocument(e,{customTags:this.customTags,yamlVersion:this.yamlVersion},!0),o=new so(e);if(this.configuredIndentation)this.indentation=this.configuredIndentation;else{const e=function(e,t,n){const r=Math.min(e.getLineCount(),1e4);let i=0,o=0,s="",a=0;const c=[2,4,6,8,3,5,7],l=[0,0,0,0,0,0,0,0,0],u=new Ao;for(let t=1;t<=r;t++){const n=e.getLineLength(t),r=e.getLineContent(t),c=n<=65536;let h=!1,f=0,d=0,m=0;for(let i=0,o=n;i<o;i++){const n=c?r.charCodeAt(i):e.getLineCharCode(t,i);if(9===n)m++;else{if(32!==n){h=!0,f=i;break}d++}}if(!h)continue;if(m>0?i++:d>1&&o++,Po(s,a,r,f,u),u.looksLikeAlignment&&2!==u.spacesDiff)continue;const p=u.spacesDiff;p<=8&&l[p]++,s=r,a=f}let h=!0;i!==o&&(h=i<o);let f=2;if(h){let e=h?0:.1*r;c.forEach((t=>{const n=l[t];n>e&&(e=n,f=t)})),4===f&&l[4]>0&&l[2]>0&&l[2]>=l[4]/2&&(f=2)}return{insertSpaces:h,tabSize:f}}(o);this.indentation=e.insertSpaces?" ".repeat(e.tabSize):"\t"}no(i.documents,n);const s=e.offsetAt(t);if(":"===e.getText().charAt(s-1))return Promise.resolve(r);const a=ai(s,i);if(null===a)return Promise.resolve(r);let[c,l]=a.getNodeFromPosition(s,o);const u=this.getCurrentWord(e,s);let h=null;if(c&&Ve(c)&&"null"===c.value){const t=e.positionAt(c.range[0]);t.character+=1;const n=e.positionAt(c.range[2]);n.character+=1,h=Oo.Range.create(t,n)}else if(c&&Ve(c)&&c.value){const t=e.positionAt(c.range[0]);s>0&&t.character>0&&"-"===e.getText().charAt(s-1)&&(t.character-=1),h=Oo.Range.create(t,e.positionAt(c.range[1]))}else{let n=e.offsetAt(t)-u.length;n>0&&'"'===e.getText()[n-1]&&n--,h=Oo.Range.create(e.positionAt(n),t)}const f={},d={add:e=>{let t=e.label;if(t){if(Ir(t)||(t=String(t)),!f[t]){if(t=t.replace(/[\n]/g,"↵"),t.length>60){const e=t.substr(0,57).trim()+"...";f[e]||(t=e)}h&&h.start.line===h.end.line&&(e.textEdit=Oo.TextEdit.replace(h,e.insertText)),e.label=t,f[t]=e,r.items.push(e)}}else console.warn(`Ignoring CompletionItem without label: ${JSON.stringify(e)}`)},error:e=>{console.error(e),this.telemetry.sendError("yaml.completion.error",{error:e})},log:e=>{console.log(e)},getNumberOfProposals:()=>r.items.length};this.customTags.length>0&&this.getCustomTagValueCompletions(d);let m=o.getLineContent(t.line);m.endsWith("\n")&&(m=m.substr(0,m.length-1));try{const n=yield this.schemaService.getSchemaForResource(e.uri,a);if((!n||n.errors.length)&&0===t.line&&0===t.character&&!Ji(m)){const e={kind:Oo.CompletionItemKind.Text,label:"Inline schema",insertText:"# yaml-language-server: $schema=",insertTextFormat:Oo.InsertTextFormat.PlainText};r.items.push(e)}if(Ji(m)||function(e,t){let n=!1;for(const r of e){if("document"===r.type)Li([],r,(e=>{var i;if(Fi(e)&&"comment"===(null===(i=e.value)||void 0===i?void 0:i.type)){if(r.offset<=t&&e.value.source.length+e.value.offset>=t)return n=!0,Ye.BREAK}else if("comment"===e.type&&e.offset<=t&&e.offset+e.source.length>=t)return n=!0,Ye.BREAK}));else if("comment"===r.type&&r.offset<=t&&r.source.length+r.offset>=t)return!0;if(n)break}return n}(i.tokens,s)){const e=m.indexOf("$schema=");return-1!==e&&e+"$schema=".length<=t.character&&this.schemaService.getAllSchemas().forEach((e=>{var t;const n={kind:Oo.CompletionItemKind.Constant,label:null!==(t=e.name)&&void 0!==t?t:e.uri,detail:e.description,insertText:e.uri,insertTextFormat:Oo.InsertTextFormat.PlainText,insertTextMode:Oo.InsertTextMode.asIs};r.items.push(n)})),r}if(!n||n.errors.length)return r;let p=null;if(!c)if(!a.internalDocument.contents||Ve(a.internalDocument.contents)){const e=a.internalDocument.createNode({});e.range=[s,s+1,s+1],a.internalDocument.contents=e,a.internalDocument=a.internalDocument,c=e}else c=a.findClosestNode(s,o),l=!0;if(c)if(0===m.length)c=a.internalDocument.contents;else{const n=a.getParent(c);if(n){if(Ve(c)){if(c.value){if(We(n)){if(n.value===c){if(m.trim().length>0&&m.indexOf(":")<0){const e=this.createTempObjNode(u,c,a);if(Ue(a.internalDocument.contents)){const t=function(e,t){for(const[n,r]of e.items.entries())if(t===r)return n}(a.internalDocument.contents,n);"number"==typeof t&&(a.internalDocument.set(t,e),a.internalDocument=a.internalDocument)}else a.internalDocument.set(n.key,e),a.internalDocument=a.internalDocument;p=e.items[0],c=e}else if(0===m.trim().length){const e=a.getParent(n);e&&(c=e)}}else if(n.key===c){const e=a.getParent(n);p=n,e&&(c=e)}}else if(Ue(n))if(m.trim().length>0){const e=this.createTempObjNode(u,c,a);n.delete(c),n.add(e),a.internalDocument=a.internalDocument,c=e}else c=n}else if(null===c.value)if(We(n)){if(n.key===c)c=n;else if(Ke(n.key)&&n.key.range){const r=a.getParent(n);if(l&&r&&$e(r)&&qi(r))c=r;else{const i=e.positionAt(n.key.range[0]);if(t.character>i.character&&t.line!==i.line){const e=this.createTempObjNode(u,c,a);r&&($e(r)||Ue(r))?(r.set(n.key,e),a.internalDocument=a.internalDocument):(a.internalDocument.set(n.key,e),a.internalDocument=a.internalDocument),p=e.items[0],c=e}else i.character===t.character&&r&&(c=r)}}}else if(Ue(n))if("-"!==m.charAt(t.character-1)){const e=this.createTempObjNode(u,c,a);n.delete(c),n.add(e),a.internalDocument=a.internalDocument,c=e}else c=n}else if($e(c)&&!l&&0===m.trim().length&&Ue(n)){const e=o.getLineContent(t.line+1);o.getLineCount()!==t.line+1&&0!==e.trim().length||(c=n)}}else if(Ve(c)){const e=this.createTempObjNode(u,c,a);a.internalDocument.contents=e,a.internalDocument=a.internalDocument,p=e.items[0],c=e}else if($e(c))for(const e of c.items)Ke(e.value)&&e.value.range&&e.value.range[0]===s+1&&(c=e.value)}if(c&&$e(c)){const t=c.items;for(const e of t)p&&p===e||Ve(e.key)&&(f[e.key.value.toString()]=Oo.CompletionItem.create("__"));this.addPropertyCompletions(n,a,c,"",d,o,h),!n&&u.length>0&&'"'!==e.getText().charAt(s-u.length-1)&&d.add({kind:Oo.CompletionItemKind.Property,label:u,insertText:this.getInsertTextForProperty(u,null,""),insertTextFormat:Oo.InsertTextFormat.Snippet})}const g={};this.getValueCompletions(n,a,c,s,e,d,g)}catch(e){e.stack?console.error(e.stack):console.error(e),this.telemetry.sendError("yaml.completion.error",{error:e})}return r},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{c(s.next(e))}catch(e){t(e)}}function a(e){try{c(s.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof o?r:new o((function(e){e(r)}))).then(n,a)}c((s=s.apply(r,i||[])).next())}));var r,i,o,s}createTempObjNode(e,t,n){const r={};r[e]=null;const i=n.internalDocument.createNode(r);return i.range=t.range,i.items[0].key.range=t.range,i.items[0].value.range=t.range,i}addPropertyCompletions(e,t,n,r,i,o,s){const a=t.getMatchingSchemas(e.schema),c=o.getText(s),l=-1===o.getLineContent(s.start.line).indexOf(":"),u=t.getParent(n);for(const e of a){if(e.node.internalNode===n&&!e.inverted){this.collectDefaultSnippets(e.schema,r,i,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!1});const t=e.schema.properties;if(t){const a=e.schema.maxProperties;if(void 0===a||void 0===n.items||n.items.length<a||qi(n))for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const a=t[e];if("object"==typeof a&&!a.deprecationMessage&&!a.doNotSuggest){let t,h="";if(u&&Ue(u)&&n.items.length<=1){const e=o.getText(),t=e.lastIndexOf("-",n.range[0]-1);t>=0&&(h=" "+e.slice(t+1,n.range[0]))}"array"===a.type&&(t=n.items.find((t=>Ve(t.key)&&t.key.range&&t.key.value===e&&Ve(t.value)&&!t.value.value&&o.getPosition(t.key.range[2]).line===s.end.line-1)))&&t&&(Array.isArray(a.items)?this.addSchemaValueCompletions(a.items[0],r,i,{}):"object"==typeof a.items&&"object"===a.items.type&&i.add({kind:this.getSuggestionKind(a.items.type),label:"- (array item)",documentation:"Create an item of an array"+(void 0===a.description?"":"("+a.description+")"),insertText:`- ${this.getInsertTextForObject(a.items,r,"  ").insertText.trimLeft()}`,insertTextFormat:Oo.InsertTextFormat.Snippet}));let f=e;e.startsWith(c)&&!l||(f=this.getInsertTextForProperty(e,a,r,h+this.indentation)),i.add({kind:Oo.CompletionItemKind.Property,label:e,insertText:f,insertTextFormat:Oo.InsertTextFormat.Snippet,documentation:this.fromMarkup(a.markdownDescription)||a.description||""})}}}u&&Ue(u)&&"object"!==e.schema.type&&this.addSchemaValueCompletions(e.schema,r,i,{})}u&&e.node.internalNode===u&&e.schema.defaultSnippets&&(1===n.items.length?this.collectDefaultSnippets(e.schema,r,i,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!0},1):this.collectDefaultSnippets(e.schema,r,i,{newLineFirst:!1,indentFirstObject:!0,shouldIndentWithTab:!1},1))}}getValueCompletions(e,t,n,r,i,o,s){let a=null;if(n&&Ve(n)&&(n=t.getParent(n)),n){if(We(n)){const e=n.value;if(e&&e.range&&r>e.range[0]+e.range[2])return;a=Ve(n.key)?n.key.value.toString():null,n=t.getParent(n)}if(n&&(null!==a||Ue(n))){const c="",l=t.getMatchingSchemas(e.schema);for(const e of l)if(e.node.internalNode===n&&!e.inverted&&e.schema){if(e.schema.items&&(this.collectDefaultSnippets(e.schema,c,o,{newLineFirst:!1,indentFirstObject:!1,shouldIndentWithTab:!1}),Ue(n)&&n.items))if(Array.isArray(e.schema.items)){const t=this.findItemAtOffset(n,i,r);t<e.schema.items.length&&this.addSchemaValueCompletions(e.schema.items[t],c,o,s)}else"object"==typeof e.schema.items&&"object"===e.schema.items.type?(o.add({kind:this.getSuggestionKind(e.schema.items.type),label:"- (array item)",documentation:"Create an item of an array"+(void 0===e.schema.description?"":"("+e.schema.description+")"),insertText:`- ${this.getInsertTextForObject(e.schema.items,c,"  ").insertText.trimLeft()}`,insertTextFormat:Oo.InsertTextFormat.Snippet}),this.addSchemaValueCompletions(e.schema.items,c,o,s)):"object"==typeof e.schema.items&&e.schema.items.anyOf?(e.schema.items.anyOf.filter((e=>"object"==typeof e)).forEach(((t,n)=>{const r=`- ${this.getInsertTextForObject(t,c).insertText.trimLeft()}`,i=this.getDocumentationWithMarkdownText("Create an item of an array"+(void 0===e.schema.description?"":"("+e.schema.description+")"),r);o.add({kind:this.getSuggestionKind(t.type),label:"- (array item) "+(n+1),documentation:i,insertText:r,insertTextFormat:Oo.InsertTextFormat.Snippet})})),this.addSchemaValueCompletions(e.schema.items,c,o,s)):this.addSchemaValueCompletions(e.schema.items,c,o,s);if(e.schema.properties){const t=e.schema.properties[a];t&&this.addSchemaValueCompletions(t,c,o,s)}}s.boolean&&(this.addBooleanValueCompletion(!0,c,o),this.addBooleanValueCompletion(!1,c,o)),s.null&&this.addNullValueCompletion(c,o)}}else this.addSchemaValueCompletions(e.schema,"",o,s)}getInsertTextForProperty(e,t,n,r=this.indentation){const i=this.getInsertTextForValue(e,"","string"),o=i+":";let s,a=0;if(t){let e=Array.isArray(t.type)?t.type[0]:t.type;if(e||(t.properties?e="object":t.items&&(e="array")),Array.isArray(t.defaultSnippets)){if(1===t.defaultSnippets.length){const e=t.defaultSnippets[0].body;Nr(e)&&(s=this.getInsertTextForSnippetValue(e,"",{newLineFirst:!0,indentFirstObject:!1,shouldIndentWithTab:!1},1),s.startsWith(" ")||s.startsWith("\n")||(s=" "+s))}a+=t.defaultSnippets.length}if(t.enum&&(s||1!==t.enum.length||(s=" "+this.getInsertTextForGuessedValue(t.enum[0],"",e)),a+=t.enum.length),Nr(t.default)&&(s||(s=" "+this.getInsertTextForGuessedValue(t.default,"",e)),a++),Array.isArray(t.examples)&&t.examples.length&&(s||(s=" "+this.getInsertTextForGuessedValue(t.examples[0],"",e)),a+=t.examples.length),t.properties)return`${o}\n${this.getInsertTextForObject(t,n,r).insertText}`;if(t.items)return`${o}\n${this.indentation}- ${this.getInsertTextForArray(t.items,n).insertText}`;if(0===a)switch(e){case"boolean":case"string":s=" $1";break;case"object":s=`\n${r}`;break;case"array":s=`\n${r}- `;break;case"number":case"integer":s=" ${1:0}";break;case"null":s=" ${1:null}";break;default:return i}}return(!s||a>1)&&(s=" $1"),o+s+n}getInsertTextForObject(e,t,n=this.indentation,r=1){let i="";return e.properties?(Object.keys(e.properties).forEach((o=>{const s=e.properties[o];let a=Array.isArray(s.type)?s.type[0]:s.type;if(a||(s.properties&&(a="object"),s.items&&(a="array")),e.required&&e.required.indexOf(o)>-1)switch(a){case"boolean":case"string":case"number":case"integer":i+=`${n}${o}: $${r++}\n`;break;case"array":{const e=this.getInsertTextForArray(s.items,t,r++),a=e.insertText.split("\n");let c=e.insertText;if(a.length>1){for(let e=1;e<a.length;e++){const t=a[e];a[e]=`${n}${this.indentation}  ${t.trimLeft()}`}c=a.join("\n")}r=e.insertIndex,i+=`${n}${o}:\n${n}${this.indentation}- ${c}\n`}break;case"object":{const e=this.getInsertTextForObject(s,t,`${n}${this.indentation}`,r++);r=e.insertIndex,i+=`${n}${o}:\n${e.insertText}\n`}}else if(void 0!==s.default)switch(a){case"boolean":case"number":case"integer":i+=`${n}${o}: \${${r++}:${s.default}}\n`;break;case"string":i+=`${n}${o}: \${${r++}:${jo(s.default)}}\n`}})),0===i.trim().length&&(i=`${n}$${r++}\n`),i=i.trimRight()+t,{insertText:i,insertIndex:r}):(i=`${n}$${r++}\n`,{insertText:i,insertIndex:r})}getInsertTextForArray(e,t,n=1){let r="";if(!e)return r="$"+n++,{insertText:r,insertIndex:n};let i=Array.isArray(e.type)?e.type[0]:e.type;switch(i||(e.properties&&(i="object"),e.items&&(i="array")),e.type){case"boolean":r=`\${${n++}:false}`;break;case"number":case"integer":r=`\${${n++}:0}`;break;case"string":r=`\${${n++}:""}`;break;case"object":{const i=this.getInsertTextForObject(e,t,`${this.indentation}  `,n++);r=i.insertText.trimLeft(),n=i.insertIndex}}return{insertText:r,insertIndex:n}}getInsertTextForGuessedValue(e,t,n){switch(typeof e){case"object":return null===e?"${1:null}"+t:this.getInsertTextForValue(e,t,n);case"string":{let r=JSON.stringify(e);return r=r.substr(1,r.length-2),r=this.getInsertTextForPlainText(r),"string"===n&&(r=jo(r)),"${1:"+r+"}"+t}case"number":case"boolean":return"${1:"+e+"}"+t}return this.getInsertTextForValue(e,t,n)}getInsertTextForPlainText(e){return e.replace(/[\\$}]/g,"\\$&")}getInsertTextForValue(e,t,n){if(null===e&&(e="null"),"object"==typeof e){const n=this.indentation;return this.getInsertTemplateForValue(e,n,{index:1},t)}return"string"===(n=Array.isArray(n)?n[0]:n)&&(e=jo(e)),this.getInsertTextForPlainText(e+t)}getInsertTemplateForValue(e,t,n,r){if(Array.isArray(e)){let r="\n";for(const i of e)r+=`${t}- \${${n.index++}:${i}}\n`;return r}if("object"==typeof e){let i="\n";for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const s=e[o];let a;i+=`${t}\${${n.index++}:${o}}:`,a="object"==typeof s?`${this.getInsertTemplateForValue(s,t+this.indentation,n,r)}`:` \${${n.index++}:${this.getInsertTextForPlainText(s+r)}}\n`,i+=`${a}`}return i}return this.getInsertTextForPlainText(e+r)}addSchemaValueCompletions(e,t,n,r){"object"==typeof e&&(this.addEnumValueCompletions(e,t,n),this.addDefaultValueCompletions(e,t,n),this.collectTypes(e,r),Array.isArray(e.allOf)&&e.allOf.forEach((e=>this.addSchemaValueCompletions(e,t,n,r))),Array.isArray(e.anyOf)&&e.anyOf.forEach((e=>this.addSchemaValueCompletions(e,t,n,r))),Array.isArray(e.oneOf)&&e.oneOf.forEach((e=>this.addSchemaValueCompletions(e,t,n,r))))}collectTypes(e,t){if(Array.isArray(e.enum)||Nr(e.const))return;const n=e.type;Array.isArray(n)?n.forEach((function(e){return t[e]=!0})):n&&(t[n]=!0)}addDefaultValueCompletions(e,t,n,r=0){let i=!1;if(Nr(e.default)){let o,s=e.type,a=e.default;for(let e=r;e>0;e--)a=[a],s="array";o="object"==typeof a?"Default value":a.toString().replace(No,'"'),n.add({kind:this.getSuggestionKind(s),label:o,insertText:this.getInsertTextForValue(a,t,s),insertTextFormat:Oo.InsertTextFormat.Snippet,detail:Do("json.suggest.default","Default value")}),i=!0}Array.isArray(e.examples)&&e.examples.forEach((o=>{let s=e.type,a=o;for(let e=r;e>0;e--)a=[a],s="array";n.add({kind:this.getSuggestionKind(s),label:this.getLabelForValue(a),insertText:this.getInsertTextForValue(a,t,s),insertTextFormat:Oo.InsertTextFormat.Snippet}),i=!0})),this.collectDefaultSnippets(e,t,n,{newLineFirst:!0,indentFirstObject:!0,shouldIndentWithTab:!0}),i||"object"!=typeof e.items||Array.isArray(e.items)||this.addDefaultValueCompletions(e.items,t,n,r+1)}addEnumValueCompletions(e,t,n){if(Nr(e.const)&&n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(e.const),insertText:this.getInsertTextForValue(e.const,t,void 0),insertTextFormat:Oo.InsertTextFormat.Snippet,documentation:this.fromMarkup(e.markdownDescription)||e.description}),Array.isArray(e.enum))for(let r=0,i=e.enum.length;r<i;r++){const i=e.enum[r];let o=this.fromMarkup(e.markdownDescription)||e.description;e.markdownEnumDescriptions&&r<e.markdownEnumDescriptions.length&&this.doesSupportMarkdown()?o=this.fromMarkup(e.markdownEnumDescriptions[r]):e.enumDescriptions&&r<e.enumDescriptions.length&&(o=e.enumDescriptions[r]),n.add({kind:this.getSuggestionKind(e.type),label:this.getLabelForValue(i),insertText:this.getInsertTextForValue(i,t,void 0),insertTextFormat:Oo.InsertTextFormat.Snippet,documentation:o})}}getLabelForValue(e){return null===e?"null":Array.isArray(e)?JSON.stringify(e):e}collectDefaultSnippets(e,t,n,r,i=0){if(Array.isArray(e.defaultSnippets))for(const o of e.defaultSnippets){let s,a,c=e.type,l=o.body,u=o.label;if(Nr(l)){const n=o.type||e.type;if(0===i&&"array"===n){const e={};Object.keys(l).forEach(((t,n)=>{0!==n||t.startsWith("-")?e[`  ${t}`]=l[t]:e[`- ${t}`]=l[t]})),l=e}s=this.getInsertTextForSnippetValue(l,t,r),u=u||this.getLabelForSnippetValue(l)}else if("string"==typeof o.bodyText){let e="",n="",r="";for(let t=i;t>0;t--)e=e+r+"[\n",n=n+"\n"+r+"]",r+=this.indentation,c="array";s=e+r+o.bodyText.split("\n").join("\n"+r)+n+t,u=u||s,a=s.replace(/[\n]/g,"")}n.add({kind:o.suggestionKind||this.getSuggestionKind(c),label:u,documentation:this.fromMarkup(o.markdownDescription)||o.description,insertText:s,insertTextFormat:Oo.InsertTextFormat.Snippet,filterText:a})}}getInsertTextForSnippetValue(e,t,n,r){return Eo(e,"",(e=>{if("string"==typeof e){if("^"===e[0])return e.substr(1);if("true"===e||"false"===e)return`"${e}"`}return e}),n,r)+t}addBooleanValueCompletion(e,t,n){n.add({kind:this.getSuggestionKind("boolean"),label:e?"true":"false",insertText:this.getInsertTextForValue(e,t,"boolean"),insertTextFormat:Oo.InsertTextFormat.Snippet,documentation:""})}addNullValueCompletion(e,t){t.add({kind:this.getSuggestionKind("null"),label:"null",insertText:"null"+e,insertTextFormat:Oo.InsertTextFormat.Snippet,documentation:""})}getLabelForSnippetValue(e){return JSON.stringify(e).replace(/\$\{\d+:([^}]+)\}|\$\d+/g,"$1")}getCustomTagValueCompletions(e){ci(this.customTags).forEach((t=>{const n=t.split(" ")[0];this.addCustomTagValueCompletion(e," ",n)}))}addCustomTagValueCompletion(e,t,n){e.add({kind:this.getSuggestionKind("string"),label:n,insertText:n+t,insertTextFormat:Oo.InsertTextFormat.Snippet,documentation:""})}getDocumentationWithMarkdownText(e,t){let n=e;return this.doesSupportMarkdown()&&(t=t.replace(/\${[0-9]+[:|](.*)}/g,((e,t)=>t)).replace(/\$([0-9]+)/g,""),n=this.fromMarkup(`${e}\n \`\`\`\n${t}\n\`\`\``)),n}getSuggestionKind(e){if(Array.isArray(e)){const t=e;e=t.length>0?t[0]:null}if(!e)return Oo.CompletionItemKind.Value;switch(e){default:return Oo.CompletionItemKind.Value;case"object":return Oo.CompletionItemKind.Module;case"property":return Oo.CompletionItemKind.Property}}getCurrentWord(e,t){let n=t-1;const r=e.getText();for(;n>=0&&-1===' \t\n\r\v":{[,]}'.indexOf(r.charAt(n));)n--;return r.substring(n+1,t)}fromMarkup(e){if(e&&this.doesSupportMarkdown())return{kind:Oo.MarkupKind.Markdown,value:e}}doesSupportMarkdown(){if(void 0===this.supportsMarkdown){const e=this.clientCapabilities.textDocument&&this.clientCapabilities.textDocument.completion;this.supportsMarkdown=e&&e.completionItem&&Array.isArray(e.completionItem.documentationFormat)&&-1!==e.completionItem.documentationFormat.indexOf(Oo.MarkupKind.Markdown)}return this.supportsMarkdown}findItemAtOffset(e,t,n){for(let t=e.items.length-1;t>=0;t--){const r=e.items[t];if(Ke(r)&&r.range){if(n>r.range[1])return t;if(n>=r.range[0])return t}}return 0}}const Io=/^\d+$/;function jo(e){if(0===e.length)return e;if("true"===e||"false"===e||"null"===e||Io.test(e))return`"${e}"`;-1!==e.indexOf('"')&&(e=e.replace(No,'"'));let t="@"===e.charAt(0);if(!t){let n=e.indexOf(":",0);for(;n>0&&n<e.length;n=e.indexOf(":",n+1)){if(n===e.length-1){t=!0;break}const r=e.charAt(n+1);if("\t"===r||" "===r){t=!0;break}}}return t&&(e=`"${e}"`),e}var qo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Fo{constructor(e,t,n){this.schemaService=e,this.yamlSettings=t,this.connection=n,this.connection.onRequest(y.getSchema,(e=>this.getSchemas(e))),this.connection.onRequest(y.getAllSchemas,(e=>this.getAllSchemas(e)))}getSchemas(e){return qo(this,void 0,void 0,(function*(){const t=yield this.getSchemasForFile(e);return Array.from(t).map((e=>({name:e[1].title,uri:e[0],description:e[1].description})))}))}getSchemasForFile(e){return qo(this,void 0,void 0,(function*(){const t=this.yamlSettings.documents.get(e),n=new Map;if(!t)return n;const r=Vi.getYamlDocument(t);for(const e of r.documents){const r=yield this.schemaService.getSchemaForResource(t.uri,e);if(null==r?void 0:r.schema){const e=ko(null==r?void 0:r.schema);if(0===e.size)continue;for(const t of e)n.set(t[0],t[1])}}return n}))}getAllSchemas(e){return qo(this,void 0,void 0,(function*(){const t=yield this.getSchemasForFile(e),n=Array.from(t.entries()).map((e=>({uri:e[0],fromStore:!1,usedForCurrentFile:!0,name:e[1].title,description:e[1].description}))),r=[];let i=this.schemaService.getAllSchemas();return i=i.filter((e=>!t.has(e.uri))),r.push(...n),r.push(...i),r}))}}var Lo,$o=n(152);function Wo(e,t){try{const n=Vi.getYamlDocument(e),r=e.offsetAt(t.position),i=ai(r,n);if(i){const[t]=i.getNodeFromPosition(r,new so(e));if(t&&Fe(t)){const n=t.resolve(i.internalDocument);if(n&&n.range){const t=$o.Range.create(e.positionAt(n.range[0]),e.positionAt(n.range[2])),r=$o.Range.create(e.positionAt(n.range[0]),e.positionAt(n.range[1]));return[$o.LocationLink.create(e.uri,t,r)]}}}}catch(e){this.telemetry.sendError("yaml.definition.error",{error:e.toString()})}}function Vo(e,t,n,r,i,o){const a=new Zi(e,t),c=new Mo(a,o,Vi,r),l=new io(a,r),u=new to(a,r),h=new co(a),f=new uo.l,d=new po(o),m=new Co(a,r),p=new ho(r);return new Fo(a,i,n),function(e,t){e.registerCommand(lo.JUMP_TO_SCHEMA,(e=>{return n=this,r=void 0,o=function*(){if(e){if(!e.startsWith("file")&&!/^[a-z]:[\\/]/i.test(e)){const t=s.parse(e),n=s.from({scheme:"json-schema",authority:t.authority,path:t.path.endsWith(".json")?t.path:t.path+".json",fragment:e});e=n.toString()}if(/^[a-z]:[\\/]/i.test(e)){const t=s.file(e);e=t.toString()}(yield t.window.showDocument({uri:e,external:!1,takeFocus:!0}))||t.window.showErrorMessage(`Cannot open ${e}`)}},new((i=void 0)||(i=Promise))((function(e,t){function s(e){try{c(o.next(e))}catch(e){t(e)}}function a(e){try{c(o.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(s,a)}c((o=o.apply(n,r||[])).next())}));var n,r,i,o}))}(yo,n),{configure:e=>{a.clearExternalSchemas(),e.schemas&&(a.schemaPriorityMapping=new Map,e.schemas.forEach((e=>{const t=e.priority?e.priority:0;a.addSchemaPriority(e.uri,t),a.registerExternalSchema(e.uri,e.fileMatch,e.schema,e.name,e.description)}))),h.configure(e),l.configure(e),c.configure(e),f.configure(e),d.configure(e)},registerCustomSchemaProvider:e=>{a.registerCustomSchemaProvider(e)},findLinks:p.findLinks.bind(p),doComplete:c.doComplete.bind(c),doValidation:h.doValidation.bind(h),doHover:l.doHover.bind(l),findDocumentSymbols:u.findDocumentSymbols.bind(u),findDocumentSymbols2:u.findHierarchicalDocumentSymbols.bind(u),doDefinition:Wo.bind(Wo),resetSchema:e=>a.onResourceChange(e),doFormat:f.format.bind(f),doDocumentOnTypeFormatting:vo,addSchema:(e,t)=>a.saveSchema(e,t),deleteSchema:e=>a.deleteSchema(e),modifySchemaContent:e=>a.addContent(e),deleteSchemaContent:e=>a.deleteContent(e),deleteSchemasWhole:e=>a.deleteSchemas(e),getFoldingRanges:fo,getCodeAction:(e,t)=>d.getCodeAction(e,t),getCodeLens:(e,t)=>m.getCodeLens(e,t),resolveCodeLens:e=>m.resolveCodeLens(e)}}!function(e){e[e.SchemaStore=1]="SchemaStore",e[e.SchemaAssociation=2]="SchemaAssociation",e[e.Settings=3]="Settings",e[e.Modeline=4]="Modeline"}(Lo||(Lo={}));class Uo{constructor(e,t,n,r){this.connection=e,this.languageService=t,this.yamlSettings=n,this.validationHandler=r,this.pendingLimitExceededWarnings={}}registerHandlers(){this.connection.onDocumentLinks((e=>this.documentLinkHandler(e))),this.connection.onDocumentSymbol((e=>this.documentSymbolHandler(e))),this.connection.onDocumentFormatting((e=>this.formatterHandler(e))),this.connection.onHover((e=>this.hoverHandler(e))),this.connection.onCompletion((e=>this.completionHandler(e))),this.connection.onDidChangeWatchedFiles((e=>this.watchedFilesHandler(e))),this.connection.onFoldingRanges((e=>this.foldingRangeHandler(e))),this.connection.onCodeAction((e=>this.codeActionHandler(e))),this.connection.onDocumentOnTypeFormatting((e=>this.formatOnTypeHandler(e))),this.connection.onCodeLens((e=>this.codeLensHandler(e))),this.connection.onCodeLensResolve((e=>this.codeLensResolveHandler(e))),this.connection.onDefinition((e=>this.definitionHandler(e))),this.yamlSettings.documents.onDidChangeContent((e=>this.cancelLimitExceededWarnings(e.document.uri))),this.yamlSettings.documents.onDidClose((e=>this.cancelLimitExceededWarnings(e.document.uri)))}documentLinkHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);return t?this.languageService.findLinks(t):Promise.resolve([])}documentSymbolHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);if(!t)return;const n=this.onResultLimitExceeded(t.uri,this.yamlSettings.maxItemsComputed,"document symbols"),r={resultLimit:this.yamlSettings.maxItemsComputed,onResultLimitExceeded:n};return this.yamlSettings.hierarchicalDocumentSymbolSupport?this.languageService.findDocumentSymbols2(t,r):this.languageService.findDocumentSymbols(t,r)}formatterHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);if(!t)return;const n=Object.assign({tabWidth:e.options.tabSize},this.yamlSettings.yamlFormatterSettings);return this.languageService.doFormat(t,n)}formatOnTypeHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);if(t)return this.languageService.doDocumentOnTypeFormatting(t,e)}hoverHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);return t?this.languageService.doHover(t,e.position):Promise.resolve(void 0)}completionHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);return t?this.languageService.doComplete(t,e.position,ro(t,this.yamlSettings.specificValidatorPaths)):Promise.resolve({items:[],isIncomplete:!1})}watchedFilesHandler(e){let t=!1;e.changes.forEach((e=>{this.languageService.resetSchema(e.uri)&&(t=!0)})),t&&this.yamlSettings.documents.all().forEach((e=>this.validationHandler.validate(e)))}foldingRangeHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);if(!t)return;const n=this.yamlSettings.capabilities.textDocument.foldingRange,r=this.yamlSettings.maxItemsComputed||n.rangeLimit,i={rangeLimit:r,onRangeLimitExceeded:this.onResultLimitExceeded(t.uri,r,"folding ranges"),lineFoldingOnly:n.lineFoldingOnly};return this.languageService.getFoldingRanges(t,i)}codeActionHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);if(t)return this.languageService.getCodeAction(t,e)}codeLensHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);if(t)return this.languageService.getCodeLens(t,e)}codeLensResolveHandler(e){return this.languageService.resolveCodeLens(e)}definitionHandler(e){const t=this.yamlSettings.documents.get(e.textDocument.uri);if(t)return this.languageService.doDefinition(t,e)}cancelLimitExceededWarnings(e){const t=this.pendingLimitExceededWarnings[e];t&&t.timeout&&(clearTimeout(t.timeout),delete this.pendingLimitExceededWarnings[e])}onResultLimitExceeded(e,t,n){return()=>{let r=this.pendingLimitExceededWarnings[e];if(r){if(!r.timeout)return;r.features[n]=n,r.timeout.refresh()}else r={features:{[n]:n}},r.timeout=setTimeout((()=>{this.connection.sendNotification(h.type,`${S.basename(e)}: For performance reasons, ${Object.keys(r.features).join(" and ")} have been limited to ${t} items.`),r.timeout=void 0}),2e3),this.pendingLimitExceededWarnings[e]=r}}}class Bo{constructor(e,t,n,r){this.connection=e,this.languageService=t,this.yamlSettings=n,this.settingsHandler=r}registerHandlers(){this.connection.onNotification(c.type,(e=>this.schemaAssociationNotificationHandler(e))),this.connection.onNotification(l.type,(()=>this.dynamicSchemaRequestHandler())),this.connection.onNotification(u.type,(()=>this.vscodeContentRequestHandler())),this.connection.onNotification(y.type,(()=>this.schemaSelectionRequestHandler()))}schemaAssociationNotificationHandler(e){this.yamlSettings.schemaAssociations=e,this.yamlSettings.specificValidatorPaths=[],this.settingsHandler.setSchemaStoreSettingsIfNotSet(),this.settingsHandler.updateConfiguration()}dynamicSchemaRequestHandler(){this.languageService.registerCustomSchemaProvider((e=>this.connection.sendRequest(m.type,e)))}vscodeContentRequestHandler(){this.yamlSettings.useVSCodeContentRequest=!0}schemaSelectionRequestHandler(){this.yamlSettings.useSchemaSelectionRequests=!0}}class Ko{constructor(e,t){this.connection=e,this.languageService=t}registerHandlers(){this.connection.onRequest(g.type,(e=>this.registerSchemaModificationNotificationHandler(e)))}registerSchemaModificationNotificationHandler(e){e.action===Xi.add?this.languageService.modifySchemaContent(e):e.action===Xi.delete?this.languageService.deleteSchemaContent(e):e.action===Xi.deleteAll&&this.languageService.deleteSchemasWhole(e)}}class Ho{constructor(e,t,n){this.connection=e,this.languageService=t,this.yamlSettings=n,this.yamlSettings.documents.onDidChangeContent((e=>{this.validate(e.document)})),this.yamlSettings.documents.onDidClose((e=>{this.cleanPendingValidation(e.document),this.connection.sendDiagnostics({uri:e.document.uri,diagnostics:[]})}))}validate(e){this.cleanPendingValidation(e),this.yamlSettings.pendingValidationRequests[e.uri]=setTimeout((()=>{delete this.yamlSettings.pendingValidationRequests[e.uri],this.validateTextDocument(e)}),this.yamlSettings.validationDelayMs)}cleanPendingValidation(e){const t=this.yamlSettings.pendingValidationRequests[e.uri];t&&(clearTimeout(t),delete this.yamlSettings.pendingValidationRequests[e.uri])}validateTextDocument(e){if(e)return this.languageService.doValidation(e,ro(e,this.yamlSettings.specificValidatorPaths)).then((t=>{const n=[];for(const e in t)t[e].severity=1,n.push(t[e]);const r=function(e){const t=new Set,n=[];for(const r in e){const i=e[r],o=JSON.stringify(i);t.has(o)||(n.push(i),t.add(o))}return n}(n);return this.connection.sendDiagnostics({uri:e.uri,diagnostics:r}),r}))}}var zo,Jo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};class Go{constructor(e,t,n,r,i){this.connection=e,this.languageService=t,this.yamlSettings=n,this.validationHandler=r,this.telemetry=i}registerHandlers(){return Jo(this,void 0,void 0,(function*(){if(this.yamlSettings.hasConfigurationCapability&&this.yamlSettings.clientDynamicRegisterSupport)try{yield this.connection.client.register(t.DidChangeConfigurationNotification.type,void 0)}catch(e){console.warn(e),this.telemetry.sendError("yaml.settings.error",{error:e})}this.connection.onDidChangeConfiguration((()=>this.pullConfiguration()))}))}pullConfiguration(){var e,t,n,r;return Jo(this,void 0,void 0,(function*(){const i=yield this.connection.workspace.getConfiguration([{section:"yaml"},{section:"http"},{section:"[yaml]"}]),o={yaml:i[0],http:{proxy:null!==(t=null===(e=i[1])||void 0===e?void 0:e.proxy)&&void 0!==t?t:"",proxyStrictSSL:null!==(r=null===(n=i[1])||void 0===n?void 0:n.proxyStrictSSL)&&void 0!==r&&r},yamlEditor:i[2]};this.setConfiguration(o)}))}setConfiguration(e){var n;return Jo(this,void 0,void 0,(function*(){(0,v.configure)(e.http&&e.http.proxy,e.http&&e.http.proxyStrictSSL),this.yamlSettings.specificValidatorPaths=[],e.yaml&&(Object.prototype.hasOwnProperty.call(e.yaml,"schemas")&&(this.yamlSettings.yamlConfigurationSettings=e.yaml.schemas),Object.prototype.hasOwnProperty.call(e.yaml,"validate")&&(this.yamlSettings.yamlShouldValidate=e.yaml.validate),Object.prototype.hasOwnProperty.call(e.yaml,"hover")&&(this.yamlSettings.yamlShouldHover=e.yaml.hover),Object.prototype.hasOwnProperty.call(e.yaml,"completion")&&(this.yamlSettings.yamlShouldCompletion=e.yaml.completion),this.yamlSettings.customTags=e.yaml.customTags?e.yaml.customTags:[],this.yamlSettings.maxItemsComputed=Math.trunc(Math.max(0,Number(e.yaml.maxItemsComputed)))||5e3,e.yaml.schemaStore&&(this.yamlSettings.schemaStoreEnabled=e.yaml.schemaStore.enable,0!==e.yaml.schemaStore.url.length&&(this.yamlSettings.schemaStoreUrl=e.yaml.schemaStore.url)),this.yamlSettings.yamlVersion=null!==(n=e.yaml.yamlVersion)&&void 0!==n?n:"1.2",e.yaml.format&&(this.yamlSettings.yamlFormatterSettings={proseWrap:e.yaml.format.proseWrap||"preserve",printWidth:e.yaml.format.printWidth||80},void 0!==e.yaml.format.singleQuote&&(this.yamlSettings.yamlFormatterSettings.singleQuote=e.yaml.format.singleQuote),void 0!==e.yaml.format.bracketSpacing&&(this.yamlSettings.yamlFormatterSettings.bracketSpacing=e.yaml.format.bracketSpacing),void 0!==e.yaml.format.enable&&(this.yamlSettings.yamlFormatterSettings.enable=e.yaml.format.enable)),this.yamlSettings.disableAdditionalProperties=e.yaml.disableAdditionalProperties),this.yamlSettings.schemaConfigurationSettings=[],e.yamlEditor&&e.yamlEditor["editor.tabSize"]&&(this.yamlSettings.indentation=" ".repeat(e.yamlEditor["editor.tabSize"]));for(const e in this.yamlSettings.yamlConfigurationSettings){const t=this.yamlSettings.yamlConfigurationSettings[e],n={fileMatch:Array.isArray(t)?t:[t],uri:wo(this.yamlSettings.workspaceFolders,this.yamlSettings.workspaceRoot,e,this.telemetry)};this.yamlSettings.schemaConfigurationSettings.push(n)}yield this.setSchemaStoreSettingsIfNotSet(),this.updateConfiguration(),this.yamlSettings.useSchemaSelectionRequests&&this.connection.sendNotification(y.schemaStoreInitialized,{}),this.yamlSettings.clientDynamicRegisterSupport&&(e&&e.yaml&&e.yaml.format&&e.yaml.format.enable?this.yamlSettings.formatterRegistration||(this.yamlSettings.formatterRegistration=this.connection.client.register(t.DocumentFormattingRequest.type,{documentSelector:[{language:"yaml"}]})):this.yamlSettings.formatterRegistration&&(this.yamlSettings.formatterRegistration.then((e=>e.dispose())),this.yamlSettings.formatterRegistration=null))}))}setSchemaStoreSettingsIfNotSet(){return Jo(this,void 0,void 0,(function*(){const e=0!==this.yamlSettings.schemaStoreSettings.length;let t="";if(t=0!==this.yamlSettings.schemaStoreUrl.length?this.yamlSettings.schemaStoreUrl:So,this.yamlSettings.schemaStoreEnabled&&!e)try{const e=yield this.getSchemaStoreMatchingSchemas(t);this.yamlSettings.schemaStoreSettings=e.schemas,this.updateConfiguration()}catch(e){}else this.yamlSettings.schemaStoreEnabled||(this.yamlSettings.schemaStoreSettings=[],this.updateConfiguration())}))}getSchemaStoreMatchingSchemas(e){return(0,v.xhr)({url:e}).then((e=>{const t={schemas:[]},n=JSON.parse(e.responseText);for(const e in n.schemas){const r=n.schemas[e];if(r&&r.fileMatch)for(const e in r.fileMatch){const n=r.fileMatch[e];-1===n.indexOf(".yml")&&-1===n.indexOf(".yaml")||t.schemas.push({uri:r.url,fileMatch:[n],priority:Lo.SchemaStore,name:r.name,description:r.description})}}return t}))}updateConfiguration(){let e={validate:this.yamlSettings.yamlShouldValidate,hover:this.yamlSettings.yamlShouldHover,completion:this.yamlSettings.yamlShouldCompletion,schemas:[],customTags:this.yamlSettings.customTags,format:this.yamlSettings.yamlFormatterSettings.enable,indentation:this.yamlSettings.indentation,disableAdditionalProperties:this.yamlSettings.disableAdditionalProperties,yamlVersion:this.yamlSettings.yamlVersion};if(this.yamlSettings.schemaAssociations)if(Array.isArray(this.yamlSettings.schemaAssociations))this.yamlSettings.schemaAssociations.forEach((t=>{e=this.configureSchemas(t.uri,t.fileMatch,t.schema,e,Lo.SchemaAssociation)}));else for(const t in this.yamlSettings.schemaAssociations){const n=this.yamlSettings.schemaAssociations[t];e=this.configureSchemas(t,n,null,e,Lo.SchemaAssociation)}this.yamlSettings.schemaConfigurationSettings&&this.yamlSettings.schemaConfigurationSettings.forEach((t=>{let n=t.uri;!n&&t.schema&&(n=t.schema.id),!n&&t.fileMatch&&(n="vscode://schemas/custom/"+encodeURIComponent(t.fileMatch.join("&"))),n&&(w(n)&&(n=k(this.yamlSettings.workspaceFolders,this.yamlSettings.workspaceRoot,n)),e=this.configureSchemas(n,t.fileMatch,t.schema,e,Lo.Settings))})),this.yamlSettings.schemaStoreSettings&&(e.schemas=e.schemas.concat(this.yamlSettings.schemaStoreSettings)),this.languageService.configure(e),this.yamlSettings.documents.all().forEach((e=>this.validationHandler.validate(e)))}configureSchemas(e,t,n,r,i){return e=wo(this.yamlSettings.workspaceFolders,this.yamlSettings.workspaceRoot,e,this.telemetry),null===n?r.schemas.push({uri:e,fileMatch:t,priority:i}):r.schemas.push({uri:e,fileMatch:t,schema:n,priority:i}),t.constructor===Array&&e===bo?t.forEach((e=>{this.yamlSettings.specificValidatorPaths.push(e)})):e===bo&&this.yamlSettings.specificValidatorPaths.push(t),r}}class Yo{constructor(e,t){this.connection=e,this.commandExecutor=t}registerHandlers(){this.connection.onExecuteCommand((e=>this.executeCommand(e)))}executeCommand(e){return this.commandExecutor.executeCommand(e)}}class Xo{constructor(e){this.connection=e}send(e){this.connection.telemetry.logEvent(e)}sendError(e,t){this.send({name:e,type:"track",properties:t})}sendTrack(e,t){this.send({name:e,type:"track",properties:t})}}!function(e){e.type=new t.RequestType("fs/readFile")}(zo||(zo={}));const Qo=new i.BrowserMessageReader(globalThis),Zo=new i.BrowserMessageWriter(globalThis),es=(0,i.createConnection)(Qo,Zo),ts=new class{constructor(){this.yamlConfigurationSettings=void 0,this.schemaAssociations=void 0,this.formatterRegistration=null,this.specificValidatorPaths=[],this.schemaConfigurationSettings=[],this.yamlShouldValidate=!0,this.yamlFormatterSettings={singleQuote:!1,bracketSpacing:!0,proseWrap:"preserve",printWidth:80,enable:!0},this.yamlShouldHover=!0,this.yamlShouldCompletion=!0,this.schemaStoreSettings=[],this.customTags=[],this.schemaStoreEnabled=!0,this.schemaStoreUrl=So,this.indentation=void 0,this.disableAdditionalProperties=!1,this.maxItemsComputed=5e3,this.pendingValidationRequests={},this.validationDelayMs=200,this.documents=new Oo.TextDocuments(K),this.workspaceRoot=null,this.workspaceFolders=[],this.clientDynamicRegisterSupport=!1,this.hierarchicalDocumentSymbolSupport=!1,this.hasWorkspaceFolderCapability=!1,this.hasConfigurationCapability=!1,this.useVSCodeContentRequest=!1,this.yamlVersion="1.2",this.useSchemaSelectionRequests=!1,this.hasWsChangeWatchedFileDynamicRegistration=!1}},ns={readFile:e=>es.sendRequest(zo.type,e)},rs=((e,t)=>((e,t,n,r,i,o)=>{if(!t)return Promise.reject("No schema specified");w(t)&&(t=k(n,r,t));let a=s.parse(t).scheme.toLowerCase();if(/^[a-z]:[\\/]/i.test(t)){const e=s.file(t);a=e.scheme.toLowerCase(),t=e.toString()}if("file"===a){const e=s.parse(t).fsPath;return o.readFile(e,"UTF-8").catch((()=>""))}if("http"===a||"https"===a){if(i)return e.sendRequest(f.type,t).then((e=>e),(e=>Promise.reject(e.message)));const n={"Accept-Encoding":"gzip, deflate"};return(0,v.xhr)({url:t,followRedirects:5,headers:n}).then((e=>e.responseText),(e=>Promise.reject(e.responseText||(0,v.getErrorStatusDescription)(e.status)||e.toString())))}return e.sendRequest(d.type,t)})(e,t,ts.workspaceFolders,ts.workspaceRoot,ts.useVSCodeContentRequest,ns)).bind(void 0,es);new class{constructor(e,t,n,r){this.connection=e,this.yamlSettings=t,this.workspaceContext=n,this.schemaRequestService=r,this.yamlSettings.documents.listen(this.connection),this.telemetry=new Xo(this.connection),this.connection.onInitialize((e=>this.connectionInitialized(e))),this.connection.onInitialized((()=>{this.yamlSettings.hasWsChangeWatchedFileDynamicRegistration&&this.connection.workspace.onDidChangeWorkspaceFolders((e=>{this.yamlSettings.workspaceFolders=((e,t)=>e=(e=e.filter((e=>!t.removed.some((t=>t.uri===e.uri))))).filter((e=>!t.added.some((t=>t.uri===e.uri)))).concat(t.added))(this.yamlSettings.workspaceFolders,e)})),this.settingsHandler.registerHandlers(),this.settingsHandler.pullConfiguration()}))}connectionInitialized(e){return this.yamlSettings.capabilities=e.capabilities,this.languageService=Vo(this.schemaRequestService,this.workspaceContext,this.connection,this.telemetry,this.yamlSettings,e.capabilities),e.rootUri&&(this.yamlSettings.workspaceRoot=s.parse(e.rootUri)),this.yamlSettings.workspaceFolders=e.workspaceFolders||[],this.yamlSettings.hierarchicalDocumentSymbolSupport=!!(this.yamlSettings.capabilities.textDocument&&this.yamlSettings.capabilities.textDocument.documentSymbol&&this.yamlSettings.capabilities.textDocument.documentSymbol.hierarchicalDocumentSymbolSupport),this.yamlSettings.clientDynamicRegisterSupport=!!(this.yamlSettings.capabilities.textDocument&&this.yamlSettings.capabilities.textDocument.rangeFormatting&&this.yamlSettings.capabilities.textDocument.rangeFormatting.dynamicRegistration),this.yamlSettings.hasWorkspaceFolderCapability=this.yamlSettings.capabilities.workspace&&!!this.yamlSettings.capabilities.workspace.workspaceFolders,this.yamlSettings.hasConfigurationCapability=!(!this.yamlSettings.capabilities.workspace||!this.yamlSettings.capabilities.workspace.configuration),this.yamlSettings.hasWsChangeWatchedFileDynamicRegistration=!!(this.yamlSettings.capabilities.workspace&&this.yamlSettings.capabilities.workspace.didChangeWatchedFiles&&this.yamlSettings.capabilities.workspace.didChangeWatchedFiles.dynamicRegistration),this.registerHandlers(),{capabilities:{textDocumentSync:t.TextDocumentSyncKind.Incremental,completionProvider:{resolveProvider:!1},hoverProvider:!0,documentSymbolProvider:!0,documentFormattingProvider:!1,documentOnTypeFormattingProvider:{firstTriggerCharacter:"\n"},documentRangeFormattingProvider:!1,definitionProvider:!0,documentLinkProvider:{},foldingRangeProvider:!1,codeActionProvider:!0,codeLensProvider:{resolveProvider:!1},executeCommandProvider:{commands:Object.keys(lo).map((e=>lo[e]))},workspace:{workspaceFolders:{changeNotifications:!0,supported:!0}}}}}registerHandlers(){this.validationHandler=new Ho(this.connection,this.languageService,this.yamlSettings),this.settingsHandler=new Go(this.connection,this.languageService,this.yamlSettings,this.validationHandler,this.telemetry),this.languageHandler=new Uo(this.connection,this.languageService,this.yamlSettings,this.validationHandler),this.languageHandler.registerHandlers(),new Bo(this.connection,this.languageService,this.yamlSettings,this.settingsHandler).registerHandlers(),new Ko(this.connection,this.languageService).registerHandlers(),new Yo(this.connection,yo).registerHandlers()}start(){this.connection.listen()}}(es,ts,x,rs).start()})(),serverExportVar=r})();
//# sourceMappingURL=languageserver-web.js.map